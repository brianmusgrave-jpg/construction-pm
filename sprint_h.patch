diff --git a/e2e/auth.spec.ts b/e2e/auth.spec.ts
new file mode 100644
index 0000000..b71ba6a
--- /dev/null
+++ b/e2e/auth.spec.ts
@@ -0,0 +1,20 @@
+import { test, expect } from "@playwright/test";
+
+test.describe("Authentication", () => {
+  test("login page loads", async ({ page }) => {
+    await page.goto("/login");
+    await expect(page).toHaveTitle(/Construction PM/);
+    await expect(page.locator("input[type='email']")).toBeVisible();
+    await expect(page.locator("input[type='password']")).toBeVisible();
+  });
+
+  test("redirects unauthenticated users to login", async ({ page }) => {
+    await page.goto("/dashboard");
+    await expect(page).toHaveURL(/\/login/);
+  });
+
+  test("landing page is accessible without auth", async ({ page }) => {
+    await page.goto("/");
+    await expect(page.locator("body")).toBeVisible();
+  });
+});
diff --git a/messages/en.json b/messages/en.json
new file mode 100644
index 0000000..71a5244
--- /dev/null
+++ b/messages/en.json
@@ -0,0 +1,596 @@
+{
+  "common": {
+    "appName": "Construction PM",
+    "save": "Save",
+    "saving": "Saving...",
+    "cancel": "Cancel",
+    "delete": "Delete",
+    "edit": "Edit",
+    "add": "Add",
+    "upload": "Upload",
+    "open": "Open",
+    "close": "Close",
+    "search": "Search",
+    "loading": "Loading...",
+    "submit": "Submit",
+    "back": "Back",
+    "next": "Next",
+    "done": "Done",
+    "create": "Create",
+    "remove": "Remove",
+    "replace": "Replace",
+    "invite": "Invite",
+    "signOut": "Sign out",
+    "viewAll": "View all",
+    "noResults": "No results found",
+    "tryAgain": "Try a different search term",
+    "items": "items",
+    "total": "total",
+    "active": "active",
+    "phases": "phases",
+    "of": "of",
+    "from": "From",
+    "to": "To",
+    "or": "or",
+    "yes": "Yes",
+    "no": "No",
+    "confirm": "Confirm",
+    "notSet": "Not set",
+    "expires": "Expires",
+    "today": "Today",
+    "yesterday": "Yesterday",
+    "thisWeek": "This Week",
+    "older": "Older",
+    "loadMore": "Load more",
+    "send": "Send",
+    "required": "Required"
+  },
+  "status": {
+    "pending": "Pending",
+    "planning": "Planning",
+    "inProgress": "In Progress",
+    "active": "Active",
+    "reviewRequested": "Review Requested",
+    "underReview": "Under Review",
+    "complete": "Complete",
+    "completed": "Completed",
+    "onHold": "On Hold",
+    "archived": "Archived",
+    "delayed": "Delayed",
+    "approved": "Approved",
+    "rejected": "Rejected",
+    "expired": "Expired"
+  },
+  "nav": {
+    "dashboard": "Dashboard",
+    "projects": "Projects",
+    "reports": "Reports",
+    "directory": "Directory",
+    "notifications": "Notifications",
+    "settings": "Settings",
+    "help": "Help",
+    "myWork": "My Work",
+    "documents": "Documents",
+    "photos": "Photos",
+    "contractorPortal": "Contractor Portal",
+    "openMenu": "Open menu"
+  },
+  "auth": {
+    "signIn": "Sign In",
+    "signingIn": "Signing in...",
+    "signInSubtitle": "Sign in to manage your projects",
+    "emailAddress": "Email address",
+    "emailPlaceholder": "admin@constructionpm.com",
+    "invalidCredentials": "Invalid credentials",
+    "genericError": "Something went wrong. Please try again.",
+    "demoAccess": "Use <strong>admin@constructionpm.com</strong> for demo access"
+  },
+  "home": {
+    "tagline": "Manage construction projects, track timelines, coordinate contractors, and keep every phase on schedule.",
+    "goToDashboard": "Go to Dashboard"
+  },
+  "dashboard": {
+    "goodMorning": "Good morning",
+    "goodAfternoon": "Good afternoon",
+    "goodEvening": "Good evening",
+    "itemsNeedAttention": "{count} item{count, plural, one {s} other {}} need{count, plural, one {s} other {}} attention",
+    "newProject": "New Project",
+    "new": "New",
+    "activePhases": "Active Phases",
+    "needsReview": "Needs Review",
+    "overdue": "Overdue",
+    "pendingDocs": "Pending Docs",
+    "checklists": "Checklists",
+    "awaitingApproval": "awaiting approval",
+    "allClear": "all clear",
+    "pastDeadline": "past deadline",
+    "onTrack": "on track",
+    "needReview": "need review",
+    "allReviewed": "all reviewed",
+    "needsYourAttention": "Needs Your Attention",
+    "reviewRequestedLabel": "Review Requested: {name}",
+    "overdueLabel": "Overdue: {name}",
+    "daysOverdue": "{days}d overdue",
+    "startingSoon": "Starting Soon (next 2 weeks)",
+    "noProjectsYet": "No projects yet",
+    "createFirstProject": "Create your first project to get started.",
+    "nextPhase": "Next: {name}",
+    "noNotificationsYet": "No notifications yet",
+    "notificationsWillAppear": "Status changes, reviews, and uploads will appear here",
+    "activity": "Activity",
+    "noActivityYet": "No activity yet",
+    "activityWillAppear": "Status changes and uploads will appear here"
+  },
+  "projects": {
+    "title": "Projects",
+    "newProject": "New Project",
+    "template": "Template",
+    "details": "Details",
+    "projectType": "Project Type",
+    "residential": "Residential",
+    "residentialDesc": "9 phases · permitting to CO",
+    "commercial": "Commercial",
+    "commercialDesc": "12 phases · steel to commissioning",
+    "blank": "Blank",
+    "blankDesc": "Start from scratch",
+    "tradeSpecific": "Trade-Specific",
+    "projectName": "Project Name *",
+    "projectNamePlaceholder": "e.g. Smith Residence Build",
+    "description": "Description",
+    "descriptionPlaceholder": "Project scope, notes, special requirements...",
+    "siteAddress": "Site Address",
+    "addressPlaceholder": "123 Main St, City, State",
+    "planApproval": "Plan Approval Date",
+    "budget": "Budget ($)",
+    "nextReviewPhases": "Next: Review Phases",
+    "addPhase": "Add Phase",
+    "expandAll": "Expand all",
+    "collapseAll": "Collapse all",
+    "noPhasesYet": "No phases yet",
+    "addPhasesHelp": "Add phases manually or go back to choose a template",
+    "phaseName": "Phase Name *",
+    "phaseNamePlaceholder": "e.g. Framing",
+    "milestone": "Milestone (single date)",
+    "scope": "Scope, notes, trade involved...",
+    "estStart": "Est. Start *",
+    "estEnd": "Est. End *",
+    "worstStart": "Worst Start",
+    "worstEnd": "Worst End",
+    "creating": "Creating...",
+    "createProject": "Create Project",
+    "phaseCount": "{count} phase{count, plural, one {} other {s}}",
+    "phasesStep": "Phases",
+    "untitledPhase": "Untitled Phase",
+    "nameRequired": "Project name is required",
+    "phaseNeedsName": "Phase {n} needs a name",
+    "phaseNeedsDates": "\"{name}\" needs estimated start and end dates"
+  },
+  "phases": {
+    "phaseDetails": "Phase Details",
+    "progress": "Progress",
+    "estimatedTimeline": "Estimated Timeline",
+    "worstCase": "Worst Case",
+    "actual": "Actual",
+    "started": "Started",
+    "completedDash": "— Completed",
+    "timeline": "Timeline",
+    "milestone": "Milestone",
+    "startPhase": "Start Phase",
+    "requestReview": "Request Review",
+    "beginReview": "Begin Review",
+    "approveComplete": "Approve & Complete",
+    "sendBack": "Send Back",
+    "complete": "% complete"
+  },
+  "team": {
+    "title": "Team ({count})",
+    "assign": "Assign",
+    "noOneAssigned": "No one assigned yet",
+    "assignToPhase": "Assign to Phase",
+    "searchPlaceholder": "Search by name, company, or role...",
+    "noMatchingContacts": "No matching contacts found",
+    "addAsOwner": "Add as Owner",
+    "noTeamMembers": "No team members yet"
+  },
+  "invitations": {
+    "inviteTeamMember": "Invite Team Member",
+    "emailAddress": "Email address",
+    "emailPlaceholder": "colleague@example.com",
+    "role": "Role",
+    "manager": "Manager",
+    "managerDesc": "Can manage phases, team, and settings",
+    "contractor": "Contractor",
+    "contractorDesc": "Can update assigned phases and upload files",
+    "stakeholder": "Stakeholder",
+    "stakeholderDesc": "Read-only access to project progress",
+    "viewer": "Viewer",
+    "viewerDesc": "View-only access",
+    "pendingInvitations": "Pending Invitations ({count})",
+    "inviteLinkInfo": "The invite link will be copied to your clipboard. Share it with the person you're inviting. Links expire after 7 days.",
+    "cancelInvitation": "Cancel invitation",
+    "expired": "Invitation Expired",
+    "expiredMessage": "This invitation has expired. Please ask the project owner to send a new one.",
+    "goToLogin": "Go to Login",
+    "alreadyMember": "Already a Member",
+    "alreadyMemberMessage": "You're already a member of {project}.",
+    "welcomeToTeam": "Welcome to the Team!",
+    "joinedMessage": "You've joined {project} successfully.",
+    "goToProject": "Go to Project",
+    "somethingWentWrong": "Something Went Wrong",
+    "youreInvited": "You're Invited",
+    "invitedToJoin": "You've been invited to join",
+    "invitedAs": "Invited as",
+    "joining": "Joining...",
+    "acceptInvitation": "Accept Invitation",
+    "signInToAccept": "Sign In to Accept",
+    "sent": "Invitation sent to {email}",
+    "linkCopied": "Invite link copied to clipboard",
+    "cancelled": "Invitation cancelled",
+    "failedToCancel": "Failed to cancel invitation"
+  },
+  "budget": {
+    "title": "Budget",
+    "editTotal": "Edit Total",
+    "totalBudget": "Total Budget:",
+    "estimated": "Estimated",
+    "actual": "Actual",
+    "variance": "Variance",
+    "budgetUsed": "Budget Used",
+    "updated": "Budget updated",
+    "failedToUpdate": "Failed to update budget",
+    "costsUpdated": "Phase costs updated",
+    "failedToUpdateCosts": "Failed to update costs",
+    "estShort": "Est.",
+    "varShort": "Var."
+  },
+  "documents": {
+    "title": "Documents ({count})",
+    "permit": "Permit",
+    "contract": "Contract",
+    "invoice": "Invoice",
+    "blueprint": "Blueprint",
+    "inspection": "Inspection",
+    "other": "Other",
+    "uploading": "Uploading {current} of {total}...",
+    "uploadingFile": "Uploading {name}...",
+    "category": "Category:",
+    "noDocumentsYet": "No documents yet",
+    "dragDropDocs": "Drag & drop files or click Upload above",
+    "dropToUpload": "Drop files to upload",
+    "deleteConfirm": "Delete this document? This cannot be undone.",
+    "failedToDelete": "Failed to delete",
+    "approve": "Approve",
+    "reject": "Reject",
+    "resetToPending": "Reset to Pending",
+    "filesSelected": "{count} file{count, plural, one {} other {s}} selected",
+    "failedToUpdateStatus": "Failed to update status",
+    "dropHere": "Drop files here"
+  },
+  "photos": {
+    "title": "Photos ({count})",
+    "flagged": "· {count} flagged",
+    "savingPhotos": "Saving photos...",
+    "uploadFailed": "Upload failed. Please try again.",
+    "camera": "Camera",
+    "addPhotos": "Add Photos",
+    "gallery": "Gallery",
+    "replacementNeeded": "Replacement needed",
+    "additionalAngles": "Additional angles",
+    "morePhotosNeeded": "More photos needed",
+    "clarificationNeeded": "Clarification needed",
+    "replaceShort": "Replace",
+    "anglesShort": "Angles",
+    "moreShort": "More",
+    "clarifyShort": "Clarify",
+    "noPhotosYet": "No photos yet",
+    "dragDropPhotos": "Drag & drop images or click Add Photos above",
+    "dropImages": "Drop images to upload",
+    "phasePhoto": "Phase photo",
+    "flagForFollowup": "Flag for followup",
+    "changeFlag": "Change flag",
+    "clearFlag": "Clear flag",
+    "viewFullSize": "View full size",
+    "flagPhotoBtn": "Flag Photo",
+    "addNote": "add a note? (optional)",
+    "deleteConfirm": "Delete this photo? This cannot be undone.",
+    "dropHere": "Drop images here"
+  },
+  "checklist": {
+    "title": "Checklist",
+    "addItem": "Add Item",
+    "noChecklistYet": "No checklist yet",
+    "applyTemplate": "Apply Template",
+    "percentComplete": "% complete",
+    "newItemPlaceholder": "New checklist item...",
+    "chooseTemplate": "Choose a Template",
+    "itemCount": "{count} items"
+  },
+  "comments": {
+    "title": "Comments",
+    "noCommentsYet": "No comments yet",
+    "addComment": "Add a comment...",
+    "sendComment": "Send comment",
+    "deleteComment": "Delete comment",
+    "failedToAdd": "Failed to add comment",
+    "failedToDelete": "Failed to delete comment"
+  },
+  "notifications": {
+    "title": "Notifications",
+    "markAllRead": "Mark all as read",
+    "noNotificationsYet": "No notifications yet",
+    "emptyMessage": "You'll be notified when there are updates to your projects.",
+    "deleted": "Notification deleted"
+  },
+  "settings": {
+    "title": "Settings",
+    "subtitle": "Manage your account and preferences",
+    "profile": "Profile",
+    "name": "Name",
+    "email": "Email",
+    "role": "Role",
+    "appearance": "Appearance",
+    "language": "Language",
+    "languageDescription": "Choose your preferred language. Changes take effect immediately.",
+    "colorTheme": "Color Theme",
+    "themeDescription": "Choose a color scheme for the entire application. Changes apply to all users.",
+    "companyBranding": "Company Branding",
+    "brandingDescription": "Upload your logo and set your company name. These appear in the sidebar.",
+    "fileTooLarge": "File too large. Maximum size is 2MB.",
+    "invalidFormat": "Invalid format. Use PNG, JPG, SVG, or WebP.",
+    "uploadFailed": "Upload failed",
+    "companyName": "Company Name",
+    "companyNamePlaceholder": "Your Company Name",
+    "companyNameHelp": "Displayed in the sidebar header. Leave blank to show \"Construction PM\".",
+    "maxSize": "Max 2MB",
+    "removeLogoConfirm": "Remove your company logo?",
+    "failedToDelete": "Failed to delete",
+    "checklistTemplates": "Checklist Templates",
+    "templatesDescription": "Create reusable checklists that can be applied to project phases.",
+    "newTemplate": "New Template",
+    "noTemplatesYet": "No templates yet. Create one to get started.",
+    "templateName": "Template Name",
+    "templateNamePlaceholder": "e.g. Site Work, Framing, Electrical…",
+    "checklistItems": "Checklist Items",
+    "enterItemTitle": "Enter item title…",
+    "addItem": "Add item",
+    "createTemplate": "Create Template",
+    "saveChanges": "Save Changes",
+    "templateCreated": "Template created",
+    "templateUpdated": "Template updated",
+    "templateDeleted": "Template deleted",
+    "failedToCreate": "Failed to create template",
+    "failedToUpdate": "Failed to update",
+    "failedToDeleteTemplate": "Failed to delete template",
+    "deleteTemplateConfirm": "Delete \"{name}\"? This cannot be undone."
+  },
+  "notifPrefs": {
+    "title": "Notification Preferences",
+    "subtitle": "Control how you receive notifications",
+    "channels": "Channels",
+    "inApp": "In-app notifications",
+    "inAppDesc": "Show notifications in the sidebar and notification center",
+    "emailNotifs": "Email notifications",
+    "emailNotifsDesc": "Receive email alerts for important updates",
+    "smsNotifs": "SMS notifications",
+    "smsNotifsDesc": "Get text messages for critical updates",
+    "phoneNumber": "Phone number",
+    "phonePlaceholder": "+1234567890",
+    "phoneHelp": "Use international format (e.g., +1 for US)",
+    "emailAlerts": "Email alerts",
+    "smsAlerts": "SMS alerts",
+    "phaseStatusChanges": "Phase status changes",
+    "phaseStatusDesc": "When a phase moves to a new status",
+    "phaseStatusSmsDesc": "Text when phases change status",
+    "reviewRequests": "Review requests",
+    "reviewRequestsDesc": "When a contractor requests a review",
+    "reviewRequestsSmsDesc": "Text when reviews are requested",
+    "checklistCompletion": "Checklist completion",
+    "checklistDesc": "When all checklist items are completed",
+    "checklistSmsDesc": "Text when checklists are completed",
+    "documentUpdates": "Document updates",
+    "documentDesc": "When documents are uploaded or reviewed",
+    "documentSmsDesc": "Text for document status changes",
+    "commentsLabel": "Comments",
+    "commentsDesc": "When someone comments on a phase",
+    "quietHours": "Quiet hours",
+    "quietHoursDesc": "Pause email and SMS notifications during these hours (in-app still works)",
+    "saved": "Notification preferences saved",
+    "failedToSave": "Failed to save"
+  },
+  "search": {
+    "placeholder": "Search projects, phases, documents, staff…",
+    "searching": "Searching…",
+    "noResultsFor": "No results for \"{query}\"",
+    "typeAtLeast": "Type at least 2 characters to search",
+    "navigate": "Navigate",
+    "buttonLabel": "Search…",
+    "project": "Project",
+    "phase": "Phase",
+    "document": "Document",
+    "staff": "Staff"
+  },
+  "help": {
+    "searchPlaceholder": "Search help articles...",
+    "resultCount": "{count} result{count, plural, one {} other {s}}",
+    "replayIntro": "Replay Intro",
+    "createProject": "Create Project",
+    "phaseStatus": "Phase Status",
+    "inviteTeam": "Invite Team",
+    "needMoreHelp": "Need more help?",
+    "contactAdmin": "Contact your project administrator or reach out to support.",
+    "contactSupport": "Contact Support",
+    "articleCount": "{count} article{count, plural, one {} other {s}}",
+    "sections": {
+      "gettingStarted": "Getting Started",
+      "projects": "Projects",
+      "phases": "Phases",
+      "checklists": "Checklists",
+      "documents": "Documents",
+      "photos": "Photos",
+      "team": "Team & Invitations",
+      "notifications": "Notifications",
+      "comments": "Comments",
+      "settingsAdmin": "Settings & Admin"
+    },
+    "articles": {
+      "appOverview": "App Overview",
+      "appOverviewContent": "Construction PM helps you manage construction projects from start to finish. The dashboard gives you a bird's-eye view of all your projects, and you can drill into individual projects to manage phases, documents, photos, and team members.\n\nKey areas:\n• Dashboard — Overview of all projects and quick stats\n• Projects — Create and manage individual projects\n• Timeline — Visual Gantt chart of project phases\n• Directory — Manage your staff/contractor contacts\n• Notifications — Stay updated on project activity\n• Settings — Customize theme, manage templates",
+      "firstProject": "Creating Your First Project",
+      "firstProjectContent": "To create a project:\n1. Go to Projects from the sidebar\n2. Click 'New Project' in the top right\n3. Fill in the project name, address, and estimated completion date\n4. Optionally set a budget\n5. Click 'Create Project'\n\nOnce created, you'll be taken to the project overview page where you can add phases, invite team members, and start tracking progress.",
+      "roles": "Understanding Roles",
+      "rolesContent": "Construction PM has five user roles:\n\n• Admin — Full access to everything including settings, user management, and all projects\n• Project Manager — Can create/edit projects, manage phases, approve documents, and invite members\n• Contractor — Access to assigned phases via the Contractor Portal, can upload photos/documents and request reviews\n• Stakeholder — Read-only access to project overviews and reports\n• Viewer — Basic read-only access\n\nRole determines what actions you can take and what menu items you see.",
+      "projectOverview": "Project Overview Page",
+      "projectOverviewContent": "The project overview shows:\n• Budget summary (total, spent, remaining)\n• Progress bar showing phase completion percentage\n• Quick stats (active phases, reviews pending, overdue items)\n• All phases with status indicators\n• Team members and recent activity\n\nClick on any phase to see its detailed view, or use the Timeline link to see the Gantt chart.",
+      "budgetTracking": "Budget Tracking",
+      "budgetTrackingContent": "Set a project budget when creating or editing a project. Each phase can have an estimated cost and actual cost.\n\nThe Budget section on the project page shows:\n• Phase-by-phase cost breakdown\n• Variance (difference between estimated and actual)\n• Color-coded warnings when over budget\n\nAdmins and PMs can edit phase costs by clicking the edit button in the budget table.",
+      "phaseLifecycle": "Phase Status Lifecycle",
+      "phaseLifecycleContent": "Phases progress through these statuses:\n\n1. Pending — Not yet started\n2. In Progress — Active work underway\n3. Review Requested — Contractor has requested PM review\n4. Under Review — PM is actively reviewing\n5. Complete — Phase is finished and approved\n\nContractors can request reviews from the Contractor Portal. PMs/Admins can change status from the phase detail page.",
+      "phaseDependencies": "Phase Dependencies",
+      "phaseDependenciesContent": "You can link phases so that one depends on another. This helps with scheduling:\n\n• A dependency means one phase should finish before another starts\n• Lag days can be added between dependent phases\n• Circular dependencies are automatically prevented\n• Dependencies appear on the project timeline\n\nTo add a dependency, go to the phase detail page and use the dependencies section.",
+      "checklistTemplates": "Checklist Templates",
+      "checklistTemplatesContent": "Admins can create reusable checklist templates in Settings > Checklist Templates. These templates can then be applied to any phase.\n\nTo apply a template:\n1. Open a phase detail page\n2. Look for the Checklist section\n3. Click 'Apply Template' and select a template\n\nChecklist items can be checked off by anyone with edit access. When all items are complete, project managers receive a notification.",
+      "documentManagement": "Document Management",
+      "documentManagementContent": "Upload documents to any phase for record-keeping:\n\n• Supported formats: PDF, images, Word docs, Excel, and more\n• Documents can be marked as Pending, Approved, or Rejected by PMs/Admins\n• Each document shows who uploaded it and when\n• You can delete documents you uploaded\n\nCommon document types: permits, inspection reports, contracts, change orders, material specs.",
+      "progressPhotos": "Progress Photos",
+      "progressPhotosContent": "Take and upload photos to document construction progress:\n\n• Photos are attached to specific phases\n• Each photo can have a caption\n• GPS tagging support for field workers (coming soon)\n• PMs can flag photos that need attention\n• Photos display in a grid with lightbox view\n\nRegular photo documentation helps with inspections, client updates, and dispute resolution.",
+      "invitingTeam": "Inviting Team Members",
+      "invitingTeamContent": "To invite someone to a project:\n1. Go to the project overview page\n2. Find the Team section\n3. Click 'Invite' and enter their email\n4. Select their role (PM, Contractor, Stakeholder, Viewer)\n5. They'll receive an email invitation\n\nInvitations expire after 7 days. You can resend or revoke pending invitations from the team section.",
+      "notifChannels": "Notification Channels",
+      "notifChannelsContent": "Construction PM sends notifications through three channels:\n\n• In-app — Badge on sidebar + notification center page\n• Email — Sent via email for important updates\n• SMS — Text messages for critical alerts (requires phone number)\n\nYou can customize which types of notifications you receive on each channel in Settings > Notification Preferences.\n\nQuiet hours let you pause email/SMS during off-hours while still receiving in-app notifications.",
+      "phaseComments": "Phase Comments",
+      "phaseCommentsContent": "Each phase has a comment section for team communication:\n\n• Post comments to discuss progress, issues, or questions\n• Comments show user avatar, name, and timestamp\n• Delete your own comments (Admins can delete any comment)\n• Comments appear in reverse chronological order\n\nUse comments instead of external messaging to keep all project communication in one place.",
+      "themeCustomization": "Theme Customization",
+      "themeCustomizationContent": "Admins and PMs can customize the app appearance:\n\n• Choose from multiple color themes (Blue, Green, Orange, Purple, Red, Teal)\n• Upload a company logo\n• Set a company name\n\nTheme changes apply to all users in the organization. Go to Settings > Appearance to customize.",
+      "securityAccess": "Security & Access",
+      "securityAccessContent": "Construction PM uses secure authentication:\n\n• Email-based login with magic links or password\n• Google OAuth integration\n• Session-based authentication\n• Role-based access control\n\nContact your administrator to change your role or if you're locked out of your account."
+    }
+  },
+  "tour": {
+    "welcomeTitle": "Welcome to Construction PM!",
+    "welcomeDesc": "Your all-in-one platform for managing construction projects. Let's take a quick tour of the key features.",
+    "welcomeTip": "This tour takes about 1 minute. You can skip it anytime.",
+    "projectsTitle": "Projects & Timeline",
+    "projectsDesc": "Create projects, set budgets, and break work into phases. The Timeline view gives you a Gantt chart showing how everything connects.",
+    "projectsTip": "Start by creating your first project from the Projects page.",
+    "phasesTitle": "Phase Management",
+    "phasesDesc": "Each phase tracks status, costs, checklists, documents, and photos. Phases flow from Pending → In Progress → Review → Complete.",
+    "phasesTip": "Use dependencies to link phases that must happen in sequence.",
+    "teamTitle": "Team Collaboration",
+    "teamDesc": "Invite team members via email with specific roles. Contractors get their own simplified portal for uploading work and requesting reviews.",
+    "teamTip": "Invite your first team member from any project's Team section.",
+    "checklistsTitle": "Checklists & Documents",
+    "checklistsDesc": "Create reusable checklist templates in Settings and apply them to phases. Upload documents for approval tracking and photos for progress documentation.",
+    "checklistsTip": "Check Settings > Checklist Templates to set up your first template.",
+    "notificationsTitle": "Notifications & Alerts",
+    "notificationsDesc": "Get notified about phase changes, review requests, and completed checklists via in-app, email, or SMS. Customize your preferences in Settings.",
+    "notificationsTip": "Set up quiet hours to avoid late-night notifications.",
+    "contractorWelcomeDesc": "This is your Contractor Portal — a focused view of the phases you're assigned to. Let's walk through the basics.",
+    "assignedTitle": "Your Assigned Phases",
+    "assignedDesc": "Your dashboard shows all phases you're assigned to, grouped by status. Click any phase to see its details, checklist, and documents.",
+    "assignedTip": "Complete checklist items as you finish each task.",
+    "uploadTitle": "Upload Photos & Documents",
+    "uploadDesc": "Document your progress by uploading photos and relevant documents to each phase. This creates a clear record for your team.",
+    "uploadTip": "Take photos regularly — they help during inspections and reviews.",
+    "reviewTitle": "Request Reviews",
+    "reviewDesc": "When you've completed work on a phase, click 'Request Review' to notify the project manager. They'll review and either approve or ask for changes.",
+    "reviewTip": "Make sure all checklist items are done before requesting a review.",
+    "welcomeUser": "Welcome, {name}!",
+    "getStarted": "Get Started",
+    "skip": "Skip"
+  },
+  "contractor": {
+    "portal": "Contractor Portal",
+    "role": "Contractor",
+    "reviewRequested": "Review requested — your PM will be notified",
+    "requesting": "Requesting...",
+    "requestReview": "Request Review",
+    "noActivePhases": "No active phases right now",
+    "daysLeft": "{days}d left",
+    "dueToday": "Due today"
+  },
+  "reports": {
+    "export": "Export",
+    "fullReport": "Full Report (CSV)",
+    "projectHealth": "Project Health",
+    "overdueReport": "Overdue Report",
+    "teamPerformance": "Team Performance",
+    "project": "Project",
+    "status": "Status",
+    "totalPhases": "Total Phases",
+    "completed": "Completed",
+    "progressPct": "Progress %",
+    "overdue": "Overdue",
+    "phase": "Phase",
+    "daysOverdue": "Days Overdue",
+    "owner": "Owner",
+    "unassigned": "Unassigned",
+    "name": "Name",
+    "assignedPhases": "Assigned Phases",
+    "active": "Active",
+    "organizationOverview": "Organization-wide overview",
+    "yourPortfolio": "Your project portfolio",
+    "projectOverview": "Project overview",
+    "overallProgress": "Overall Progress",
+    "onTrack": "on track",
+    "allOnSchedule": "All on schedule",
+    "actionsThisMonth": "Actions this month"
+  },
+  "gantt": {
+    "estimated": "Estimated",
+    "worstCase": "Worst Case",
+    "today": "Today",
+    "dragHelp": "Drag bars to slide • Drag edges to resize"
+  },
+  "directory": {
+    "title": "Directory",
+    "contactCount": "{count} contact{count, plural, one {} other {s}} across {groups} categor{groups, plural, one {y} other {ies}}",
+    "addContact": "Add Contact",
+    "addFirstContact": "Add Your First Contact",
+    "noContactsYet": "No contacts yet",
+    "noContactsMessage": "Add team members, subcontractors, vendors, and inspectors to your directory.",
+    "editContact": "Edit contact",
+    "assignedTo": "Assigned to",
+    "teamLabel": "Team",
+    "teamDesc": "Your employees and core team",
+    "subcontractorLabel": "Subcontractors",
+    "subcontractorDesc": "Trades and specialty contractors",
+    "vendorLabel": "Vendors",
+    "vendorDesc": "Suppliers and material providers",
+    "inspectorLabel": "Inspectors",
+    "inspectorDesc": "City inspectors, engineers, and consultants",
+    "addContactModal": "Add Contact",
+    "editContactModal": "Edit Contact",
+    "type": "Type",
+    "nameField": "Name *",
+    "company": "Company",
+    "roleTrade": "Role / Trade",
+    "email": "Email",
+    "phone": "Phone",
+    "notes": "Notes",
+    "teamMember": "Team Member",
+    "subcontractor": "Subcontractor",
+    "vendorSupplier": "Vendor / Supplier",
+    "inspector": "Inspector",
+    "namePlaceholder": "John Smith",
+    "companyPlaceholder": "ABC Electric",
+    "rolePlaceholder": "Electrician",
+    "emailPlaceholder": "john@company.com",
+    "phonePlaceholder": "(555) 123-4567",
+    "notesPlaceholder": "License #, specialties, availability...",
+    "deleteContact": "Delete Contact",
+    "deleting": "Deleting...",
+    "nameRequired": "Name is required",
+    "somethingWentWrong": "Something went wrong",
+    "failedToDelete": "Failed to delete",
+    "deleteConfirm": "Delete {name}? This will also remove all their phase assignments.",
+    "addContactBtn": "Add Contact",
+    "saveChanges": "Save Changes"
+  },
+  "pwa": {
+    "installTitle": "Install Construction PM",
+    "installMessage": "Add to your home screen for faster access and offline support.",
+    "installButton": "Install",
+    "dismiss": "Not now",
+    "installedToast": "App installed successfully!"
+  }
+}
\ No newline at end of file
diff --git a/messages/es.json b/messages/es.json
new file mode 100644
index 0000000..00ec2ba
--- /dev/null
+++ b/messages/es.json
@@ -0,0 +1,596 @@
+{
+  "common": {
+    "appName": "Construction PM",
+    "save": "Guardar",
+    "saving": "Guardando...",
+    "cancel": "Cancelar",
+    "delete": "Eliminar",
+    "edit": "Editar",
+    "add": "Agregar",
+    "upload": "Subir",
+    "open": "Abrir",
+    "close": "Cerrar",
+    "search": "Buscar",
+    "loading": "Cargando...",
+    "submit": "Enviar",
+    "back": "Atrás",
+    "next": "Siguiente",
+    "done": "Listo",
+    "create": "Crear",
+    "remove": "Quitar",
+    "replace": "Reemplazar",
+    "invite": "Invitar",
+    "signOut": "Cerrar sesión",
+    "viewAll": "Ver todo",
+    "noResults": "Sin resultados",
+    "tryAgain": "Intenta con otro término de búsqueda",
+    "items": "elementos",
+    "total": "total",
+    "active": "activo",
+    "phases": "fases",
+    "of": "de",
+    "from": "Desde",
+    "to": "Hasta",
+    "or": "o",
+    "yes": "Sí",
+    "no": "No",
+    "confirm": "Confirmar",
+    "notSet": "No definido",
+    "expires": "Vence",
+    "today": "Hoy",
+    "yesterday": "Ayer",
+    "thisWeek": "Esta semana",
+    "older": "Anteriores",
+    "loadMore": "Cargar más",
+    "send": "Enviar",
+    "required": "Requerido"
+  },
+  "status": {
+    "pending": "Pendiente",
+    "planning": "Planificación",
+    "inProgress": "En progreso",
+    "active": "Activo",
+    "reviewRequested": "Revisión solicitada",
+    "underReview": "En revisión",
+    "complete": "Completado",
+    "completed": "Completado",
+    "onHold": "En pausa",
+    "archived": "Archivado",
+    "delayed": "Retrasado",
+    "approved": "Aprobado",
+    "rejected": "Rechazado",
+    "expired": "Vencido"
+  },
+  "nav": {
+    "dashboard": "Panel",
+    "projects": "Proyectos",
+    "reports": "Informes",
+    "directory": "Directorio",
+    "notifications": "Notificaciones",
+    "settings": "Configuración",
+    "help": "Ayuda",
+    "myWork": "Mi trabajo",
+    "documents": "Documentos",
+    "photos": "Fotos",
+    "contractorPortal": "Portal del contratista",
+    "openMenu": "Abrir menú"
+  },
+  "auth": {
+    "signIn": "Iniciar sesión",
+    "signingIn": "Iniciando sesión...",
+    "signInSubtitle": "Inicia sesión para gestionar tus proyectos",
+    "emailAddress": "Correo electrónico",
+    "emailPlaceholder": "admin@constructionpm.com",
+    "invalidCredentials": "Credenciales inválidas",
+    "genericError": "Algo salió mal. Por favor, intenta de nuevo.",
+    "demoAccess": "Usa <strong>admin@constructionpm.com</strong> para acceso demo"
+  },
+  "home": {
+    "tagline": "Gestiona proyectos de construcción, controla cronogramas, coordina contratistas y mantén cada fase al día.",
+    "goToDashboard": "Ir al panel"
+  },
+  "dashboard": {
+    "goodMorning": "Buenos días",
+    "goodAfternoon": "Buenas tardes",
+    "goodEvening": "Buenas noches",
+    "itemsNeedAttention": "{count} elemento{count, plural, one {} other {s}} requiere{count, plural, one {} other {n}} atención",
+    "newProject": "Nuevo proyecto",
+    "new": "Nuevo",
+    "activePhases": "Fases activas",
+    "needsReview": "Pendiente de revisión",
+    "overdue": "Atrasadas",
+    "pendingDocs": "Docs pendientes",
+    "checklists": "Listas",
+    "awaitingApproval": "esperando aprobación",
+    "allClear": "todo al día",
+    "pastDeadline": "pasada la fecha límite",
+    "onTrack": "al día",
+    "needReview": "necesitan revisión",
+    "allReviewed": "todo revisado",
+    "needsYourAttention": "Requiere tu atención",
+    "reviewRequestedLabel": "Revisión solicitada: {name}",
+    "overdueLabel": "Atrasada: {name}",
+    "daysOverdue": "{days}d de atraso",
+    "startingSoon": "Próximas a iniciar (2 semanas)",
+    "noProjectsYet": "Aún no hay proyectos",
+    "createFirstProject": "Crea tu primer proyecto para comenzar.",
+    "nextPhase": "Siguiente: {name}",
+    "noNotificationsYet": "Sin notificaciones",
+    "notificationsWillAppear": "Los cambios de estado, revisiones y cargas aparecerán aquí",
+    "activity": "Actividad",
+    "noActivityYet": "Sin actividad",
+    "activityWillAppear": "Los cambios de estado y cargas aparecerán aquí"
+  },
+  "projects": {
+    "title": "Proyectos",
+    "newProject": "Nuevo proyecto",
+    "template": "Plantilla",
+    "details": "Detalles",
+    "projectType": "Tipo de proyecto",
+    "residential": "Residencial",
+    "residentialDesc": "9 fases · permisos hasta CO",
+    "commercial": "Comercial",
+    "commercialDesc": "12 fases · estructura hasta puesta en marcha",
+    "blank": "En blanco",
+    "blankDesc": "Comenzar desde cero",
+    "tradeSpecific": "Por oficio",
+    "projectName": "Nombre del proyecto *",
+    "projectNamePlaceholder": "ej. Residencia García",
+    "description": "Descripción",
+    "descriptionPlaceholder": "Alcance del proyecto, notas, requisitos especiales...",
+    "siteAddress": "Dirección de la obra",
+    "addressPlaceholder": "Calle Principal 123, Ciudad, Estado",
+    "planApproval": "Fecha de aprobación de planos",
+    "budget": "Presupuesto ($)",
+    "nextReviewPhases": "Siguiente: Revisar fases",
+    "addPhase": "Agregar fase",
+    "expandAll": "Expandir todo",
+    "collapseAll": "Colapsar todo",
+    "noPhasesYet": "Aún no hay fases",
+    "addPhasesHelp": "Agrega fases manualmente o regresa para elegir una plantilla",
+    "phaseName": "Nombre de fase *",
+    "phaseNamePlaceholder": "ej. Estructura",
+    "milestone": "Hito (fecha única)",
+    "scope": "Alcance, notas, oficio involucrado...",
+    "estStart": "Inicio est. *",
+    "estEnd": "Fin est. *",
+    "worstStart": "Inicio peor caso",
+    "worstEnd": "Fin peor caso",
+    "creating": "Creando...",
+    "createProject": "Crear proyecto",
+    "phaseCount": "{count} fase{count, plural, one {} other {s}}",
+    "phasesStep": "Fases",
+    "untitledPhase": "Fase sin título",
+    "nameRequired": "El nombre del proyecto es requerido",
+    "phaseNeedsName": "La fase {n} necesita un nombre",
+    "phaseNeedsDates": "\"{name}\" necesita fechas de inicio y fin estimadas"
+  },
+  "phases": {
+    "phaseDetails": "Detalles de la fase",
+    "progress": "Progreso",
+    "estimatedTimeline": "Cronograma estimado",
+    "worstCase": "Peor caso",
+    "actual": "Real",
+    "started": "Iniciada",
+    "completedDash": "— Completada",
+    "timeline": "Cronograma",
+    "milestone": "Hito",
+    "startPhase": "Iniciar fase",
+    "requestReview": "Solicitar revisión",
+    "beginReview": "Comenzar revisión",
+    "approveComplete": "Aprobar y completar",
+    "sendBack": "Devolver",
+    "complete": "% completado"
+  },
+  "team": {
+    "title": "Equipo ({count})",
+    "assign": "Asignar",
+    "noOneAssigned": "Nadie asignado aún",
+    "assignToPhase": "Asignar a la fase",
+    "searchPlaceholder": "Buscar por nombre, empresa o rol...",
+    "noMatchingContacts": "No se encontraron contactos",
+    "addAsOwner": "Agregar como responsable",
+    "noTeamMembers": "Aún no hay miembros del equipo"
+  },
+  "invitations": {
+    "inviteTeamMember": "Invitar miembro del equipo",
+    "emailAddress": "Correo electrónico",
+    "emailPlaceholder": "colega@ejemplo.com",
+    "role": "Rol",
+    "manager": "Gerente",
+    "managerDesc": "Puede gestionar fases, equipo y configuración",
+    "contractor": "Contratista",
+    "contractorDesc": "Puede actualizar fases asignadas y subir archivos",
+    "stakeholder": "Interesado",
+    "stakeholderDesc": "Acceso de solo lectura al progreso del proyecto",
+    "viewer": "Observador",
+    "viewerDesc": "Acceso de solo lectura",
+    "pendingInvitations": "Invitaciones pendientes ({count})",
+    "inviteLinkInfo": "El enlace de invitación se copiará al portapapeles. Compártelo con la persona que estás invitando. Los enlaces vencen después de 7 días.",
+    "cancelInvitation": "Cancelar invitación",
+    "expired": "Invitación vencida",
+    "expiredMessage": "Esta invitación ha vencido. Solicita al propietario del proyecto que envíe una nueva.",
+    "goToLogin": "Ir a iniciar sesión",
+    "alreadyMember": "Ya eres miembro",
+    "alreadyMemberMessage": "Ya eres miembro de {project}.",
+    "welcomeToTeam": "¡Bienvenido al equipo!",
+    "joinedMessage": "Te has unido a {project} exitosamente.",
+    "goToProject": "Ir al proyecto",
+    "somethingWentWrong": "Algo salió mal",
+    "youreInvited": "Estás invitado",
+    "invitedToJoin": "Has sido invitado a unirte a",
+    "invitedAs": "Invitado como",
+    "joining": "Uniéndose...",
+    "acceptInvitation": "Aceptar invitación",
+    "signInToAccept": "Inicia sesión para aceptar",
+    "sent": "Invitación enviada a {email}",
+    "linkCopied": "Enlace de invitación copiado al portapapeles",
+    "cancelled": "Invitación cancelada",
+    "failedToCancel": "Error al cancelar la invitación"
+  },
+  "budget": {
+    "title": "Presupuesto",
+    "editTotal": "Editar total",
+    "totalBudget": "Presupuesto total:",
+    "estimated": "Estimado",
+    "actual": "Real",
+    "variance": "Variación",
+    "budgetUsed": "Presupuesto utilizado",
+    "updated": "Presupuesto actualizado",
+    "failedToUpdate": "Error al actualizar el presupuesto",
+    "costsUpdated": "Costos de fase actualizados",
+    "failedToUpdateCosts": "Error al actualizar los costos",
+    "estShort": "Est.",
+    "varShort": "Var."
+  },
+  "documents": {
+    "title": "Documentos ({count})",
+    "permit": "Permiso",
+    "contract": "Contrato",
+    "invoice": "Factura",
+    "blueprint": "Plano",
+    "inspection": "Inspección",
+    "other": "Otro",
+    "uploading": "Subiendo {current} de {total}...",
+    "uploadingFile": "Subiendo {name}...",
+    "category": "Categoría:",
+    "noDocumentsYet": "Aún no hay documentos",
+    "dragDropDocs": "Arrastra y suelta archivos o haz clic en Subir",
+    "dropToUpload": "Suelta los archivos para subir",
+    "deleteConfirm": "¿Eliminar este documento? Esta acción no se puede deshacer.",
+    "failedToDelete": "Error al eliminar",
+    "approve": "Aprobar",
+    "reject": "Rechazar",
+    "resetToPending": "Restablecer a pendiente",
+    "filesSelected": "{count} archivo{count, plural, one {} other {s}} seleccionado{count, plural, one {} other {s}}",
+    "failedToUpdateStatus": "Error al actualizar el estado",
+    "dropHere": "Suelta los archivos aquí"
+  },
+  "photos": {
+    "title": "Fotos ({count})",
+    "flagged": "· {count} marcadas",
+    "savingPhotos": "Guardando fotos...",
+    "uploadFailed": "Error al subir. Por favor, intenta de nuevo.",
+    "camera": "Cámara",
+    "addPhotos": "Agregar fotos",
+    "gallery": "Galería",
+    "replacementNeeded": "Se necesita reemplazo",
+    "additionalAngles": "Se necesitan más ángulos",
+    "morePhotosNeeded": "Se necesitan más fotos",
+    "clarificationNeeded": "Se necesita aclaración",
+    "replaceShort": "Reemplazo",
+    "anglesShort": "Ángulos",
+    "moreShort": "Más",
+    "clarifyShort": "Aclarar",
+    "noPhotosYet": "Aún no hay fotos",
+    "dragDropPhotos": "Arrastra y suelta imágenes o haz clic en Agregar fotos",
+    "dropImages": "Suelta las imágenes para subir",
+    "phasePhoto": "Foto de fase",
+    "flagForFollowup": "Marcar para seguimiento",
+    "changeFlag": "Cambiar marca",
+    "clearFlag": "Quitar marca",
+    "viewFullSize": "Ver tamaño completo",
+    "flagPhotoBtn": "Marcar foto",
+    "addNote": "¿agregar una nota? (opcional)",
+    "deleteConfirm": "¿Eliminar esta foto? Esta acción no se puede deshacer.",
+    "dropHere": "Suelta las imágenes aquí"
+  },
+  "checklist": {
+    "title": "Lista de verificación",
+    "addItem": "Agregar elemento",
+    "noChecklistYet": "Aún no hay lista",
+    "applyTemplate": "Aplicar plantilla",
+    "percentComplete": "% completado",
+    "newItemPlaceholder": "Nuevo elemento...",
+    "chooseTemplate": "Elegir una plantilla",
+    "itemCount": "{count} elementos"
+  },
+  "comments": {
+    "title": "Comentarios",
+    "noCommentsYet": "Aún no hay comentarios",
+    "addComment": "Agregar un comentario...",
+    "sendComment": "Enviar comentario",
+    "deleteComment": "Eliminar comentario",
+    "failedToAdd": "Error al agregar comentario",
+    "failedToDelete": "Error al eliminar comentario"
+  },
+  "notifications": {
+    "title": "Notificaciones",
+    "markAllRead": "Marcar todas como leídas",
+    "noNotificationsYet": "Sin notificaciones",
+    "emptyMessage": "Recibirás notificaciones cuando haya actualizaciones en tus proyectos.",
+    "deleted": "Notificación eliminada"
+  },
+  "settings": {
+    "title": "Configuración",
+    "subtitle": "Administra tu cuenta y preferencias",
+    "profile": "Perfil",
+    "name": "Nombre",
+    "email": "Correo electrónico",
+    "role": "Rol",
+    "appearance": "Apariencia",
+    "language": "Idioma",
+    "languageDescription": "Elige tu idioma preferido. Los cambios toman efecto inmediatamente.",
+    "colorTheme": "Tema de color",
+    "themeDescription": "Elige un esquema de color para toda la aplicación. Los cambios aplican para todos los usuarios.",
+    "companyBranding": "Marca de la empresa",
+    "brandingDescription": "Sube tu logo y establece el nombre de tu empresa. Aparecen en la barra lateral.",
+    "fileTooLarge": "Archivo muy grande. Tamaño máximo 2MB.",
+    "invalidFormat": "Formato no válido. Usa PNG, JPG, SVG o WebP.",
+    "uploadFailed": "Error al subir",
+    "companyName": "Nombre de la empresa",
+    "companyNamePlaceholder": "Nombre de tu empresa",
+    "companyNameHelp": "Se muestra en el encabezado de la barra lateral. Déjalo en blanco para mostrar \"Construction PM\".",
+    "maxSize": "Máx 2MB",
+    "removeLogoConfirm": "¿Eliminar el logo de la empresa?",
+    "failedToDelete": "Error al eliminar",
+    "checklistTemplates": "Plantillas de listas",
+    "templatesDescription": "Crea listas reutilizables que se pueden aplicar a las fases del proyecto.",
+    "newTemplate": "Nueva plantilla",
+    "noTemplatesYet": "Aún no hay plantillas. Crea una para comenzar.",
+    "templateName": "Nombre de la plantilla",
+    "templateNamePlaceholder": "ej. Obra gruesa, Estructura, Eléctrica…",
+    "checklistItems": "Elementos de la lista",
+    "enterItemTitle": "Título del elemento…",
+    "addItem": "Agregar elemento",
+    "createTemplate": "Crear plantilla",
+    "saveChanges": "Guardar cambios",
+    "templateCreated": "Plantilla creada",
+    "templateUpdated": "Plantilla actualizada",
+    "templateDeleted": "Plantilla eliminada",
+    "failedToCreate": "Error al crear plantilla",
+    "failedToUpdate": "Error al actualizar",
+    "failedToDeleteTemplate": "Error al eliminar plantilla",
+    "deleteTemplateConfirm": "¿Eliminar \"{name}\"? Esta acción no se puede deshacer."
+  },
+  "notifPrefs": {
+    "title": "Preferencias de notificación",
+    "subtitle": "Controla cómo recibes las notificaciones",
+    "channels": "Canales",
+    "inApp": "Notificaciones en la app",
+    "inAppDesc": "Mostrar notificaciones en la barra lateral y centro de notificaciones",
+    "emailNotifs": "Notificaciones por correo",
+    "emailNotifsDesc": "Recibir alertas por correo para actualizaciones importantes",
+    "smsNotifs": "Notificaciones por SMS",
+    "smsNotifsDesc": "Recibir mensajes de texto para actualizaciones críticas",
+    "phoneNumber": "Número de teléfono",
+    "phonePlaceholder": "+1234567890",
+    "phoneHelp": "Usa formato internacional (ej. +52 para México)",
+    "emailAlerts": "Alertas por correo",
+    "smsAlerts": "Alertas por SMS",
+    "phaseStatusChanges": "Cambios de estado de fase",
+    "phaseStatusDesc": "Cuando una fase cambia de estado",
+    "phaseStatusSmsDesc": "Mensaje cuando las fases cambian de estado",
+    "reviewRequests": "Solicitudes de revisión",
+    "reviewRequestsDesc": "Cuando un contratista solicita una revisión",
+    "reviewRequestsSmsDesc": "Mensaje cuando se solicitan revisiones",
+    "checklistCompletion": "Listas completadas",
+    "checklistDesc": "Cuando todos los elementos de la lista están completados",
+    "checklistSmsDesc": "Mensaje cuando se completan las listas",
+    "documentUpdates": "Actualizaciones de documentos",
+    "documentDesc": "Cuando se suben o revisan documentos",
+    "documentSmsDesc": "Mensaje para cambios de estado de documentos",
+    "commentsLabel": "Comentarios",
+    "commentsDesc": "Cuando alguien comenta en una fase",
+    "quietHours": "Horas de silencio",
+    "quietHoursDesc": "Pausar notificaciones por correo y SMS durante estas horas (las de la app siguen activas)",
+    "saved": "Preferencias de notificación guardadas",
+    "failedToSave": "Error al guardar"
+  },
+  "search": {
+    "placeholder": "Buscar proyectos, fases, documentos, personal…",
+    "searching": "Buscando…",
+    "noResultsFor": "Sin resultados para \"{query}\"",
+    "typeAtLeast": "Escribe al menos 2 caracteres para buscar",
+    "navigate": "Navegar",
+    "buttonLabel": "Buscar…",
+    "project": "Proyecto",
+    "phase": "Fase",
+    "document": "Documento",
+    "staff": "Personal"
+  },
+  "help": {
+    "searchPlaceholder": "Buscar artículos de ayuda...",
+    "resultCount": "{count} resultado{count, plural, one {} other {s}}",
+    "replayIntro": "Repetir introducción",
+    "createProject": "Crear proyecto",
+    "phaseStatus": "Estado de fase",
+    "inviteTeam": "Invitar equipo",
+    "needMoreHelp": "¿Necesitas más ayuda?",
+    "contactAdmin": "Contacta al administrador del proyecto o comunícate con soporte.",
+    "contactSupport": "Contactar soporte",
+    "articleCount": "{count} artículo{count, plural, one {} other {s}}",
+    "sections": {
+      "gettingStarted": "Primeros pasos",
+      "projects": "Proyectos",
+      "phases": "Fases",
+      "checklists": "Listas de verificación",
+      "documents": "Documentos",
+      "photos": "Fotos",
+      "team": "Equipo e invitaciones",
+      "notifications": "Notificaciones",
+      "comments": "Comentarios",
+      "settingsAdmin": "Configuración y administración"
+    },
+    "articles": {
+      "appOverview": "Descripción general de la app",
+      "appOverviewContent": "Construction PM te ayuda a gestionar proyectos de construcción de principio a fin. El panel te da una vista general de todos tus proyectos, y puedes profundizar en proyectos individuales para gestionar fases, documentos, fotos y miembros del equipo.\n\nÁreas principales:\n• Panel — Vista general de todos los proyectos y estadísticas\n• Proyectos — Crear y gestionar proyectos individuales\n• Cronograma — Diagrama de Gantt visual de las fases\n• Directorio — Gestionar contactos de personal/contratistas\n• Notificaciones — Mantenerse actualizado sobre la actividad\n• Configuración — Personalizar tema, gestionar plantillas",
+      "firstProject": "Creando tu primer proyecto",
+      "firstProjectContent": "Para crear un proyecto:\n1. Ve a Proyectos desde la barra lateral\n2. Haz clic en 'Nuevo proyecto' arriba a la derecha\n3. Completa el nombre, dirección y fecha estimada de finalización\n4. Opcionalmente establece un presupuesto\n5. Haz clic en 'Crear proyecto'\n\nUna vez creado, serás llevado a la página de vista general del proyecto donde puedes agregar fases, invitar miembros del equipo y comenzar a dar seguimiento al progreso.",
+      "roles": "Entendiendo los roles",
+      "rolesContent": "Construction PM tiene cinco roles de usuario:\n\n• Admin — Acceso completo a todo, incluyendo configuración, gestión de usuarios y todos los proyectos\n• Gerente de proyecto — Puede crear/editar proyectos, gestionar fases, aprobar documentos e invitar miembros\n• Contratista — Acceso a fases asignadas a través del Portal del Contratista, puede subir fotos/documentos y solicitar revisiones\n• Interesado — Acceso de solo lectura a vistas generales e informes\n• Observador — Acceso básico de solo lectura\n\nEl rol determina qué acciones puedes realizar y qué elementos del menú puedes ver.",
+      "projectOverview": "Página de vista general del proyecto",
+      "projectOverviewContent": "La vista general del proyecto muestra:\n• Resumen del presupuesto (total, gastado, restante)\n• Barra de progreso con porcentaje de fases completadas\n• Estadísticas rápidas (fases activas, revisiones pendientes, elementos atrasados)\n• Todas las fases con indicadores de estado\n• Miembros del equipo y actividad reciente\n\nHaz clic en cualquier fase para ver su vista detallada, o usa el enlace de Cronograma para ver el diagrama de Gantt.",
+      "budgetTracking": "Seguimiento del presupuesto",
+      "budgetTrackingContent": "Establece un presupuesto al crear o editar un proyecto. Cada fase puede tener un costo estimado y un costo real.\n\nLa sección de Presupuesto muestra:\n• Desglose de costos por fase\n• Variación (diferencia entre estimado y real)\n• Alertas con código de color cuando se excede el presupuesto\n\nAdmins y Gerentes pueden editar costos de fase haciendo clic en el botón de edición en la tabla de presupuesto.",
+      "phaseLifecycle": "Ciclo de vida del estado de fase",
+      "phaseLifecycleContent": "Las fases progresan a través de estos estados:\n\n1. Pendiente — Aún no ha comenzado\n2. En progreso — Trabajo activo en curso\n3. Revisión solicitada — El contratista ha solicitado revisión del PM\n4. En revisión — El PM está revisando activamente\n5. Completada — La fase está terminada y aprobada\n\nLos contratistas pueden solicitar revisiones desde el Portal del Contratista. PMs/Admins pueden cambiar el estado desde la página de detalle de la fase.",
+      "phaseDependencies": "Dependencias de fase",
+      "phaseDependenciesContent": "Puedes vincular fases para que una dependa de otra. Esto ayuda con la programación:\n\n• Una dependencia significa que una fase debe terminar antes de que otra comience\n• Se pueden agregar días de espera entre fases dependientes\n• Las dependencias circulares se previenen automáticamente\n• Las dependencias aparecen en el cronograma del proyecto\n\nPara agregar una dependencia, ve a la página de detalle de la fase y usa la sección de dependencias.",
+      "checklistTemplates": "Plantillas de listas de verificación",
+      "checklistTemplatesContent": "Los Admins pueden crear plantillas reutilizables en Configuración > Plantillas de listas. Estas plantillas se pueden aplicar a cualquier fase.\n\nPara aplicar una plantilla:\n1. Abre la página de detalle de una fase\n2. Busca la sección de Lista de verificación\n3. Haz clic en 'Aplicar plantilla' y selecciona una\n\nLos elementos se pueden marcar como completados por cualquier persona con acceso de edición. Cuando todos los elementos están completos, los gerentes de proyecto reciben una notificación.",
+      "documentManagement": "Gestión de documentos",
+      "documentManagementContent": "Sube documentos a cualquier fase para registro:\n\n• Formatos soportados: PDF, imágenes, documentos Word, Excel y más\n• Los documentos pueden marcarse como Pendiente, Aprobado o Rechazado por PMs/Admins\n• Cada documento muestra quién lo subió y cuándo\n• Puedes eliminar documentos que tú subiste\n\nTipos comunes: permisos, reportes de inspección, contratos, órdenes de cambio, especificaciones de materiales.",
+      "progressPhotos": "Fotos de progreso",
+      "progressPhotosContent": "Toma y sube fotos para documentar el progreso de la construcción:\n\n• Las fotos se adjuntan a fases específicas\n• Cada foto puede tener una descripción\n• Soporte de etiquetado GPS para trabajadores en campo (próximamente)\n• Los PMs pueden marcar fotos que necesitan atención\n• Las fotos se muestran en cuadrícula con vista de galería\n\nLa documentación fotográfica regular ayuda en inspecciones, actualizaciones a clientes y resolución de disputas.",
+      "invitingTeam": "Invitando miembros del equipo",
+      "invitingTeamContent": "Para invitar a alguien a un proyecto:\n1. Ve a la página de vista general del proyecto\n2. Encuentra la sección de Equipo\n3. Haz clic en 'Invitar' e ingresa su correo\n4. Selecciona su rol (PM, Contratista, Interesado, Observador)\n5. Recibirán una invitación por correo\n\nLas invitaciones vencen después de 7 días. Puedes reenviar o revocar invitaciones pendientes desde la sección de equipo.",
+      "notifChannels": "Canales de notificación",
+      "notifChannelsContent": "Construction PM envía notificaciones por tres canales:\n\n• En la app — Insignia en la barra lateral + página de centro de notificaciones\n• Correo — Enviado por correo para actualizaciones importantes\n• SMS — Mensajes de texto para alertas críticas (requiere número de teléfono)\n\nPuedes personalizar qué tipos de notificaciones recibes en cada canal en Configuración > Preferencias de notificación.\n\nLas horas de silencio te permiten pausar correos/SMS fuera de horario mientras sigues recibiendo notificaciones en la app.",
+      "phaseComments": "Comentarios de fase",
+      "phaseCommentsContent": "Cada fase tiene una sección de comentarios para comunicación del equipo:\n\n• Publica comentarios para discutir progreso, problemas o preguntas\n• Los comentarios muestran avatar, nombre y fecha\n• Elimina tus propios comentarios (los Admins pueden eliminar cualquiera)\n• Los comentarios aparecen en orden cronológico inverso\n\nUsa comentarios en lugar de mensajería externa para mantener toda la comunicación del proyecto en un solo lugar.",
+      "themeCustomization": "Personalización del tema",
+      "themeCustomizationContent": "Los Admins y PMs pueden personalizar la apariencia de la app:\n\n• Elige entre varios temas de color (Azul, Verde, Naranja, Morado, Rojo, Verde azulado)\n• Sube un logo de empresa\n• Establece un nombre de empresa\n\nLos cambios de tema aplican para todos los usuarios de la organización. Ve a Configuración > Apariencia para personalizar.",
+      "securityAccess": "Seguridad y acceso",
+      "securityAccessContent": "Construction PM usa autenticación segura:\n\n• Inicio de sesión por correo con enlaces mágicos o contraseña\n• Integración con Google OAuth\n• Autenticación basada en sesiones\n• Control de acceso basado en roles\n\nContacta a tu administrador para cambiar tu rol o si no puedes acceder a tu cuenta."
+    }
+  },
+  "tour": {
+    "welcomeTitle": "¡Bienvenido a Construction PM!",
+    "welcomeDesc": "Tu plataforma todo-en-uno para gestionar proyectos de construcción. Hagamos un recorrido rápido por las funciones principales.",
+    "welcomeTip": "Este recorrido toma aproximadamente 1 minuto. Puedes saltarlo en cualquier momento.",
+    "projectsTitle": "Proyectos y cronograma",
+    "projectsDesc": "Crea proyectos, establece presupuestos y divide el trabajo en fases. La vista de Cronograma te da un diagrama de Gantt mostrando cómo todo se conecta.",
+    "projectsTip": "Comienza creando tu primer proyecto desde la página de Proyectos.",
+    "phasesTitle": "Gestión de fases",
+    "phasesDesc": "Cada fase rastrea estado, costos, listas de verificación, documentos y fotos. Las fases fluyen de Pendiente → En progreso → Revisión → Completada.",
+    "phasesTip": "Usa dependencias para vincular fases que deben ocurrir en secuencia.",
+    "teamTitle": "Colaboración del equipo",
+    "teamDesc": "Invita miembros del equipo por correo con roles específicos. Los contratistas tienen su propio portal simplificado para subir trabajo y solicitar revisiones.",
+    "teamTip": "Invita a tu primer miembro del equipo desde la sección de Equipo de cualquier proyecto.",
+    "checklistsTitle": "Listas de verificación y documentos",
+    "checklistsDesc": "Crea plantillas reutilizables en Configuración y aplícalas a las fases. Sube documentos para seguimiento de aprobación y fotos para documentar el progreso.",
+    "checklistsTip": "Ve a Configuración > Plantillas de listas para crear tu primera plantilla.",
+    "notificationsTitle": "Notificaciones y alertas",
+    "notificationsDesc": "Recibe notificaciones sobre cambios de fase, solicitudes de revisión y listas completadas por app, correo o SMS. Personaliza tus preferencias en Configuración.",
+    "notificationsTip": "Configura horas de silencio para evitar notificaciones nocturnas.",
+    "contractorWelcomeDesc": "Este es tu Portal del Contratista — una vista enfocada de las fases que te han asignado. Veamos los aspectos básicos.",
+    "assignedTitle": "Tus fases asignadas",
+    "assignedDesc": "Tu panel muestra todas las fases que te han asignado, agrupadas por estado. Haz clic en cualquier fase para ver sus detalles, lista de verificación y documentos.",
+    "assignedTip": "Completa los elementos de la lista a medida que termines cada tarea.",
+    "uploadTitle": "Subir fotos y documentos",
+    "uploadDesc": "Documenta tu progreso subiendo fotos y documentos relevantes a cada fase. Esto crea un registro claro para tu equipo.",
+    "uploadTip": "Toma fotos regularmente — ayudan durante inspecciones y revisiones.",
+    "reviewTitle": "Solicitar revisiones",
+    "reviewDesc": "Cuando hayas completado el trabajo en una fase, haz clic en 'Solicitar revisión' para notificar al gerente de proyecto. Ellos revisarán y aprobarán o pedirán cambios.",
+    "reviewTip": "Asegúrate de que todos los elementos de la lista estén completos antes de solicitar una revisión.",
+    "welcomeUser": "¡Bienvenido, {name}!",
+    "getStarted": "Comenzar",
+    "skip": "Saltar"
+  },
+  "contractor": {
+    "portal": "Portal del contratista",
+    "role": "Contratista",
+    "reviewRequested": "Revisión solicitada — tu PM será notificado",
+    "requesting": "Solicitando...",
+    "requestReview": "Solicitar revisión",
+    "noActivePhases": "No hay fases activas en este momento",
+    "daysLeft": "{days}d restantes",
+    "dueToday": "Vence hoy"
+  },
+  "reports": {
+    "export": "Exportar",
+    "fullReport": "Informe completo (CSV)",
+    "projectHealth": "Salud del proyecto",
+    "overdueReport": "Informe de atrasos",
+    "teamPerformance": "Desempeño del equipo",
+    "project": "Proyecto",
+    "status": "Estado",
+    "totalPhases": "Total de fases",
+    "completed": "Completadas",
+    "progressPct": "% Progreso",
+    "overdue": "Atrasadas",
+    "phase": "Fase",
+    "daysOverdue": "Días de atraso",
+    "owner": "Responsable",
+    "unassigned": "Sin asignar",
+    "name": "Nombre",
+    "assignedPhases": "Fases asignadas",
+    "active": "Activas",
+    "organizationOverview": "Resumen de toda la organización",
+    "yourPortfolio": "Tu portafolio de proyectos",
+    "projectOverview": "Resumen del proyecto",
+    "overallProgress": "Progreso general",
+    "onTrack": "en horario",
+    "allOnSchedule": "Todo en horario",
+    "actionsThisMonth": "Acciones este mes"
+  },
+  "gantt": {
+    "estimated": "Estimado",
+    "worstCase": "Peor caso",
+    "today": "Hoy",
+    "dragHelp": "Arrastra las barras para deslizar • Arrastra los bordes para redimensionar"
+  },
+  "directory": {
+    "title": "Directorio",
+    "contactCount": "{count} contacto{count, plural, one {} other {s}} en {groups} categorí{groups, plural, one {a} other {as}}",
+    "addContact": "Agregar contacto",
+    "addFirstContact": "Agregar tu primer contacto",
+    "noContactsYet": "Sin contactos aún",
+    "noContactsMessage": "Agrega miembros del equipo, subcontratistas, proveedores e inspectores a tu directorio.",
+    "editContact": "Editar contacto",
+    "assignedTo": "Asignado a",
+    "teamLabel": "Equipo",
+    "teamDesc": "Tus empleados y equipo principal",
+    "subcontractorLabel": "Subcontratistas",
+    "subcontractorDesc": "Contratistas de gremios y especialidades",
+    "vendorLabel": "Proveedores",
+    "vendorDesc": "Suministradores y proveedores de materiales",
+    "inspectorLabel": "Inspectores",
+    "inspectorDesc": "Inspectores municipales, ingenieros y consultores",
+    "addContactModal": "Agregar contacto",
+    "editContactModal": "Editar contacto",
+    "type": "Tipo",
+    "nameField": "Nombre *",
+    "company": "Empresa",
+    "roleTrade": "Cargo / Gremio",
+    "email": "Correo electrónico",
+    "phone": "Teléfono",
+    "notes": "Notas",
+    "teamMember": "Miembro del equipo",
+    "subcontractor": "Subcontratista",
+    "vendorSupplier": "Proveedor",
+    "inspector": "Inspector",
+    "namePlaceholder": "Juan García",
+    "companyPlaceholder": "ABC Electric",
+    "rolePlaceholder": "Electricista",
+    "emailPlaceholder": "juan@empresa.com",
+    "phonePlaceholder": "(555) 123-4567",
+    "notesPlaceholder": "No. de licencia, especialidades, disponibilidad...",
+    "deleteContact": "Eliminar contacto",
+    "deleting": "Eliminando...",
+    "nameRequired": "El nombre es obligatorio",
+    "somethingWentWrong": "Algo salió mal",
+    "failedToDelete": "Error al eliminar",
+    "deleteConfirm": "¿Eliminar {name}? Esto también eliminará todas sus asignaciones de fase.",
+    "addContactBtn": "Agregar contacto",
+    "saveChanges": "Guardar cambios"
+  },
+  "pwa": {
+    "installTitle": "Instalar Construction PM",
+    "installMessage": "Agrega a tu pantalla de inicio para acceso rápido y soporte sin conexión.",
+    "installButton": "Instalar",
+    "dismiss": "Ahora no",
+    "installedToast": "¡Aplicación instalada exitosamente!"
+  }
+}
\ No newline at end of file
diff --git a/next.config.ts b/next.config.ts
index e9ffa30..ab9f7a8 100644
--- a/next.config.ts
+++ b/next.config.ts
@@ -1,7 +1,10 @@
 import type { NextConfig } from "next";
+import createNextIntlPlugin from "next-intl/plugin";
+
+const withNextIntl = createNextIntlPlugin("./src/i18n/request.ts");
 
 const nextConfig: NextConfig = {
   /* config options here */
 };
 
-export default nextConfig;
+export default withNextIntl(nextConfig);
diff --git a/package-lock.json b/package-lock.json
index 7df34e7..c73f6eb 100644
--- a/package-lock.json
+++ b/package-lock.json
@@ -10,11 +10,13 @@
       "dependencies": {
         "@auth/prisma-adapter": "^2.11.1",
         "@prisma/client": "^5.22.0",
+        "@vercel/blob": "^2.3.0",
         "clsx": "^2.1.1",
         "date-fns": "^4.1.0",
         "lucide-react": "^0.575.0",
         "next": "16.1.6",
         "next-auth": "^5.0.0-beta.30",
+        "next-intl": "^4.8.3",
         "prisma": "^5.22.0",
         "react": "19.2.3",
         "react-dom": "19.2.3",
@@ -23,6 +25,7 @@
         "zod": "^4.3.6"
       },
       "devDependencies": {
+        "@playwright/test": "^1.52.0",
         "@tailwindcss/postcss": "^4",
         "@types/node": "^20",
         "@types/react": "^19",
@@ -30,7 +33,8 @@
         "eslint": "^9",
         "eslint-config-next": "16.1.6",
         "tailwindcss": "^4",
-        "typescript": "^5"
+        "typescript": "^5",
+        "vitest": "^3.2.1"
       }
     },
     "node_modules/@alloc/quick-lru": {
@@ -360,6 +364,448 @@
         "tslib": "^2.4.0"
       }
     },
+    "node_modules/@esbuild/aix-ppc64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.27.3.tgz",
+      "integrity": "sha512-9fJMTNFTWZMh5qwrBItuziu834eOCUcEqymSH7pY+zoMVEZg3gcPuBNxH1EvfVYe9h0x/Ptw8KBzv7qxb7l8dg==",
+      "cpu": [
+        "ppc64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "aix"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/android-arm": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.27.3.tgz",
+      "integrity": "sha512-i5D1hPY7GIQmXlXhs2w8AWHhenb00+GxjxRncS2ZM7YNVGNfaMxgzSGuO8o8SJzRc/oZwU2bcScvVERk03QhzA==",
+      "cpu": [
+        "arm"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/android-arm64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.27.3.tgz",
+      "integrity": "sha512-YdghPYUmj/FX2SYKJ0OZxf+iaKgMsKHVPF1MAq/P8WirnSpCStzKJFjOjzsW0QQ7oIAiccHdcqjbHmJxRb/dmg==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/android-x64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.27.3.tgz",
+      "integrity": "sha512-IN/0BNTkHtk8lkOM8JWAYFg4ORxBkZQf9zXiEOfERX/CzxW3Vg1ewAhU7QSWQpVIzTW+b8Xy+lGzdYXV6UZObQ==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/darwin-arm64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.27.3.tgz",
+      "integrity": "sha512-Re491k7ByTVRy0t3EKWajdLIr0gz2kKKfzafkth4Q8A5n1xTHrkqZgLLjFEHVD+AXdUGgQMq+Godfq45mGpCKg==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/darwin-x64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.27.3.tgz",
+      "integrity": "sha512-vHk/hA7/1AckjGzRqi6wbo+jaShzRowYip6rt6q7VYEDX4LEy1pZfDpdxCBnGtl+A5zq8iXDcyuxwtv3hNtHFg==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/freebsd-arm64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.27.3.tgz",
+      "integrity": "sha512-ipTYM2fjt3kQAYOvo6vcxJx3nBYAzPjgTCk7QEgZG8AUO3ydUhvelmhrbOheMnGOlaSFUoHXB6un+A7q4ygY9w==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "freebsd"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/freebsd-x64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.27.3.tgz",
+      "integrity": "sha512-dDk0X87T7mI6U3K9VjWtHOXqwAMJBNN2r7bejDsc+j03SEjtD9HrOl8gVFByeM0aJksoUuUVU9TBaZa2rgj0oA==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "freebsd"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-arm": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.27.3.tgz",
+      "integrity": "sha512-s6nPv2QkSupJwLYyfS+gwdirm0ukyTFNl3KTgZEAiJDd+iHZcbTPPcWCcRYH+WlNbwChgH2QkE9NSlNrMT8Gfw==",
+      "cpu": [
+        "arm"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-arm64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.27.3.tgz",
+      "integrity": "sha512-sZOuFz/xWnZ4KH3YfFrKCf1WyPZHakVzTiqji3WDc0BCl2kBwiJLCXpzLzUBLgmp4veFZdvN5ChW4Eq/8Fc2Fg==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-ia32": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.27.3.tgz",
+      "integrity": "sha512-yGlQYjdxtLdh0a3jHjuwOrxQjOZYD/C9PfdbgJJF3TIZWnm/tMd/RcNiLngiu4iwcBAOezdnSLAwQDPqTmtTYg==",
+      "cpu": [
+        "ia32"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-loong64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.27.3.tgz",
+      "integrity": "sha512-WO60Sn8ly3gtzhyjATDgieJNet/KqsDlX5nRC5Y3oTFcS1l0KWba+SEa9Ja1GfDqSF1z6hif/SkpQJbL63cgOA==",
+      "cpu": [
+        "loong64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-mips64el": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.27.3.tgz",
+      "integrity": "sha512-APsymYA6sGcZ4pD6k+UxbDjOFSvPWyZhjaiPyl/f79xKxwTnrn5QUnXR5prvetuaSMsb4jgeHewIDCIWljrSxw==",
+      "cpu": [
+        "mips64el"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-ppc64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.27.3.tgz",
+      "integrity": "sha512-eizBnTeBefojtDb9nSh4vvVQ3V9Qf9Df01PfawPcRzJH4gFSgrObw+LveUyDoKU3kxi5+9RJTCWlj4FjYXVPEA==",
+      "cpu": [
+        "ppc64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-riscv64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.27.3.tgz",
+      "integrity": "sha512-3Emwh0r5wmfm3ssTWRQSyVhbOHvqegUDRd0WhmXKX2mkHJe1SFCMJhagUleMq+Uci34wLSipf8Lagt4LlpRFWQ==",
+      "cpu": [
+        "riscv64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-s390x": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.27.3.tgz",
+      "integrity": "sha512-pBHUx9LzXWBc7MFIEEL0yD/ZVtNgLytvx60gES28GcWMqil8ElCYR4kvbV2BDqsHOvVDRrOxGySBM9Fcv744hw==",
+      "cpu": [
+        "s390x"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-x64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.27.3.tgz",
+      "integrity": "sha512-Czi8yzXUWIQYAtL/2y6vogER8pvcsOsk5cpwL4Gk5nJqH5UZiVByIY8Eorm5R13gq+DQKYg0+JyQoytLQas4dA==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/netbsd-arm64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-arm64/-/netbsd-arm64-0.27.3.tgz",
+      "integrity": "sha512-sDpk0RgmTCR/5HguIZa9n9u+HVKf40fbEUt+iTzSnCaGvY9kFP0YKBWZtJaraonFnqef5SlJ8/TiPAxzyS+UoA==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "netbsd"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/netbsd-x64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.27.3.tgz",
+      "integrity": "sha512-P14lFKJl/DdaE00LItAukUdZO5iqNH7+PjoBm+fLQjtxfcfFE20Xf5CrLsmZdq5LFFZzb5JMZ9grUwvtVYzjiA==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "netbsd"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/openbsd-arm64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-arm64/-/openbsd-arm64-0.27.3.tgz",
+      "integrity": "sha512-AIcMP77AvirGbRl/UZFTq5hjXK+2wC7qFRGoHSDrZ5v5b8DK/GYpXW3CPRL53NkvDqb9D+alBiC/dV0Fb7eJcw==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "openbsd"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/openbsd-x64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.27.3.tgz",
+      "integrity": "sha512-DnW2sRrBzA+YnE70LKqnM3P+z8vehfJWHXECbwBmH/CU51z6FiqTQTHFenPlHmo3a8UgpLyH3PT+87OViOh1AQ==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "openbsd"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/openharmony-arm64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/openharmony-arm64/-/openharmony-arm64-0.27.3.tgz",
+      "integrity": "sha512-NinAEgr/etERPTsZJ7aEZQvvg/A6IsZG/LgZy+81wON2huV7SrK3e63dU0XhyZP4RKGyTm7aOgmQk0bGp0fy2g==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "openharmony"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/sunos-x64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.27.3.tgz",
+      "integrity": "sha512-PanZ+nEz+eWoBJ8/f8HKxTTD172SKwdXebZ0ndd953gt1HRBbhMsaNqjTyYLGLPdoWHy4zLU7bDVJztF5f3BHA==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "sunos"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/win32-arm64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.27.3.tgz",
+      "integrity": "sha512-B2t59lWWYrbRDw/tjiWOuzSsFh1Y/E95ofKz7rIVYSQkUYBjfSgf6oeYPNWHToFRr2zx52JKApIcAS/D5TUBnA==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/win32-ia32": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.27.3.tgz",
+      "integrity": "sha512-QLKSFeXNS8+tHW7tZpMtjlNb7HKau0QDpwm49u0vUp9y1WOF+PEzkU84y9GqYaAVW8aH8f3GcBck26jh54cX4Q==",
+      "cpu": [
+        "ia32"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/win32-x64": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.27.3.tgz",
+      "integrity": "sha512-4uJGhsxuptu3OcpVAzli+/gWusVGwZZHTlS63hh++ehExkVT8SgiEf7/uC/PclrPPkLhZqGgCTjd0VWLo6xMqA==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
     "node_modules/@eslint-community/eslint-utils": {
       "version": "4.9.1",
       "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.9.1.tgz",
@@ -367,994 +813,1891 @@
       "dev": true,
       "license": "MIT",
       "dependencies": {
-        "eslint-visitor-keys": "^3.4.3"
+        "eslint-visitor-keys": "^3.4.3"
+      },
+      "engines": {
+        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/eslint"
+      },
+      "peerDependencies": {
+        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
+      }
+    },
+    "node_modules/@eslint-community/eslint-utils/node_modules/eslint-visitor-keys": {
+      "version": "3.4.3",
+      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
+      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "engines": {
+        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/eslint"
+      }
+    },
+    "node_modules/@eslint-community/regexpp": {
+      "version": "4.12.2",
+      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.2.tgz",
+      "integrity": "sha512-EriSTlt5OC9/7SXkRSCAhfSxxoSUgBm33OH+IkwbdpgoqsSsUg7y3uh+IICI/Qg4BBWr3U2i39RpmycbxMq4ew==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
+      }
+    },
+    "node_modules/@eslint/config-array": {
+      "version": "0.21.1",
+      "resolved": "https://registry.npmjs.org/@eslint/config-array/-/config-array-0.21.1.tgz",
+      "integrity": "sha512-aw1gNayWpdI/jSYVgzN5pL0cfzU02GT3NBpeT/DXbx1/1x7ZKxFPd9bwrzygx/qiwIQiJ1sw/zD8qY/kRvlGHA==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "dependencies": {
+        "@eslint/object-schema": "^2.1.7",
+        "debug": "^4.3.1",
+        "minimatch": "^3.1.2"
+      },
+      "engines": {
+        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
+      }
+    },
+    "node_modules/@eslint/config-helpers": {
+      "version": "0.4.2",
+      "resolved": "https://registry.npmjs.org/@eslint/config-helpers/-/config-helpers-0.4.2.tgz",
+      "integrity": "sha512-gBrxN88gOIf3R7ja5K9slwNayVcZgK6SOUORm2uBzTeIEfeVaIhOpCtTox3P6R7o2jLFwLFTLnC7kU/RGcYEgw==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "dependencies": {
+        "@eslint/core": "^0.17.0"
+      },
+      "engines": {
+        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
+      }
+    },
+    "node_modules/@eslint/core": {
+      "version": "0.17.0",
+      "resolved": "https://registry.npmjs.org/@eslint/core/-/core-0.17.0.tgz",
+      "integrity": "sha512-yL/sLrpmtDaFEiUj1osRP4TI2MDz1AddJL+jZ7KSqvBuliN4xqYY54IfdN8qD8Toa6g1iloph1fxQNkjOxrrpQ==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "dependencies": {
+        "@types/json-schema": "^7.0.15"
+      },
+      "engines": {
+        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
+      }
+    },
+    "node_modules/@eslint/eslintrc": {
+      "version": "3.3.3",
+      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-3.3.3.tgz",
+      "integrity": "sha512-Kr+LPIUVKz2qkx1HAMH8q1q6azbqBAsXJUxBl/ODDuVPX45Z9DfwB8tPjTi6nNZ8BuM3nbJxC5zCAg5elnBUTQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "ajv": "^6.12.4",
+        "debug": "^4.3.2",
+        "espree": "^10.0.1",
+        "globals": "^14.0.0",
+        "ignore": "^5.2.0",
+        "import-fresh": "^3.2.1",
+        "js-yaml": "^4.1.1",
+        "minimatch": "^3.1.2",
+        "strip-json-comments": "^3.1.1"
+      },
+      "engines": {
+        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/eslint"
+      }
+    },
+    "node_modules/@eslint/js": {
+      "version": "9.39.3",
+      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-9.39.3.tgz",
+      "integrity": "sha512-1B1VkCq6FuUNlQvlBYb+1jDu/gV297TIs/OeiaSR9l1H27SVW55ONE1e1Vp16NqP683+xEGzxYtv4XCiDPaQiw==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
+      },
+      "funding": {
+        "url": "https://eslint.org/donate"
+      }
+    },
+    "node_modules/@eslint/object-schema": {
+      "version": "2.1.7",
+      "resolved": "https://registry.npmjs.org/@eslint/object-schema/-/object-schema-2.1.7.tgz",
+      "integrity": "sha512-VtAOaymWVfZcmZbp6E2mympDIHvyjXs/12LqWYjVw6qjrfF+VK+fyG33kChz3nnK+SU5/NeHOqrTEHS8sXO3OA==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "engines": {
+        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
+      }
+    },
+    "node_modules/@eslint/plugin-kit": {
+      "version": "0.4.1",
+      "resolved": "https://registry.npmjs.org/@eslint/plugin-kit/-/plugin-kit-0.4.1.tgz",
+      "integrity": "sha512-43/qtrDUokr7LJqoF2c3+RInu/t4zfrpYdoSDfYyhg52rwLV6TnOvdG4fXm7IkSB3wErkcmJS9iEhjVtOSEjjA==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "dependencies": {
+        "@eslint/core": "^0.17.0",
+        "levn": "^0.4.1"
+      },
+      "engines": {
+        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
+      }
+    },
+    "node_modules/@formatjs/ecma402-abstract": {
+      "version": "3.1.1",
+      "resolved": "https://registry.npmjs.org/@formatjs/ecma402-abstract/-/ecma402-abstract-3.1.1.tgz",
+      "integrity": "sha512-jhZbTwda+2tcNrs4kKvxrPLPjx8QsBCLCUgrrJ/S+G9YrGHWLhAyFMMBHJBnBoOwuLHd7L14FgYudviKaxkO2Q==",
+      "license": "MIT",
+      "dependencies": {
+        "@formatjs/fast-memoize": "3.1.0",
+        "@formatjs/intl-localematcher": "0.8.1",
+        "decimal.js": "^10.6.0",
+        "tslib": "^2.8.1"
+      }
+    },
+    "node_modules/@formatjs/fast-memoize": {
+      "version": "3.1.0",
+      "resolved": "https://registry.npmjs.org/@formatjs/fast-memoize/-/fast-memoize-3.1.0.tgz",
+      "integrity": "sha512-b5mvSWCI+XVKiz5WhnBCY3RJ4ZwfjAidU0yVlKa3d3MSgKmH1hC3tBGEAtYyN5mqL7N0G5x0BOUYyO8CEupWgg==",
+      "license": "MIT",
+      "dependencies": {
+        "tslib": "^2.8.1"
+      }
+    },
+    "node_modules/@formatjs/icu-messageformat-parser": {
+      "version": "3.5.1",
+      "resolved": "https://registry.npmjs.org/@formatjs/icu-messageformat-parser/-/icu-messageformat-parser-3.5.1.tgz",
+      "integrity": "sha512-sSDmSvmmoVQ92XqWb499KrIhv/vLisJU8ITFrx7T7NZHUmMY7EL9xgRowAosaljhqnj/5iufG24QrdzB6X3ItA==",
+      "license": "MIT",
+      "dependencies": {
+        "@formatjs/ecma402-abstract": "3.1.1",
+        "@formatjs/icu-skeleton-parser": "2.1.1",
+        "tslib": "^2.8.1"
+      }
+    },
+    "node_modules/@formatjs/icu-skeleton-parser": {
+      "version": "2.1.1",
+      "resolved": "https://registry.npmjs.org/@formatjs/icu-skeleton-parser/-/icu-skeleton-parser-2.1.1.tgz",
+      "integrity": "sha512-PSFABlcNefjI6yyk8f7nyX1DC7NHmq6WaCHZLySEXBrXuLOB2f935YsnzuPjlz+ibhb9yWTdPeVX1OVcj24w2Q==",
+      "license": "MIT",
+      "dependencies": {
+        "@formatjs/ecma402-abstract": "3.1.1",
+        "tslib": "^2.8.1"
+      }
+    },
+    "node_modules/@formatjs/intl-localematcher": {
+      "version": "0.8.1",
+      "resolved": "https://registry.npmjs.org/@formatjs/intl-localematcher/-/intl-localematcher-0.8.1.tgz",
+      "integrity": "sha512-xwEuwQFdtSq1UKtQnyTZWC+eHdv7Uygoa+H2k/9uzBVQjDyp9r20LNDNKedWXll7FssT3GRHvqsdJGYSUWqYFA==",
+      "license": "MIT",
+      "dependencies": {
+        "@formatjs/fast-memoize": "3.1.0",
+        "tslib": "^2.8.1"
+      }
+    },
+    "node_modules/@humanfs/core": {
+      "version": "0.19.1",
+      "resolved": "https://registry.npmjs.org/@humanfs/core/-/core-0.19.1.tgz",
+      "integrity": "sha512-5DyQ4+1JEUzejeK1JGICcideyfUbGixgS9jNgex5nqkW+cY7WZhxBigmieN5Qnw9ZosSNVC9KQKyb+GUaGyKUA==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "engines": {
+        "node": ">=18.18.0"
+      }
+    },
+    "node_modules/@humanfs/node": {
+      "version": "0.16.7",
+      "resolved": "https://registry.npmjs.org/@humanfs/node/-/node-0.16.7.tgz",
+      "integrity": "sha512-/zUx+yOsIrG4Y43Eh2peDeKCxlRt/gET6aHfaKpuq267qXdYDFViVHfMaLyygZOnl0kGWxFIgsBy8QFuTLUXEQ==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "dependencies": {
+        "@humanfs/core": "^0.19.1",
+        "@humanwhocodes/retry": "^0.4.0"
+      },
+      "engines": {
+        "node": ">=18.18.0"
+      }
+    },
+    "node_modules/@humanwhocodes/module-importer": {
+      "version": "1.0.1",
+      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
+      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "engines": {
+        "node": ">=12.22"
+      },
+      "funding": {
+        "type": "github",
+        "url": "https://github.com/sponsors/nzakas"
+      }
+    },
+    "node_modules/@humanwhocodes/retry": {
+      "version": "0.4.3",
+      "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.4.3.tgz",
+      "integrity": "sha512-bV0Tgo9K4hfPCek+aMAn81RppFKv2ySDQeMoSZuvTASywNTnVJCArCZE2FWqpvIatKu7VMRLWlR1EazvVhDyhQ==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "engines": {
+        "node": ">=18.18"
+      },
+      "funding": {
+        "type": "github",
+        "url": "https://github.com/sponsors/nzakas"
+      }
+    },
+    "node_modules/@img/colour": {
+      "version": "1.0.0",
+      "resolved": "https://registry.npmjs.org/@img/colour/-/colour-1.0.0.tgz",
+      "integrity": "sha512-A5P/LfWGFSl6nsckYtjw9da+19jB8hkJ6ACTGcDfEJ0aE+l2n2El7dsVM7UVHZQ9s2lmYMWlrS21YLy2IR1LUw==",
+      "license": "MIT",
+      "optional": true,
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@img/sharp-darwin-arm64": {
+      "version": "0.34.5",
+      "resolved": "https://registry.npmjs.org/@img/sharp-darwin-arm64/-/sharp-darwin-arm64-0.34.5.tgz",
+      "integrity": "sha512-imtQ3WMJXbMY4fxb/Ndp6HBTNVtWCUI0WdobyheGf5+ad6xX8VIDO8u2xE4qc/fr08CKG/7dDseFtn6M6g/r3w==",
+      "cpu": [
+        "arm64"
+      ],
+      "license": "Apache-2.0",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "engines": {
+        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      },
+      "optionalDependencies": {
+        "@img/sharp-libvips-darwin-arm64": "1.2.4"
+      }
+    },
+    "node_modules/@img/sharp-darwin-x64": {
+      "version": "0.34.5",
+      "resolved": "https://registry.npmjs.org/@img/sharp-darwin-x64/-/sharp-darwin-x64-0.34.5.tgz",
+      "integrity": "sha512-YNEFAF/4KQ/PeW0N+r+aVVsoIY0/qxxikF2SWdp+NRkmMB7y9LBZAVqQ4yhGCm/H3H270OSykqmQMKLBhBJDEw==",
+      "cpu": [
+        "x64"
+      ],
+      "license": "Apache-2.0",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "engines": {
+        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      },
+      "optionalDependencies": {
+        "@img/sharp-libvips-darwin-x64": "1.2.4"
+      }
+    },
+    "node_modules/@img/sharp-libvips-darwin-arm64": {
+      "version": "1.2.4",
+      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-darwin-arm64/-/sharp-libvips-darwin-arm64-1.2.4.tgz",
+      "integrity": "sha512-zqjjo7RatFfFoP0MkQ51jfuFZBnVE2pRiaydKJ1G/rHZvnsrHAOcQALIi9sA5co5xenQdTugCvtb1cuf78Vf4g==",
+      "cpu": [
+        "arm64"
+      ],
+      "license": "LGPL-3.0-or-later",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      }
+    },
+    "node_modules/@img/sharp-libvips-darwin-x64": {
+      "version": "1.2.4",
+      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-darwin-x64/-/sharp-libvips-darwin-x64-1.2.4.tgz",
+      "integrity": "sha512-1IOd5xfVhlGwX+zXv2N93k0yMONvUlANylbJw1eTah8K/Jtpi15KC+WSiaX/nBmbm2HxRM1gZ0nSdjSsrZbGKg==",
+      "cpu": [
+        "x64"
+      ],
+      "license": "LGPL-3.0-or-later",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      }
+    },
+    "node_modules/@img/sharp-libvips-linux-arm": {
+      "version": "1.2.4",
+      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-arm/-/sharp-libvips-linux-arm-1.2.4.tgz",
+      "integrity": "sha512-bFI7xcKFELdiNCVov8e44Ia4u2byA+l3XtsAj+Q8tfCwO6BQ8iDojYdvoPMqsKDkuoOo+X6HZA0s0q11ANMQ8A==",
+      "cpu": [
+        "arm"
+      ],
+      "license": "LGPL-3.0-or-later",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      }
+    },
+    "node_modules/@img/sharp-libvips-linux-arm64": {
+      "version": "1.2.4",
+      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-arm64/-/sharp-libvips-linux-arm64-1.2.4.tgz",
+      "integrity": "sha512-excjX8DfsIcJ10x1Kzr4RcWe1edC9PquDRRPx3YVCvQv+U5p7Yin2s32ftzikXojb1PIFc/9Mt28/y+iRklkrw==",
+      "cpu": [
+        "arm64"
+      ],
+      "license": "LGPL-3.0-or-later",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      }
+    },
+    "node_modules/@img/sharp-libvips-linux-ppc64": {
+      "version": "1.2.4",
+      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-ppc64/-/sharp-libvips-linux-ppc64-1.2.4.tgz",
+      "integrity": "sha512-FMuvGijLDYG6lW+b/UvyilUWu5Ayu+3r2d1S8notiGCIyYU/76eig1UfMmkZ7vwgOrzKzlQbFSuQfgm7GYUPpA==",
+      "cpu": [
+        "ppc64"
+      ],
+      "license": "LGPL-3.0-or-later",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      }
+    },
+    "node_modules/@img/sharp-libvips-linux-riscv64": {
+      "version": "1.2.4",
+      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-riscv64/-/sharp-libvips-linux-riscv64-1.2.4.tgz",
+      "integrity": "sha512-oVDbcR4zUC0ce82teubSm+x6ETixtKZBh/qbREIOcI3cULzDyb18Sr/Wcyx7NRQeQzOiHTNbZFF1UwPS2scyGA==",
+      "cpu": [
+        "riscv64"
+      ],
+      "license": "LGPL-3.0-or-later",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      }
+    },
+    "node_modules/@img/sharp-libvips-linux-s390x": {
+      "version": "1.2.4",
+      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-s390x/-/sharp-libvips-linux-s390x-1.2.4.tgz",
+      "integrity": "sha512-qmp9VrzgPgMoGZyPvrQHqk02uyjA0/QrTO26Tqk6l4ZV0MPWIW6LTkqOIov+J1yEu7MbFQaDpwdwJKhbJvuRxQ==",
+      "cpu": [
+        "s390x"
+      ],
+      "license": "LGPL-3.0-or-later",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      }
+    },
+    "node_modules/@img/sharp-libvips-linux-x64": {
+      "version": "1.2.4",
+      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-x64/-/sharp-libvips-linux-x64-1.2.4.tgz",
+      "integrity": "sha512-tJxiiLsmHc9Ax1bz3oaOYBURTXGIRDODBqhveVHonrHJ9/+k89qbLl0bcJns+e4t4rvaNBxaEZsFtSfAdquPrw==",
+      "cpu": [
+        "x64"
+      ],
+      "license": "LGPL-3.0-or-later",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      }
+    },
+    "node_modules/@img/sharp-libvips-linuxmusl-arm64": {
+      "version": "1.2.4",
+      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linuxmusl-arm64/-/sharp-libvips-linuxmusl-arm64-1.2.4.tgz",
+      "integrity": "sha512-FVQHuwx1IIuNow9QAbYUzJ+En8KcVm9Lk5+uGUQJHaZmMECZmOlix9HnH7n1TRkXMS0pGxIJokIVB9SuqZGGXw==",
+      "cpu": [
+        "arm64"
+      ],
+      "license": "LGPL-3.0-or-later",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      }
+    },
+    "node_modules/@img/sharp-libvips-linuxmusl-x64": {
+      "version": "1.2.4",
+      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linuxmusl-x64/-/sharp-libvips-linuxmusl-x64-1.2.4.tgz",
+      "integrity": "sha512-+LpyBk7L44ZIXwz/VYfglaX/okxezESc6UxDSoyo2Ks6Jxc4Y7sGjpgU9s4PMgqgjj1gZCylTieNamqA1MF7Dg==",
+      "cpu": [
+        "x64"
+      ],
+      "license": "LGPL-3.0-or-later",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      }
+    },
+    "node_modules/@img/sharp-linux-arm": {
+      "version": "0.34.5",
+      "resolved": "https://registry.npmjs.org/@img/sharp-linux-arm/-/sharp-linux-arm-0.34.5.tgz",
+      "integrity": "sha512-9dLqsvwtg1uuXBGZKsxem9595+ujv0sJ6Vi8wcTANSFpwV/GONat5eCkzQo/1O6zRIkh0m/8+5BjrRr7jDUSZw==",
+      "cpu": [
+        "arm"
+      ],
+      "license": "Apache-2.0",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      },
+      "optionalDependencies": {
+        "@img/sharp-libvips-linux-arm": "1.2.4"
+      }
+    },
+    "node_modules/@img/sharp-linux-arm64": {
+      "version": "0.34.5",
+      "resolved": "https://registry.npmjs.org/@img/sharp-linux-arm64/-/sharp-linux-arm64-0.34.5.tgz",
+      "integrity": "sha512-bKQzaJRY/bkPOXyKx5EVup7qkaojECG6NLYswgktOZjaXecSAeCWiZwwiFf3/Y+O1HrauiE3FVsGxFg8c24rZg==",
+      "cpu": [
+        "arm64"
+      ],
+      "license": "Apache-2.0",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      },
+      "optionalDependencies": {
+        "@img/sharp-libvips-linux-arm64": "1.2.4"
+      }
+    },
+    "node_modules/@img/sharp-linux-ppc64": {
+      "version": "0.34.5",
+      "resolved": "https://registry.npmjs.org/@img/sharp-linux-ppc64/-/sharp-linux-ppc64-0.34.5.tgz",
+      "integrity": "sha512-7zznwNaqW6YtsfrGGDA6BRkISKAAE1Jo0QdpNYXNMHu2+0dTrPflTLNkpc8l7MUP5M16ZJcUvysVWWrMefZquA==",
+      "cpu": [
+        "ppc64"
+      ],
+      "license": "Apache-2.0",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      },
+      "optionalDependencies": {
+        "@img/sharp-libvips-linux-ppc64": "1.2.4"
+      }
+    },
+    "node_modules/@img/sharp-linux-riscv64": {
+      "version": "0.34.5",
+      "resolved": "https://registry.npmjs.org/@img/sharp-linux-riscv64/-/sharp-linux-riscv64-0.34.5.tgz",
+      "integrity": "sha512-51gJuLPTKa7piYPaVs8GmByo7/U7/7TZOq+cnXJIHZKavIRHAP77e3N2HEl3dgiqdD/w0yUfiJnII77PuDDFdw==",
+      "cpu": [
+        "riscv64"
+      ],
+      "license": "Apache-2.0",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      },
+      "optionalDependencies": {
+        "@img/sharp-libvips-linux-riscv64": "1.2.4"
+      }
+    },
+    "node_modules/@img/sharp-linux-s390x": {
+      "version": "0.34.5",
+      "resolved": "https://registry.npmjs.org/@img/sharp-linux-s390x/-/sharp-linux-s390x-0.34.5.tgz",
+      "integrity": "sha512-nQtCk0PdKfho3eC5MrbQoigJ2gd1CgddUMkabUj+rBevs8tZ2cULOx46E7oyX+04WGfABgIwmMC0VqieTiR4jg==",
+      "cpu": [
+        "s390x"
+      ],
+      "license": "Apache-2.0",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      },
+      "optionalDependencies": {
+        "@img/sharp-libvips-linux-s390x": "1.2.4"
+      }
+    },
+    "node_modules/@img/sharp-linux-x64": {
+      "version": "0.34.5",
+      "resolved": "https://registry.npmjs.org/@img/sharp-linux-x64/-/sharp-linux-x64-0.34.5.tgz",
+      "integrity": "sha512-MEzd8HPKxVxVenwAa+JRPwEC7QFjoPWuS5NZnBt6B3pu7EG2Ge0id1oLHZpPJdn3OQK+BQDiw9zStiHBTJQQQQ==",
+      "cpu": [
+        "x64"
+      ],
+      "license": "Apache-2.0",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      },
+      "optionalDependencies": {
+        "@img/sharp-libvips-linux-x64": "1.2.4"
+      }
+    },
+    "node_modules/@img/sharp-linuxmusl-arm64": {
+      "version": "0.34.5",
+      "resolved": "https://registry.npmjs.org/@img/sharp-linuxmusl-arm64/-/sharp-linuxmusl-arm64-0.34.5.tgz",
+      "integrity": "sha512-fprJR6GtRsMt6Kyfq44IsChVZeGN97gTD331weR1ex1c1rypDEABN6Tm2xa1wE6lYb5DdEnk03NZPqA7Id21yg==",
+      "cpu": [
+        "arm64"
+      ],
+      "license": "Apache-2.0",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      },
+      "optionalDependencies": {
+        "@img/sharp-libvips-linuxmusl-arm64": "1.2.4"
+      }
+    },
+    "node_modules/@img/sharp-linuxmusl-x64": {
+      "version": "0.34.5",
+      "resolved": "https://registry.npmjs.org/@img/sharp-linuxmusl-x64/-/sharp-linuxmusl-x64-0.34.5.tgz",
+      "integrity": "sha512-Jg8wNT1MUzIvhBFxViqrEhWDGzqymo3sV7z7ZsaWbZNDLXRJZoRGrjulp60YYtV4wfY8VIKcWidjojlLcWrd8Q==",
+      "cpu": [
+        "x64"
+      ],
+      "license": "Apache-2.0",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      },
+      "optionalDependencies": {
+        "@img/sharp-libvips-linuxmusl-x64": "1.2.4"
+      }
+    },
+    "node_modules/@img/sharp-wasm32": {
+      "version": "0.34.5",
+      "resolved": "https://registry.npmjs.org/@img/sharp-wasm32/-/sharp-wasm32-0.34.5.tgz",
+      "integrity": "sha512-OdWTEiVkY2PHwqkbBI8frFxQQFekHaSSkUIJkwzclWZe64O1X4UlUjqqqLaPbUpMOQk6FBu/HtlGXNblIs0huw==",
+      "cpu": [
+        "wasm32"
+      ],
+      "license": "Apache-2.0 AND LGPL-3.0-or-later AND MIT",
+      "optional": true,
+      "dependencies": {
+        "@emnapi/runtime": "^1.7.0"
+      },
+      "engines": {
+        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
       },
+      "funding": {
+        "url": "https://opencollective.com/libvips"
+      }
+    },
+    "node_modules/@img/sharp-win32-arm64": {
+      "version": "0.34.5",
+      "resolved": "https://registry.npmjs.org/@img/sharp-win32-arm64/-/sharp-win32-arm64-0.34.5.tgz",
+      "integrity": "sha512-WQ3AgWCWYSb2yt+IG8mnC6Jdk9Whs7O0gxphblsLvdhSpSTtmu69ZG1Gkb6NuvxsNACwiPV6cNSZNzt0KPsw7g==",
+      "cpu": [
+        "arm64"
+      ],
+      "license": "Apache-2.0 AND LGPL-3.0-or-later",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
       "engines": {
-        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
+        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
       },
       "funding": {
-        "url": "https://opencollective.com/eslint"
+        "url": "https://opencollective.com/libvips"
+      }
+    },
+    "node_modules/@img/sharp-win32-ia32": {
+      "version": "0.34.5",
+      "resolved": "https://registry.npmjs.org/@img/sharp-win32-ia32/-/sharp-win32-ia32-0.34.5.tgz",
+      "integrity": "sha512-FV9m/7NmeCmSHDD5j4+4pNI8Cp3aW+JvLoXcTUo0IqyjSfAZJ8dIUmijx1qaJsIiU+Hosw6xM5KijAWRJCSgNg==",
+      "cpu": [
+        "ia32"
+      ],
+      "license": "Apache-2.0 AND LGPL-3.0-or-later",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
       },
-      "peerDependencies": {
-        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
+      "funding": {
+        "url": "https://opencollective.com/libvips"
       }
     },
-    "node_modules/@eslint-community/eslint-utils/node_modules/eslint-visitor-keys": {
-      "version": "3.4.3",
-      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
-      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
-      "dev": true,
-      "license": "Apache-2.0",
+    "node_modules/@img/sharp-win32-x64": {
+      "version": "0.34.5",
+      "resolved": "https://registry.npmjs.org/@img/sharp-win32-x64/-/sharp-win32-x64-0.34.5.tgz",
+      "integrity": "sha512-+29YMsqY2/9eFEiW93eqWnuLcWcufowXewwSNIT6UwZdUUCrM3oFjMWH/Z6/TMmb4hlFenmfAVbpWeup2jryCw==",
+      "cpu": [
+        "x64"
+      ],
+      "license": "Apache-2.0 AND LGPL-3.0-or-later",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
       "engines": {
-        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
+        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
       },
       "funding": {
-        "url": "https://opencollective.com/eslint"
+        "url": "https://opencollective.com/libvips"
       }
     },
-    "node_modules/@eslint-community/regexpp": {
-      "version": "4.12.2",
-      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.2.tgz",
-      "integrity": "sha512-EriSTlt5OC9/7SXkRSCAhfSxxoSUgBm33OH+IkwbdpgoqsSsUg7y3uh+IICI/Qg4BBWr3U2i39RpmycbxMq4ew==",
+    "node_modules/@jridgewell/gen-mapping": {
+      "version": "0.3.13",
+      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
+      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@jridgewell/sourcemap-codec": "^1.5.0",
+        "@jridgewell/trace-mapping": "^0.3.24"
+      }
+    },
+    "node_modules/@jridgewell/remapping": {
+      "version": "2.3.5",
+      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
+      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@jridgewell/gen-mapping": "^0.3.5",
+        "@jridgewell/trace-mapping": "^0.3.24"
+      }
+    },
+    "node_modules/@jridgewell/resolve-uri": {
+      "version": "3.1.2",
+      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
+      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6.0.0"
+      }
+    },
+    "node_modules/@jridgewell/sourcemap-codec": {
+      "version": "1.5.5",
+      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
+      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/@jridgewell/trace-mapping": {
+      "version": "0.3.31",
+      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
+      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@jridgewell/resolve-uri": "^3.1.0",
+        "@jridgewell/sourcemap-codec": "^1.4.14"
+      }
+    },
+    "node_modules/@napi-rs/wasm-runtime": {
+      "version": "0.2.12",
+      "resolved": "https://registry.npmjs.org/@napi-rs/wasm-runtime/-/wasm-runtime-0.2.12.tgz",
+      "integrity": "sha512-ZVWUcfwY4E/yPitQJl481FjFo3K22D6qF0DuFH6Y/nbnE11GY5uguDxZMGXPQ8WQ0128MXQD7TnfHyK4oWoIJQ==",
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "dependencies": {
+        "@emnapi/core": "^1.4.3",
+        "@emnapi/runtime": "^1.4.3",
+        "@tybys/wasm-util": "^0.10.0"
+      }
+    },
+    "node_modules/@next/env": {
+      "version": "16.1.6",
+      "resolved": "https://registry.npmjs.org/@next/env/-/env-16.1.6.tgz",
+      "integrity": "sha512-N1ySLuZjnAtN3kFnwhAwPvZah8RJxKasD7x1f8shFqhncnWZn4JMfg37diLNuoHsLAlrDfM3g4mawVdtAG8XLQ==",
+      "license": "MIT"
+    },
+    "node_modules/@next/eslint-plugin-next": {
+      "version": "16.1.6",
+      "resolved": "https://registry.npmjs.org/@next/eslint-plugin-next/-/eslint-plugin-next-16.1.6.tgz",
+      "integrity": "sha512-/Qq3PTagA6+nYVfryAtQ7/9FEr/6YVyvOtl6rZnGsbReGLf0jZU6gkpr1FuChAQpvV46a78p4cmHOVP8mbfSMQ==",
       "dev": true,
       "license": "MIT",
+      "dependencies": {
+        "fast-glob": "3.3.1"
+      }
+    },
+    "node_modules/@next/swc-darwin-arm64": {
+      "version": "16.1.6",
+      "resolved": "https://registry.npmjs.org/@next/swc-darwin-arm64/-/swc-darwin-arm64-16.1.6.tgz",
+      "integrity": "sha512-wTzYulosJr/6nFnqGW7FrG3jfUUlEf8UjGA0/pyypJl42ExdVgC6xJgcXQ+V8QFn6niSG2Pb8+MIG1mZr2vczw==",
+      "cpu": [
+        "arm64"
+      ],
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "engines": {
+        "node": ">= 10"
+      }
+    },
+    "node_modules/@next/swc-darwin-x64": {
+      "version": "16.1.6",
+      "resolved": "https://registry.npmjs.org/@next/swc-darwin-x64/-/swc-darwin-x64-16.1.6.tgz",
+      "integrity": "sha512-BLFPYPDO+MNJsiDWbeVzqvYd4NyuRrEYVB5k2N3JfWncuHAy2IVwMAOlVQDFjj+krkWzhY2apvmekMkfQR0CUQ==",
+      "cpu": [
+        "x64"
+      ],
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "engines": {
+        "node": ">= 10"
+      }
+    },
+    "node_modules/@next/swc-linux-arm64-gnu": {
+      "version": "16.1.6",
+      "resolved": "https://registry.npmjs.org/@next/swc-linux-arm64-gnu/-/swc-linux-arm64-gnu-16.1.6.tgz",
+      "integrity": "sha512-OJYkCd5pj/QloBvoEcJ2XiMnlJkRv9idWA/j0ugSuA34gMT6f5b7vOiCQHVRpvStoZUknhl6/UxOXL4OwtdaBw==",
+      "cpu": [
+        "arm64"
+      ],
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">= 10"
+      }
+    },
+    "node_modules/@next/swc-linux-arm64-musl": {
+      "version": "16.1.6",
+      "resolved": "https://registry.npmjs.org/@next/swc-linux-arm64-musl/-/swc-linux-arm64-musl-16.1.6.tgz",
+      "integrity": "sha512-S4J2v+8tT3NIO9u2q+S0G5KdvNDjXfAv06OhfOzNDaBn5rw84DGXWndOEB7d5/x852A20sW1M56vhC/tRVbccQ==",
+      "cpu": [
+        "arm64"
+      ],
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">= 10"
+      }
+    },
+    "node_modules/@next/swc-linux-x64-gnu": {
+      "version": "16.1.6",
+      "resolved": "https://registry.npmjs.org/@next/swc-linux-x64-gnu/-/swc-linux-x64-gnu-16.1.6.tgz",
+      "integrity": "sha512-2eEBDkFlMMNQnkTyPBhQOAyn2qMxyG2eE7GPH2WIDGEpEILcBPI/jdSv4t6xupSP+ot/jkfrCShLAa7+ZUPcJQ==",
+      "cpu": [
+        "x64"
+      ],
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">= 10"
+      }
+    },
+    "node_modules/@next/swc-linux-x64-musl": {
+      "version": "16.1.6",
+      "resolved": "https://registry.npmjs.org/@next/swc-linux-x64-musl/-/swc-linux-x64-musl-16.1.6.tgz",
+      "integrity": "sha512-oicJwRlyOoZXVlxmIMaTq7f8pN9QNbdes0q2FXfRsPhfCi8n8JmOZJm5oo1pwDaFbnnD421rVU409M3evFbIqg==",
+      "cpu": [
+        "x64"
+      ],
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">= 10"
+      }
+    },
+    "node_modules/@next/swc-win32-arm64-msvc": {
+      "version": "16.1.6",
+      "resolved": "https://registry.npmjs.org/@next/swc-win32-arm64-msvc/-/swc-win32-arm64-msvc-16.1.6.tgz",
+      "integrity": "sha512-gQmm8izDTPgs+DCWH22kcDmuUp7NyiJgEl18bcr8irXA5N2m2O+JQIr6f3ct42GOs9c0h8QF3L5SzIxcYAAXXw==",
+      "cpu": [
+        "arm64"
+      ],
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": ">= 10"
+      }
+    },
+    "node_modules/@next/swc-win32-x64-msvc": {
+      "version": "16.1.6",
+      "resolved": "https://registry.npmjs.org/@next/swc-win32-x64-msvc/-/swc-win32-x64-msvc-16.1.6.tgz",
+      "integrity": "sha512-NRfO39AIrzBnixKbjuo2YiYhB6o9d8v/ymU9m/Xk8cyVk+k7XylniXkHwjs4s70wedVffc6bQNbufk5v0xEm0A==",
+      "cpu": [
+        "x64"
+      ],
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
       "engines": {
-        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
+        "node": ">= 10"
       }
     },
-    "node_modules/@eslint/config-array": {
-      "version": "0.21.1",
-      "resolved": "https://registry.npmjs.org/@eslint/config-array/-/config-array-0.21.1.tgz",
-      "integrity": "sha512-aw1gNayWpdI/jSYVgzN5pL0cfzU02GT3NBpeT/DXbx1/1x7ZKxFPd9bwrzygx/qiwIQiJ1sw/zD8qY/kRvlGHA==",
+    "node_modules/@nodelib/fs.scandir": {
+      "version": "2.1.5",
+      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
+      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
       "dev": true,
-      "license": "Apache-2.0",
+      "license": "MIT",
       "dependencies": {
-        "@eslint/object-schema": "^2.1.7",
-        "debug": "^4.3.1",
-        "minimatch": "^3.1.2"
+        "@nodelib/fs.stat": "2.0.5",
+        "run-parallel": "^1.1.9"
       },
       "engines": {
-        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
+        "node": ">= 8"
       }
     },
-    "node_modules/@eslint/config-helpers": {
-      "version": "0.4.2",
-      "resolved": "https://registry.npmjs.org/@eslint/config-helpers/-/config-helpers-0.4.2.tgz",
-      "integrity": "sha512-gBrxN88gOIf3R7ja5K9slwNayVcZgK6SOUORm2uBzTeIEfeVaIhOpCtTox3P6R7o2jLFwLFTLnC7kU/RGcYEgw==",
+    "node_modules/@nodelib/fs.stat": {
+      "version": "2.0.5",
+      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
+      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
       "dev": true,
-      "license": "Apache-2.0",
-      "dependencies": {
-        "@eslint/core": "^0.17.0"
-      },
+      "license": "MIT",
       "engines": {
-        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
+        "node": ">= 8"
       }
     },
-    "node_modules/@eslint/core": {
-      "version": "0.17.0",
-      "resolved": "https://registry.npmjs.org/@eslint/core/-/core-0.17.0.tgz",
-      "integrity": "sha512-yL/sLrpmtDaFEiUj1osRP4TI2MDz1AddJL+jZ7KSqvBuliN4xqYY54IfdN8qD8Toa6g1iloph1fxQNkjOxrrpQ==",
+    "node_modules/@nodelib/fs.walk": {
+      "version": "1.2.8",
+      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
+      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
       "dev": true,
-      "license": "Apache-2.0",
+      "license": "MIT",
       "dependencies": {
-        "@types/json-schema": "^7.0.15"
+        "@nodelib/fs.scandir": "2.1.5",
+        "fastq": "^1.6.0"
       },
       "engines": {
-        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
+        "node": ">= 8"
       }
     },
-    "node_modules/@eslint/eslintrc": {
-      "version": "3.3.3",
-      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-3.3.3.tgz",
-      "integrity": "sha512-Kr+LPIUVKz2qkx1HAMH8q1q6azbqBAsXJUxBl/ODDuVPX45Z9DfwB8tPjTi6nNZ8BuM3nbJxC5zCAg5elnBUTQ==",
+    "node_modules/@nolyfill/is-core-module": {
+      "version": "1.0.39",
+      "resolved": "https://registry.npmjs.org/@nolyfill/is-core-module/-/is-core-module-1.0.39.tgz",
+      "integrity": "sha512-nn5ozdjYQpUCZlWGuxcJY/KpxkWQs4DcbMCmKojjyrYDEAGy4Ce19NN4v5MduafTwJlbKc99UA8YhSVqq9yPZA==",
       "dev": true,
       "license": "MIT",
-      "dependencies": {
-        "ajv": "^6.12.4",
-        "debug": "^4.3.2",
-        "espree": "^10.0.1",
-        "globals": "^14.0.0",
-        "ignore": "^5.2.0",
-        "import-fresh": "^3.2.1",
-        "js-yaml": "^4.1.1",
-        "minimatch": "^3.1.2",
-        "strip-json-comments": "^3.1.1"
-      },
       "engines": {
-        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
-      },
-      "funding": {
-        "url": "https://opencollective.com/eslint"
+        "node": ">=12.4.0"
       }
     },
-    "node_modules/@eslint/js": {
-      "version": "9.39.3",
-      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-9.39.3.tgz",
-      "integrity": "sha512-1B1VkCq6FuUNlQvlBYb+1jDu/gV297TIs/OeiaSR9l1H27SVW55ONE1e1Vp16NqP683+xEGzxYtv4XCiDPaQiw==",
-      "dev": true,
+    "node_modules/@panva/hkdf": {
+      "version": "1.2.1",
+      "resolved": "https://registry.npmjs.org/@panva/hkdf/-/hkdf-1.2.1.tgz",
+      "integrity": "sha512-6oclG6Y3PiDFcoyk8srjLfVKyMfVCKJ27JwNPViuXziFpmdz+MZnZN/aKY0JGXgYuO/VghU0jcOAZgWXZ1Dmrw==",
       "license": "MIT",
-      "engines": {
-        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
-      },
       "funding": {
-        "url": "https://eslint.org/donate"
-      }
-    },
-    "node_modules/@eslint/object-schema": {
-      "version": "2.1.7",
-      "resolved": "https://registry.npmjs.org/@eslint/object-schema/-/object-schema-2.1.7.tgz",
-      "integrity": "sha512-VtAOaymWVfZcmZbp6E2mympDIHvyjXs/12LqWYjVw6qjrfF+VK+fyG33kChz3nnK+SU5/NeHOqrTEHS8sXO3OA==",
-      "dev": true,
-      "license": "Apache-2.0",
-      "engines": {
-        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
+        "url": "https://github.com/sponsors/panva"
       }
     },
-    "node_modules/@eslint/plugin-kit": {
-      "version": "0.4.1",
-      "resolved": "https://registry.npmjs.org/@eslint/plugin-kit/-/plugin-kit-0.4.1.tgz",
-      "integrity": "sha512-43/qtrDUokr7LJqoF2c3+RInu/t4zfrpYdoSDfYyhg52rwLV6TnOvdG4fXm7IkSB3wErkcmJS9iEhjVtOSEjjA==",
-      "dev": true,
-      "license": "Apache-2.0",
+    "node_modules/@parcel/watcher": {
+      "version": "2.5.6",
+      "resolved": "https://registry.npmjs.org/@parcel/watcher/-/watcher-2.5.6.tgz",
+      "integrity": "sha512-tmmZ3lQxAe/k/+rNnXQRawJ4NjxO2hqiOLTHvWchtGZULp4RyFeh6aU4XdOYBFe2KE1oShQTv4AblOs2iOrNnQ==",
+      "hasInstallScript": true,
+      "license": "MIT",
       "dependencies": {
-        "@eslint/core": "^0.17.0",
-        "levn": "^0.4.1"
+        "detect-libc": "^2.0.3",
+        "is-glob": "^4.0.3",
+        "node-addon-api": "^7.0.0",
+        "picomatch": "^4.0.3"
       },
       "engines": {
-        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
-      }
-    },
-    "node_modules/@humanfs/core": {
-      "version": "0.19.1",
-      "resolved": "https://registry.npmjs.org/@humanfs/core/-/core-0.19.1.tgz",
-      "integrity": "sha512-5DyQ4+1JEUzejeK1JGICcideyfUbGixgS9jNgex5nqkW+cY7WZhxBigmieN5Qnw9ZosSNVC9KQKyb+GUaGyKUA==",
-      "dev": true,
-      "license": "Apache-2.0",
+        "node": ">= 10.0.0"
+      },
+      "funding": {
+        "type": "opencollective",
+        "url": "https://opencollective.com/parcel"
+      },
+      "optionalDependencies": {
+        "@parcel/watcher-android-arm64": "2.5.6",
+        "@parcel/watcher-darwin-arm64": "2.5.6",
+        "@parcel/watcher-darwin-x64": "2.5.6",
+        "@parcel/watcher-freebsd-x64": "2.5.6",
+        "@parcel/watcher-linux-arm-glibc": "2.5.6",
+        "@parcel/watcher-linux-arm-musl": "2.5.6",
+        "@parcel/watcher-linux-arm64-glibc": "2.5.6",
+        "@parcel/watcher-linux-arm64-musl": "2.5.6",
+        "@parcel/watcher-linux-x64-glibc": "2.5.6",
+        "@parcel/watcher-linux-x64-musl": "2.5.6",
+        "@parcel/watcher-win32-arm64": "2.5.6",
+        "@parcel/watcher-win32-ia32": "2.5.6",
+        "@parcel/watcher-win32-x64": "2.5.6"
+      }
+    },
+    "node_modules/@parcel/watcher-android-arm64": {
+      "version": "2.5.6",
+      "resolved": "https://registry.npmjs.org/@parcel/watcher-android-arm64/-/watcher-android-arm64-2.5.6.tgz",
+      "integrity": "sha512-YQxSS34tPF/6ZG7r/Ih9xy+kP/WwediEUsqmtf0cuCV5TPPKw/PQHRhueUo6JdeFJaqV3pyjm0GdYjZotbRt/A==",
+      "cpu": [
+        "arm64"
+      ],
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ],
       "engines": {
-        "node": ">=18.18.0"
+        "node": ">= 10.0.0"
+      },
+      "funding": {
+        "type": "opencollective",
+        "url": "https://opencollective.com/parcel"
       }
     },
-    "node_modules/@humanfs/node": {
-      "version": "0.16.7",
-      "resolved": "https://registry.npmjs.org/@humanfs/node/-/node-0.16.7.tgz",
-      "integrity": "sha512-/zUx+yOsIrG4Y43Eh2peDeKCxlRt/gET6aHfaKpuq267qXdYDFViVHfMaLyygZOnl0kGWxFIgsBy8QFuTLUXEQ==",
-      "dev": true,
-      "license": "Apache-2.0",
-      "dependencies": {
-        "@humanfs/core": "^0.19.1",
-        "@humanwhocodes/retry": "^0.4.0"
-      },
+    "node_modules/@parcel/watcher-darwin-arm64": {
+      "version": "2.5.6",
+      "resolved": "https://registry.npmjs.org/@parcel/watcher-darwin-arm64/-/watcher-darwin-arm64-2.5.6.tgz",
+      "integrity": "sha512-Z2ZdrnwyXvvvdtRHLmM4knydIdU9adO3D4n/0cVipF3rRiwP+3/sfzpAwA/qKFL6i1ModaabkU7IbpeMBgiVEA==",
+      "cpu": [
+        "arm64"
+      ],
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
       "engines": {
-        "node": ">=18.18.0"
+        "node": ">= 10.0.0"
+      },
+      "funding": {
+        "type": "opencollective",
+        "url": "https://opencollective.com/parcel"
       }
     },
-    "node_modules/@humanwhocodes/module-importer": {
-      "version": "1.0.1",
-      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
-      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
-      "dev": true,
-      "license": "Apache-2.0",
+    "node_modules/@parcel/watcher-darwin-x64": {
+      "version": "2.5.6",
+      "resolved": "https://registry.npmjs.org/@parcel/watcher-darwin-x64/-/watcher-darwin-x64-2.5.6.tgz",
+      "integrity": "sha512-HgvOf3W9dhithcwOWX9uDZyn1lW9R+7tPZ4sug+NGrGIo4Rk1hAXLEbcH1TQSqxts0NYXXlOWqVpvS1SFS4fRg==",
+      "cpu": [
+        "x64"
+      ],
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
       "engines": {
-        "node": ">=12.22"
+        "node": ">= 10.0.0"
       },
       "funding": {
-        "type": "github",
-        "url": "https://github.com/sponsors/nzakas"
+        "type": "opencollective",
+        "url": "https://opencollective.com/parcel"
       }
     },
-    "node_modules/@humanwhocodes/retry": {
-      "version": "0.4.3",
-      "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.4.3.tgz",
-      "integrity": "sha512-bV0Tgo9K4hfPCek+aMAn81RppFKv2ySDQeMoSZuvTASywNTnVJCArCZE2FWqpvIatKu7VMRLWlR1EazvVhDyhQ==",
-      "dev": true,
-      "license": "Apache-2.0",
+    "node_modules/@parcel/watcher-freebsd-x64": {
+      "version": "2.5.6",
+      "resolved": "https://registry.npmjs.org/@parcel/watcher-freebsd-x64/-/watcher-freebsd-x64-2.5.6.tgz",
+      "integrity": "sha512-vJVi8yd/qzJxEKHkeemh7w3YAn6RJCtYlE4HPMoVnCpIXEzSrxErBW5SJBgKLbXU3WdIpkjBTeUNtyBVn8TRng==",
+      "cpu": [
+        "x64"
+      ],
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "freebsd"
+      ],
       "engines": {
-        "node": ">=18.18"
+        "node": ">= 10.0.0"
       },
       "funding": {
-        "type": "github",
-        "url": "https://github.com/sponsors/nzakas"
+        "type": "opencollective",
+        "url": "https://opencollective.com/parcel"
       }
     },
-    "node_modules/@img/colour": {
-      "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/@img/colour/-/colour-1.0.0.tgz",
-      "integrity": "sha512-A5P/LfWGFSl6nsckYtjw9da+19jB8hkJ6ACTGcDfEJ0aE+l2n2El7dsVM7UVHZQ9s2lmYMWlrS21YLy2IR1LUw==",
+    "node_modules/@parcel/watcher-linux-arm-glibc": {
+      "version": "2.5.6",
+      "resolved": "https://registry.npmjs.org/@parcel/watcher-linux-arm-glibc/-/watcher-linux-arm-glibc-2.5.6.tgz",
+      "integrity": "sha512-9JiYfB6h6BgV50CCfasfLf/uvOcJskMSwcdH1PHH9rvS1IrNy8zad6IUVPVUfmXr+u+Km9IxcfMLzgdOudz9EQ==",
+      "cpu": [
+        "arm"
+      ],
       "license": "MIT",
       "optional": true,
+      "os": [
+        "linux"
+      ],
       "engines": {
-        "node": ">=18"
+        "node": ">= 10.0.0"
+      },
+      "funding": {
+        "type": "opencollective",
+        "url": "https://opencollective.com/parcel"
       }
     },
-    "node_modules/@img/sharp-darwin-arm64": {
-      "version": "0.34.5",
-      "resolved": "https://registry.npmjs.org/@img/sharp-darwin-arm64/-/sharp-darwin-arm64-0.34.5.tgz",
-      "integrity": "sha512-imtQ3WMJXbMY4fxb/Ndp6HBTNVtWCUI0WdobyheGf5+ad6xX8VIDO8u2xE4qc/fr08CKG/7dDseFtn6M6g/r3w==",
+    "node_modules/@parcel/watcher-linux-arm-musl": {
+      "version": "2.5.6",
+      "resolved": "https://registry.npmjs.org/@parcel/watcher-linux-arm-musl/-/watcher-linux-arm-musl-2.5.6.tgz",
+      "integrity": "sha512-Ve3gUCG57nuUUSyjBq/MAM0CzArtuIOxsBdQ+ftz6ho8n7s1i9E1Nmk/xmP323r2YL0SONs1EuwqBp2u1k5fxg==",
       "cpu": [
-        "arm64"
+        "arm"
       ],
-      "license": "Apache-2.0",
+      "license": "MIT",
       "optional": true,
       "os": [
-        "darwin"
+        "linux"
       ],
       "engines": {
-        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
+        "node": ">= 10.0.0"
       },
       "funding": {
-        "url": "https://opencollective.com/libvips"
-      },
-      "optionalDependencies": {
-        "@img/sharp-libvips-darwin-arm64": "1.2.4"
+        "type": "opencollective",
+        "url": "https://opencollective.com/parcel"
       }
     },
-    "node_modules/@img/sharp-darwin-x64": {
-      "version": "0.34.5",
-      "resolved": "https://registry.npmjs.org/@img/sharp-darwin-x64/-/sharp-darwin-x64-0.34.5.tgz",
-      "integrity": "sha512-YNEFAF/4KQ/PeW0N+r+aVVsoIY0/qxxikF2SWdp+NRkmMB7y9LBZAVqQ4yhGCm/H3H270OSykqmQMKLBhBJDEw==",
+    "node_modules/@parcel/watcher-linux-arm64-glibc": {
+      "version": "2.5.6",
+      "resolved": "https://registry.npmjs.org/@parcel/watcher-linux-arm64-glibc/-/watcher-linux-arm64-glibc-2.5.6.tgz",
+      "integrity": "sha512-f2g/DT3NhGPdBmMWYoxixqYr3v/UXcmLOYy16Bx0TM20Tchduwr4EaCbmxh1321TABqPGDpS8D/ggOTaljijOA==",
       "cpu": [
-        "x64"
+        "arm64"
       ],
-      "license": "Apache-2.0",
+      "license": "MIT",
       "optional": true,
       "os": [
-        "darwin"
+        "linux"
       ],
       "engines": {
-        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
+        "node": ">= 10.0.0"
       },
       "funding": {
-        "url": "https://opencollective.com/libvips"
-      },
-      "optionalDependencies": {
-        "@img/sharp-libvips-darwin-x64": "1.2.4"
+        "type": "opencollective",
+        "url": "https://opencollective.com/parcel"
       }
     },
-    "node_modules/@img/sharp-libvips-darwin-arm64": {
-      "version": "1.2.4",
-      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-darwin-arm64/-/sharp-libvips-darwin-arm64-1.2.4.tgz",
-      "integrity": "sha512-zqjjo7RatFfFoP0MkQ51jfuFZBnVE2pRiaydKJ1G/rHZvnsrHAOcQALIi9sA5co5xenQdTugCvtb1cuf78Vf4g==",
+    "node_modules/@parcel/watcher-linux-arm64-musl": {
+      "version": "2.5.6",
+      "resolved": "https://registry.npmjs.org/@parcel/watcher-linux-arm64-musl/-/watcher-linux-arm64-musl-2.5.6.tgz",
+      "integrity": "sha512-qb6naMDGlbCwdhLj6hgoVKJl2odL34z2sqkC7Z6kzir8b5W65WYDpLB6R06KabvZdgoHI/zxke4b3zR0wAbDTA==",
       "cpu": [
         "arm64"
       ],
-      "license": "LGPL-3.0-or-later",
+      "license": "MIT",
       "optional": true,
       "os": [
-        "darwin"
+        "linux"
       ],
+      "engines": {
+        "node": ">= 10.0.0"
+      },
       "funding": {
-        "url": "https://opencollective.com/libvips"
+        "type": "opencollective",
+        "url": "https://opencollective.com/parcel"
       }
     },
-    "node_modules/@img/sharp-libvips-darwin-x64": {
-      "version": "1.2.4",
-      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-darwin-x64/-/sharp-libvips-darwin-x64-1.2.4.tgz",
-      "integrity": "sha512-1IOd5xfVhlGwX+zXv2N93k0yMONvUlANylbJw1eTah8K/Jtpi15KC+WSiaX/nBmbm2HxRM1gZ0nSdjSsrZbGKg==",
+    "node_modules/@parcel/watcher-linux-x64-glibc": {
+      "version": "2.5.6",
+      "resolved": "https://registry.npmjs.org/@parcel/watcher-linux-x64-glibc/-/watcher-linux-x64-glibc-2.5.6.tgz",
+      "integrity": "sha512-kbT5wvNQlx7NaGjzPFu8nVIW1rWqV780O7ZtkjuWaPUgpv2NMFpjYERVi0UYj1msZNyCzGlaCWEtzc+exjMGbQ==",
       "cpu": [
         "x64"
       ],
-      "license": "LGPL-3.0-or-later",
+      "license": "MIT",
       "optional": true,
       "os": [
-        "darwin"
+        "linux"
       ],
+      "engines": {
+        "node": ">= 10.0.0"
+      },
       "funding": {
-        "url": "https://opencollective.com/libvips"
+        "type": "opencollective",
+        "url": "https://opencollective.com/parcel"
       }
     },
-    "node_modules/@img/sharp-libvips-linux-arm": {
-      "version": "1.2.4",
-      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-arm/-/sharp-libvips-linux-arm-1.2.4.tgz",
-      "integrity": "sha512-bFI7xcKFELdiNCVov8e44Ia4u2byA+l3XtsAj+Q8tfCwO6BQ8iDojYdvoPMqsKDkuoOo+X6HZA0s0q11ANMQ8A==",
+    "node_modules/@parcel/watcher-linux-x64-musl": {
+      "version": "2.5.6",
+      "resolved": "https://registry.npmjs.org/@parcel/watcher-linux-x64-musl/-/watcher-linux-x64-musl-2.5.6.tgz",
+      "integrity": "sha512-1JRFeC+h7RdXwldHzTsmdtYR/Ku8SylLgTU/reMuqdVD7CtLwf0VR1FqeprZ0eHQkO0vqsbvFLXUmYm/uNKJBg==",
       "cpu": [
-        "arm"
+        "x64"
       ],
-      "license": "LGPL-3.0-or-later",
+      "license": "MIT",
       "optional": true,
       "os": [
         "linux"
       ],
+      "engines": {
+        "node": ">= 10.0.0"
+      },
       "funding": {
-        "url": "https://opencollective.com/libvips"
+        "type": "opencollective",
+        "url": "https://opencollective.com/parcel"
       }
     },
-    "node_modules/@img/sharp-libvips-linux-arm64": {
-      "version": "1.2.4",
-      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-arm64/-/sharp-libvips-linux-arm64-1.2.4.tgz",
-      "integrity": "sha512-excjX8DfsIcJ10x1Kzr4RcWe1edC9PquDRRPx3YVCvQv+U5p7Yin2s32ftzikXojb1PIFc/9Mt28/y+iRklkrw==",
+    "node_modules/@parcel/watcher-win32-arm64": {
+      "version": "2.5.6",
+      "resolved": "https://registry.npmjs.org/@parcel/watcher-win32-arm64/-/watcher-win32-arm64-2.5.6.tgz",
+      "integrity": "sha512-3ukyebjc6eGlw9yRt678DxVF7rjXatWiHvTXqphZLvo7aC5NdEgFufVwjFfY51ijYEWpXbqF5jtrK275z52D4Q==",
       "cpu": [
         "arm64"
       ],
-      "license": "LGPL-3.0-or-later",
+      "license": "MIT",
       "optional": true,
       "os": [
-        "linux"
+        "win32"
       ],
+      "engines": {
+        "node": ">= 10.0.0"
+      },
       "funding": {
-        "url": "https://opencollective.com/libvips"
+        "type": "opencollective",
+        "url": "https://opencollective.com/parcel"
       }
     },
-    "node_modules/@img/sharp-libvips-linux-ppc64": {
-      "version": "1.2.4",
-      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-ppc64/-/sharp-libvips-linux-ppc64-1.2.4.tgz",
-      "integrity": "sha512-FMuvGijLDYG6lW+b/UvyilUWu5Ayu+3r2d1S8notiGCIyYU/76eig1UfMmkZ7vwgOrzKzlQbFSuQfgm7GYUPpA==",
+    "node_modules/@parcel/watcher-win32-ia32": {
+      "version": "2.5.6",
+      "resolved": "https://registry.npmjs.org/@parcel/watcher-win32-ia32/-/watcher-win32-ia32-2.5.6.tgz",
+      "integrity": "sha512-k35yLp1ZMwwee3Ez/pxBi5cf4AoBKYXj00CZ80jUz5h8prpiaQsiRPKQMxoLstNuqe2vR4RNPEAEcjEFzhEz/g==",
       "cpu": [
-        "ppc64"
+        "ia32"
       ],
-      "license": "LGPL-3.0-or-later",
+      "license": "MIT",
       "optional": true,
       "os": [
-        "linux"
+        "win32"
       ],
+      "engines": {
+        "node": ">= 10.0.0"
+      },
       "funding": {
-        "url": "https://opencollective.com/libvips"
+        "type": "opencollective",
+        "url": "https://opencollective.com/parcel"
       }
     },
-    "node_modules/@img/sharp-libvips-linux-riscv64": {
-      "version": "1.2.4",
-      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-riscv64/-/sharp-libvips-linux-riscv64-1.2.4.tgz",
-      "integrity": "sha512-oVDbcR4zUC0ce82teubSm+x6ETixtKZBh/qbREIOcI3cULzDyb18Sr/Wcyx7NRQeQzOiHTNbZFF1UwPS2scyGA==",
+    "node_modules/@parcel/watcher-win32-x64": {
+      "version": "2.5.6",
+      "resolved": "https://registry.npmjs.org/@parcel/watcher-win32-x64/-/watcher-win32-x64-2.5.6.tgz",
+      "integrity": "sha512-hbQlYcCq5dlAX9Qx+kFb0FHue6vbjlf0FrNzSKdYK2APUf7tGfGxQCk2ihEREmbR6ZMc0MVAD5RIX/41gpUzTw==",
       "cpu": [
-        "riscv64"
+        "x64"
       ],
-      "license": "LGPL-3.0-or-later",
+      "license": "MIT",
       "optional": true,
       "os": [
-        "linux"
+        "win32"
       ],
+      "engines": {
+        "node": ">= 10.0.0"
+      },
       "funding": {
-        "url": "https://opencollective.com/libvips"
+        "type": "opencollective",
+        "url": "https://opencollective.com/parcel"
       }
     },
-    "node_modules/@img/sharp-libvips-linux-s390x": {
-      "version": "1.2.4",
-      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-s390x/-/sharp-libvips-linux-s390x-1.2.4.tgz",
-      "integrity": "sha512-qmp9VrzgPgMoGZyPvrQHqk02uyjA0/QrTO26Tqk6l4ZV0MPWIW6LTkqOIov+J1yEu7MbFQaDpwdwJKhbJvuRxQ==",
+    "node_modules/@parcel/watcher/node_modules/picomatch": {
+      "version": "4.0.3",
+      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
+      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
+      "license": "MIT",
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/jonschlinkert"
+      }
+    },
+    "node_modules/@playwright/test": {
+      "version": "1.58.2",
+      "resolved": "https://registry.npmjs.org/@playwright/test/-/test-1.58.2.tgz",
+      "integrity": "sha512-akea+6bHYBBfA9uQqSYmlJXn61cTa+jbO87xVLCWbTqbWadRVmhxlXATaOjOgcBaWU4ePo0wB41KMFv3o35IXA==",
+      "devOptional": true,
+      "license": "Apache-2.0",
+      "dependencies": {
+        "playwright": "1.58.2"
+      },
+      "bin": {
+        "playwright": "cli.js"
+      },
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@prisma/client": {
+      "version": "5.22.0",
+      "resolved": "https://registry.npmjs.org/@prisma/client/-/client-5.22.0.tgz",
+      "integrity": "sha512-M0SVXfyHnQREBKxCgyo7sffrKttwE6R8PMq330MIUF0pTwjUhLbW84pFDlf06B27XyCR++VtjugEnIHdr07SVA==",
+      "hasInstallScript": true,
+      "license": "Apache-2.0",
+      "engines": {
+        "node": ">=16.13"
+      },
+      "peerDependencies": {
+        "prisma": "*"
+      },
+      "peerDependenciesMeta": {
+        "prisma": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/@prisma/debug": {
+      "version": "5.22.0",
+      "resolved": "https://registry.npmjs.org/@prisma/debug/-/debug-5.22.0.tgz",
+      "integrity": "sha512-AUt44v3YJeggO2ZU5BkXI7M4hu9BF2zzH2iF2V5pyXT/lRTyWiElZ7It+bRH1EshoMRxHgpYg4VB6rCM+mG5jQ==",
+      "license": "Apache-2.0"
+    },
+    "node_modules/@prisma/engines": {
+      "version": "5.22.0",
+      "resolved": "https://registry.npmjs.org/@prisma/engines/-/engines-5.22.0.tgz",
+      "integrity": "sha512-UNjfslWhAt06kVL3CjkuYpHAWSO6L4kDCVPegV6itt7nD1kSJavd3vhgAEhjglLJJKEdJ7oIqDJ+yHk6qO8gPA==",
+      "hasInstallScript": true,
+      "license": "Apache-2.0",
+      "dependencies": {
+        "@prisma/debug": "5.22.0",
+        "@prisma/engines-version": "5.22.0-44.605197351a3c8bdd595af2d2a9bc3025bca48ea2",
+        "@prisma/fetch-engine": "5.22.0",
+        "@prisma/get-platform": "5.22.0"
+      }
+    },
+    "node_modules/@prisma/engines-version": {
+      "version": "5.22.0-44.605197351a3c8bdd595af2d2a9bc3025bca48ea2",
+      "resolved": "https://registry.npmjs.org/@prisma/engines-version/-/engines-version-5.22.0-44.605197351a3c8bdd595af2d2a9bc3025bca48ea2.tgz",
+      "integrity": "sha512-2PTmxFR2yHW/eB3uqWtcgRcgAbG1rwG9ZriSvQw+nnb7c4uCr3RAcGMb6/zfE88SKlC1Nj2ziUvc96Z379mHgQ==",
+      "license": "Apache-2.0"
+    },
+    "node_modules/@prisma/fetch-engine": {
+      "version": "5.22.0",
+      "resolved": "https://registry.npmjs.org/@prisma/fetch-engine/-/fetch-engine-5.22.0.tgz",
+      "integrity": "sha512-bkrD/Mc2fSvkQBV5EpoFcZ87AvOgDxbG99488a5cexp5Ccny+UM6MAe/UFkUC0wLYD9+9befNOqGiIJhhq+HbA==",
+      "license": "Apache-2.0",
+      "dependencies": {
+        "@prisma/debug": "5.22.0",
+        "@prisma/engines-version": "5.22.0-44.605197351a3c8bdd595af2d2a9bc3025bca48ea2",
+        "@prisma/get-platform": "5.22.0"
+      }
+    },
+    "node_modules/@prisma/get-platform": {
+      "version": "5.22.0",
+      "resolved": "https://registry.npmjs.org/@prisma/get-platform/-/get-platform-5.22.0.tgz",
+      "integrity": "sha512-pHhpQdr1UPFpt+zFfnPazhulaZYCUqeIcPpJViYoq9R+D/yw4fjE+CtnsnKzPYm0ddUbeXUzjGVGIRVgPDCk4Q==",
+      "license": "Apache-2.0",
+      "dependencies": {
+        "@prisma/debug": "5.22.0"
+      }
+    },
+    "node_modules/@rollup/rollup-android-arm-eabi": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.59.0.tgz",
+      "integrity": "sha512-upnNBkA6ZH2VKGcBj9Fyl9IGNPULcjXRlg0LLeaioQWueH30p6IXtJEbKAgvyv+mJaMxSm1l6xwDXYjpEMiLMg==",
       "cpu": [
-        "s390x"
+        "arm"
       ],
-      "license": "LGPL-3.0-or-later",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
-        "linux"
+        "android"
+      ]
+    },
+    "node_modules/@rollup/rollup-android-arm64": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.59.0.tgz",
+      "integrity": "sha512-hZ+Zxj3SySm4A/DylsDKZAeVg0mvi++0PYVceVyX7hemkw7OreKdCvW2oQ3T1FMZvCaQXqOTHb8qmBShoqk69Q==",
+      "cpu": [
+        "arm64"
       ],
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      }
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ]
     },
-    "node_modules/@img/sharp-libvips-linux-x64": {
-      "version": "1.2.4",
-      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-x64/-/sharp-libvips-linux-x64-1.2.4.tgz",
-      "integrity": "sha512-tJxiiLsmHc9Ax1bz3oaOYBURTXGIRDODBqhveVHonrHJ9/+k89qbLl0bcJns+e4t4rvaNBxaEZsFtSfAdquPrw==",
+    "node_modules/@rollup/rollup-darwin-arm64": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.59.0.tgz",
+      "integrity": "sha512-W2Psnbh1J8ZJw0xKAd8zdNgF9HRLkdWwwdWqubSVk0pUuQkoHnv7rx4GiF9rT4t5DIZGAsConRE3AxCdJ4m8rg==",
       "cpu": [
-        "x64"
+        "arm64"
       ],
-      "license": "LGPL-3.0-or-later",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
-        "linux"
+        "darwin"
+      ]
+    },
+    "node_modules/@rollup/rollup-darwin-x64": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.59.0.tgz",
+      "integrity": "sha512-ZW2KkwlS4lwTv7ZVsYDiARfFCnSGhzYPdiOU4IM2fDbL+QGlyAbjgSFuqNRbSthybLbIJ915UtZBtmuLrQAT/w==",
+      "cpu": [
+        "x64"
       ],
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      }
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ]
     },
-    "node_modules/@img/sharp-libvips-linuxmusl-arm64": {
-      "version": "1.2.4",
-      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linuxmusl-arm64/-/sharp-libvips-linuxmusl-arm64-1.2.4.tgz",
-      "integrity": "sha512-FVQHuwx1IIuNow9QAbYUzJ+En8KcVm9Lk5+uGUQJHaZmMECZmOlix9HnH7n1TRkXMS0pGxIJokIVB9SuqZGGXw==",
+    "node_modules/@rollup/rollup-freebsd-arm64": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.59.0.tgz",
+      "integrity": "sha512-EsKaJ5ytAu9jI3lonzn3BgG8iRBjV4LxZexygcQbpiU0wU0ATxhNVEpXKfUa0pS05gTcSDMKpn3Sx+QB9RlTTA==",
       "cpu": [
         "arm64"
       ],
-      "license": "LGPL-3.0-or-later",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
-        "linux"
-      ],
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      }
+        "freebsd"
+      ]
     },
-    "node_modules/@img/sharp-libvips-linuxmusl-x64": {
-      "version": "1.2.4",
-      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linuxmusl-x64/-/sharp-libvips-linuxmusl-x64-1.2.4.tgz",
-      "integrity": "sha512-+LpyBk7L44ZIXwz/VYfglaX/okxezESc6UxDSoyo2Ks6Jxc4Y7sGjpgU9s4PMgqgjj1gZCylTieNamqA1MF7Dg==",
+    "node_modules/@rollup/rollup-freebsd-x64": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.59.0.tgz",
+      "integrity": "sha512-d3DuZi2KzTMjImrxoHIAODUZYoUUMsuUiY4SRRcJy6NJoZ6iIqWnJu9IScV9jXysyGMVuW+KNzZvBLOcpdl3Vg==",
       "cpu": [
         "x64"
       ],
-      "license": "LGPL-3.0-or-later",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
-        "linux"
-      ],
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      }
+        "freebsd"
+      ]
     },
-    "node_modules/@img/sharp-linux-arm": {
-      "version": "0.34.5",
-      "resolved": "https://registry.npmjs.org/@img/sharp-linux-arm/-/sharp-linux-arm-0.34.5.tgz",
-      "integrity": "sha512-9dLqsvwtg1uuXBGZKsxem9595+ujv0sJ6Vi8wcTANSFpwV/GONat5eCkzQo/1O6zRIkh0m/8+5BjrRr7jDUSZw==",
+    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.59.0.tgz",
+      "integrity": "sha512-t4ONHboXi/3E0rT6OZl1pKbl2Vgxf9vJfWgmUoCEVQVxhW6Cw/c8I6hbbu7DAvgp82RKiH7TpLwxnJeKv2pbsw==",
       "cpu": [
         "arm"
       ],
-      "license": "Apache-2.0",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
         "linux"
+      ]
+    },
+    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.59.0.tgz",
+      "integrity": "sha512-CikFT7aYPA2ufMD086cVORBYGHffBo4K8MQ4uPS/ZnY54GKj36i196u8U+aDVT2LX4eSMbyHtyOh7D7Zvk2VvA==",
+      "cpu": [
+        "arm"
       ],
-      "engines": {
-        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
-      },
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      },
-      "optionalDependencies": {
-        "@img/sharp-libvips-linux-arm": "1.2.4"
-      }
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ]
     },
-    "node_modules/@img/sharp-linux-arm64": {
-      "version": "0.34.5",
-      "resolved": "https://registry.npmjs.org/@img/sharp-linux-arm64/-/sharp-linux-arm64-0.34.5.tgz",
-      "integrity": "sha512-bKQzaJRY/bkPOXyKx5EVup7qkaojECG6NLYswgktOZjaXecSAeCWiZwwiFf3/Y+O1HrauiE3FVsGxFg8c24rZg==",
+    "node_modules/@rollup/rollup-linux-arm64-gnu": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.59.0.tgz",
+      "integrity": "sha512-jYgUGk5aLd1nUb1CtQ8E+t5JhLc9x5WdBKew9ZgAXg7DBk0ZHErLHdXM24rfX+bKrFe+Xp5YuJo54I5HFjGDAA==",
       "cpu": [
         "arm64"
       ],
-      "license": "Apache-2.0",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
         "linux"
-      ],
-      "engines": {
-        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
-      },
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      },
-      "optionalDependencies": {
-        "@img/sharp-libvips-linux-arm64": "1.2.4"
-      }
+      ]
     },
-    "node_modules/@img/sharp-linux-ppc64": {
-      "version": "0.34.5",
-      "resolved": "https://registry.npmjs.org/@img/sharp-linux-ppc64/-/sharp-linux-ppc64-0.34.5.tgz",
-      "integrity": "sha512-7zznwNaqW6YtsfrGGDA6BRkISKAAE1Jo0QdpNYXNMHu2+0dTrPflTLNkpc8l7MUP5M16ZJcUvysVWWrMefZquA==",
+    "node_modules/@rollup/rollup-linux-arm64-musl": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.59.0.tgz",
+      "integrity": "sha512-peZRVEdnFWZ5Bh2KeumKG9ty7aCXzzEsHShOZEFiCQlDEepP1dpUl/SrUNXNg13UmZl+gzVDPsiCwnV1uI0RUA==",
       "cpu": [
-        "ppc64"
+        "arm64"
       ],
-      "license": "Apache-2.0",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
         "linux"
-      ],
-      "engines": {
-        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
-      },
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      },
-      "optionalDependencies": {
-        "@img/sharp-libvips-linux-ppc64": "1.2.4"
-      }
+      ]
     },
-    "node_modules/@img/sharp-linux-riscv64": {
-      "version": "0.34.5",
-      "resolved": "https://registry.npmjs.org/@img/sharp-linux-riscv64/-/sharp-linux-riscv64-0.34.5.tgz",
-      "integrity": "sha512-51gJuLPTKa7piYPaVs8GmByo7/U7/7TZOq+cnXJIHZKavIRHAP77e3N2HEl3dgiqdD/w0yUfiJnII77PuDDFdw==",
+    "node_modules/@rollup/rollup-linux-loong64-gnu": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loong64-gnu/-/rollup-linux-loong64-gnu-4.59.0.tgz",
+      "integrity": "sha512-gbUSW/97f7+r4gHy3Jlup8zDG190AuodsWnNiXErp9mT90iCy9NKKU0Xwx5k8VlRAIV2uU9CsMnEFg/xXaOfXg==",
       "cpu": [
-        "riscv64"
+        "loong64"
       ],
-      "license": "Apache-2.0",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
         "linux"
-      ],
-      "engines": {
-        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
-      },
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      },
-      "optionalDependencies": {
-        "@img/sharp-libvips-linux-riscv64": "1.2.4"
-      }
+      ]
     },
-    "node_modules/@img/sharp-linux-s390x": {
-      "version": "0.34.5",
-      "resolved": "https://registry.npmjs.org/@img/sharp-linux-s390x/-/sharp-linux-s390x-0.34.5.tgz",
-      "integrity": "sha512-nQtCk0PdKfho3eC5MrbQoigJ2gd1CgddUMkabUj+rBevs8tZ2cULOx46E7oyX+04WGfABgIwmMC0VqieTiR4jg==",
+    "node_modules/@rollup/rollup-linux-loong64-musl": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loong64-musl/-/rollup-linux-loong64-musl-4.59.0.tgz",
+      "integrity": "sha512-yTRONe79E+o0FWFijasoTjtzG9EBedFXJMl888NBEDCDV9I2wGbFFfJQQe63OijbFCUZqxpHz1GzpbtSFikJ4Q==",
       "cpu": [
-        "s390x"
+        "loong64"
       ],
-      "license": "Apache-2.0",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
         "linux"
-      ],
-      "engines": {
-        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
-      },
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      },
-      "optionalDependencies": {
-        "@img/sharp-libvips-linux-s390x": "1.2.4"
-      }
+      ]
     },
-    "node_modules/@img/sharp-linux-x64": {
-      "version": "0.34.5",
-      "resolved": "https://registry.npmjs.org/@img/sharp-linux-x64/-/sharp-linux-x64-0.34.5.tgz",
-      "integrity": "sha512-MEzd8HPKxVxVenwAa+JRPwEC7QFjoPWuS5NZnBt6B3pu7EG2Ge0id1oLHZpPJdn3OQK+BQDiw9zStiHBTJQQQQ==",
+    "node_modules/@rollup/rollup-linux-ppc64-gnu": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-ppc64-gnu/-/rollup-linux-ppc64-gnu-4.59.0.tgz",
+      "integrity": "sha512-sw1o3tfyk12k3OEpRddF68a1unZ5VCN7zoTNtSn2KndUE+ea3m3ROOKRCZxEpmT9nsGnogpFP9x6mnLTCaoLkA==",
       "cpu": [
-        "x64"
+        "ppc64"
       ],
-      "license": "Apache-2.0",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
         "linux"
-      ],
-      "engines": {
-        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
-      },
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      },
-      "optionalDependencies": {
-        "@img/sharp-libvips-linux-x64": "1.2.4"
-      }
+      ]
     },
-    "node_modules/@img/sharp-linuxmusl-arm64": {
-      "version": "0.34.5",
-      "resolved": "https://registry.npmjs.org/@img/sharp-linuxmusl-arm64/-/sharp-linuxmusl-arm64-0.34.5.tgz",
-      "integrity": "sha512-fprJR6GtRsMt6Kyfq44IsChVZeGN97gTD331weR1ex1c1rypDEABN6Tm2xa1wE6lYb5DdEnk03NZPqA7Id21yg==",
+    "node_modules/@rollup/rollup-linux-ppc64-musl": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-ppc64-musl/-/rollup-linux-ppc64-musl-4.59.0.tgz",
+      "integrity": "sha512-+2kLtQ4xT3AiIxkzFVFXfsmlZiG5FXYW7ZyIIvGA7Bdeuh9Z0aN4hVyXS/G1E9bTP/vqszNIN/pUKCk/BTHsKA==",
       "cpu": [
-        "arm64"
+        "ppc64"
       ],
-      "license": "Apache-2.0",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
         "linux"
-      ],
-      "engines": {
-        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
-      },
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      },
-      "optionalDependencies": {
-        "@img/sharp-libvips-linuxmusl-arm64": "1.2.4"
-      }
+      ]
     },
-    "node_modules/@img/sharp-linuxmusl-x64": {
-      "version": "0.34.5",
-      "resolved": "https://registry.npmjs.org/@img/sharp-linuxmusl-x64/-/sharp-linuxmusl-x64-0.34.5.tgz",
-      "integrity": "sha512-Jg8wNT1MUzIvhBFxViqrEhWDGzqymo3sV7z7ZsaWbZNDLXRJZoRGrjulp60YYtV4wfY8VIKcWidjojlLcWrd8Q==",
+    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.59.0.tgz",
+      "integrity": "sha512-NDYMpsXYJJaj+I7UdwIuHHNxXZ/b/N2hR15NyH3m2qAtb/hHPA4g4SuuvrdxetTdndfj9b1WOmy73kcPRoERUg==",
       "cpu": [
-        "x64"
+        "riscv64"
       ],
-      "license": "Apache-2.0",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
         "linux"
-      ],
-      "engines": {
-        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
-      },
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      },
-      "optionalDependencies": {
-        "@img/sharp-libvips-linuxmusl-x64": "1.2.4"
-      }
+      ]
     },
-    "node_modules/@img/sharp-wasm32": {
-      "version": "0.34.5",
-      "resolved": "https://registry.npmjs.org/@img/sharp-wasm32/-/sharp-wasm32-0.34.5.tgz",
-      "integrity": "sha512-OdWTEiVkY2PHwqkbBI8frFxQQFekHaSSkUIJkwzclWZe64O1X4UlUjqqqLaPbUpMOQk6FBu/HtlGXNblIs0huw==",
+    "node_modules/@rollup/rollup-linux-riscv64-musl": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.59.0.tgz",
+      "integrity": "sha512-nLckB8WOqHIf1bhymk+oHxvM9D3tyPndZH8i8+35p/1YiVoVswPid2yLzgX7ZJP0KQvnkhM4H6QZ5m0LzbyIAg==",
       "cpu": [
-        "wasm32"
+        "riscv64"
       ],
-      "license": "Apache-2.0 AND LGPL-3.0-or-later AND MIT",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
-      "dependencies": {
-        "@emnapi/runtime": "^1.7.0"
-      },
-      "engines": {
-        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
-      },
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      }
+      "os": [
+        "linux"
+      ]
     },
-    "node_modules/@img/sharp-win32-arm64": {
-      "version": "0.34.5",
-      "resolved": "https://registry.npmjs.org/@img/sharp-win32-arm64/-/sharp-win32-arm64-0.34.5.tgz",
-      "integrity": "sha512-WQ3AgWCWYSb2yt+IG8mnC6Jdk9Whs7O0gxphblsLvdhSpSTtmu69ZG1Gkb6NuvxsNACwiPV6cNSZNzt0KPsw7g==",
+    "node_modules/@rollup/rollup-linux-s390x-gnu": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.59.0.tgz",
+      "integrity": "sha512-oF87Ie3uAIvORFBpwnCvUzdeYUqi2wY6jRFWJAy1qus/udHFYIkplYRW+wo+GRUP4sKzYdmE1Y3+rY5Gc4ZO+w==",
       "cpu": [
-        "arm64"
+        "s390x"
       ],
-      "license": "Apache-2.0 AND LGPL-3.0-or-later",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
-        "win32"
-      ],
-      "engines": {
-        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
-      },
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      }
+        "linux"
+      ]
     },
-    "node_modules/@img/sharp-win32-ia32": {
-      "version": "0.34.5",
-      "resolved": "https://registry.npmjs.org/@img/sharp-win32-ia32/-/sharp-win32-ia32-0.34.5.tgz",
-      "integrity": "sha512-FV9m/7NmeCmSHDD5j4+4pNI8Cp3aW+JvLoXcTUo0IqyjSfAZJ8dIUmijx1qaJsIiU+Hosw6xM5KijAWRJCSgNg==",
+    "node_modules/@rollup/rollup-linux-x64-gnu": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.59.0.tgz",
+      "integrity": "sha512-3AHmtQq/ppNuUspKAlvA8HtLybkDflkMuLK4DPo77DfthRb71V84/c4MlWJXixZz4uruIH4uaa07IqoAkG64fg==",
       "cpu": [
-        "ia32"
+        "x64"
       ],
-      "license": "Apache-2.0 AND LGPL-3.0-or-later",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
-        "win32"
-      ],
-      "engines": {
-        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
-      },
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      }
+        "linux"
+      ]
     },
-    "node_modules/@img/sharp-win32-x64": {
-      "version": "0.34.5",
-      "resolved": "https://registry.npmjs.org/@img/sharp-win32-x64/-/sharp-win32-x64-0.34.5.tgz",
-      "integrity": "sha512-+29YMsqY2/9eFEiW93eqWnuLcWcufowXewwSNIT6UwZdUUCrM3oFjMWH/Z6/TMmb4hlFenmfAVbpWeup2jryCw==",
+    "node_modules/@rollup/rollup-linux-x64-musl": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.59.0.tgz",
+      "integrity": "sha512-2UdiwS/9cTAx7qIUZB/fWtToJwvt0Vbo0zmnYt7ED35KPg13Q0ym1g442THLC7VyI6JfYTP4PiSOWyoMdV2/xg==",
       "cpu": [
         "x64"
       ],
-      "license": "Apache-2.0 AND LGPL-3.0-or-later",
+      "dev": true,
+      "license": "MIT",
       "optional": true,
       "os": [
-        "win32"
-      ],
-      "engines": {
-        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
-      },
-      "funding": {
-        "url": "https://opencollective.com/libvips"
-      }
+        "linux"
+      ]
     },
-    "node_modules/@jridgewell/gen-mapping": {
-      "version": "0.3.13",
-      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
-      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
+    "node_modules/@rollup/rollup-openbsd-x64": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-openbsd-x64/-/rollup-openbsd-x64-4.59.0.tgz",
+      "integrity": "sha512-M3bLRAVk6GOwFlPTIxVBSYKUaqfLrn8l0psKinkCFxl4lQvOSz8ZrKDz2gxcBwHFpci0B6rttydI4IpS4IS/jQ==",
+      "cpu": [
+        "x64"
+      ],
       "dev": true,
       "license": "MIT",
-      "dependencies": {
-        "@jridgewell/sourcemap-codec": "^1.5.0",
-        "@jridgewell/trace-mapping": "^0.3.24"
-      }
+      "optional": true,
+      "os": [
+        "openbsd"
+      ]
     },
-    "node_modules/@jridgewell/remapping": {
-      "version": "2.3.5",
-      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
-      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
+    "node_modules/@rollup/rollup-openharmony-arm64": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-openharmony-arm64/-/rollup-openharmony-arm64-4.59.0.tgz",
+      "integrity": "sha512-tt9KBJqaqp5i5HUZzoafHZX8b5Q2Fe7UjYERADll83O4fGqJ49O1FsL6LpdzVFQcpwvnyd0i+K/VSwu/o/nWlA==",
+      "cpu": [
+        "arm64"
+      ],
       "dev": true,
       "license": "MIT",
-      "dependencies": {
-        "@jridgewell/gen-mapping": "^0.3.5",
-        "@jridgewell/trace-mapping": "^0.3.24"
-      }
+      "optional": true,
+      "os": [
+        "openharmony"
+      ]
     },
-    "node_modules/@jridgewell/resolve-uri": {
-      "version": "3.1.2",
-      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
-      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
+    "node_modules/@rollup/rollup-win32-arm64-msvc": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.59.0.tgz",
+      "integrity": "sha512-V5B6mG7OrGTwnxaNUzZTDTjDS7F75PO1ae6MJYdiMu60sq0CqN5CVeVsbhPxalupvTX8gXVSU9gq+Rx1/hvu6A==",
+      "cpu": [
+        "arm64"
+      ],
       "dev": true,
       "license": "MIT",
-      "engines": {
-        "node": ">=6.0.0"
-      }
+      "optional": true,
+      "os": [
+        "win32"
+      ]
     },
-    "node_modules/@jridgewell/sourcemap-codec": {
-      "version": "1.5.5",
-      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
-      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
+    "node_modules/@rollup/rollup-win32-ia32-msvc": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.59.0.tgz",
+      "integrity": "sha512-UKFMHPuM9R0iBegwzKF4y0C4J9u8C6MEJgFuXTBerMk7EJ92GFVFYBfOZaSGLu6COf7FxpQNqhNS4c4icUPqxA==",
+      "cpu": [
+        "ia32"
+      ],
       "dev": true,
-      "license": "MIT"
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ]
     },
-    "node_modules/@jridgewell/trace-mapping": {
-      "version": "0.3.31",
-      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
-      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
+    "node_modules/@rollup/rollup-win32-x64-gnu": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-gnu/-/rollup-win32-x64-gnu-4.59.0.tgz",
+      "integrity": "sha512-laBkYlSS1n2L8fSo1thDNGrCTQMmxjYY5G0WFWjFFYZkKPjsMBsgJfGf4TLxXrF6RyhI60L8TMOjBMvXiTcxeA==",
+      "cpu": [
+        "x64"
+      ],
       "dev": true,
       "license": "MIT",
-      "dependencies": {
-        "@jridgewell/resolve-uri": "^3.1.0",
-        "@jridgewell/sourcemap-codec": "^1.4.14"
-      }
+      "optional": true,
+      "os": [
+        "win32"
+      ]
     },
-    "node_modules/@napi-rs/wasm-runtime": {
-      "version": "0.2.12",
-      "resolved": "https://registry.npmjs.org/@napi-rs/wasm-runtime/-/wasm-runtime-0.2.12.tgz",
-      "integrity": "sha512-ZVWUcfwY4E/yPitQJl481FjFo3K22D6qF0DuFH6Y/nbnE11GY5uguDxZMGXPQ8WQ0128MXQD7TnfHyK4oWoIJQ==",
+    "node_modules/@rollup/rollup-win32-x64-msvc": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.59.0.tgz",
+      "integrity": "sha512-2HRCml6OztYXyJXAvdDXPKcawukWY2GpR5/nxKp4iBgiO3wcoEGkAaqctIbZcNB6KlUQBIqt8VYkNSj2397EfA==",
+      "cpu": [
+        "x64"
+      ],
       "dev": true,
       "license": "MIT",
       "optional": true,
-      "dependencies": {
-        "@emnapi/core": "^1.4.3",
-        "@emnapi/runtime": "^1.4.3",
-        "@tybys/wasm-util": "^0.10.0"
-      }
+      "os": [
+        "win32"
+      ]
     },
-    "node_modules/@next/env": {
-      "version": "16.1.6",
-      "resolved": "https://registry.npmjs.org/@next/env/-/env-16.1.6.tgz",
-      "integrity": "sha512-N1ySLuZjnAtN3kFnwhAwPvZah8RJxKasD7x1f8shFqhncnWZn4JMfg37diLNuoHsLAlrDfM3g4mawVdtAG8XLQ==",
+    "node_modules/@rtsao/scc": {
+      "version": "1.1.0",
+      "resolved": "https://registry.npmjs.org/@rtsao/scc/-/scc-1.1.0.tgz",
+      "integrity": "sha512-zt6OdqaDoOnJ1ZYsCYGt9YmWzDXl4vQdKTyJev62gFhRGKdx7mcT54V9KIjg+d2wi9EXsPvAPKe7i7WjfVWB8g==",
+      "dev": true,
       "license": "MIT"
     },
-    "node_modules/@next/eslint-plugin-next": {
-      "version": "16.1.6",
-      "resolved": "https://registry.npmjs.org/@next/eslint-plugin-next/-/eslint-plugin-next-16.1.6.tgz",
-      "integrity": "sha512-/Qq3PTagA6+nYVfryAtQ7/9FEr/6YVyvOtl6rZnGsbReGLf0jZU6gkpr1FuChAQpvV46a78p4cmHOVP8mbfSMQ==",
-      "dev": true,
-      "license": "MIT",
-      "dependencies": {
-        "fast-glob": "3.3.1"
-      }
+    "node_modules/@schummar/icu-type-parser": {
+      "version": "1.21.5",
+      "resolved": "https://registry.npmjs.org/@schummar/icu-type-parser/-/icu-type-parser-1.21.5.tgz",
+      "integrity": "sha512-bXHSaW5jRTmke9Vd0h5P7BtWZG9Znqb8gSDxZnxaGSJnGwPLDPfS+3g0BKzeWqzgZPsIVZkM7m2tbo18cm5HBw==",
+      "license": "MIT"
     },
-    "node_modules/@next/swc-darwin-arm64": {
-      "version": "16.1.6",
-      "resolved": "https://registry.npmjs.org/@next/swc-darwin-arm64/-/swc-darwin-arm64-16.1.6.tgz",
-      "integrity": "sha512-wTzYulosJr/6nFnqGW7FrG3jfUUlEf8UjGA0/pyypJl42ExdVgC6xJgcXQ+V8QFn6niSG2Pb8+MIG1mZr2vczw==",
+    "node_modules/@swc/core-darwin-arm64": {
+      "version": "1.15.11",
+      "resolved": "https://registry.npmjs.org/@swc/core-darwin-arm64/-/core-darwin-arm64-1.15.11.tgz",
+      "integrity": "sha512-QoIupRWVH8AF1TgxYyeA5nS18dtqMuxNwchjBIwJo3RdwLEFiJq6onOx9JAxHtuPwUkIVuU2Xbp+jCJ7Vzmgtg==",
       "cpu": [
         "arm64"
       ],
-      "license": "MIT",
+      "license": "Apache-2.0 AND MIT",
       "optional": true,
       "os": [
         "darwin"
       ],
       "engines": {
-        "node": ">= 10"
+        "node": ">=10"
       }
     },
-    "node_modules/@next/swc-darwin-x64": {
-      "version": "16.1.6",
-      "resolved": "https://registry.npmjs.org/@next/swc-darwin-x64/-/swc-darwin-x64-16.1.6.tgz",
-      "integrity": "sha512-BLFPYPDO+MNJsiDWbeVzqvYd4NyuRrEYVB5k2N3JfWncuHAy2IVwMAOlVQDFjj+krkWzhY2apvmekMkfQR0CUQ==",
+    "node_modules/@swc/core-darwin-x64": {
+      "version": "1.15.11",
+      "resolved": "https://registry.npmjs.org/@swc/core-darwin-x64/-/core-darwin-x64-1.15.11.tgz",
+      "integrity": "sha512-S52Gu1QtPSfBYDiejlcfp9GlN+NjTZBRRNsz8PNwBgSE626/FUf2PcllVUix7jqkoMC+t0rS8t+2/aSWlMuQtA==",
       "cpu": [
         "x64"
       ],
-      "license": "MIT",
+      "license": "Apache-2.0 AND MIT",
       "optional": true,
       "os": [
         "darwin"
       ],
       "engines": {
-        "node": ">= 10"
+        "node": ">=10"
       }
     },
-    "node_modules/@next/swc-linux-arm64-gnu": {
-      "version": "16.1.6",
-      "resolved": "https://registry.npmjs.org/@next/swc-linux-arm64-gnu/-/swc-linux-arm64-gnu-16.1.6.tgz",
-      "integrity": "sha512-OJYkCd5pj/QloBvoEcJ2XiMnlJkRv9idWA/j0ugSuA34gMT6f5b7vOiCQHVRpvStoZUknhl6/UxOXL4OwtdaBw==",
+    "node_modules/@swc/core-linux-arm-gnueabihf": {
+      "version": "1.15.11",
+      "resolved": "https://registry.npmjs.org/@swc/core-linux-arm-gnueabihf/-/core-linux-arm-gnueabihf-1.15.11.tgz",
+      "integrity": "sha512-lXJs8oXo6Z4yCpimpQ8vPeCjkgoHu5NoMvmJZ8qxDyU99KVdg6KwU9H79vzrmB+HfH+dCZ7JGMqMF//f8Cfvdg==",
+      "cpu": [
+        "arm"
+      ],
+      "license": "Apache-2.0",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=10"
+      }
+    },
+    "node_modules/@swc/core-linux-arm64-gnu": {
+      "version": "1.15.11",
+      "resolved": "https://registry.npmjs.org/@swc/core-linux-arm64-gnu/-/core-linux-arm64-gnu-1.15.11.tgz",
+      "integrity": "sha512-chRsz1K52/vj8Mfq/QOugVphlKPWlMh10V99qfH41hbGvwAU6xSPd681upO4bKiOr9+mRIZZW+EfJqY42ZzRyA==",
       "cpu": [
         "arm64"
       ],
-      "license": "MIT",
+      "license": "Apache-2.0 AND MIT",
       "optional": true,
       "os": [
         "linux"
       ],
       "engines": {
-        "node": ">= 10"
+        "node": ">=10"
       }
     },
-    "node_modules/@next/swc-linux-arm64-musl": {
-      "version": "16.1.6",
-      "resolved": "https://registry.npmjs.org/@next/swc-linux-arm64-musl/-/swc-linux-arm64-musl-16.1.6.tgz",
-      "integrity": "sha512-S4J2v+8tT3NIO9u2q+S0G5KdvNDjXfAv06OhfOzNDaBn5rw84DGXWndOEB7d5/x852A20sW1M56vhC/tRVbccQ==",
+    "node_modules/@swc/core-linux-arm64-musl": {
+      "version": "1.15.11",
+      "resolved": "https://registry.npmjs.org/@swc/core-linux-arm64-musl/-/core-linux-arm64-musl-1.15.11.tgz",
+      "integrity": "sha512-PYftgsTaGnfDK4m6/dty9ryK1FbLk+LosDJ/RJR2nkXGc8rd+WenXIlvHjWULiBVnS1RsjHHOXmTS4nDhe0v0w==",
       "cpu": [
         "arm64"
       ],
-      "license": "MIT",
+      "license": "Apache-2.0 AND MIT",
       "optional": true,
       "os": [
         "linux"
       ],
       "engines": {
-        "node": ">= 10"
+        "node": ">=10"
       }
     },
-    "node_modules/@next/swc-linux-x64-gnu": {
-      "version": "16.1.6",
-      "resolved": "https://registry.npmjs.org/@next/swc-linux-x64-gnu/-/swc-linux-x64-gnu-16.1.6.tgz",
-      "integrity": "sha512-2eEBDkFlMMNQnkTyPBhQOAyn2qMxyG2eE7GPH2WIDGEpEILcBPI/jdSv4t6xupSP+ot/jkfrCShLAa7+ZUPcJQ==",
+    "node_modules/@swc/core-linux-x64-gnu": {
+      "version": "1.15.11",
+      "resolved": "https://registry.npmjs.org/@swc/core-linux-x64-gnu/-/core-linux-x64-gnu-1.15.11.tgz",
+      "integrity": "sha512-DKtnJKIHiZdARyTKiX7zdRjiDS1KihkQWatQiCHMv+zc2sfwb4Glrodx2VLOX4rsa92NLR0Sw8WLcPEMFY1szQ==",
       "cpu": [
         "x64"
       ],
-      "license": "MIT",
+      "license": "Apache-2.0 AND MIT",
       "optional": true,
       "os": [
         "linux"
       ],
       "engines": {
-        "node": ">= 10"
+        "node": ">=10"
       }
     },
-    "node_modules/@next/swc-linux-x64-musl": {
-      "version": "16.1.6",
-      "resolved": "https://registry.npmjs.org/@next/swc-linux-x64-musl/-/swc-linux-x64-musl-16.1.6.tgz",
-      "integrity": "sha512-oicJwRlyOoZXVlxmIMaTq7f8pN9QNbdes0q2FXfRsPhfCi8n8JmOZJm5oo1pwDaFbnnD421rVU409M3evFbIqg==",
+    "node_modules/@swc/core-linux-x64-musl": {
+      "version": "1.15.11",
+      "resolved": "https://registry.npmjs.org/@swc/core-linux-x64-musl/-/core-linux-x64-musl-1.15.11.tgz",
+      "integrity": "sha512-mUjjntHj4+8WBaiDe5UwRNHuEzLjIWBTSGTw0JT9+C9/Yyuh4KQqlcEQ3ro6GkHmBGXBFpGIj/o5VMyRWfVfWw==",
       "cpu": [
         "x64"
       ],
-      "license": "MIT",
+      "license": "Apache-2.0 AND MIT",
       "optional": true,
       "os": [
         "linux"
       ],
       "engines": {
-        "node": ">= 10"
+        "node": ">=10"
       }
     },
-    "node_modules/@next/swc-win32-arm64-msvc": {
-      "version": "16.1.6",
-      "resolved": "https://registry.npmjs.org/@next/swc-win32-arm64-msvc/-/swc-win32-arm64-msvc-16.1.6.tgz",
-      "integrity": "sha512-gQmm8izDTPgs+DCWH22kcDmuUp7NyiJgEl18bcr8irXA5N2m2O+JQIr6f3ct42GOs9c0h8QF3L5SzIxcYAAXXw==",
+    "node_modules/@swc/core-win32-arm64-msvc": {
+      "version": "1.15.11",
+      "resolved": "https://registry.npmjs.org/@swc/core-win32-arm64-msvc/-/core-win32-arm64-msvc-1.15.11.tgz",
+      "integrity": "sha512-ZkNNG5zL49YpaFzfl6fskNOSxtcZ5uOYmWBkY4wVAvgbSAQzLRVBp+xArGWh2oXlY/WgL99zQSGTv7RI5E6nzA==",
       "cpu": [
         "arm64"
       ],
-      "license": "MIT",
+      "license": "Apache-2.0 AND MIT",
       "optional": true,
       "os": [
         "win32"
       ],
       "engines": {
-        "node": ">= 10"
+        "node": ">=10"
       }
     },
-    "node_modules/@next/swc-win32-x64-msvc": {
-      "version": "16.1.6",
-      "resolved": "https://registry.npmjs.org/@next/swc-win32-x64-msvc/-/swc-win32-x64-msvc-16.1.6.tgz",
-      "integrity": "sha512-NRfO39AIrzBnixKbjuo2YiYhB6o9d8v/ymU9m/Xk8cyVk+k7XylniXkHwjs4s70wedVffc6bQNbufk5v0xEm0A==",
+    "node_modules/@swc/core-win32-ia32-msvc": {
+      "version": "1.15.11",
+      "resolved": "https://registry.npmjs.org/@swc/core-win32-ia32-msvc/-/core-win32-ia32-msvc-1.15.11.tgz",
+      "integrity": "sha512-6XnzORkZCQzvTQ6cPrU7iaT9+i145oLwnin8JrfsLG41wl26+5cNQ2XV3zcbrnFEV6esjOceom9YO1w9mGJByw==",
       "cpu": [
-        "x64"
+        "ia32"
       ],
-      "license": "MIT",
+      "license": "Apache-2.0 AND MIT",
       "optional": true,
       "os": [
         "win32"
       ],
       "engines": {
-        "node": ">= 10"
-      }
-    },
-    "node_modules/@nodelib/fs.scandir": {
-      "version": "2.1.5",
-      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
-      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
-      "dev": true,
-      "license": "MIT",
-      "dependencies": {
-        "@nodelib/fs.stat": "2.0.5",
-        "run-parallel": "^1.1.9"
-      },
-      "engines": {
-        "node": ">= 8"
-      }
-    },
-    "node_modules/@nodelib/fs.stat": {
-      "version": "2.0.5",
-      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
-      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
-      "dev": true,
-      "license": "MIT",
-      "engines": {
-        "node": ">= 8"
-      }
-    },
-    "node_modules/@nodelib/fs.walk": {
-      "version": "1.2.8",
-      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
-      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
-      "dev": true,
-      "license": "MIT",
-      "dependencies": {
-        "@nodelib/fs.scandir": "2.1.5",
-        "fastq": "^1.6.0"
-      },
-      "engines": {
-        "node": ">= 8"
-      }
-    },
-    "node_modules/@nolyfill/is-core-module": {
-      "version": "1.0.39",
-      "resolved": "https://registry.npmjs.org/@nolyfill/is-core-module/-/is-core-module-1.0.39.tgz",
-      "integrity": "sha512-nn5ozdjYQpUCZlWGuxcJY/KpxkWQs4DcbMCmKojjyrYDEAGy4Ce19NN4v5MduafTwJlbKc99UA8YhSVqq9yPZA==",
-      "dev": true,
-      "license": "MIT",
-      "engines": {
-        "node": ">=12.4.0"
-      }
-    },
-    "node_modules/@panva/hkdf": {
-      "version": "1.2.1",
-      "resolved": "https://registry.npmjs.org/@panva/hkdf/-/hkdf-1.2.1.tgz",
-      "integrity": "sha512-6oclG6Y3PiDFcoyk8srjLfVKyMfVCKJ27JwNPViuXziFpmdz+MZnZN/aKY0JGXgYuO/VghU0jcOAZgWXZ1Dmrw==",
-      "license": "MIT",
-      "funding": {
-        "url": "https://github.com/sponsors/panva"
-      }
-    },
-    "node_modules/@prisma/client": {
-      "version": "5.22.0",
-      "resolved": "https://registry.npmjs.org/@prisma/client/-/client-5.22.0.tgz",
-      "integrity": "sha512-M0SVXfyHnQREBKxCgyo7sffrKttwE6R8PMq330MIUF0pTwjUhLbW84pFDlf06B27XyCR++VtjugEnIHdr07SVA==",
-      "hasInstallScript": true,
-      "license": "Apache-2.0",
-      "engines": {
-        "node": ">=16.13"
-      },
-      "peerDependencies": {
-        "prisma": "*"
-      },
-      "peerDependenciesMeta": {
-        "prisma": {
-          "optional": true
-        }
-      }
-    },
-    "node_modules/@prisma/debug": {
-      "version": "5.22.0",
-      "resolved": "https://registry.npmjs.org/@prisma/debug/-/debug-5.22.0.tgz",
-      "integrity": "sha512-AUt44v3YJeggO2ZU5BkXI7M4hu9BF2zzH2iF2V5pyXT/lRTyWiElZ7It+bRH1EshoMRxHgpYg4VB6rCM+mG5jQ==",
-      "license": "Apache-2.0"
-    },
-    "node_modules/@prisma/engines": {
-      "version": "5.22.0",
-      "resolved": "https://registry.npmjs.org/@prisma/engines/-/engines-5.22.0.tgz",
-      "integrity": "sha512-UNjfslWhAt06kVL3CjkuYpHAWSO6L4kDCVPegV6itt7nD1kSJavd3vhgAEhjglLJJKEdJ7oIqDJ+yHk6qO8gPA==",
-      "hasInstallScript": true,
-      "license": "Apache-2.0",
-      "dependencies": {
-        "@prisma/debug": "5.22.0",
-        "@prisma/engines-version": "5.22.0-44.605197351a3c8bdd595af2d2a9bc3025bca48ea2",
-        "@prisma/fetch-engine": "5.22.0",
-        "@prisma/get-platform": "5.22.0"
-      }
-    },
-    "node_modules/@prisma/engines-version": {
-      "version": "5.22.0-44.605197351a3c8bdd595af2d2a9bc3025bca48ea2",
-      "resolved": "https://registry.npmjs.org/@prisma/engines-version/-/engines-version-5.22.0-44.605197351a3c8bdd595af2d2a9bc3025bca48ea2.tgz",
-      "integrity": "sha512-2PTmxFR2yHW/eB3uqWtcgRcgAbG1rwG9ZriSvQw+nnb7c4uCr3RAcGMb6/zfE88SKlC1Nj2ziUvc96Z379mHgQ==",
-      "license": "Apache-2.0"
-    },
-    "node_modules/@prisma/fetch-engine": {
-      "version": "5.22.0",
-      "resolved": "https://registry.npmjs.org/@prisma/fetch-engine/-/fetch-engine-5.22.0.tgz",
-      "integrity": "sha512-bkrD/Mc2fSvkQBV5EpoFcZ87AvOgDxbG99488a5cexp5Ccny+UM6MAe/UFkUC0wLYD9+9befNOqGiIJhhq+HbA==",
-      "license": "Apache-2.0",
-      "dependencies": {
-        "@prisma/debug": "5.22.0",
-        "@prisma/engines-version": "5.22.0-44.605197351a3c8bdd595af2d2a9bc3025bca48ea2",
-        "@prisma/get-platform": "5.22.0"
+        "node": ">=10"
       }
     },
-    "node_modules/@prisma/get-platform": {
-      "version": "5.22.0",
-      "resolved": "https://registry.npmjs.org/@prisma/get-platform/-/get-platform-5.22.0.tgz",
-      "integrity": "sha512-pHhpQdr1UPFpt+zFfnPazhulaZYCUqeIcPpJViYoq9R+D/yw4fjE+CtnsnKzPYm0ddUbeXUzjGVGIRVgPDCk4Q==",
-      "license": "Apache-2.0",
-      "dependencies": {
-        "@prisma/debug": "5.22.0"
+    "node_modules/@swc/core-win32-x64-msvc": {
+      "version": "1.15.11",
+      "resolved": "https://registry.npmjs.org/@swc/core-win32-x64-msvc/-/core-win32-x64-msvc-1.15.11.tgz",
+      "integrity": "sha512-IQ2n6af7XKLL6P1gIeZACskSxK8jWtoKpJWLZmdXTDj1MGzktUy4i+FvpdtxFmJWNavRWH1VmTr6kAubRDHeKw==",
+      "cpu": [
+        "x64"
+      ],
+      "license": "Apache-2.0 AND MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": ">=10"
       }
     },
-    "node_modules/@rtsao/scc": {
-      "version": "1.1.0",
-      "resolved": "https://registry.npmjs.org/@rtsao/scc/-/scc-1.1.0.tgz",
-      "integrity": "sha512-zt6OdqaDoOnJ1ZYsCYGt9YmWzDXl4vQdKTyJev62gFhRGKdx7mcT54V9KIjg+d2wi9EXsPvAPKe7i7WjfVWB8g==",
-      "dev": true,
-      "license": "MIT"
+    "node_modules/@swc/counter": {
+      "version": "0.1.3",
+      "resolved": "https://registry.npmjs.org/@swc/counter/-/counter-0.1.3.tgz",
+      "integrity": "sha512-e2BR4lsJkkRlKZ/qCHPw9ZaSxc0MVUd7gtbtaB7aMvHeJVYe8sOB8DBZkP2DtISHGSku9sCK6T6cnY0CtXrOCQ==",
+      "license": "Apache-2.0"
     },
     "node_modules/@swc/helpers": {
       "version": "0.5.15",
@@ -1365,6 +2708,15 @@
         "tslib": "^2.8.0"
       }
     },
+    "node_modules/@swc/types": {
+      "version": "0.1.25",
+      "resolved": "https://registry.npmjs.org/@swc/types/-/types-0.1.25.tgz",
+      "integrity": "sha512-iAoY/qRhNH8a/hBvm3zKj9qQ4oc2+3w1unPJa2XvTK3XjeLXtzcCingVPw/9e5mn1+0yPqxcBGp9Jf0pkfMb1g==",
+      "license": "Apache-2.0",
+      "dependencies": {
+        "@swc/counter": "^0.1.3"
+      }
+    },
     "node_modules/@tailwindcss/node": {
       "version": "4.2.0",
       "resolved": "https://registry.npmjs.org/@tailwindcss/node/-/node-4.2.0.tgz",
@@ -1647,6 +2999,24 @@
         "tslib": "^2.4.0"
       }
     },
+    "node_modules/@types/chai": {
+      "version": "5.2.3",
+      "resolved": "https://registry.npmjs.org/@types/chai/-/chai-5.2.3.tgz",
+      "integrity": "sha512-Mw558oeA9fFbv65/y4mHtXDs9bPnFMZAL/jxdPFUpOHHIXX91mcgEHbS5Lahr+pwZFR8A7GQleRWeI6cGFC2UA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@types/deep-eql": "*",
+        "assertion-error": "^2.0.1"
+      }
+    },
+    "node_modules/@types/deep-eql": {
+      "version": "4.0.2",
+      "resolved": "https://registry.npmjs.org/@types/deep-eql/-/deep-eql-4.0.2.tgz",
+      "integrity": "sha512-c9h9dVVMigMPc4bwTvC5dxqtqJZwQPePsWjPlpSOnojbor6pGqdk541lfA7AqFQr5pB1BRdq0juY9db81BwyFw==",
+      "dev": true,
+      "license": "MIT"
+    },
     "node_modules/@types/estree": {
       "version": "1.0.8",
       "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
@@ -2249,6 +3619,137 @@
         "win32"
       ]
     },
+    "node_modules/@vercel/blob": {
+      "version": "2.3.0",
+      "resolved": "https://registry.npmjs.org/@vercel/blob/-/blob-2.3.0.tgz",
+      "integrity": "sha512-oYWiJbWRQ7gz9Mj0X/NHFJ3OcLMOBzq/2b3j6zeNrQmtFo6dHwU8FAwNpxVIYddVMd+g8eqEi7iRueYx8FtM0Q==",
+      "license": "Apache-2.0",
+      "dependencies": {
+        "async-retry": "^1.3.3",
+        "is-buffer": "^2.0.5",
+        "is-node-process": "^1.2.0",
+        "throttleit": "^2.1.0",
+        "undici": "^6.23.0"
+      },
+      "engines": {
+        "node": ">=20.0.0"
+      }
+    },
+    "node_modules/@vitest/expect": {
+      "version": "3.2.4",
+      "resolved": "https://registry.npmjs.org/@vitest/expect/-/expect-3.2.4.tgz",
+      "integrity": "sha512-Io0yyORnB6sikFlt8QW5K7slY4OjqNX9jmJQ02QDda8lyM6B5oNgVWoSoKPac8/kgnCUzuHQKrSLtu/uOqqrig==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@types/chai": "^5.2.2",
+        "@vitest/spy": "3.2.4",
+        "@vitest/utils": "3.2.4",
+        "chai": "^5.2.0",
+        "tinyrainbow": "^2.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      }
+    },
+    "node_modules/@vitest/mocker": {
+      "version": "3.2.4",
+      "resolved": "https://registry.npmjs.org/@vitest/mocker/-/mocker-3.2.4.tgz",
+      "integrity": "sha512-46ryTE9RZO/rfDd7pEqFl7etuyzekzEhUbTW3BvmeO/BcCMEgq59BKhek3dXDWgAj4oMK6OZi+vRr1wPW6qjEQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@vitest/spy": "3.2.4",
+        "estree-walker": "^3.0.3",
+        "magic-string": "^0.30.17"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      },
+      "peerDependencies": {
+        "msw": "^2.4.9",
+        "vite": "^5.0.0 || ^6.0.0 || ^7.0.0-0"
+      },
+      "peerDependenciesMeta": {
+        "msw": {
+          "optional": true
+        },
+        "vite": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/@vitest/pretty-format": {
+      "version": "3.2.4",
+      "resolved": "https://registry.npmjs.org/@vitest/pretty-format/-/pretty-format-3.2.4.tgz",
+      "integrity": "sha512-IVNZik8IVRJRTr9fxlitMKeJeXFFFN0JaB9PHPGQ8NKQbGpfjlTx9zO4RefN8gp7eqjNy8nyK3NZmBzOPeIxtA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "tinyrainbow": "^2.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      }
+    },
+    "node_modules/@vitest/runner": {
+      "version": "3.2.4",
+      "resolved": "https://registry.npmjs.org/@vitest/runner/-/runner-3.2.4.tgz",
+      "integrity": "sha512-oukfKT9Mk41LreEW09vt45f8wx7DordoWUZMYdY/cyAk7w5TWkTRCNZYF7sX7n2wB7jyGAl74OxgwhPgKaqDMQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@vitest/utils": "3.2.4",
+        "pathe": "^2.0.3",
+        "strip-literal": "^3.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      }
+    },
+    "node_modules/@vitest/snapshot": {
+      "version": "3.2.4",
+      "resolved": "https://registry.npmjs.org/@vitest/snapshot/-/snapshot-3.2.4.tgz",
+      "integrity": "sha512-dEYtS7qQP2CjU27QBC5oUOxLE/v5eLkGqPE0ZKEIDGMs4vKWe7IjgLOeauHsR0D5YuuycGRO5oSRXnwnmA78fQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@vitest/pretty-format": "3.2.4",
+        "magic-string": "^0.30.17",
+        "pathe": "^2.0.3"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      }
+    },
+    "node_modules/@vitest/spy": {
+      "version": "3.2.4",
+      "resolved": "https://registry.npmjs.org/@vitest/spy/-/spy-3.2.4.tgz",
+      "integrity": "sha512-vAfasCOe6AIK70iP5UD11Ac4siNUNJ9i/9PZ3NKx07sG6sUxeag1LWdNrMWeKKYBLlzuK+Gn65Yd5nyL6ds+nw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "tinyspy": "^4.0.3"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      }
+    },
+    "node_modules/@vitest/utils": {
+      "version": "3.2.4",
+      "resolved": "https://registry.npmjs.org/@vitest/utils/-/utils-3.2.4.tgz",
+      "integrity": "sha512-fB2V0JFrQSMsCo9HiSq3Ezpdv4iYaXRG1Sx8edX3MwxfyNn83mKiGzOcH+Fkxt4MHxr3y42fQi1oeAInqgX2QA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@vitest/pretty-format": "3.2.4",
+        "loupe": "^3.1.4",
+        "tinyrainbow": "^2.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      }
+    },
     "node_modules/acorn": {
       "version": "8.16.0",
       "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.16.0.tgz",
@@ -2482,6 +3983,16 @@
         "url": "https://github.com/sponsors/ljharb"
       }
     },
+    "node_modules/assertion-error": {
+      "version": "2.0.1",
+      "resolved": "https://registry.npmjs.org/assertion-error/-/assertion-error-2.0.1.tgz",
+      "integrity": "sha512-Izi8RQcffqCeNVgFigKli1ssklIbpHnCYc6AknXGYoB6grJqyeby7jv12JUQgmTAnIDnbck1uxksT4dzN3PWBA==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=12"
+      }
+    },
     "node_modules/ast-types-flow": {
       "version": "0.0.8",
       "resolved": "https://registry.npmjs.org/ast-types-flow/-/ast-types-flow-0.0.8.tgz",
@@ -2499,6 +4010,15 @@
         "node": ">= 0.4"
       }
     },
+    "node_modules/async-retry": {
+      "version": "1.3.3",
+      "resolved": "https://registry.npmjs.org/async-retry/-/async-retry-1.3.3.tgz",
+      "integrity": "sha512-wfr/jstw9xNi/0teMHrRW7dsz3Lt5ARhYNZ2ewpadnhaIp5mbALhOAP+EAdsC7t4Z6wqsDVv9+W6gm1Dk9mEyw==",
+      "license": "MIT",
+      "dependencies": {
+        "retry": "0.13.1"
+      }
+    },
     "node_modules/available-typed-arrays": {
       "version": "1.0.7",
       "resolved": "https://registry.npmjs.org/available-typed-arrays/-/available-typed-arrays-1.0.7.tgz",
@@ -2612,6 +4132,16 @@
         "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
       }
     },
+    "node_modules/cac": {
+      "version": "6.7.14",
+      "resolved": "https://registry.npmjs.org/cac/-/cac-6.7.14.tgz",
+      "integrity": "sha512-b6Ilus+c3RrdDk+JhLKUAQfzzgLEPy6wcXqS7f/xe1EETvsDP6GORG7SFuOs6cID5YkqchW/LXZbX5bc8j7ZcQ==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/call-bind": {
       "version": "1.0.8",
       "resolved": "https://registry.npmjs.org/call-bind/-/call-bind-1.0.8.tgz",
@@ -2692,6 +4222,23 @@
       ],
       "license": "CC-BY-4.0"
     },
+    "node_modules/chai": {
+      "version": "5.3.3",
+      "resolved": "https://registry.npmjs.org/chai/-/chai-5.3.3.tgz",
+      "integrity": "sha512-4zNhdJD/iOjSH0A05ea+Ke6MU5mmpQcbQsSOkgdaUMJ9zTlDTD/GYlwohmIE2u0gaxHYiVHEn1Fw9mZ/ktJWgw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "assertion-error": "^2.0.1",
+        "check-error": "^2.1.1",
+        "deep-eql": "^5.0.1",
+        "loupe": "^3.1.0",
+        "pathval": "^2.0.0"
+      },
+      "engines": {
+        "node": ">=18"
+      }
+    },
     "node_modules/chalk": {
       "version": "4.1.2",
       "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
@@ -2709,6 +4256,16 @@
         "url": "https://github.com/chalk/chalk?sponsor=1"
       }
     },
+    "node_modules/check-error": {
+      "version": "2.1.3",
+      "resolved": "https://registry.npmjs.org/check-error/-/check-error-2.1.3.tgz",
+      "integrity": "sha512-PAJdDJusoxnwm1VwW07VWwUN1sl7smmC3OKggvndJFadxxDRyFJBX/ggnu/KE4kQAB7a3Dp8f/YXC1FlUprWmA==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">= 16"
+      }
+    },
     "node_modules/client-only": {
       "version": "0.0.1",
       "resolved": "https://registry.npmjs.org/client-only/-/client-only-0.0.1.tgz",
@@ -2869,6 +4426,22 @@
         }
       }
     },
+    "node_modules/decimal.js": {
+      "version": "10.6.0",
+      "resolved": "https://registry.npmjs.org/decimal.js/-/decimal.js-10.6.0.tgz",
+      "integrity": "sha512-YpgQiITW3JXGntzdUmyUR1V812Hn8T1YVXhCu+wO3OpS4eU9l4YdD3qjyiKdV6mvV29zapkMeD390UVEf2lkUg==",
+      "license": "MIT"
+    },
+    "node_modules/deep-eql": {
+      "version": "5.0.2",
+      "resolved": "https://registry.npmjs.org/deep-eql/-/deep-eql-5.0.2.tgz",
+      "integrity": "sha512-h5k/5U50IJJFpzfL6nO9jaaumfjO/f2NjK/oYB2Djzm4p9L+3T9qWpZqZ2hAbLPuuYq9wrU08WQyBTL5GbPk5Q==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6"
+      }
+    },
     "node_modules/deep-is": {
       "version": "0.1.4",
       "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
@@ -2916,7 +4489,6 @@
       "version": "2.1.2",
       "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.1.2.tgz",
       "integrity": "sha512-Btj2BOOO83o3WyH59e8MgXsxEQVcarkUOpEYrubB0urwnN10yQ364rsiByU11nZlqWYZm05i/of7io4mzihBtQ==",
-      "devOptional": true,
       "license": "Apache-2.0",
       "engines": {
         "node": ">=8"
@@ -3095,6 +4667,13 @@
         "node": ">= 0.4"
       }
     },
+    "node_modules/es-module-lexer": {
+      "version": "1.7.0",
+      "resolved": "https://registry.npmjs.org/es-module-lexer/-/es-module-lexer-1.7.0.tgz",
+      "integrity": "sha512-jEQoCwk8hyb2AZziIOLhDqpm5+2ww5uIE6lkO/6jcOCusfk6LhMHpXXfBLXTZ7Ydyt0j4VoUQv6uGNYbdW+kBA==",
+      "dev": true,
+      "license": "MIT"
+    },
     "node_modules/es-object-atoms": {
       "version": "1.1.1",
       "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
@@ -3155,6 +4734,48 @@
         "url": "https://github.com/sponsors/ljharb"
       }
     },
+    "node_modules/esbuild": {
+      "version": "0.27.3",
+      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.27.3.tgz",
+      "integrity": "sha512-8VwMnyGCONIs6cWue2IdpHxHnAjzxnw2Zr7MkVxB2vjmQ2ivqGFb4LEG3SMnv0Gb2F/G/2yA8zUaiL1gywDCCg==",
+      "dev": true,
+      "hasInstallScript": true,
+      "license": "MIT",
+      "bin": {
+        "esbuild": "bin/esbuild"
+      },
+      "engines": {
+        "node": ">=18"
+      },
+      "optionalDependencies": {
+        "@esbuild/aix-ppc64": "0.27.3",
+        "@esbuild/android-arm": "0.27.3",
+        "@esbuild/android-arm64": "0.27.3",
+        "@esbuild/android-x64": "0.27.3",
+        "@esbuild/darwin-arm64": "0.27.3",
+        "@esbuild/darwin-x64": "0.27.3",
+        "@esbuild/freebsd-arm64": "0.27.3",
+        "@esbuild/freebsd-x64": "0.27.3",
+        "@esbuild/linux-arm": "0.27.3",
+        "@esbuild/linux-arm64": "0.27.3",
+        "@esbuild/linux-ia32": "0.27.3",
+        "@esbuild/linux-loong64": "0.27.3",
+        "@esbuild/linux-mips64el": "0.27.3",
+        "@esbuild/linux-ppc64": "0.27.3",
+        "@esbuild/linux-riscv64": "0.27.3",
+        "@esbuild/linux-s390x": "0.27.3",
+        "@esbuild/linux-x64": "0.27.3",
+        "@esbuild/netbsd-arm64": "0.27.3",
+        "@esbuild/netbsd-x64": "0.27.3",
+        "@esbuild/openbsd-arm64": "0.27.3",
+        "@esbuild/openbsd-x64": "0.27.3",
+        "@esbuild/openharmony-arm64": "0.27.3",
+        "@esbuild/sunos-x64": "0.27.3",
+        "@esbuild/win32-arm64": "0.27.3",
+        "@esbuild/win32-ia32": "0.27.3",
+        "@esbuild/win32-x64": "0.27.3"
+      }
+    },
     "node_modules/escalade": {
       "version": "3.2.0",
       "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
@@ -3598,6 +5219,16 @@
         "node": ">=4.0"
       }
     },
+    "node_modules/estree-walker": {
+      "version": "3.0.3",
+      "resolved": "https://registry.npmjs.org/estree-walker/-/estree-walker-3.0.3.tgz",
+      "integrity": "sha512-7RUKfXgSMMkzt6ZuXmqapOurLGPPfgj6l9uRZ7lRGolvk0y2yocc35LdcxKC5PQZdn2DMqioAQ2NoWcrTKmm6g==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@types/estree": "^1.0.0"
+      }
+    },
     "node_modules/esutils": {
       "version": "2.0.3",
       "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
@@ -3608,6 +5239,16 @@
         "node": ">=0.10.0"
       }
     },
+    "node_modules/expect-type": {
+      "version": "1.3.0",
+      "resolved": "https://registry.npmjs.org/expect-type/-/expect-type-1.3.0.tgz",
+      "integrity": "sha512-knvyeauYhqjOYvQ66MznSMs83wmHrCycNEN6Ao+2AeYEfxUIkuiVxdEa1qlGEPK+We3n0THiDciYSsCcgW/DoA==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "engines": {
+        "node": ">=12.0.0"
+      }
+    },
     "node_modules/fast-deep-equal": {
       "version": "3.1.3",
       "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
@@ -4068,6 +5709,21 @@
         "hermes-estree": "0.25.1"
       }
     },
+    "node_modules/icu-minify": {
+      "version": "4.8.3",
+      "resolved": "https://registry.npmjs.org/icu-minify/-/icu-minify-4.8.3.tgz",
+      "integrity": "sha512-65Av7FLosNk7bPbmQx5z5XG2Y3T2GFppcjiXh4z1idHeVgQxlDpAmkGoYI0eFzAvrOnjpWTL5FmPDhsdfRMPEA==",
+      "funding": [
+        {
+          "type": "individual",
+          "url": "https://github.com/sponsors/amannn"
+        }
+      ],
+      "license": "MIT",
+      "dependencies": {
+        "@formatjs/icu-messageformat-parser": "^3.4.0"
+      }
+    },
     "node_modules/ignore": {
       "version": "5.3.2",
       "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
@@ -4120,6 +5776,18 @@
         "node": ">= 0.4"
       }
     },
+    "node_modules/intl-messageformat": {
+      "version": "11.1.2",
+      "resolved": "https://registry.npmjs.org/intl-messageformat/-/intl-messageformat-11.1.2.tgz",
+      "integrity": "sha512-ucSrQmZGAxfiBHfBRXW/k7UC8MaGFlEj4Ry1tKiDcmgwQm1y3EDl40u+4VNHYomxJQMJi9NEI3riDRlth96jKg==",
+      "license": "BSD-3-Clause",
+      "dependencies": {
+        "@formatjs/ecma402-abstract": "3.1.1",
+        "@formatjs/fast-memoize": "3.1.0",
+        "@formatjs/icu-messageformat-parser": "3.5.1",
+        "tslib": "^2.8.1"
+      }
+    },
     "node_modules/is-array-buffer": {
       "version": "3.0.5",
       "resolved": "https://registry.npmjs.org/is-array-buffer/-/is-array-buffer-3.0.5.tgz",
@@ -4191,6 +5859,29 @@
         "url": "https://github.com/sponsors/ljharb"
       }
     },
+    "node_modules/is-buffer": {
+      "version": "2.0.5",
+      "resolved": "https://registry.npmjs.org/is-buffer/-/is-buffer-2.0.5.tgz",
+      "integrity": "sha512-i2R6zNFDwgEHJyQUtJEk0XFi1i0dPFn/oqjK3/vPCcDeJvW5NQ83V8QbicfF1SupOaB0h8ntgBC2YiE7dfyctQ==",
+      "funding": [
+        {
+          "type": "github",
+          "url": "https://github.com/sponsors/feross"
+        },
+        {
+          "type": "patreon",
+          "url": "https://www.patreon.com/feross"
+        },
+        {
+          "type": "consulting",
+          "url": "https://feross.org/support"
+        }
+      ],
+      "license": "MIT",
+      "engines": {
+        "node": ">=4"
+      }
+    },
     "node_modules/is-bun-module": {
       "version": "2.0.0",
       "resolved": "https://registry.npmjs.org/is-bun-module/-/is-bun-module-2.0.0.tgz",
@@ -4282,7 +5973,6 @@
       "version": "2.1.1",
       "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
       "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
-      "dev": true,
       "license": "MIT",
       "engines": {
         "node": ">=0.10.0"
@@ -4328,7 +6018,6 @@
       "version": "4.0.3",
       "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
       "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
-      "dev": true,
       "license": "MIT",
       "dependencies": {
         "is-extglob": "^2.1.1"
@@ -4363,6 +6052,12 @@
         "url": "https://github.com/sponsors/ljharb"
       }
     },
+    "node_modules/is-node-process": {
+      "version": "1.2.0",
+      "resolved": "https://registry.npmjs.org/is-node-process/-/is-node-process-1.2.0.tgz",
+      "integrity": "sha512-Vg4o6/fqPxIjtxgUH5QLJhwZ7gW5diGCVlXpuUfELC62CuxM1iHcRe51f2W1FDy04Ai4KJkagKjx3XaqyfRKXw==",
+      "license": "MIT"
+    },
     "node_modules/is-number": {
       "version": "7.0.0",
       "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
@@ -5010,6 +6705,13 @@
         "loose-envify": "cli.js"
       }
     },
+    "node_modules/loupe": {
+      "version": "3.2.1",
+      "resolved": "https://registry.npmjs.org/loupe/-/loupe-3.2.1.tgz",
+      "integrity": "sha512-CdzqowRJCeLU72bHvWqwRBBlLcMEtIvGrlvef74kMnV2AolS9Y8xUv1I0U/MNAWMhBlKIoyuEgoJ0t/bbwHbLQ==",
+      "dev": true,
+      "license": "MIT"
+    },
     "node_modules/lru-cache": {
       "version": "5.1.1",
       "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
@@ -5144,6 +6846,15 @@
       "dev": true,
       "license": "MIT"
     },
+    "node_modules/negotiator": {
+      "version": "1.0.0",
+      "resolved": "https://registry.npmjs.org/negotiator/-/negotiator-1.0.0.tgz",
+      "integrity": "sha512-8Ofs/AUQh8MaEcrlq5xOX0CQ9ypTF5dl78mjlMNfOK08fzpgTHQRQPBxcPlEtIw0yRpws+Zo/3r+5WRby7u3Gg==",
+      "license": "MIT",
+      "engines": {
+        "node": ">= 0.6"
+      }
+    },
     "node_modules/next": {
       "version": "16.1.6",
       "resolved": "https://registry.npmjs.org/next/-/next-16.1.6.tgz",
@@ -5253,6 +6964,93 @@
         }
       }
     },
+    "node_modules/next-intl": {
+      "version": "4.8.3",
+      "resolved": "https://registry.npmjs.org/next-intl/-/next-intl-4.8.3.tgz",
+      "integrity": "sha512-PvdBDWg+Leh7BR7GJUQbCDVVaBRn37GwDBWc9sv0rVQOJDQ5JU1rVzx9EEGuOGYo0DHAl70++9LQ7HxTawdL7w==",
+      "funding": [
+        {
+          "type": "individual",
+          "url": "https://github.com/sponsors/amannn"
+        }
+      ],
+      "license": "MIT",
+      "dependencies": {
+        "@formatjs/intl-localematcher": "^0.8.1",
+        "@parcel/watcher": "^2.4.1",
+        "@swc/core": "^1.15.2",
+        "icu-minify": "^4.8.3",
+        "negotiator": "^1.0.0",
+        "next-intl-swc-plugin-extractor": "^4.8.3",
+        "po-parser": "^2.1.1",
+        "use-intl": "^4.8.3"
+      },
+      "peerDependencies": {
+        "next": "^12.0.0 || ^13.0.0 || ^14.0.0 || ^15.0.0 || ^16.0.0",
+        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || >=19.0.0-rc <19.0.0 || ^19.0.0",
+        "typescript": "^5.0.0"
+      },
+      "peerDependenciesMeta": {
+        "typescript": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/next-intl-swc-plugin-extractor": {
+      "version": "4.8.3",
+      "resolved": "https://registry.npmjs.org/next-intl-swc-plugin-extractor/-/next-intl-swc-plugin-extractor-4.8.3.tgz",
+      "integrity": "sha512-YcaT+R9z69XkGhpDarVFWUprrCMbxgIQYPUaXoE6LGVnLjGdo8hu3gL6bramDVjNKViYY8a/pXPy7Bna0mXORg==",
+      "license": "MIT"
+    },
+    "node_modules/next-intl/node_modules/@swc/core": {
+      "version": "1.15.11",
+      "resolved": "https://registry.npmjs.org/@swc/core/-/core-1.15.11.tgz",
+      "integrity": "sha512-iLmLTodbYxU39HhMPaMUooPwO/zqJWvsqkrXv1ZI38rMb048p6N7qtAtTp37sw9NzSrvH6oli8EdDygo09IZ/w==",
+      "hasInstallScript": true,
+      "license": "Apache-2.0",
+      "dependencies": {
+        "@swc/counter": "^0.1.3",
+        "@swc/types": "^0.1.25"
+      },
+      "engines": {
+        "node": ">=10"
+      },
+      "funding": {
+        "type": "opencollective",
+        "url": "https://opencollective.com/swc"
+      },
+      "optionalDependencies": {
+        "@swc/core-darwin-arm64": "1.15.11",
+        "@swc/core-darwin-x64": "1.15.11",
+        "@swc/core-linux-arm-gnueabihf": "1.15.11",
+        "@swc/core-linux-arm64-gnu": "1.15.11",
+        "@swc/core-linux-arm64-musl": "1.15.11",
+        "@swc/core-linux-x64-gnu": "1.15.11",
+        "@swc/core-linux-x64-musl": "1.15.11",
+        "@swc/core-win32-arm64-msvc": "1.15.11",
+        "@swc/core-win32-ia32-msvc": "1.15.11",
+        "@swc/core-win32-x64-msvc": "1.15.11"
+      },
+      "peerDependencies": {
+        "@swc/helpers": ">=0.5.17"
+      },
+      "peerDependenciesMeta": {
+        "@swc/helpers": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/next-intl/node_modules/@swc/helpers": {
+      "version": "0.5.19",
+      "resolved": "https://registry.npmjs.org/@swc/helpers/-/helpers-0.5.19.tgz",
+      "integrity": "sha512-QamiFeIK3txNjgUTNppE6MiG3p7TdninpZu0E0PbqVh1a9FNLT2FRhisaa4NcaX52XVhA5l7Pk58Ft7Sqi/2sA==",
+      "license": "Apache-2.0",
+      "optional": true,
+      "peer": true,
+      "dependencies": {
+        "tslib": "^2.8.0"
+      }
+    },
     "node_modules/next/node_modules/postcss": {
       "version": "8.4.31",
       "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.4.31.tgz",
@@ -5281,6 +7079,12 @@
         "node": "^10 || ^12 || >=14"
       }
     },
+    "node_modules/node-addon-api": {
+      "version": "7.1.1",
+      "resolved": "https://registry.npmjs.org/node-addon-api/-/node-addon-api-7.1.1.tgz",
+      "integrity": "sha512-5m3bsyrjFWE1xf7nz7YXdN4udnVtXK6/Yfgn5qnahL6bCkf2yKt4k3nuTKAtT4r3IG8JNR2ncsIMdZuAzJjHQQ==",
+      "license": "MIT"
+    },
     "node_modules/node-exports-info": {
       "version": "1.6.0",
       "resolved": "https://registry.npmjs.org/node-exports-info/-/node-exports-info-1.6.0.tgz",
@@ -5547,6 +7351,23 @@
       "dev": true,
       "license": "MIT"
     },
+    "node_modules/pathe": {
+      "version": "2.0.3",
+      "resolved": "https://registry.npmjs.org/pathe/-/pathe-2.0.3.tgz",
+      "integrity": "sha512-WUjGcAqP1gQacoQe+OBJsFA7Ld4DyXuUIjZ5cc75cLHvJ7dtNsTugphxIADwspS+AraAUePCKrSVtPLFj/F88w==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/pathval": {
+      "version": "2.0.1",
+      "resolved": "https://registry.npmjs.org/pathval/-/pathval-2.0.1.tgz",
+      "integrity": "sha512-//nshmD55c46FuFw26xV/xFAaB5HF9Xdap7HJBBnrKdAd6/GxDBaNA1870O79+9ueg61cZLSVc+OaFlfmObYVQ==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">= 14.16"
+      }
+    },
     "node_modules/picocolors": {
       "version": "1.1.1",
       "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
@@ -5566,6 +7387,59 @@
         "url": "https://github.com/sponsors/jonschlinkert"
       }
     },
+    "node_modules/playwright": {
+      "version": "1.58.2",
+      "resolved": "https://registry.npmjs.org/playwright/-/playwright-1.58.2.tgz",
+      "integrity": "sha512-vA30H8Nvkq/cPBnNw4Q8TWz1EJyqgpuinBcHET0YVJVFldr8JDNiU9LaWAE1KqSkRYazuaBhTpB5ZzShOezQ6A==",
+      "devOptional": true,
+      "license": "Apache-2.0",
+      "dependencies": {
+        "playwright-core": "1.58.2"
+      },
+      "bin": {
+        "playwright": "cli.js"
+      },
+      "engines": {
+        "node": ">=18"
+      },
+      "optionalDependencies": {
+        "fsevents": "2.3.2"
+      }
+    },
+    "node_modules/playwright-core": {
+      "version": "1.58.2",
+      "resolved": "https://registry.npmjs.org/playwright-core/-/playwright-core-1.58.2.tgz",
+      "integrity": "sha512-yZkEtftgwS8CsfYo7nm0KE8jsvm6i/PTgVtB8DL726wNf6H2IMsDuxCpJj59KDaxCtSnrWan2AeDqM7JBaultg==",
+      "devOptional": true,
+      "license": "Apache-2.0",
+      "bin": {
+        "playwright-core": "cli.js"
+      },
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/playwright/node_modules/fsevents": {
+      "version": "2.3.2",
+      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.2.tgz",
+      "integrity": "sha512-xiqMQR4xAeHTuB9uWm+fFRcIOgKBMiOBP+eXiyT7jsgVCq1bkVygt00oASowB7EdtpOHaaPgKt812P9ab+DDKA==",
+      "dev": true,
+      "hasInstallScript": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "engines": {
+        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
+      }
+    },
+    "node_modules/po-parser": {
+      "version": "2.1.1",
+      "resolved": "https://registry.npmjs.org/po-parser/-/po-parser-2.1.1.tgz",
+      "integrity": "sha512-ECF4zHLbUItpUgE3OTtLKlPjeBN+fKEczj2zYjDfCGOzicNs0GK3Vg2IoAYwx7LH/XYw43fZQP6xnZ4TkNxSLQ==",
+      "license": "MIT"
+    },
     "node_modules/possible-typed-array-names": {
       "version": "1.1.0",
       "resolved": "https://registry.npmjs.org/possible-typed-array-names/-/possible-typed-array-names-1.1.0.tgz",
@@ -5809,6 +7683,15 @@
         "url": "https://github.com/privatenumber/resolve-pkg-maps?sponsor=1"
       }
     },
+    "node_modules/retry": {
+      "version": "0.13.1",
+      "resolved": "https://registry.npmjs.org/retry/-/retry-0.13.1.tgz",
+      "integrity": "sha512-XQBQ3I8W1Cge0Seh+6gjj03LbmRFWuoszgK9ooCpwYIrhhoO80pfq4cUkU5DkknwfOfFteRwlZ56PYOGYyFWdg==",
+      "license": "MIT",
+      "engines": {
+        "node": ">= 4"
+      }
+    },
     "node_modules/reusify": {
       "version": "1.1.0",
       "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.1.0.tgz",
@@ -5820,6 +7703,51 @@
         "node": ">=0.10.0"
       }
     },
+    "node_modules/rollup": {
+      "version": "4.59.0",
+      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.59.0.tgz",
+      "integrity": "sha512-2oMpl67a3zCH9H79LeMcbDhXW/UmWG/y2zuqnF2jQq5uq9TbM9TVyXvA4+t+ne2IIkBdrLpAaRQAvo7YI/Yyeg==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@types/estree": "1.0.8"
+      },
+      "bin": {
+        "rollup": "dist/bin/rollup"
+      },
+      "engines": {
+        "node": ">=18.0.0",
+        "npm": ">=8.0.0"
+      },
+      "optionalDependencies": {
+        "@rollup/rollup-android-arm-eabi": "4.59.0",
+        "@rollup/rollup-android-arm64": "4.59.0",
+        "@rollup/rollup-darwin-arm64": "4.59.0",
+        "@rollup/rollup-darwin-x64": "4.59.0",
+        "@rollup/rollup-freebsd-arm64": "4.59.0",
+        "@rollup/rollup-freebsd-x64": "4.59.0",
+        "@rollup/rollup-linux-arm-gnueabihf": "4.59.0",
+        "@rollup/rollup-linux-arm-musleabihf": "4.59.0",
+        "@rollup/rollup-linux-arm64-gnu": "4.59.0",
+        "@rollup/rollup-linux-arm64-musl": "4.59.0",
+        "@rollup/rollup-linux-loong64-gnu": "4.59.0",
+        "@rollup/rollup-linux-loong64-musl": "4.59.0",
+        "@rollup/rollup-linux-ppc64-gnu": "4.59.0",
+        "@rollup/rollup-linux-ppc64-musl": "4.59.0",
+        "@rollup/rollup-linux-riscv64-gnu": "4.59.0",
+        "@rollup/rollup-linux-riscv64-musl": "4.59.0",
+        "@rollup/rollup-linux-s390x-gnu": "4.59.0",
+        "@rollup/rollup-linux-x64-gnu": "4.59.0",
+        "@rollup/rollup-linux-x64-musl": "4.59.0",
+        "@rollup/rollup-openbsd-x64": "4.59.0",
+        "@rollup/rollup-openharmony-arm64": "4.59.0",
+        "@rollup/rollup-win32-arm64-msvc": "4.59.0",
+        "@rollup/rollup-win32-ia32-msvc": "4.59.0",
+        "@rollup/rollup-win32-x64-gnu": "4.59.0",
+        "@rollup/rollup-win32-x64-msvc": "4.59.0",
+        "fsevents": "~2.3.2"
+      }
+    },
     "node_modules/run-parallel": {
       "version": "1.2.0",
       "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
@@ -6121,6 +8049,13 @@
         "url": "https://github.com/sponsors/ljharb"
       }
     },
+    "node_modules/siginfo": {
+      "version": "2.0.0",
+      "resolved": "https://registry.npmjs.org/siginfo/-/siginfo-2.0.0.tgz",
+      "integrity": "sha512-ybx0WO1/8bSBLEWXZvEd7gMW3Sn3JFlW3TvX1nREbDLRNQNaeNN8WK0meBwPdAaOI7TtRRRJn/Es1zhrrCHu7g==",
+      "dev": true,
+      "license": "ISC"
+    },
     "node_modules/sonner": {
       "version": "2.0.7",
       "resolved": "https://registry.npmjs.org/sonner/-/sonner-2.0.7.tgz",
@@ -6147,6 +8082,20 @@
       "dev": true,
       "license": "MIT"
     },
+    "node_modules/stackback": {
+      "version": "0.0.2",
+      "resolved": "https://registry.npmjs.org/stackback/-/stackback-0.0.2.tgz",
+      "integrity": "sha512-1XMJE5fQo1jGH6Y/7ebnwPOBEkIEnT4QF32d5R1+VXdXveM0IBMJt8zfaxX1P3QhVwrYe+576+jkANtSS2mBbw==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/std-env": {
+      "version": "3.10.0",
+      "resolved": "https://registry.npmjs.org/std-env/-/std-env-3.10.0.tgz",
+      "integrity": "sha512-5GS12FdOZNliM5mAOxFRg7Ir0pWz8MdpYm6AY6VPkGpbA7ZzmbzNcBJQ0GPvvyWgcY7QAhCgf9Uy89I03faLkg==",
+      "dev": true,
+      "license": "MIT"
+    },
     "node_modules/stop-iteration-iterator": {
       "version": "1.1.0",
       "resolved": "https://registry.npmjs.org/stop-iteration-iterator/-/stop-iteration-iterator-1.1.0.tgz",
@@ -6297,6 +8246,26 @@
         "url": "https://github.com/sponsors/sindresorhus"
       }
     },
+    "node_modules/strip-literal": {
+      "version": "3.1.0",
+      "resolved": "https://registry.npmjs.org/strip-literal/-/strip-literal-3.1.0.tgz",
+      "integrity": "sha512-8r3mkIM/2+PpjHoOtiAW8Rg3jJLHaV7xPwG+YRGrv6FP0wwk/toTpATxWYOW0BKdWwl82VT2tFYi5DlROa0Mxg==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "js-tokens": "^9.0.1"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/antfu"
+      }
+    },
+    "node_modules/strip-literal/node_modules/js-tokens": {
+      "version": "9.0.1",
+      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-9.0.1.tgz",
+      "integrity": "sha512-mxa9E9ITFOt0ban3j6L5MpjwegGz6lBQmM1IJkWeBZGcMxto50+eWdjC/52xDbS2vy0k7vIMK0Fe2wfL9OQSpQ==",
+      "dev": true,
+      "license": "MIT"
+    },
     "node_modules/styled-jsx": {
       "version": "5.1.6",
       "resolved": "https://registry.npmjs.org/styled-jsx/-/styled-jsx-5.1.6.tgz",
@@ -6377,6 +8346,32 @@
         "url": "https://opencollective.com/webpack"
       }
     },
+    "node_modules/throttleit": {
+      "version": "2.1.0",
+      "resolved": "https://registry.npmjs.org/throttleit/-/throttleit-2.1.0.tgz",
+      "integrity": "sha512-nt6AMGKW1p/70DF/hGBdJB57B8Tspmbp5gfJ8ilhLnt7kkr2ye7hzD6NVG8GGErk2HWF34igrL2CXmNIkzKqKw==",
+      "license": "MIT",
+      "engines": {
+        "node": ">=18"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/sindresorhus"
+      }
+    },
+    "node_modules/tinybench": {
+      "version": "2.9.0",
+      "resolved": "https://registry.npmjs.org/tinybench/-/tinybench-2.9.0.tgz",
+      "integrity": "sha512-0+DUvqWMValLmha6lr4kD8iAMK1HzV0/aKnCtWb9v9641TnP/MFb7Pc2bxoxQjTXAErryXVgUOfv2YqNllqGeg==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/tinyexec": {
+      "version": "0.3.2",
+      "resolved": "https://registry.npmjs.org/tinyexec/-/tinyexec-0.3.2.tgz",
+      "integrity": "sha512-KQQR9yN7R5+OSwaK0XQoj22pwHoTlgYqmUscPYoknOoWCWfj/5/ABTMRi69FrKU5ffPVh5QcFikpWJI/P1ocHA==",
+      "dev": true,
+      "license": "MIT"
+    },
     "node_modules/tinyglobby": {
       "version": "0.2.15",
       "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.15.tgz",
@@ -6425,6 +8420,36 @@
         "url": "https://github.com/sponsors/jonschlinkert"
       }
     },
+    "node_modules/tinypool": {
+      "version": "1.1.1",
+      "resolved": "https://registry.npmjs.org/tinypool/-/tinypool-1.1.1.tgz",
+      "integrity": "sha512-Zba82s87IFq9A9XmjiX5uZA/ARWDrB03OHlq+Vw1fSdt0I+4/Kutwy8BP4Y/y/aORMo61FQ0vIb5j44vSo5Pkg==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": "^18.0.0 || >=20.0.0"
+      }
+    },
+    "node_modules/tinyrainbow": {
+      "version": "2.0.0",
+      "resolved": "https://registry.npmjs.org/tinyrainbow/-/tinyrainbow-2.0.0.tgz",
+      "integrity": "sha512-op4nsTR47R6p0vMUUoYl/a+ljLFVtlfaXkLQmqfLR1qHma1h/ysYk4hEXZ880bf2CYgTskvTa/e196Vd5dDQXw==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=14.0.0"
+      }
+    },
+    "node_modules/tinyspy": {
+      "version": "4.0.4",
+      "resolved": "https://registry.npmjs.org/tinyspy/-/tinyspy-4.0.4.tgz",
+      "integrity": "sha512-azl+t0z7pw/z958Gy9svOTuzqIk6xq+NSheJzn5MMWtWTFywIacg2wUlzKFGtt3cthx0r2SxMK0yzJOR0IES7Q==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=14.0.0"
+      }
+    },
     "node_modules/to-regex-range": {
       "version": "5.0.1",
       "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
@@ -6578,7 +8603,7 @@
       "version": "5.9.3",
       "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.9.3.tgz",
       "integrity": "sha512-jl1vZzPDinLr9eUt3J/t7V6FgNEw9QjvBPdysz9KfQDD41fQrC2Y4vKQdiaUpFT4bXlb1RHhLpp8wtm6M5TgSw==",
-      "dev": true,
+      "devOptional": true,
       "license": "Apache-2.0",
       "bin": {
         "tsc": "bin/tsc",
@@ -6631,6 +8656,15 @@
         "url": "https://github.com/sponsors/ljharb"
       }
     },
+    "node_modules/undici": {
+      "version": "6.23.0",
+      "resolved": "https://registry.npmjs.org/undici/-/undici-6.23.0.tgz",
+      "integrity": "sha512-VfQPToRA5FZs/qJxLIinmU59u0r7LXqoJkCzinq3ckNJp3vKEh7jTWN589YQ5+aoAC/TGRLyJLCPKcLQbM8r9g==",
+      "license": "MIT",
+      "engines": {
+        "node": ">=18.17"
+      }
+    },
     "node_modules/undici-types": {
       "version": "6.21.0",
       "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-6.21.0.tgz",
@@ -6714,6 +8748,242 @@
         "punycode": "^2.1.0"
       }
     },
+    "node_modules/use-intl": {
+      "version": "4.8.3",
+      "resolved": "https://registry.npmjs.org/use-intl/-/use-intl-4.8.3.tgz",
+      "integrity": "sha512-nLxlC/RH+le6g3amA508Itnn/00mE+J22ui21QhOWo5V9hCEC43+WtnRAITbJW0ztVZphev5X9gvOf2/Dk9PLA==",
+      "funding": [
+        {
+          "type": "individual",
+          "url": "https://github.com/sponsors/amannn"
+        }
+      ],
+      "license": "MIT",
+      "dependencies": {
+        "@formatjs/fast-memoize": "^3.1.0",
+        "@schummar/icu-type-parser": "1.21.5",
+        "icu-minify": "^4.8.3",
+        "intl-messageformat": "^11.1.0"
+      },
+      "peerDependencies": {
+        "react": "^17.0.0 || ^18.0.0 || >=19.0.0-rc <19.0.0 || ^19.0.0"
+      }
+    },
+    "node_modules/vite": {
+      "version": "7.3.1",
+      "resolved": "https://registry.npmjs.org/vite/-/vite-7.3.1.tgz",
+      "integrity": "sha512-w+N7Hifpc3gRjZ63vYBXA56dvvRlNWRczTdmCBBa+CotUzAPf5b7YMdMR/8CQoeYE5LX3W4wj6RYTgonm1b9DA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "esbuild": "^0.27.0",
+        "fdir": "^6.5.0",
+        "picomatch": "^4.0.3",
+        "postcss": "^8.5.6",
+        "rollup": "^4.43.0",
+        "tinyglobby": "^0.2.15"
+      },
+      "bin": {
+        "vite": "bin/vite.js"
+      },
+      "engines": {
+        "node": "^20.19.0 || >=22.12.0"
+      },
+      "funding": {
+        "url": "https://github.com/vitejs/vite?sponsor=1"
+      },
+      "optionalDependencies": {
+        "fsevents": "~2.3.3"
+      },
+      "peerDependencies": {
+        "@types/node": "^20.19.0 || >=22.12.0",
+        "jiti": ">=1.21.0",
+        "less": "^4.0.0",
+        "lightningcss": "^1.21.0",
+        "sass": "^1.70.0",
+        "sass-embedded": "^1.70.0",
+        "stylus": ">=0.54.8",
+        "sugarss": "^5.0.0",
+        "terser": "^5.16.0",
+        "tsx": "^4.8.1",
+        "yaml": "^2.4.2"
+      },
+      "peerDependenciesMeta": {
+        "@types/node": {
+          "optional": true
+        },
+        "jiti": {
+          "optional": true
+        },
+        "less": {
+          "optional": true
+        },
+        "lightningcss": {
+          "optional": true
+        },
+        "sass": {
+          "optional": true
+        },
+        "sass-embedded": {
+          "optional": true
+        },
+        "stylus": {
+          "optional": true
+        },
+        "sugarss": {
+          "optional": true
+        },
+        "terser": {
+          "optional": true
+        },
+        "tsx": {
+          "optional": true
+        },
+        "yaml": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/vite-node": {
+      "version": "3.2.4",
+      "resolved": "https://registry.npmjs.org/vite-node/-/vite-node-3.2.4.tgz",
+      "integrity": "sha512-EbKSKh+bh1E1IFxeO0pg1n4dvoOTt0UDiXMd/qn++r98+jPO1xtJilvXldeuQ8giIB5IkpjCgMleHMNEsGH6pg==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "cac": "^6.7.14",
+        "debug": "^4.4.1",
+        "es-module-lexer": "^1.7.0",
+        "pathe": "^2.0.3",
+        "vite": "^5.0.0 || ^6.0.0 || ^7.0.0-0"
+      },
+      "bin": {
+        "vite-node": "vite-node.mjs"
+      },
+      "engines": {
+        "node": "^18.0.0 || ^20.0.0 || >=22.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      }
+    },
+    "node_modules/vite/node_modules/fdir": {
+      "version": "6.5.0",
+      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
+      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=12.0.0"
+      },
+      "peerDependencies": {
+        "picomatch": "^3 || ^4"
+      },
+      "peerDependenciesMeta": {
+        "picomatch": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/vite/node_modules/picomatch": {
+      "version": "4.0.3",
+      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
+      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/jonschlinkert"
+      }
+    },
+    "node_modules/vitest": {
+      "version": "3.2.4",
+      "resolved": "https://registry.npmjs.org/vitest/-/vitest-3.2.4.tgz",
+      "integrity": "sha512-LUCP5ev3GURDysTWiP47wRRUpLKMOfPh+yKTx3kVIEiu5KOMeqzpnYNsKyOoVrULivR8tLcks4+lga33Whn90A==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@types/chai": "^5.2.2",
+        "@vitest/expect": "3.2.4",
+        "@vitest/mocker": "3.2.4",
+        "@vitest/pretty-format": "^3.2.4",
+        "@vitest/runner": "3.2.4",
+        "@vitest/snapshot": "3.2.4",
+        "@vitest/spy": "3.2.4",
+        "@vitest/utils": "3.2.4",
+        "chai": "^5.2.0",
+        "debug": "^4.4.1",
+        "expect-type": "^1.2.1",
+        "magic-string": "^0.30.17",
+        "pathe": "^2.0.3",
+        "picomatch": "^4.0.2",
+        "std-env": "^3.9.0",
+        "tinybench": "^2.9.0",
+        "tinyexec": "^0.3.2",
+        "tinyglobby": "^0.2.14",
+        "tinypool": "^1.1.1",
+        "tinyrainbow": "^2.0.0",
+        "vite": "^5.0.0 || ^6.0.0 || ^7.0.0-0",
+        "vite-node": "3.2.4",
+        "why-is-node-running": "^2.3.0"
+      },
+      "bin": {
+        "vitest": "vitest.mjs"
+      },
+      "engines": {
+        "node": "^18.0.0 || ^20.0.0 || >=22.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      },
+      "peerDependencies": {
+        "@edge-runtime/vm": "*",
+        "@types/debug": "^4.1.12",
+        "@types/node": "^18.0.0 || ^20.0.0 || >=22.0.0",
+        "@vitest/browser": "3.2.4",
+        "@vitest/ui": "3.2.4",
+        "happy-dom": "*",
+        "jsdom": "*"
+      },
+      "peerDependenciesMeta": {
+        "@edge-runtime/vm": {
+          "optional": true
+        },
+        "@types/debug": {
+          "optional": true
+        },
+        "@types/node": {
+          "optional": true
+        },
+        "@vitest/browser": {
+          "optional": true
+        },
+        "@vitest/ui": {
+          "optional": true
+        },
+        "happy-dom": {
+          "optional": true
+        },
+        "jsdom": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/vitest/node_modules/picomatch": {
+      "version": "4.0.3",
+      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
+      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/jonschlinkert"
+      }
+    },
     "node_modules/which": {
       "version": "2.0.2",
       "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
@@ -6819,6 +9089,23 @@
         "url": "https://github.com/sponsors/ljharb"
       }
     },
+    "node_modules/why-is-node-running": {
+      "version": "2.3.0",
+      "resolved": "https://registry.npmjs.org/why-is-node-running/-/why-is-node-running-2.3.0.tgz",
+      "integrity": "sha512-hUrmaWBdVDcxvYqnyh09zunKzROWjbZTiNy8dBEjkS7ehEDQibXJ7XvlmtbwuTclUiIyN+CyXQD4Vmko8fNm8w==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "siginfo": "^2.0.0",
+        "stackback": "0.0.2"
+      },
+      "bin": {
+        "why-is-node-running": "cli.js"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
     "node_modules/word-wrap": {
       "version": "1.2.5",
       "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
diff --git a/package.json b/package.json
index 6e2e38e..c5d33c0 100644
--- a/package.json
+++ b/package.json
@@ -4,14 +4,18 @@
   "private": true,
   "scripts": {
     "dev": "next dev",
-    "build": "prisma generate && next build",
+    "build": "prisma generate && prisma db push --skip-generate && next build",
     "start": "next start",
     "lint": "eslint",
     "db:generate": "prisma generate",
     "db:push": "prisma db push",
     "db:migrate": "prisma migrate dev",
     "db:seed": "tsx prisma/seed.ts",
-    "db:studio": "prisma studio"
+    "db:studio": "prisma studio",
+    "test": "vitest run",
+    "test:watch": "vitest",
+    "test:coverage": "vitest run --coverage",
+    "test:e2e": "playwright test"
   },
   "dependencies": {
     "@auth/prisma-adapter": "^2.11.1",
@@ -19,24 +23,33 @@
     "@vercel/blob": "^2.3.0",
     "clsx": "^2.1.1",
     "date-fns": "^4.1.0",
+    "leaflet": "^1.9.4",
     "lucide-react": "^0.575.0",
+    "recharts": "^2.15.3",
     "next": "16.1.6",
     "next-auth": "^5.0.0-beta.30",
+    "next-intl": "^4.8.3",
     "prisma": "^5.22.0",
     "react": "19.2.3",
     "react-dom": "19.2.3",
     "sonner": "^2.0.7",
     "tailwind-merge": "^3.5.0",
+    "otplib": "^12.0.1",
+    "qrcode": "^1.5.4",
     "zod": "^4.3.6"
   },
   "devDependencies": {
+    "@playwright/test": "^1.52.0",
     "@tailwindcss/postcss": "^4",
+    "@types/leaflet": "^1.9.14",
     "@types/node": "^20",
     "@types/react": "^19",
     "@types/react-dom": "^19",
     "eslint": "^9",
     "eslint-config-next": "16.1.6",
     "tailwindcss": "^4",
-    "typescript": "^5"
+    "typescript": "^5",
+    "@types/qrcode": "^1.5.5",
+    "vitest": "^3.2.1"
   }
 }
diff --git a/playwright.config.ts b/playwright.config.ts
new file mode 100644
index 0000000..40c8da0
--- /dev/null
+++ b/playwright.config.ts
@@ -0,0 +1,31 @@
+import { defineConfig, devices } from "@playwright/test";
+
+export default defineConfig({
+  testDir: "./e2e",
+  fullyParallel: true,
+  forbidOnly: !!process.env.CI,
+  retries: process.env.CI ? 2 : 0,
+  workers: process.env.CI ? 1 : undefined,
+  reporter: "html",
+  use: {
+    baseURL: process.env.PLAYWRIGHT_TEST_BASE_URL || "http://localhost:3000",
+    trace: "on-first-retry",
+  },
+  projects: [
+    {
+      name: "chromium",
+      use: { ...devices["Desktop Chrome"] },
+    },
+    {
+      name: "mobile",
+      use: { ...devices["iPhone 14"] },
+    },
+  ],
+  webServer: process.env.CI
+    ? undefined
+    : {
+        command: "npm run dev",
+        url: "http://localhost:3000",
+        reuseExistingServer: true,
+      },
+});
diff --git a/prisma/schema.prisma b/prisma/schema.prisma
index 64f02ea..d677101 100644
--- a/prisma/schema.prisma
+++ b/prisma/schema.prisma
@@ -70,9 +70,16 @@ model User {
   notifications  Notification[]
   documents      Document[]       @relation("uploaded_documents")
   photos         Photo[]
+  flaggedPhotos  Photo[]          @relation("flagged_photos")
   checklistItems ChecklistItem[]  @relation("completed_by")
   staffCreated   Staff[]          @relation("staff_created_by")
   activityLogs   ActivityLog[]
+  phaseComments  PhaseComment[]   @relation("phase_comments")
+  notificationPreference NotificationPreference?
+  changeOrderRequests  ChangeOrder[] @relation("change_order_requests")
+  changeOrderApprovals ChangeOrder[] @relation("change_order_approvals")
+  dailyLogs      DailyLog[]       @relation("daily_log_author")
+  totpSecret     TotpSecret?
 
   @@map("users")
 }
@@ -101,6 +108,7 @@ model Project {
   phases       Phase[]
   invitations  Invitation[]
   activityLogs ActivityLog[]
+  dailyLogs    DailyLog[]
 
   @@map("projects")
 }
@@ -153,13 +161,24 @@ model Phase {
   actualStart DateTime? @map("actual_start")
   actualEnd   DateTime? @map("actual_end")
 
+  // Budget tracking
+  estimatedCost Decimal? @map("estimated_cost") @db.Decimal(12, 2)
+  actualCost    Decimal? @map("actual_cost") @db.Decimal(12, 2)
+
   project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
   projectId String  @map("project_id")
 
-  assignments PhaseAssignment[]
-  checklist   Checklist?
-  documents   Document[]
-  photos      Photo[]
+  assignments   PhaseAssignment[]
+  checklist     Checklist?
+  documents     Document[]
+  photos        Photo[]
+  comments      PhaseComment[]
+  dependencies  PhaseDependency[]  @relation("phase_dependencies")
+  dependents    PhaseDependency[]  @relation("phase_dependents")
+  changeOrders  ChangeOrder[]
+  inspections   Inspection[]
+  bids          SubcontractorBid[]
+  materials     Material[]
 
   createdAt DateTime @default(now()) @map("created_at")
   updatedAt DateTime @updatedAt @map("updated_at")
@@ -326,6 +345,17 @@ model Photo {
   caption String?
   takenAt DateTime @default(now()) @map("taken_at")
 
+  // GPS (Sprint H #32)
+  latitude    Float?
+  longitude   Float?
+
+  // Flagging for followup
+  flagType    PhotoFlagType? @map("flag_type")
+  flagNote    String?        @map("flag_note") @db.Text
+  flaggedBy   User?          @relation("flagged_photos", fields: [flaggedById], references: [id])
+  flaggedById String?        @map("flagged_by_id")
+  flaggedAt   DateTime?      @map("flagged_at")
+
   phase   Phase  @relation(fields: [phaseId], references: [id], onDelete: Cascade)
   phaseId String @map("phase_id")
 
@@ -336,6 +366,13 @@ model Photo {
   @@map("photos")
 }
 
+enum PhotoFlagType {
+  REPLACEMENT_NEEDED
+  ADDITIONAL_ANGLES
+  ADDITIONAL_PHOTOS
+  CLARIFICATION_NEEDED
+}
+
 // ── Notifications ──
 
 model Notification {
@@ -365,6 +402,46 @@ enum NotificationType {
   REVIEW_COMPLETED
   TIMELINE_SHIFTED
   MEMBER_INVITED
+  COMMENT_ADDED
+  DEPENDENCY_CHANGED
+  CHANGE_ORDER_SUBMITTED
+  CHANGE_ORDER_APPROVED
+  CHANGE_ORDER_REJECTED
+  INSPECTION_SCHEDULED
+  INSPECTION_RESULT
+}
+
+// ── Notification Preferences ──
+
+model NotificationPreference {
+  id     String @id @default(cuid())
+  userId String @unique @map("user_id")
+
+  // Channel toggles
+  emailEnabled Boolean @default(true)  @map("email_enabled")
+  smsEnabled   Boolean @default(false) @map("sms_enabled")
+  inAppEnabled Boolean @default(true)  @map("in_app_enabled")
+
+  // Per-type toggles (email)
+  emailPhaseStatus   Boolean @default(true) @map("email_phase_status")
+  emailReview        Boolean @default(true) @map("email_review")
+  emailChecklist     Boolean @default(true) @map("email_checklist")
+  emailDocuments     Boolean @default(true) @map("email_documents")
+  emailComments      Boolean @default(false) @map("email_comments")
+
+  // Per-type toggles (SMS)
+  smsPhaseStatus Boolean @default(true)  @map("sms_phase_status")
+  smsReview      Boolean @default(true)  @map("sms_review")
+  smsChecklist   Boolean @default(false) @map("sms_checklist")
+  smsDocuments   Boolean @default(false) @map("sms_documents")
+
+  // Quiet hours
+  quietStart String? @map("quiet_start") // e.g. "22:00"
+  quietEnd   String? @map("quiet_end")   // e.g. "07:00"
+
+  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
+
+  @@map("notification_preferences")
 }
 
 // ── Activity Log ──
@@ -402,6 +479,55 @@ enum ActivityType {
   PROJECT_CREATED
   PROJECT_STATUS_CHANGED
   MEMBER_INVITED
+  MEMBER_JOINED
+  MEMBER_REMOVED
+  COMMENT_ADDED
+  COMMENT_DELETED
+  DEPENDENCY_ADDED
+  DEPENDENCY_REMOVED
+}
+
+// ── Phase Comments & Dependencies ──
+
+model PhaseComment {
+  id        String   @id @default(cuid())
+  phaseId   String   @map("phase_id")
+  userId    String   @map("user_id")
+  content   String   @db.Text
+  createdAt DateTime @default(now()) @map("created_at")
+  updatedAt DateTime @updatedAt @map("updated_at")
+
+  phase Phase @relation(fields: [phaseId], references: [id], onDelete: Cascade)
+  user  User  @relation("phase_comments", fields: [userId], references: [id])
+
+  @@map("phase_comments")
+}
+
+model PhaseDependency {
+  id          String @id @default(cuid())
+  phaseId     String @map("phase_id")
+  dependsOnId String @map("depends_on_id")
+  lagDays     Int    @default(0) @map("lag_days")
+
+  phase     Phase @relation("phase_dependencies", fields: [phaseId], references: [id], onDelete: Cascade)
+  dependsOn Phase @relation("phase_dependents", fields: [dependsOnId], references: [id], onDelete: Cascade)
+
+  @@unique([phaseId, dependsOnId])
+  @@map("phase_dependencies")
+}
+
+// ── Organization Settings (Theming) ──
+
+model OrgSettings {
+  id           String   @id @default(cuid())
+  theme        String   @default("blue")
+  logoUrl      String?  @map("logo_url")
+  logoMimeType String?  @map("logo_mime_type")
+  companyName  String?  @map("company_name")
+  createdAt    DateTime @default(now()) @map("created_at")
+  updatedAt    DateTime @updatedAt @map("updated_at")
+
+  @@map("org_settings")
 }
 
 // ── Invitations ──
@@ -420,3 +546,239 @@ model Invitation {
 
   @@map("invitations")
 }
+
+// ── GPS on Photos (Sprint H #32) ──
+// latitude and longitude added to Photo model (see Photo model above)
+// NOTE: These fields are added via ALTER TABLE - see migration note in session log
+
+// ── Change Orders (Sprint H #34) ──
+
+model ChangeOrder {
+  id          String            @id @default(cuid())
+  number      String
+  title       String
+  description String?           @db.Text
+  status      ChangeOrderStatus @default(PENDING)
+  amount      Decimal?          @db.Decimal(12, 2)
+  reason      String?           @db.Text
+
+  phase   Phase  @relation(fields: [phaseId], references: [id], onDelete: Cascade)
+  phaseId String @map("phase_id")
+
+  requestedBy   User   @relation("change_order_requests", fields: [requestedById], references: [id])
+  requestedById String @map("requested_by_id")
+
+  approvedBy   User?     @relation("change_order_approvals", fields: [approvedById], references: [id])
+  approvedById String?   @map("approved_by_id")
+  approvedAt   DateTime? @map("approved_at")
+
+  createdAt DateTime @default(now()) @map("created_at")
+  updatedAt DateTime @updatedAt @map("updated_at")
+
+  @@index([phaseId])
+  @@map("change_orders")
+}
+
+enum ChangeOrderStatus {
+  PENDING
+  APPROVED
+  REJECTED
+}
+
+// ── Daily Logs (Sprint H #35) ──
+
+model DailyLog {
+  id          String   @id @default(cuid())
+  date        DateTime @db.Date
+  weather     String?
+  tempHigh    Int?     @map("temp_high")
+  tempLow     Int?     @map("temp_low")
+  crewCount   Int?     @map("crew_count")
+  equipment   String?  @db.Text
+  workSummary String   @map("work_summary") @db.Text
+  issues      String?  @db.Text
+  notes       String?  @db.Text
+
+  project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
+  projectId String  @map("project_id")
+
+  author   User   @relation("daily_log_author", fields: [authorId], references: [id])
+  authorId String @map("author_id")
+
+  createdAt DateTime @default(now()) @map("created_at")
+  updatedAt DateTime @updatedAt @map("updated_at")
+
+  @@unique([projectId, date])
+  @@index([projectId, date])
+  @@map("daily_logs")
+}
+
+// ── Inspections (Sprint H #36) ──
+
+model Inspection {
+  id            String            @id @default(cuid())
+  title         String
+  inspectorName String?           @map("inspector_name")
+  scheduledAt   DateTime          @map("scheduled_at")
+  completedAt   DateTime?         @map("completed_at")
+  result        InspectionResult?
+  notes         String?           @db.Text
+  notifyOnResult Boolean          @default(true) @map("notify_on_result")
+
+  phase   Phase  @relation(fields: [phaseId], references: [id], onDelete: Cascade)
+  phaseId String @map("phase_id")
+
+  createdAt DateTime @default(now()) @map("created_at")
+  updatedAt DateTime @updatedAt @map("updated_at")
+
+  @@index([phaseId, scheduledAt])
+  @@map("inspections")
+}
+
+enum InspectionResult {
+  PASS
+  FAIL
+  CONDITIONAL
+}
+
+// ── Subcontractor Bids (Sprint H #37) ──
+
+model SubcontractorBid {
+  id          String    @id @default(cuid())
+  companyName String    @map("company_name")
+  contactName String?   @map("contact_name")
+  email       String?
+  phone       String?
+  amount      Decimal   @db.Decimal(12, 2)
+  notes       String?   @db.Text
+  awarded     Boolean   @default(false)
+  submittedAt DateTime  @default(now()) @map("submitted_at")
+
+  phase   Phase  @relation(fields: [phaseId], references: [id], onDelete: Cascade)
+  phaseId String @map("phase_id")
+
+  createdAt DateTime @default(now()) @map("created_at")
+  updatedAt DateTime @updatedAt @map("updated_at")
+
+  @@index([phaseId])
+  @@map("subcontractor_bids")
+}
+
+// ── Materials / Inventory (Sprint H #38) ──
+
+model Material {
+  id          String         @id @default(cuid())
+  name        String
+  quantity    Float
+  unit        String
+  status      MaterialStatus @default(ORDERED)
+  cost        Decimal?       @db.Decimal(12, 2)
+  supplier    String?
+  orderedAt   DateTime?      @map("ordered_at")
+  deliveredAt DateTime?      @map("delivered_at")
+  installedAt DateTime?      @map("installed_at")
+  notes       String?        @db.Text
+
+  phase   Phase  @relation(fields: [phaseId], references: [id], onDelete: Cascade)
+  phaseId String @map("phase_id")
+
+  createdAt DateTime @default(now()) @map("created_at")
+  updatedAt DateTime @updatedAt @map("updated_at")
+
+  @@index([phaseId])
+  @@map("materials")
+}
+
+enum MaterialStatus {
+  ORDERED
+  DELIVERED
+  INSTALLED
+  RETURNED
+}
+
+// ── API Keys & Webhooks (Sprint H #43) ──
+
+model ApiKey {
+  id         String    @id @default(cuid())
+  name       String
+  keyHash    String    @unique @map("key_hash")
+  prefix     String
+  lastUsedAt DateTime? @map("last_used_at")
+  expiresAt  DateTime? @map("expires_at")
+  active     Boolean   @default(true)
+
+  createdAt DateTime @default(now()) @map("created_at")
+
+  @@map("api_keys")
+}
+
+model Webhook {
+  id     String   @id @default(cuid())
+  name   String
+  url    String
+  secret String
+  events String[]
+  active Boolean  @default(true)
+
+  lastTriggeredAt DateTime? @map("last_triggered_at")
+  lastStatusCode  Int?      @map("last_status_code")
+
+  createdAt DateTime @default(now()) @map("created_at")
+  updatedAt DateTime @updatedAt @map("updated_at")
+
+  @@map("webhooks")
+}
+
+// ── 2FA / TOTP (Sprint H #41) ──
+
+model TotpSecret {
+  id       String  @id @default(cuid())
+  userId   String  @unique @map("user_id")
+  secret   String
+  verified Boolean @default(false)
+
+  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
+
+  createdAt DateTime @default(now()) @map("created_at")
+
+  @@map("totp_secrets")
+}
+
+// ── Report Schedule (Sprint H #40) ──
+
+model ReportSchedule {
+  id        String         @id @default(cuid())
+  frequency ReportFrequency
+  dayOfWeek Int?           @map("day_of_week") // 0=Sun..6=Sat (weekly)
+  dayOfMonth Int?          @map("day_of_month") // 1-28 (monthly)
+  sendHour  Int            @default(8) @map("send_hour") // 0-23 UTC
+  recipients String[]
+  includeProjects String[] @map("include_projects") // empty = all
+  lastSentAt DateTime?     @map("last_sent_at")
+  active    Boolean        @default(true)
+
+  createdAt DateTime @default(now()) @map("created_at")
+  updatedAt DateTime @updatedAt @map("updated_at")
+
+  @@map("report_schedules")
+}
+
+enum ReportFrequency {
+  WEEKLY
+  MONTHLY
+}
+
+// ── Client Portal Tokens (Sprint H #39) ──
+
+model ClientToken {
+  id        String    @id @default(cuid())
+  token     String    @unique
+  label     String
+  projectId String?   @map("project_id") // null = all projects (org-level)
+  expiresAt DateTime? @map("expires_at")
+  active    Boolean   @default(true)
+
+  createdAt DateTime @default(now()) @map("created_at")
+
+  @@map("client_tokens")
+}
diff --git a/prisma/seed.ts b/prisma/seed.ts
index 1c9e34b..0cb46b4 100644
--- a/prisma/seed.ts
+++ b/prisma/seed.ts
@@ -6,6 +6,7 @@ async function main() {
   console.log("Seeding database...");
 
   // ── Clean existing data (order matters for foreign keys) ──
+  await db.orgSettings.deleteMany();
   await db.activityLog.deleteMany();
   await db.phaseAssignment.deleteMany();
   await db.checklistItem.deleteMany();
@@ -416,6 +417,90 @@ async function main() {
     }),
   ]);
 
+  // ── Organization Settings (default theme) ──
+  await db.orgSettings.create({
+    data: { theme: "blue" },
+  });
+
+  // ── Sample Notifications ──
+  await db.notification.createMany({
+    data: [
+      {
+        type: "PHASE_STATUS_CHANGED",
+        title: "Phase started: Stamped Plans",
+        message: "Stamped Plans on MSH Construction Build is now started",
+        userId: admin.id,
+        read: true,
+        data: { projectId: project.id, phaseId: phases[1].id },
+        createdAt: new Date(now.getTime() - 5 * 86400000),
+      },
+      {
+        type: "MEMBER_INVITED",
+        title: "New team member joined",
+        message: "Mike Johnson joined MSH Construction Build as Contractor",
+        userId: admin.id,
+        read: true,
+        data: { projectId: project.id },
+        createdAt: new Date(now.getTime() - 2 * 86400000),
+      },
+      {
+        type: "DOCUMENT_UPLOADED",
+        title: "New Document: Foundation Survey",
+        message: '"Foundation Survey" uploaded to Site Work',
+        userId: admin.id,
+        read: false,
+        data: { projectId: project.id, phaseId: phases[3].id },
+        createdAt: new Date(now.getTime() - 1 * 86400000),
+      },
+      {
+        type: "REVIEW_REQUESTED",
+        title: "Review Requested: Stamped Plans",
+        message: "Mike Johnson wants you to review Stamped Plans on MSH Construction Build",
+        userId: admin.id,
+        read: false,
+        data: { projectId: project.id, phaseId: phases[1].id },
+        createdAt: new Date(now.getTime() - 4 * 3600000),
+      },
+      {
+        type: "CHECKLIST_COMPLETED",
+        title: "Checklist Complete: Site Work",
+        message: "All checklist items completed for Site Work on MSH Construction Build",
+        userId: admin.id,
+        read: false,
+        data: { projectId: project.id, phaseId: phases[3].id },
+        createdAt: new Date(now.getTime() - 2 * 3600000),
+      },
+      {
+        type: "DOCUMENT_STATUS_CHANGED",
+        title: "Document approved: Building Permit",
+        message: '"Building Permit" in Stamped Plans was approved',
+        userId: admin.id,
+        read: false,
+        data: { projectId: project.id, phaseId: phases[1].id },
+        createdAt: new Date(now.getTime() - 30 * 60000),
+      },
+      // Notifications for contractor user too
+      {
+        type: "PHASE_STATUS_CHANGED",
+        title: "Phase started: Stamped Plans",
+        message: "Stamped Plans on MSH Construction Build is now started",
+        userId: contractor.id,
+        read: false,
+        data: { projectId: project.id, phaseId: phases[1].id },
+        createdAt: new Date(now.getTime() - 5 * 86400000),
+      },
+      {
+        type: "REVIEW_REQUESTED",
+        title: "Review Requested: Stamped Plans",
+        message: "Brian Musgrave wants you to review Stamped Plans",
+        userId: contractor.id,
+        read: false,
+        data: { projectId: project.id, phaseId: phases[1].id },
+        createdAt: new Date(now.getTime() - 3 * 3600000),
+      },
+    ],
+  });
+
   console.log("Seed complete!");
   console.log(`  Created 2 users`);
   console.log(`  Created ${staffMembers.length} directory contacts`);
@@ -423,6 +508,7 @@ async function main() {
   console.log(`  Created 1 project with ${phases.length} phases`);
   console.log(`  Created 6 phase assignments`);
   console.log(`  Created 8 activity log entries`);
+  console.log(`  Created 8 sample notifications`);
 }
 
 main()
diff --git a/public/icon-192.png b/public/icon-192.png
new file mode 100644
index 0000000..0687c0d
Binary files /dev/null and b/public/icon-192.png differ
diff --git a/public/icon-512.png b/public/icon-512.png
new file mode 100644
index 0000000..f734240
Binary files /dev/null and b/public/icon-512.png differ
diff --git a/public/manifest.json b/public/manifest.json
new file mode 100644
index 0000000..3ae9e52
--- /dev/null
+++ b/public/manifest.json
@@ -0,0 +1,24 @@
+{
+  "name": "Construction PM",
+  "short_name": "ConstructionPM",
+  "description": "Construction Project Management Tool",
+  "start_url": "/dashboard",
+  "display": "standalone",
+  "background_color": "#f9fafb",
+  "theme_color": "#4F6DF5",
+  "orientation": "any",
+  "icons": [
+    {
+      "src": "/icon-192.png",
+      "sizes": "192x192",
+      "type": "image/png",
+      "purpose": "any maskable"
+    },
+    {
+      "src": "/icon-512.png",
+      "sizes": "512x512",
+      "type": "image/png",
+      "purpose": "any maskable"
+    }
+  ]
+}
diff --git a/public/sw.js b/public/sw.js
new file mode 100644
index 0000000..9872285
--- /dev/null
+++ b/public/sw.js
@@ -0,0 +1,147 @@
+// Construction PM — Service Worker
+// Cache-first strategy for static assets, network-first for API/pages
+
+const CACHE_NAME = "construction-pm-v1";
+const STATIC_CACHE = "static-v1";
+const DATA_CACHE = "data-v1";
+
+// Static assets to pre-cache on install
+const PRECACHE_URLS = [
+  "/",
+  "/dashboard",
+  "/contractor",
+  "/manifest.json",
+  "/icon-192.png",
+  "/icon-512.png",
+];
+
+// Install — pre-cache shell
+self.addEventListener("install", (event) => {
+  event.waitUntil(
+    caches
+      .open(STATIC_CACHE)
+      .then((cache) => cache.addAll(PRECACHE_URLS))
+      .then(() => self.skipWaiting())
+  );
+});
+
+// Activate — clean old caches
+self.addEventListener("activate", (event) => {
+  const allowedCaches = [STATIC_CACHE, DATA_CACHE];
+  event.waitUntil(
+    caches
+      .keys()
+      .then((keys) =>
+        Promise.all(
+          keys
+            .filter((key) => !allowedCaches.includes(key))
+            .map((key) => caches.delete(key))
+        )
+      )
+      .then(() => self.clients.claim())
+  );
+});
+
+// Fetch strategy
+self.addEventListener("fetch", (event) => {
+  const { request } = event;
+  const url = new URL(request.url);
+
+  // Skip non-GET requests
+  if (request.method !== "GET") return;
+
+  // Skip browser extension and chrome-extension requests
+  if (!url.protocol.startsWith("http")) return;
+
+  // Skip Next.js API routes and server actions — always network
+  if (url.pathname.startsWith("/api/") || url.pathname.startsWith("/_next/data/")) {
+    return;
+  }
+
+  // Static assets (_next/static, images, fonts) — cache-first
+  if (
+    url.pathname.startsWith("/_next/static/") ||
+    url.pathname.match(/\.(png|jpg|jpeg|svg|gif|ico|woff2?|ttf|css|js)$/)
+  ) {
+    event.respondWith(cacheFirst(request, STATIC_CACHE));
+    return;
+  }
+
+  // HTML pages — network-first with cache fallback (stale-while-revalidate)
+  if (request.headers.get("accept")?.includes("text/html")) {
+    event.respondWith(networkFirst(request, DATA_CACHE));
+    return;
+  }
+
+  // RSC payloads and other data — network-first
+  event.respondWith(networkFirst(request, DATA_CACHE));
+});
+
+// Cache-first: return cached if available, else fetch & cache
+async function cacheFirst(request, cacheName) {
+  const cached = await caches.match(request);
+  if (cached) return cached;
+
+  try {
+    const response = await fetch(request);
+    if (response.ok) {
+      const cache = await caches.open(cacheName);
+      cache.put(request, response.clone());
+    }
+    return response;
+  } catch {
+    return new Response("Offline", { status: 503, statusText: "Service Unavailable" });
+  }
+}
+
+// Network-first: try network, fall back to cache
+async function networkFirst(request, cacheName) {
+  try {
+    const response = await fetch(request);
+    if (response.ok) {
+      const cache = await caches.open(cacheName);
+      cache.put(request, response.clone());
+    }
+    return response;
+  } catch {
+    const cached = await caches.match(request);
+    if (cached) return cached;
+
+    // Return offline page for navigation requests
+    if (request.mode === "navigate") {
+      return new Response(offlineHTML(), {
+        headers: { "Content-Type": "text/html" },
+      });
+    }
+
+    return new Response("Offline", { status: 503, statusText: "Service Unavailable" });
+  }
+}
+
+function offlineHTML() {
+  return `<!DOCTYPE html>
+<html lang="en">
+<head>
+  <meta charset="UTF-8">
+  <meta name="viewport" content="width=device-width, initial-scale=1.0">
+  <title>Offline — Construction PM</title>
+  <style>
+    body { font-family: system-ui, sans-serif; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; background: #f9fafb; color: #374151; }
+    .container { text-align: center; padding: 2rem; }
+    h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
+    p { color: #6b7280; margin-bottom: 1.5rem; }
+    button { background: #4F6DF5; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-size: 0.875rem; font-weight: 500; cursor: pointer; }
+    button:hover { opacity: 0.9; }
+    .icon { font-size: 3rem; margin-bottom: 1rem; }
+  </style>
+</head>
+<body>
+  <div class="container">
+    <div class="icon">🚧</div>
+    <h1>You're offline</h1>
+    <p>Check your connection and try again. Some cached pages may still be available.</p>
+    <button onclick="window.location.reload()">Retry</button>
+  </div>
+</body>
+</html>`;
+}
diff --git a/src/__tests__/permissions.test.ts b/src/__tests__/permissions.test.ts
new file mode 100644
index 0000000..3f289c7
--- /dev/null
+++ b/src/__tests__/permissions.test.ts
@@ -0,0 +1,144 @@
+import { describe, it, expect } from "vitest";
+import { can, canAny, canCreateProject, canManagePhase, canReviewPhase } from "@/lib/permissions";
+
+describe("Permissions", () => {
+  describe("can()", () => {
+    describe("ADMIN role", () => {
+      it("can do everything on projects", () => {
+        expect(can("ADMIN", "view", "project")).toBe(true);
+        expect(can("ADMIN", "create", "project")).toBe(true);
+        expect(can("ADMIN", "update", "project")).toBe(true);
+        expect(can("ADMIN", "delete", "project")).toBe(true);
+        expect(can("ADMIN", "manage", "project")).toBe(true);
+      });
+
+      it("can manage phases", () => {
+        expect(can("ADMIN", "manage", "phase")).toBe(true);
+      });
+
+      it("can manage members", () => {
+        expect(can("ADMIN", "create", "member")).toBe(true);
+        expect(can("ADMIN", "delete", "member")).toBe(true);
+      });
+    });
+
+    describe("PROJECT_MANAGER role", () => {
+      it("can create but not delete projects", () => {
+        expect(can("PROJECT_MANAGER", "create", "project")).toBe(true);
+        expect(can("PROJECT_MANAGER", "delete", "project")).toBe(false);
+      });
+
+      it("can create members but not delete them", () => {
+        expect(can("PROJECT_MANAGER", "create", "member")).toBe(true);
+        expect(can("PROJECT_MANAGER", "delete", "member")).toBe(false);
+      });
+
+      it("can manage phases", () => {
+        expect(can("PROJECT_MANAGER", "manage", "phase")).toBe(true);
+      });
+    });
+
+    describe("CONTRACTOR role", () => {
+      it("can view and update phases", () => {
+        expect(can("CONTRACTOR", "view", "phase")).toBe(true);
+        expect(can("CONTRACTOR", "update", "phase")).toBe(true);
+      });
+
+      it("cannot create or delete projects", () => {
+        expect(can("CONTRACTOR", "create", "project")).toBe(false);
+        expect(can("CONTRACTOR", "delete", "project")).toBe(false);
+      });
+
+      it("can upload documents and photos", () => {
+        expect(can("CONTRACTOR", "create", "document")).toBe(true);
+        expect(can("CONTRACTOR", "create", "photo")).toBe(true);
+      });
+
+      it("cannot manage members", () => {
+        expect(can("CONTRACTOR", "create", "member")).toBe(false);
+        expect(can("CONTRACTOR", "delete", "member")).toBe(false);
+      });
+
+      it("can update checklists", () => {
+        expect(can("CONTRACTOR", "update", "checklist")).toBe(true);
+      });
+    });
+
+    describe("STAKEHOLDER role", () => {
+      it("can only view everything", () => {
+        expect(can("STAKEHOLDER", "view", "project")).toBe(true);
+        expect(can("STAKEHOLDER", "view", "phase")).toBe(true);
+        expect(can("STAKEHOLDER", "view", "document")).toBe(true);
+        expect(can("STAKEHOLDER", "create", "project")).toBe(false);
+        expect(can("STAKEHOLDER", "update", "phase")).toBe(false);
+      });
+    });
+
+    describe("VIEWER role", () => {
+      it("can view basic resources", () => {
+        expect(can("VIEWER", "view", "project")).toBe(true);
+        expect(can("VIEWER", "view", "phase")).toBe(true);
+      });
+
+      it("cannot access staff or members", () => {
+        expect(can("VIEWER", "view", "staff")).toBe(false);
+        expect(can("VIEWER", "view", "member")).toBe(false);
+      });
+    });
+
+    describe("Unknown role", () => {
+      it("returns false for any permission", () => {
+        expect(can("UNKNOWN", "view", "project")).toBe(false);
+        expect(can("UNKNOWN", "create", "phase")).toBe(false);
+      });
+    });
+  });
+
+  describe("canAny()", () => {
+    it("returns true if any action is allowed", () => {
+      expect(canAny("CONTRACTOR", ["create", "update"], "phase")).toBe(true);
+    });
+
+    it("returns false if no actions are allowed", () => {
+      expect(canAny("VIEWER", ["create", "delete"], "project")).toBe(false);
+    });
+  });
+
+  describe("canCreateProject()", () => {
+    it("ADMIN can create projects", () => {
+      expect(canCreateProject("ADMIN")).toBe(true);
+    });
+
+    it("PROJECT_MANAGER can create projects", () => {
+      expect(canCreateProject("PROJECT_MANAGER")).toBe(true);
+    });
+
+    it("CONTRACTOR cannot create projects", () => {
+      expect(canCreateProject("CONTRACTOR")).toBe(false);
+    });
+  });
+
+  describe("canManagePhase()", () => {
+    it("ADMIN can manage phases", () => {
+      expect(canManagePhase("ADMIN")).toBe(true);
+    });
+
+    it("CONTRACTOR cannot manage phases", () => {
+      expect(canManagePhase("CONTRACTOR")).toBe(false);
+    });
+  });
+
+  describe("canReviewPhase()", () => {
+    it("ADMIN can review phases", () => {
+      expect(canReviewPhase("ADMIN")).toBe(true);
+    });
+
+    it("PROJECT_MANAGER can review phases", () => {
+      expect(canReviewPhase("PROJECT_MANAGER")).toBe(true);
+    });
+
+    it("CONTRACTOR cannot review phases", () => {
+      expect(canReviewPhase("CONTRACTOR")).toBe(false);
+    });
+  });
+});
diff --git a/src/__tests__/setup.ts b/src/__tests__/setup.ts
new file mode 100644
index 0000000..00beb0e
--- /dev/null
+++ b/src/__tests__/setup.ts
@@ -0,0 +1,107 @@
+// Global test setup
+import { vi } from "vitest";
+
+// Mock Next.js cache revalidation
+vi.mock("next/cache", () => ({
+  revalidatePath: vi.fn(),
+  revalidateTag: vi.fn(),
+}));
+
+// Mock Next.js navigation
+vi.mock("next/navigation", () => ({
+  redirect: vi.fn(),
+  notFound: vi.fn(),
+}));
+
+// Mock auth
+vi.mock("@/lib/auth", () => ({
+  auth: vi.fn(),
+}));
+
+// Mock Prisma client
+vi.mock("@/lib/db", () => ({
+  db: {
+    project: {
+      findUnique: vi.fn(),
+      findMany: vi.fn(),
+      create: vi.fn(),
+      update: vi.fn(),
+      delete: vi.fn(),
+    },
+    phase: {
+      findUnique: vi.fn(),
+      findMany: vi.fn(),
+      create: vi.fn(),
+      update: vi.fn(),
+      delete: vi.fn(),
+    },
+    projectMember: {
+      findUnique: vi.fn(),
+      findFirst: vi.fn(),
+      findMany: vi.fn(),
+      create: vi.fn(),
+      delete: vi.fn(),
+      count: vi.fn(),
+    },
+    invitation: {
+      findUnique: vi.fn(),
+      findFirst: vi.fn(),
+      findMany: vi.fn(),
+      create: vi.fn(),
+      delete: vi.fn(),
+    },
+    notification: {
+      findMany: vi.fn(),
+      createMany: vi.fn(),
+      update: vi.fn(),
+      updateMany: vi.fn(),
+      delete: vi.fn(),
+      count: vi.fn(),
+    },
+    activityLog: {
+      findMany: vi.fn(),
+      create: vi.fn().mockReturnValue({ catch: vi.fn() }),
+    },
+    user: {
+      findUnique: vi.fn(),
+      findMany: vi.fn(),
+    },
+    photo: {
+      create: vi.fn(),
+      createMany: vi.fn(),
+      findUnique: vi.fn(),
+      delete: vi.fn(),
+      update: vi.fn(),
+    },
+    document: {
+      create: vi.fn(),
+      findUnique: vi.fn(),
+      delete: vi.fn(),
+      update: vi.fn(),
+    },
+    checklist: {
+      findUnique: vi.fn(),
+    },
+    checklistItem: {
+      findUnique: vi.fn(),
+      update: vi.fn(),
+      count: vi.fn(),
+    },
+    $transaction: vi.fn(),
+  },
+}));
+
+// Mock notifications
+vi.mock("@/lib/notifications", () => ({
+  notify: vi.fn(),
+  getProjectMemberIds: vi.fn().mockResolvedValue([]),
+}));
+
+// Mock email
+vi.mock("@/lib/email", () => ({
+  sendInvitationEmail: vi.fn().mockResolvedValue(true),
+  sendPhaseStatusEmail: vi.fn().mockResolvedValue(true),
+  sendReviewRequestEmail: vi.fn().mockResolvedValue(true),
+  sendChecklistCompleteEmail: vi.fn().mockResolvedValue(true),
+  sendDocumentStatusEmail: vi.fn().mockResolvedValue(true),
+}));
diff --git a/src/__tests__/utils.test.ts b/src/__tests__/utils.test.ts
new file mode 100644
index 0000000..ef66690
--- /dev/null
+++ b/src/__tests__/utils.test.ts
@@ -0,0 +1,144 @@
+import { describe, it, expect } from "vitest";
+import {
+  fmtShort,
+  fmtLong,
+  calculateProgress,
+  isOverdue,
+  formatFileSize,
+  statusColor,
+  statusLabel,
+  weeksBetween,
+  daysBetween,
+  toISODate,
+} from "@/lib/utils";
+
+describe("Utils", () => {
+  describe("fmtShort()", () => {
+    it("formats a date as M/d", () => {
+      expect(fmtShort(new Date("2025-03-15"))).toBe("3/15");
+    });
+
+    it("handles string input", () => {
+      expect(fmtShort("2025-12-01")).toBe("12/1");
+    });
+  });
+
+  describe("fmtLong()", () => {
+    it("formats a date as MMMM d, yyyy", () => {
+      expect(fmtLong(new Date("2025-03-15"))).toBe("March 15, 2025");
+    });
+  });
+
+  describe("toISODate()", () => {
+    it("formats date as yyyy-MM-dd", () => {
+      expect(toISODate(new Date("2025-06-15T12:00:00Z"))).toBe("2025-06-15");
+    });
+  });
+
+  describe("weeksBetween()", () => {
+    it("calculates weeks between two dates", () => {
+      expect(weeksBetween("2025-01-01", "2025-01-15")).toBe(2);
+    });
+  });
+
+  describe("daysBetween()", () => {
+    it("calculates days between two dates", () => {
+      expect(daysBetween("2025-01-01", "2025-01-10")).toBe(9);
+    });
+  });
+
+  describe("calculateProgress()", () => {
+    it("returns 0 when there are no items", () => {
+      expect(calculateProgress(0, 0)).toBe(0);
+    });
+
+    it("returns 50 when half items are checked", () => {
+      expect(calculateProgress(5, 10)).toBe(50);
+    });
+
+    it("returns 100 when all items are checked", () => {
+      expect(calculateProgress(10, 10)).toBe(100);
+    });
+
+    it("rounds to nearest integer", () => {
+      expect(calculateProgress(1, 3)).toBe(33);
+    });
+  });
+
+  describe("isOverdue()", () => {
+    it("returns true when end date is in the past and status is not COMPLETE", () => {
+      const pastDate = new Date("2020-01-01");
+      expect(isOverdue(pastDate, "IN_PROGRESS")).toBe(true);
+    });
+
+    it("returns false when status is COMPLETE", () => {
+      const pastDate = new Date("2020-01-01");
+      expect(isOverdue(pastDate, "COMPLETE")).toBe(false);
+    });
+
+    it("returns false when end date is in the future", () => {
+      const futureDate = new Date("2099-01-01");
+      expect(isOverdue(futureDate, "IN_PROGRESS")).toBe(false);
+    });
+
+    it("accepts string dates", () => {
+      expect(isOverdue("2020-01-01", "PENDING")).toBe(true);
+    });
+
+    it("uses reference date when provided", () => {
+      const endDate = new Date("2025-06-01");
+      const refBefore = new Date("2025-05-01");
+      const refAfter = new Date("2025-07-01");
+
+      expect(isOverdue(endDate, "IN_PROGRESS", refBefore)).toBe(false);
+      expect(isOverdue(endDate, "IN_PROGRESS", refAfter)).toBe(true);
+    });
+  });
+
+  describe("formatFileSize()", () => {
+    it("formats bytes", () => {
+      expect(formatFileSize(500)).toBe("500 B");
+    });
+
+    it("formats kilobytes", () => {
+      expect(formatFileSize(2048)).toBe("2.0 KB");
+    });
+
+    it("formats megabytes", () => {
+      expect(formatFileSize(1048576)).toBe("1.0 MB");
+      expect(formatFileSize(5242880)).toBe("5.0 MB");
+    });
+  });
+
+  describe("statusColor()", () => {
+    it("returns correct color for known statuses", () => {
+      expect(statusColor("IN_PROGRESS")).toContain("blue");
+      expect(statusColor("COMPLETE")).toContain("green");
+      expect(statusColor("PENDING")).toContain("gray");
+      expect(statusColor("REVIEW_REQUESTED")).toContain("amber");
+      expect(statusColor("APPROVED")).toContain("green");
+      expect(statusColor("REJECTED")).toContain("red");
+    });
+
+    it("returns gray for unknown status", () => {
+      expect(statusColor("UNKNOWN")).toContain("gray");
+    });
+  });
+
+  describe("statusLabel()", () => {
+    it("converts status to title case", () => {
+      expect(statusLabel("IN_PROGRESS")).toBe("In Progress");
+      expect(statusLabel("REVIEW_REQUESTED")).toBe("Review Requested");
+      expect(statusLabel("COMPLETE")).toBe("Complete");
+    });
+
+    it("handles single-word status", () => {
+      expect(statusLabel("PENDING")).toBe("Pending");
+    });
+
+    it("handles roles too", () => {
+      expect(statusLabel("CONTRACTOR")).toBe("Contractor");
+      expect(statusLabel("PROJECT_MANAGER")).toBe("Project Manager");
+    });
+  });
+});
diff --git a/src/actions/analytics.ts b/src/actions/analytics.ts
new file mode 100644
index 0000000..c319b38
--- /dev/null
+++ b/src/actions/analytics.ts
@@ -0,0 +1,148 @@
+"use server";
+
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db";
+
+export interface AnalyticsData {
+  projectStatusCounts: { status: string; count: number }[];
+  phaseStatusCounts: { status: string; count: number }[];
+  budgetSummary: { totalEstimated: number; totalActual: number };
+  monthlyActivity: { month: string; phases: number; documents: number }[];
+  teamWorkload: { name: string; assignedPhases: number }[];
+  phaseCompletionTrend: { week: string; completed: number }[];
+}
+
+export async function getAnalytics(): Promise<AnalyticsData> {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  const userId = session.user.id;
+
+  // Get accessible project IDs
+  const memberships = await db.projectMember.findMany({
+    where: { userId },
+    select: { projectId: true },
+  });
+  const projectIds = memberships.map((m: { projectId: string }) => m.projectId);
+
+  // Project status distribution
+  const projects = await db.project.findMany({
+    where: { id: { in: projectIds } },
+    select: { status: true },
+  });
+  const projectStatusMap = new Map<string, number>();
+  for (const p of projects) {
+    projectStatusMap.set(p.status, (projectStatusMap.get(p.status) ?? 0) + 1);
+  }
+  const projectStatusCounts = Array.from(projectStatusMap.entries()).map(
+    ([status, count]) => ({ status, count })
+  );
+
+  // Phase status distribution
+  const phases = await db.phase.findMany({
+    where: { projectId: { in: projectIds } },
+    select: { status: true, estimatedCost: true, actualCost: true },
+  });
+  const phaseStatusMap = new Map<string, number>();
+  let totalEstimated = 0;
+  let totalActual = 0;
+  for (const ph of phases) {
+    phaseStatusMap.set(ph.status, (phaseStatusMap.get(ph.status) ?? 0) + 1);
+    totalEstimated += Number(ph.estimatedCost ?? 0);
+    totalActual += Number(ph.actualCost ?? 0);
+  }
+  const phaseStatusCounts = Array.from(phaseStatusMap.entries()).map(
+    ([status, count]) => ({ status, count })
+  );
+
+  // Team workload: top 8 staff by assignment count
+  const assignments = await db.phaseAssignment.findMany({
+    where: { phase: { projectId: { in: projectIds } } },
+    select: { staff: { select: { name: true } } },
+  });
+  const workloadMap = new Map<string, number>();
+  for (const a of assignments) {
+    const name = a.staff.name;
+    workloadMap.set(name, (workloadMap.get(name) ?? 0) + 1);
+  }
+  const teamWorkload = Array.from(workloadMap.entries())
+    .sort((a, b) => b[1] - a[1])
+    .slice(0, 8)
+    .map(([name, assignedPhases]) => ({ name, assignedPhases }));
+
+  // Monthly activity: last 6 months
+  const sixMonthsAgo = new Date();
+  sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 6);
+
+  const recentPhases = await db.phase.findMany({
+    where: {
+      projectId: { in: projectIds },
+      createdAt: { gte: sixMonthsAgo },
+    },
+    select: { createdAt: true },
+  });
+  const recentDocs = await db.document.findMany({
+    where: {
+      phase: { projectId: { in: projectIds } },
+      createdAt: { gte: sixMonthsAgo },
+    },
+    select: { createdAt: true },
+  });
+
+  const monthlyMap = new Map<string, { phases: number; documents: number }>();
+  const getMonthKey = (d: Date) =>
+    `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, "0")}`;
+
+  for (let i = 5; i >= 0; i--) {
+    const d = new Date();
+    d.setMonth(d.getMonth() - i);
+    monthlyMap.set(getMonthKey(d), { phases: 0, documents: 0 });
+  }
+  for (const ph of recentPhases) {
+    const key = getMonthKey(new Date(ph.createdAt));
+    if (monthlyMap.has(key)) monthlyMap.get(key)!.phases++;
+  }
+  for (const doc of recentDocs) {
+    const key = getMonthKey(new Date(doc.createdAt));
+    if (monthlyMap.has(key)) monthlyMap.get(key)!.documents++;
+  }
+  const monthlyActivity = Array.from(monthlyMap.entries()).map(
+    ([month, data]) => ({ month, ...data })
+  );
+
+  // Phase completion trend: last 8 weeks
+  const eightWeeksAgo = new Date();
+  eightWeeksAgo.setDate(eightWeeksAgo.getDate() - 56);
+  const completedPhases = await db.phase.findMany({
+    where: {
+      projectId: { in: projectIds },
+      status: "COMPLETE",
+      updatedAt: { gte: eightWeeksAgo },
+    },
+    select: { updatedAt: true },
+  });
+  const weekMap = new Map<string, number>();
+  for (let i = 7; i >= 0; i--) {
+    const d = new Date();
+    d.setDate(d.getDate() - i * 7);
+    const wk = `W${String(d.getDate()).padStart(2, "0")}/${d.getMonth() + 1}`;
+    weekMap.set(wk, 0);
+  }
+  for (const ph of completedPhases) {
+    const d = new Date(ph.updatedAt);
+    const wk = `W${String(d.getDate()).padStart(2, "0")}/${d.getMonth() + 1}`;
+    if (weekMap.has(wk)) weekMap.set(wk, (weekMap.get(wk) ?? 0) + 1);
+  }
+  const phaseCompletionTrend = Array.from(weekMap.entries()).map(
+    ([week, completed]) => ({ week, completed })
+  );
+
+  return {
+    projectStatusCounts,
+    phaseStatusCounts,
+    budgetSummary: { totalEstimated, totalActual },
+    monthlyActivity,
+    teamWorkload,
+    phaseCompletionTrend,
+  };
+}
diff --git a/src/actions/api-keys.ts b/src/actions/api-keys.ts
new file mode 100644
index 0000000..63dbbff
--- /dev/null
+++ b/src/actions/api-keys.ts
@@ -0,0 +1,65 @@
+"use server";
+
+import { createHash, randomBytes } from "crypto";
+import { revalidatePath } from "next/cache";
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db-types";
+import type { ApiKey } from "@/lib/db-types";
+
+async function requireAuth() {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthenticated");
+  return session.user.id;
+}
+
+export async function getApiKeys(): Promise<ApiKey[]> {
+  await requireAuth();
+  return db.apiKey.findMany({ orderBy: { createdAt: "desc" } });
+}
+
+export async function createApiKey(name: string, expiresAt?: string): Promise<{ key: string; id: string }> {
+  await requireAuth();
+  if (!name.trim()) throw new Error("Name is required");
+
+  // Generate key: prefix + random bytes
+  const rawKey = randomBytes(32).toString("hex");
+  const prefix = "cpk_" + rawKey.slice(0, 8);
+  const fullKey = prefix + "_" + rawKey.slice(8);
+  const keyHash = createHash("sha256").update(fullKey).digest("hex");
+
+  const record = await db.apiKey.create({
+    data: {
+      name: name.trim(),
+      keyHash,
+      prefix,
+      expiresAt: expiresAt ? new Date(expiresAt) : null,
+      active: true,
+    },
+  });
+
+  revalidatePath("/dashboard/settings");
+  return { key: fullKey, id: record.id };
+}
+
+export async function revokeApiKey(id: string): Promise<void> {
+  await requireAuth();
+  await db.apiKey.update({ where: { id }, data: { active: false } });
+  revalidatePath("/dashboard/settings");
+}
+
+export async function deleteApiKey(id: string): Promise<void> {
+  await requireAuth();
+  await db.apiKey.delete({ where: { id } });
+  revalidatePath("/dashboard/settings");
+}
+
+// Middleware helper — verify an incoming API key from Authorization header
+export async function verifyApiKey(rawKey: string): Promise<boolean> {
+  const keyHash = createHash("sha256").update(rawKey).digest("hex");
+  const record = await db.apiKey.findUnique({ where: { keyHash } });
+  if (!record || !record.active) return false;
+  if (record.expiresAt && new Date(record.expiresAt) < new Date()) return false;
+  // Update lastUsedAt (fire-and-forget)
+  db.apiKey.update({ where: { id: record.id }, data: { lastUsedAt: new Date() } }).catch(() => {});
+  return true;
+}
diff --git a/src/actions/budget.ts b/src/actions/budget.ts
new file mode 100644
index 0000000..1b0b357
--- /dev/null
+++ b/src/actions/budget.ts
@@ -0,0 +1,96 @@
+"use server";
+
+import { db } from "@/lib/db";
+import { auth } from "@/lib/auth";
+import { can } from "@/lib/permissions";
+import { revalidatePath } from "next/cache";
+
+export async function updateProjectBudget(
+  projectId: string,
+  budget: number | null
+) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+  if (!can(session.user.role || "VIEWER", "manage", "phase"))
+    throw new Error("Forbidden");
+
+  await db.project.update({
+    where: { id: projectId },
+    data: { budget: budget },
+  });
+
+  revalidatePath(`/dashboard/projects/${projectId}`);
+  return { success: true };
+}
+
+export async function updatePhaseCosts(
+  phaseId: string,
+  data: { estimatedCost?: number | null; actualCost?: number | null }
+) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+  if (!can(session.user.role || "VIEWER", "update", "phase"))
+    throw new Error("Forbidden");
+
+  const phase = await db.phase.update({
+    where: { id: phaseId },
+    data: {
+      estimatedCost: data.estimatedCost !== undefined ? data.estimatedCost : undefined,
+      actualCost: data.actualCost !== undefined ? data.actualCost : undefined,
+    },
+    select: { projectId: true },
+  });
+
+  revalidatePath(`/dashboard/projects/${phase.projectId}`);
+  return { success: true };
+}
+
+export async function getProjectBudgetSummary(projectId: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const project = await db.project.findUnique({
+    where: { id: projectId },
+    select: {
+      id: true,
+      budget: true,
+      phases: {
+        select: {
+          id: true,
+          name: true,
+          status: true,
+          estimatedCost: true,
+          actualCost: true,
+        },
+        orderBy: { sortOrder: "asc" },
+      },
+    },
+  });
+
+  if (!project) throw new Error("Project not found");
+
+  const phases = (project as unknown as { phases: { id: string; name: string; status: string; estimatedCost: unknown; actualCost: unknown }[] }).phases;
+  const totalEstimated = phases.reduce(
+    (sum: number, p: { estimatedCost: unknown }) => sum + (p.estimatedCost ? Number(p.estimatedCost) : 0),
+    0
+  );
+  const totalActual = phases.reduce(
+    (sum: number, p: { actualCost: unknown }) => sum + (p.actualCost ? Number(p.actualCost) : 0),
+    0
+  );
+  const projectBudget = project.budget ? Number(project.budget) : null;
+
+  return {
+    projectBudget,
+    totalEstimated,
+    totalActual,
+    variance: totalEstimated > 0 ? totalActual - totalEstimated : 0,
+    phases: phases.map((p: typeof phases[number]) => ({
+      id: p.id,
+      name: p.name,
+      status: p.status,
+      estimatedCost: p.estimatedCost ? Number(p.estimatedCost) : null,
+      actualCost: p.actualCost ? Number(p.actualCost) : null,
+    })),
+  };
+}
diff --git a/src/actions/change-orders.ts b/src/actions/change-orders.ts
new file mode 100644
index 0000000..8c68ca0
--- /dev/null
+++ b/src/actions/change-orders.ts
@@ -0,0 +1,123 @@
+"use server";
+
+import { db } from "@/lib/db-types";
+import { auth } from "@/lib/auth";
+import { revalidatePath } from "next/cache";
+import { notify, getProjectMemberIds } from "@/lib/notifications";
+
+export async function getChangeOrders(phaseId: string) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  return db.changeOrder.findMany({
+    where: { phaseId },
+    include: {
+      requestedBy: { select: { id: true, name: true, email: true } },
+      approvedBy: { select: { id: true, name: true } },
+    },
+    orderBy: { createdAt: "desc" },
+  });
+}
+
+export async function createChangeOrder(data: {
+  phaseId: string;
+  number: string;
+  title: string;
+  description?: string;
+  amount?: number;
+  reason?: string;
+}) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  const phase = await db.phase.findUnique({
+    where: { id: data.phaseId },
+    select: { id: true, name: true, projectId: true },
+  });
+  if (!phase) throw new Error("Phase not found");
+
+  const co = await db.changeOrder.create({
+    data: {
+      number: data.number,
+      title: data.title,
+      description: data.description ?? null,
+      amount: data.amount ?? null,
+      reason: data.reason ?? null,
+      status: "PENDING",
+      phaseId: data.phaseId,
+      requestedById: session.user.id,
+    },
+  });
+
+  // Notify project members
+  const memberIds = await getProjectMemberIds(phase.projectId);
+  notify({
+    type: "CHANGE_ORDER_SUBMITTED",
+    title: `Change Order ${data.number}: ${data.title}`,
+    message: `New change order submitted for ${phase.name}`,
+    recipientIds: memberIds,
+    actorId: session.user.id,
+    data: { projectId: phase.projectId, phaseId: phase.id, changeOrderId: co.id },
+  });
+
+  revalidatePath(`/dashboard/projects/${phase.projectId}`);
+  return co;
+}
+
+export async function updateChangeOrderStatus(
+  changeOrderId: string,
+  status: "APPROVED" | "REJECTED"
+) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  // Only PM/Admin can approve/reject
+  const userRole = session.user.role ?? "VIEWER";
+  if (userRole !== "ADMIN" && userRole !== "PROJECT_MANAGER") {
+    throw new Error("Only PMs and admins can approve change orders");
+  }
+
+  const co = await db.changeOrder.findUnique({
+    where: { id: changeOrderId },
+    include: { phase: { select: { projectId: true, name: true } }, requestedBy: true },
+  });
+  if (!co) throw new Error("Change order not found");
+
+  const updated = await db.changeOrder.update({
+    where: { id: changeOrderId },
+    data: {
+      status,
+      approvedById: session.user.id,
+      approvedAt: new Date(),
+    },
+  });
+
+  // Notify the requester
+  const notifType = status === "APPROVED" ? "CHANGE_ORDER_APPROVED" : "CHANGE_ORDER_REJECTED";
+  notify({
+    type: notifType,
+    title: `Change Order ${status === "APPROVED" ? "Approved" : "Rejected"}: ${co.title}`,
+    message: `Your change order "${co.title}" in ${co.phase.name} was ${status.toLowerCase()}`,
+    recipientIds: [co.requestedById],
+    actorId: session.user.id,
+    data: { projectId: co.phase.projectId, phaseId: co.phaseId, changeOrderId },
+  });
+
+  revalidatePath(`/dashboard/projects/${co.phase.projectId}`);
+  return updated;
+}
+
+export async function deleteChangeOrder(changeOrderId: string) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  const co = await db.changeOrder.findUnique({
+    where: { id: changeOrderId },
+    include: { phase: { select: { projectId: true } } },
+  });
+  if (!co) throw new Error("Change order not found");
+
+  await db.changeOrder.delete({ where: { id: changeOrderId } });
+  revalidatePath(`/dashboard/projects/${co.phase.projectId}`);
+  return { success: true };
+}
diff --git a/src/actions/checklists.ts b/src/actions/checklists.ts
index 378d274..79fd999 100644
--- a/src/actions/checklists.ts
+++ b/src/actions/checklists.ts
@@ -4,6 +4,7 @@ import { db } from "@/lib/db";
 import { auth } from "@/lib/auth";
 import { can } from "@/lib/permissions";
 import { revalidatePath } from "next/cache";
+import { notify, getProjectMemberIds } from "@/lib/notifications";
 
 export async function applyChecklistTemplate(
   phaseId: string,
@@ -38,9 +39,20 @@ export async function applyChecklistTemplate(
         })),
       },
     },
-    include: { phase: { select: { projectId: true } } },
+    include: { phase: { select: { name: true, projectId: true } } },
   });
 
+  // Log activity
+  db.activityLog.create({
+    data: {
+      action: "CHECKLIST_APPLIED",
+      message: `Applied "${template.name}" checklist to ${checklist.phase.name}`,
+      projectId: checklist.phase.projectId,
+      userId: session.user.id,
+      data: { phaseId, templateId, templateName: template.name },
+    },
+  }).catch(() => {});
+
   revalidatePath(`/dashboard/projects/${checklist.phase.projectId}`);
   return checklist;
 }
@@ -61,15 +73,52 @@ export async function toggleChecklistItem(itemId: string) {
   });
   if (!item) throw new Error("Item not found");
 
+  const nowCompleting = !item.completed;
+
   const updated = await db.checklistItem.update({
     where: { id: itemId },
     data: {
-      completed: !item.completed,
-      completedAt: !item.completed ? new Date() : null,
-      completedById: !item.completed ? session.user.id : null,
+      completed: nowCompleting,
+      completedAt: nowCompleting ? new Date() : null,
+      completedById: nowCompleting ? session.user.id : null,
     },
   });
 
+  // Log activity
+  db.activityLog.create({
+    data: {
+      action: "CHECKLIST_ITEM_TOGGLED",
+      message: `${nowCompleting ? "Completed" : "Unchecked"} "${item.title}"`,
+      projectId: item.checklist.phase.projectId,
+      userId: session.user.id,
+      data: { phaseId: item.checklist.phaseId, itemId: itemId, completed: nowCompleting },
+    },
+  }).catch(() => {});
+
+  // If completing an item, check if all items in checklist are now done
+  if (nowCompleting) {
+    const remaining = await db.checklistItem.count({
+      where: { checklistId: item.checklist.id, completed: false },
+    });
+    if (remaining === 0) {
+      const phase = await db.phase.findUnique({
+        where: { id: item.checklist.phaseId },
+        select: { id: true, name: true, projectId: true, project: { select: { name: true } } },
+      });
+      if (phase) {
+        const memberIds = await getProjectMemberIds(phase.projectId);
+        notify({
+          type: "CHECKLIST_COMPLETED",
+          title: `Checklist Complete: ${phase.name}`,
+          message: `All checklist items completed for ${phase.name} on ${phase.project.name}`,
+          recipientIds: memberIds,
+          actorId: session.user.id,
+          data: { projectId: phase.projectId, phaseId: phase.id },
+        });
+      }
+    }
+  }
+
   revalidatePath(
     `/dashboard/projects/${item.checklist.phase.projectId}`
   );
diff --git a/src/actions/client-tokens.ts b/src/actions/client-tokens.ts
new file mode 100644
index 0000000..021fa6f
--- /dev/null
+++ b/src/actions/client-tokens.ts
@@ -0,0 +1,59 @@
+"use server";
+
+import { revalidatePath } from "next/cache";
+import { randomBytes } from "crypto";
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db-types";
+import type { ClientToken } from "@/lib/db-types";
+
+async function requirePM(projectId: string) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthenticated");
+  const member = await (db as any).projectMember.findFirst({
+    where: { projectId, userId: session.user.id, role: { in: ["PM", "ADMIN"] } },
+  });
+  if (!member) throw new Error("Insufficient permissions");
+  return session.user.id;
+}
+
+export async function getClientTokens(projectId: string): Promise<ClientToken[]> {
+  const session = await auth();
+  if (!session?.user?.id) return [];
+  const member = await (db as any).projectMember.findFirst({
+    where: { projectId, userId: session.user.id },
+  });
+  if (!member) return [];
+  return db.clientToken.findMany({ where: { projectId }, orderBy: { createdAt: "desc" } });
+}
+
+export async function createClientToken(data: {
+  projectId: string;
+  label: string;
+  expiresAt?: string;
+}): Promise<ClientToken> {
+  await requirePM(data.projectId);
+  const token = randomBytes(24).toString("hex");
+  const ct = await db.clientToken.create({
+    data: {
+      token,
+      label: data.label,
+      projectId: data.projectId,
+      expiresAt: data.expiresAt ? new Date(data.expiresAt) : null,
+      active: true,
+    },
+  });
+  revalidatePath(`/dashboard/projects/${data.projectId}`);
+  return ct;
+}
+
+export async function revokeClientToken(tokenId: string, projectId: string): Promise<void> {
+  await requirePM(projectId);
+  await db.clientToken.update({ where: { id: tokenId }, data: { active: false } });
+  revalidatePath(`/dashboard/projects/${projectId}`);
+}
+
+export async function deleteClientToken(tokenId: string, projectId: string): Promise<void> {
+  await requirePM(projectId);
+  await db.clientToken.delete({ where: { id: tokenId } });
+  revalidatePath(`/dashboard/projects/${projectId}`);
+}
diff --git a/src/actions/comments.ts b/src/actions/comments.ts
new file mode 100644
index 0000000..4dfa15e
--- /dev/null
+++ b/src/actions/comments.ts
@@ -0,0 +1,110 @@
+"use server";
+
+import { db } from "@/lib/db";
+import { auth } from "@/lib/auth";
+import { revalidatePath } from "next/cache";
+import { z } from "zod";
+
+const AddPhaseCommentSchema = z.object({
+  phaseId: z.string().min(1),
+  content: z.string().min(1).max(5000),
+});
+
+// Get comments for a phase (newest first)
+export async function getPhaseComments(phaseId: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  return db.phaseComment.findMany({
+    where: { phaseId },
+    include: {
+      user: { select: { id: true, name: true, email: true, image: true } },
+    },
+    orderBy: { createdAt: "desc" },
+  });
+}
+
+// Add a comment to a phase
+export async function addPhaseComment(
+  data: z.infer<typeof AddPhaseCommentSchema>
+) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  const parsed = AddPhaseCommentSchema.parse(data);
+
+  if (!parsed.content.trim()) throw new Error("Comment cannot be empty");
+
+  const comment = await db.phaseComment.create({
+    data: {
+      phaseId: parsed.phaseId,
+      userId: session.user.id,
+      content: parsed.content.trim(),
+    },
+    include: {
+      user: { select: { id: true, name: true, email: true, image: true } },
+    },
+  });
+
+  // Get phase info for activity log
+  const phase = await db.phase.findUnique({
+    where: { id: parsed.phaseId },
+    select: { name: true, projectId: true },
+  });
+
+  if (phase) {
+    // Log activity (fire-and-forget)
+    db.activityLog
+      .create({
+        data: {
+          action: "COMMENT_ADDED",
+          message: `${session.user.name || session.user.email} commented on ${phase.name}`,
+          projectId: phase.projectId,
+          userId: session.user.id,
+          data: { phaseId: parsed.phaseId, commentId: comment.id },
+        },
+      })
+      .catch(() => {});
+
+    revalidatePath(`/dashboard/projects/${phase.projectId}`);
+  }
+
+  return comment;
+}
+
+// Delete a comment (only author or admin)
+export async function deletePhaseComment(commentId: string) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  const comment = await db.phaseComment.findUnique({
+    where: { id: commentId },
+    include: { phase: { select: { projectId: true } } },
+  });
+
+  if (!comment) throw new Error("Comment not found");
+
+  // Only author or admin can delete
+  const userRole = (session.user as { role?: string }).role;
+  if (comment.userId !== session.user.id && userRole !== "ADMIN") {
+    throw new Error("Not authorized to delete this comment");
+  }
+
+  await db.phaseComment.delete({ where: { id: commentId } });
+
+  // Log activity (fire-and-forget)
+  db.activityLog
+    .create({
+      data: {
+        action: "COMMENT_DELETED",
+        message: `Deleted comment on phase`,
+        projectId: comment.phase.projectId,
+        userId: session.user.id,
+        data: { commentId },
+      },
+    })
+    .catch(() => {});
+
+  revalidatePath(`/dashboard/projects/${comment.phase.projectId}`);
+  return { success: true };
+}
diff --git a/src/actions/daily-logs.ts b/src/actions/daily-logs.ts
new file mode 100644
index 0000000..eee1c5a
--- /dev/null
+++ b/src/actions/daily-logs.ts
@@ -0,0 +1,70 @@
+"use server";
+
+import { db } from "@/lib/db-types";
+import { auth } from "@/lib/auth";
+import { revalidatePath } from "next/cache";
+
+export async function getDailyLogs(projectId: string) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  return db.dailyLog.findMany({
+    where: { projectId },
+    include: { author: { select: { id: true, name: true, email: true } } },
+    orderBy: { date: "desc" },
+    take: 30,
+  });
+}
+
+export async function createDailyLog(data: {
+  projectId: string;
+  date: string;
+  weather?: string;
+  tempHigh?: number;
+  tempLow?: number;
+  crewCount?: number;
+  equipment?: string;
+  workSummary: string;
+  issues?: string;
+  notes?: string;
+}) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  const log = await db.dailyLog.create({
+    data: {
+      projectId: data.projectId,
+      date: new Date(data.date),
+      weather: data.weather ?? null,
+      tempHigh: data.tempHigh ?? null,
+      tempLow: data.tempLow ?? null,
+      crewCount: data.crewCount ?? null,
+      equipment: data.equipment ?? null,
+      workSummary: data.workSummary,
+      issues: data.issues ?? null,
+      notes: data.notes ?? null,
+      authorId: session.user.id,
+    },
+  });
+
+  revalidatePath(`/dashboard/projects/${data.projectId}`);
+  return log;
+}
+
+export async function deleteDailyLog(logId: string) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  const log = await db.dailyLog.findUnique({ where: { id: logId } });
+  if (!log) throw new Error("Log not found");
+
+  // Only the author or admin can delete
+  const userRole = session.user.role ?? "VIEWER";
+  if (log.authorId !== session.user.id && userRole !== "ADMIN") {
+    throw new Error("Forbidden");
+  }
+
+  await db.dailyLog.delete({ where: { id: logId } });
+  revalidatePath(`/dashboard/projects/${log.projectId}`);
+  return { success: true };
+}
diff --git a/src/actions/dependencies.ts b/src/actions/dependencies.ts
new file mode 100644
index 0000000..62fe72b
--- /dev/null
+++ b/src/actions/dependencies.ts
@@ -0,0 +1,151 @@
+"use server";
+
+import { db } from "@/lib/db";
+import { auth } from "@/lib/auth";
+import { revalidatePath } from "next/cache";
+import { z } from "zod";
+
+const AddDependencySchema = z.object({
+  phaseId: z.string().min(1),
+  dependsOnId: z.string().min(1),
+  lagDays: z.number().int().min(0).optional(),
+});
+
+const RemoveDependencySchema = z.object({
+  dependencyId: z.string().min(1),
+});
+
+type AddDependencyInput = z.infer<typeof AddDependencySchema>;
+type RemoveDependencyInput = z.infer<typeof RemoveDependencySchema>;
+
+// Add a dependency between phases
+export async function addPhaseDependency(data: AddDependencyInput) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  const parsed = AddDependencySchema.parse(data);
+
+  if (parsed.phaseId === parsed.dependsOnId) {
+    throw new Error("A phase cannot depend on itself");
+  }
+
+  // Verify both phases exist and belong to the same project
+  const [phase, dependsOn] = await Promise.all([
+    db.phase.findUnique({
+      where: { id: parsed.phaseId },
+      select: { id: true, name: true, projectId: true },
+    }),
+    db.phase.findUnique({
+      where: { id: parsed.dependsOnId },
+      select: { id: true, name: true, projectId: true },
+    }),
+  ]);
+
+  if (!phase || !dependsOn) throw new Error("Phase not found");
+  if (phase.projectId !== dependsOn.projectId) {
+    throw new Error("Phases must belong to the same project");
+  }
+
+  // Check for circular dependency (simple check: dependsOn already depends on phase)
+  const circular = await db.phaseDependency.findFirst({
+    where: { phaseId: parsed.dependsOnId, dependsOnId: parsed.phaseId },
+  });
+  if (circular) throw new Error("Circular dependency detected");
+
+  const dep = await db.phaseDependency.create({
+    data: {
+      phaseId: parsed.phaseId,
+      dependsOnId: parsed.dependsOnId,
+      lagDays: parsed.lagDays ?? 0,
+    },
+  });
+
+  // Log activity
+  db.activityLog
+    .create({
+      data: {
+        action: "DEPENDENCY_ADDED",
+        message: `${phase.name} now depends on ${dependsOn.name}`,
+        projectId: phase.projectId,
+        userId: session.user.id,
+        data: { phaseId: parsed.phaseId, dependsOnId: parsed.dependsOnId },
+      },
+    })
+    .catch(() => {});
+
+  revalidatePath(`/dashboard/projects/${phase.projectId}`);
+  return dep;
+}
+
+// Remove a dependency
+export async function removePhaseDependency(data: RemoveDependencyInput) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  const parsed = RemoveDependencySchema.parse(data);
+
+  const dep = await db.phaseDependency.findUnique({
+    where: { id: parsed.dependencyId },
+    include: { phase: { select: { projectId: true, name: true } } },
+  });
+
+  if (!dep) throw new Error("Dependency not found");
+
+  await db.phaseDependency.delete({ where: { id: parsed.dependencyId } });
+
+  // Log activity
+  db.activityLog
+    .create({
+      data: {
+        action: "DEPENDENCY_REMOVED",
+        message: `Removed dependency for ${dep.phase.name}`,
+        projectId: dep.phase.projectId,
+        userId: session.user.id,
+        data: { dependencyId: parsed.dependencyId },
+      },
+    })
+    .catch(() => {});
+
+  revalidatePath(`/dashboard/projects/${dep.phase.projectId}`);
+  return { success: true };
+}
+
+// Get all dependencies for a project (for Gantt chart visualization)
+export async function getProjectDependencies(projectId: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  return db.phaseDependency.findMany({
+    where: { phase: { projectId } },
+    include: {
+      phase: { select: { id: true, name: true } },
+      dependsOn: { select: { id: true, name: true } },
+    },
+  });
+}
+
+// Get dependencies for a specific phase
+export async function getPhaseDepenencies(phaseId: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  return db.phaseDependency.findMany({
+    where: { phaseId },
+    include: {
+      dependsOn: { select: { id: true, name: true, estEnd: true } },
+    },
+  });
+}
+
+// Get phases that depend on a specific phase
+export async function getPhaseDependents(phaseId: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  return db.phaseDependency.findMany({
+    where: { dependsOnId: phaseId },
+    include: {
+      phase: { select: { id: true, name: true, estStart: true } },
+    },
+  });
+}
diff --git a/src/actions/documents.ts b/src/actions/documents.ts
index 4f91d2c..88b91a0 100644
--- a/src/actions/documents.ts
+++ b/src/actions/documents.ts
@@ -5,7 +5,10 @@ import { auth } from "@/lib/auth";
 import { can } from "@/lib/permissions";
 import { revalidatePath } from "next/cache";
 import { del } from "@vercel/blob";
-import { DocCategory, DocStatus } from "@prisma/client";
+import { notify, getProjectMemberIds } from "@/lib/notifications";
+
+type DocCategory = "PERMIT" | "CONTRACT" | "INVOICE" | "BLUEPRINT" | "INSPECTION" | "OTHER";
+type DocStatus = "PENDING" | "APPROVED" | "REJECTED" | "EXPIRED";
 
 export async function createDocument(data: {
   phaseId: string;
@@ -57,6 +60,17 @@ export async function createDocument(data: {
     },
   });
 
+  // Notify project members about new document
+  const memberIds = await getProjectMemberIds(phase.projectId);
+  notify({
+    type: "DOCUMENT_UPLOADED",
+    title: `New Document: ${data.name}`,
+    message: `"${data.name}" uploaded to ${phase.name}`,
+    recipientIds: memberIds,
+    actorId: session.user.id,
+    data: { projectId: phase.projectId, phaseId: phase.id, documentId: document.id },
+  });
+
   revalidatePath(`/dashboard/projects/${phase.projectId}`);
   return document;
 }
@@ -100,6 +114,19 @@ export async function updateDocumentStatus(
     },
   });
 
+  // Notify the document uploader about status change
+  const statusLabel = status === "APPROVED" ? "approved" : status === "REJECTED" ? "rejected" : "updated";
+  if (document.uploadedById) {
+    notify({
+      type: "DOCUMENT_STATUS_CHANGED",
+      title: `Document ${statusLabel}: ${document.name}`,
+      message: `"${document.name}" in ${document.phase.name} was ${statusLabel}`,
+      recipientIds: [document.uploadedById],
+      actorId: session.user.id,
+      data: { projectId: document.phase.projectId, phaseId: document.phaseId, documentId, documentName: document.name, newStatus: status },
+    });
+  }
+
   revalidatePath(`/dashboard/projects/${document.phase.projectId}`);
   return updated;
 }
diff --git a/src/actions/inspections.ts b/src/actions/inspections.ts
new file mode 100644
index 0000000..c5e9120
--- /dev/null
+++ b/src/actions/inspections.ts
@@ -0,0 +1,107 @@
+"use server";
+
+import { db } from "@/lib/db-types";
+import { auth } from "@/lib/auth";
+import { revalidatePath } from "next/cache";
+import { notify, getProjectMemberIds } from "@/lib/notifications";
+
+export async function getInspections(phaseId: string) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+  return db.inspection.findMany({
+    where: { phaseId },
+    orderBy: { scheduledAt: "desc" },
+  });
+}
+
+export async function createInspection(data: {
+  phaseId: string;
+  title: string;
+  inspectorName?: string;
+  scheduledAt: string;
+  notifyOnResult?: boolean;
+}) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  const phase = await db.phase.findUnique({
+    where: { id: data.phaseId },
+    select: { id: true, name: true, projectId: true },
+  });
+  if (!phase) throw new Error("Phase not found");
+
+  const inspection = await db.inspection.create({
+    data: {
+      title: data.title,
+      inspectorName: data.inspectorName ?? null,
+      scheduledAt: new Date(data.scheduledAt),
+      notifyOnResult: data.notifyOnResult ?? true,
+      phaseId: data.phaseId,
+    },
+  });
+
+  // Notify members
+  const memberIds = await getProjectMemberIds(phase.projectId);
+  notify({
+    type: "INSPECTION_SCHEDULED",
+    title: `Inspection Scheduled: ${data.title}`,
+    message: `Inspection scheduled for ${phase.name} on ${new Date(data.scheduledAt).toLocaleDateString()}`,
+    recipientIds: memberIds,
+    actorId: session.user.id,
+    data: { projectId: phase.projectId, phaseId: phase.id, inspectionId: inspection.id },
+  });
+
+  revalidatePath(`/dashboard/projects/${phase.projectId}`);
+  return inspection;
+}
+
+export async function recordInspectionResult(
+  inspectionId: string,
+  result: "PASS" | "FAIL" | "CONDITIONAL",
+  notes?: string
+) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  const inspection = await db.inspection.findUnique({
+    where: { id: inspectionId },
+    include: { phase: { select: { projectId: true, name: true } } },
+  });
+  if (!inspection) throw new Error("Inspection not found");
+
+  const updated = await db.inspection.update({
+    where: { id: inspectionId },
+    data: { result, completedAt: new Date(), notes: notes ?? null },
+  });
+
+  if (inspection.notifyOnResult) {
+    const memberIds = await getProjectMemberIds(inspection.phase.projectId);
+    const resultLabel = result === "PASS" ? "Passed ✓" : result === "FAIL" ? "Failed ✗" : "Conditional";
+    notify({
+      type: "INSPECTION_RESULT",
+      title: `Inspection ${resultLabel}: ${inspection.title}`,
+      message: `${inspection.title} in ${inspection.phase.name}: ${resultLabel}`,
+      recipientIds: memberIds,
+      actorId: session.user.id,
+      data: { projectId: inspection.phase.projectId, phaseId: inspection.phaseId, inspectionId },
+    });
+  }
+
+  revalidatePath(`/dashboard/projects/${inspection.phase.projectId}`);
+  return updated;
+}
+
+export async function deleteInspection(inspectionId: string) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  const inspection = await db.inspection.findUnique({
+    where: { id: inspectionId },
+    include: { phase: { select: { projectId: true } } },
+  });
+  if (!inspection) throw new Error("Inspection not found");
+
+  await db.inspection.delete({ where: { id: inspectionId } });
+  revalidatePath(`/dashboard/projects/${inspection.phase.projectId}`);
+  return { success: true };
+}
diff --git a/src/actions/invitations.ts b/src/actions/invitations.ts
new file mode 100644
index 0000000..460f3f4
--- /dev/null
+++ b/src/actions/invitations.ts
@@ -0,0 +1,264 @@
+"use server";
+
+import { db } from "@/lib/db";
+import { auth } from "@/lib/auth";
+import { can } from "@/lib/permissions";
+import { notify, getProjectMemberIds } from "@/lib/notifications";
+import { revalidatePath } from "next/cache";
+import { randomBytes } from "crypto";
+import { sendInvitationEmail } from "@/lib/email";
+
+// ── Create Invitation ──
+
+export async function createInvitation(
+  projectId: string,
+  email: string,
+  role: "OWNER" | "MANAGER" | "CONTRACTOR" | "STAKEHOLDER" | "VIEWER" = "CONTRACTOR"
+) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+  if (!can(session.user.role, "create", "member")) throw new Error("Forbidden");
+
+  const normalizedEmail = email.toLowerCase().trim();
+
+  // Check if user is already a member
+  const existingMember = await db.projectMember.findFirst({
+    where: {
+      projectId,
+      user: { email: normalizedEmail },
+    },
+  });
+  if (existingMember) throw new Error("User is already a member of this project");
+
+  // Check for pending invitation
+  const existingInvite = await db.invitation.findFirst({
+    where: {
+      projectId,
+      email: normalizedEmail,
+      expiresAt: { gt: new Date() },
+    },
+  });
+  if (existingInvite) throw new Error("An invitation has already been sent to this email");
+
+  // Generate unique token
+  const token = randomBytes(32).toString("hex");
+  const expiresAt = new Date();
+  expiresAt.setDate(expiresAt.getDate() + 7); // 7-day expiry
+
+  const invitation = await db.invitation.create({
+    data: {
+      email: normalizedEmail,
+      token,
+      role: role as never, // Prisma enum cast
+      projectId,
+      expiresAt,
+    },
+    include: {
+      project: { select: { name: true } },
+    },
+  });
+
+  // Log activity
+  db.activityLog.create({
+    data: {
+      action: "MEMBER_INVITED",
+      message: `Invited ${normalizedEmail} as ${role.toLowerCase()}`,
+      projectId,
+      userId: session.user.id,
+      data: { email: normalizedEmail, role },
+    },
+  }).catch(() => {});
+
+  // Send invitation email (fire-and-forget)
+  sendInvitationEmail(
+    normalizedEmail,
+    invitation.project.name,
+    role,
+    token,
+    session.user.name || session.user.email || "A team member"
+  ).catch(() => {});
+
+  // Notify existing project members
+  const memberIds = await getProjectMemberIds(projectId);
+  notify({
+    type: "MEMBER_INVITED",
+    title: `New team member invited`,
+    message: `${normalizedEmail} was invited to ${invitation.project.name} as ${role.toLowerCase()}`,
+    recipientIds: memberIds,
+    actorId: session.user.id,
+    data: { projectId },
+  });
+
+  revalidatePath(`/dashboard/projects/${projectId}`);
+
+  return {
+    id: invitation.id,
+    email: normalizedEmail,
+    role,
+    token,
+    expiresAt,
+  };
+}
+
+// ── Get Project Invitations ──
+
+export async function getProjectInvitations(projectId: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  return db.invitation.findMany({
+    where: { projectId },
+    orderBy: { createdAt: "desc" },
+  });
+}
+
+// ── Cancel Invitation ──
+
+export async function cancelInvitation(invitationId: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+  if (!can(session.user.role, "create", "member")) throw new Error("Forbidden");
+
+  const invitation = await db.invitation.delete({
+    where: { id: invitationId },
+  });
+
+  revalidatePath(`/dashboard/projects/${invitation.projectId}`);
+  return { success: true };
+}
+
+// ── Accept Invitation ──
+
+export async function acceptInvitation(token: string) {
+  const invitation = await db.invitation.findUnique({
+    where: { token },
+    include: { project: { select: { name: true } } },
+  });
+
+  if (!invitation) throw new Error("Invitation not found");
+  if (invitation.expiresAt < new Date()) throw new Error("Invitation has expired");
+
+  const session = await auth();
+  if (!session?.user) throw new Error("Please sign in to accept this invitation");
+
+  // Check if already a member
+  const existingMember = await db.projectMember.findUnique({
+    where: {
+      userId_projectId: {
+        userId: session.user.id,
+        projectId: invitation.projectId,
+      },
+    },
+  });
+
+  if (existingMember) {
+    // Already a member — just clean up the invitation
+    await db.invitation.delete({ where: { id: invitation.id } });
+    return {
+      success: true,
+      projectId: invitation.projectId,
+      projectName: invitation.project.name,
+      alreadyMember: true,
+    };
+  }
+
+  // Create project membership and delete invitation
+  await db.$transaction([
+    db.projectMember.create({
+      data: {
+        userId: session.user.id,
+        projectId: invitation.projectId,
+        role: invitation.role,
+      },
+    }),
+    db.invitation.delete({ where: { id: invitation.id } }),
+  ]);
+
+  // Log activity
+  db.activityLog.create({
+    data: {
+      action: "MEMBER_JOINED",
+      message: `${session.user.name || session.user.email} joined as ${invitation.role.toLowerCase()}`,
+      projectId: invitation.projectId,
+      userId: session.user.id,
+    },
+  }).catch(() => {});
+
+  // Notify existing members
+  const memberIds = await getProjectMemberIds(invitation.projectId);
+  notify({
+    type: "MEMBER_INVITED",
+    title: `New team member joined`,
+    message: `${session.user.name || session.user.email} joined ${invitation.project.name}`,
+    recipientIds: memberIds,
+    actorId: session.user.id,
+    data: { projectId: invitation.projectId },
+  });
+
+  revalidatePath(`/dashboard/projects/${invitation.projectId}`);
+
+  return {
+    success: true,
+    projectId: invitation.projectId,
+    projectName: invitation.project.name,
+    alreadyMember: false,
+  };
+}
+
+// ── Get invitation details by token (public, no auth needed) ──
+
+export async function getInvitationByToken(token: string) {
+  const invitation = await db.invitation.findUnique({
+    where: { token },
+    include: { project: { select: { name: true, address: true } } },
+  });
+
+  if (!invitation) return null;
+
+  return {
+    id: invitation.id,
+    email: invitation.email,
+    role: invitation.role,
+    projectName: invitation.project.name,
+    projectAddress: invitation.project.address,
+    expiresAt: invitation.expiresAt,
+    expired: invitation.expiresAt < new Date(),
+  };
+}
+
+// ── Remove member from project ──
+
+export async function removeMember(memberId: string, projectId: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+  if (!can(session.user.role, "delete", "member")) throw new Error("Forbidden");
+
+  // Don't allow removing yourself if you're the only owner
+  const member = await db.projectMember.findUnique({
+    where: { id: memberId },
+    include: { user: { select: { name: true, email: true } } },
+  });
+
+  if (!member) throw new Error("Member not found");
+
+  if (member.role === "OWNER") {
+    const ownerCount = await db.projectMember.count({
+      where: { projectId, role: "OWNER" },
+    });
+    if (ownerCount <= 1) throw new Error("Cannot remove the only project owner");
+  }
+
+  await db.projectMember.delete({ where: { id: memberId } });
+
+  db.activityLog.create({
+    data: {
+      action: "MEMBER_REMOVED",
+      message: `Removed ${member.user.name || member.user.email} from project`,
+      projectId,
+      userId: session.user.id,
+    },
+  }).catch(() => {});
+
+  revalidatePath(`/dashboard/projects/${projectId}`);
+  return { success: true };
+}
diff --git a/src/actions/materials.ts b/src/actions/materials.ts
new file mode 100644
index 0000000..b68ba80
--- /dev/null
+++ b/src/actions/materials.ts
@@ -0,0 +1,94 @@
+"use server";
+
+import { revalidatePath } from "next/cache";
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db-types";
+import type { Material, MaterialStatus } from "@/lib/db-types";
+
+async function requireMember(phaseId: string) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthenticated");
+  const phase = await (db as any).phase.findUnique({
+    where: { id: phaseId },
+    include: { project: { include: { members: { where: { userId: session.user.id } } } } },
+  });
+  if (!phase) throw new Error("Phase not found");
+  const member = phase.project.members[0];
+  if (!member) throw new Error("Not a project member");
+  return { userId: session.user.id, member, projectId: phase.projectId };
+}
+
+export async function getMaterials(phaseId: string): Promise<Material[]> {
+  const session = await auth();
+  if (!session?.user?.id) return [];
+  const mats = await db.material.findMany({
+    where: { phaseId },
+    orderBy: { createdAt: "asc" },
+  });
+  return mats.map((m: any) => ({ ...m, cost: m.cost ? Number(m.cost) : null }));
+}
+
+export async function createMaterial(data: {
+  phaseId: string;
+  name: string;
+  quantity: number;
+  unit: string;
+  cost?: number;
+  supplier?: string;
+  notes?: string;
+}): Promise<void> {
+  const { projectId } = await requireMember(data.phaseId);
+  await db.material.create({
+    data: {
+      phaseId: data.phaseId,
+      name: data.name,
+      quantity: data.quantity,
+      unit: data.unit,
+      cost: data.cost ?? null,
+      supplier: data.supplier ?? null,
+      notes: data.notes ?? null,
+      status: "ORDERED",
+    },
+  });
+  revalidatePath(`/dashboard/projects/${projectId}`);
+}
+
+export async function updateMaterialStatus(
+  materialId: string,
+  status: MaterialStatus
+): Promise<void> {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthenticated");
+  const mat = await db.material.findUnique({
+    where: { id: materialId },
+    include: { phase: { include: { project: { include: { members: { where: { userId: session.user.id } } } } } } },
+  });
+  if (!mat) throw new Error("Material not found");
+  if (!mat.phase.project.members[0]) throw new Error("Not a project member");
+
+  const now = new Date();
+  await db.material.update({
+    where: { id: materialId },
+    data: {
+      status,
+      deliveredAt: status === "DELIVERED" ? now : mat.deliveredAt,
+      installedAt: status === "INSTALLED" ? now : mat.installedAt,
+    },
+  });
+  revalidatePath(`/dashboard/projects/${mat.phase.projectId}`);
+}
+
+export async function deleteMaterial(materialId: string): Promise<void> {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthenticated");
+  const mat = await db.material.findUnique({
+    where: { id: materialId },
+    include: { phase: { include: { project: { include: { members: { where: { userId: session.user.id } } } } } } },
+  });
+  if (!mat) throw new Error("Material not found");
+  const member = mat.phase.project.members[0];
+  if (!member || !["PM", "ADMIN"].includes(member.role)) throw new Error("Insufficient permissions");
+
+  await db.material.delete({ where: { id: materialId } });
+  revalidatePath(`/dashboard/projects/${mat.phase.projectId}`);
+}
diff --git a/src/actions/notification-preferences.ts b/src/actions/notification-preferences.ts
new file mode 100644
index 0000000..925602d
--- /dev/null
+++ b/src/actions/notification-preferences.ts
@@ -0,0 +1,131 @@
+"use server";
+
+import { db } from "@/lib/db";
+import { auth } from "@/lib/auth";
+import { revalidatePath } from "next/cache";
+
+interface NotificationPreferences {
+  emailEnabled: boolean;
+  smsEnabled: boolean;
+  inAppEnabled: boolean;
+  emailPhaseStatus: boolean;
+  emailReview: boolean;
+  emailChecklist: boolean;
+  emailDocuments: boolean;
+  emailComments: boolean;
+  smsPhaseStatus: boolean;
+  smsReview: boolean;
+  smsChecklist: boolean;
+  smsDocuments: boolean;
+  quietStart: string | null;
+  quietEnd: string | null;
+}
+
+const DEFAULTS: NotificationPreferences = {
+  emailEnabled: true,
+  smsEnabled: false,
+  inAppEnabled: true,
+  emailPhaseStatus: true,
+  emailReview: true,
+  emailChecklist: true,
+  emailDocuments: true,
+  emailComments: false,
+  smsPhaseStatus: true,
+  smsReview: true,
+  smsChecklist: false,
+  smsDocuments: false,
+  quietStart: null,
+  quietEnd: null,
+};
+
+/**
+ * Get current user's notification preferences (creates defaults if none exist).
+ */
+export async function getNotificationPreferences(): Promise<NotificationPreferences> {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  const prefs = await db.notificationPreference.findUnique({
+    where: { userId: session.user.id },
+  });
+
+  if (!prefs) return DEFAULTS;
+
+  return {
+    emailEnabled: prefs.emailEnabled,
+    smsEnabled: prefs.smsEnabled,
+    inAppEnabled: prefs.inAppEnabled,
+    emailPhaseStatus: prefs.emailPhaseStatus,
+    emailReview: prefs.emailReview,
+    emailChecklist: prefs.emailChecklist,
+    emailDocuments: prefs.emailDocuments,
+    emailComments: prefs.emailComments,
+    smsPhaseStatus: prefs.smsPhaseStatus,
+    smsReview: prefs.smsReview,
+    smsChecklist: prefs.smsChecklist,
+    smsDocuments: prefs.smsDocuments,
+    quietStart: prefs.quietStart,
+    quietEnd: prefs.quietEnd,
+  };
+}
+
+/**
+ * Update current user's notification preferences.
+ */
+export async function updateNotificationPreferences(
+  data: Partial<NotificationPreferences>
+) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  await db.notificationPreference.upsert({
+    where: { userId: session.user.id },
+    create: {
+      userId: session.user.id,
+      ...DEFAULTS,
+      ...data,
+    },
+    update: data,
+  });
+
+  revalidatePath("/dashboard/settings");
+  revalidatePath("/contractor/settings");
+  return { success: true };
+}
+
+/**
+ * Update current user's phone number (for SMS notifications).
+ */
+export async function updatePhoneNumber(phone: string) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthorized");
+
+  // Basic E.164 validation
+  if (phone && !phone.match(/^\+[1-9]\d{1,14}$/)) {
+    throw new Error("Invalid phone number format. Use E.164 format: +1234567890");
+  }
+
+  await db.user.update({
+    where: { id: session.user.id },
+    data: { phone: phone || null },
+  });
+
+  revalidatePath("/dashboard/settings");
+  revalidatePath("/contractor/settings");
+  return { success: true };
+}
+
+/**
+ * Get current user's phone number.
+ */
+export async function getUserPhone(): Promise<string | null> {
+  const session = await auth();
+  if (!session?.user?.id) return null;
+
+  const user = await db.user.findUnique({
+    where: { id: session.user.id },
+    select: { phone: true },
+  });
+
+  return user?.phone || null;
+}
diff --git a/src/actions/notifications.ts b/src/actions/notifications.ts
new file mode 100644
index 0000000..7b1f778
--- /dev/null
+++ b/src/actions/notifications.ts
@@ -0,0 +1,93 @@
+"use server";
+
+import { db } from "@/lib/db";
+import { auth } from "@/lib/auth";
+import { revalidatePath } from "next/cache";
+
+export async function getNotifications(page: number = 1, limit: number = 20) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const skip = (page - 1) * limit;
+
+  const [notifications, total] = await Promise.all([
+    db.notification.findMany({
+      where: { userId: session.user.id },
+      orderBy: { createdAt: "desc" },
+      skip,
+      take: limit,
+    }),
+    db.notification.count({
+      where: { userId: session.user.id },
+    }),
+  ]);
+
+  // Cast Prisma JsonValue to Record<string, unknown> for client components
+  const mapped = notifications.map((n: typeof notifications[number]) => ({
+    ...n,
+    data: (n.data as Record<string, unknown> | null),
+  }));
+
+  return {
+    notifications: mapped,
+    total,
+    hasMore: skip + mapped.length < total,
+  };
+}
+
+export async function getUnreadCount(): Promise<number> {
+  const session = await auth();
+  if (!session?.user) return 0;
+
+  try {
+    const count = await db.notification.count({
+      where: { userId: session.user.id, read: false },
+    });
+    return count;
+  } catch {
+    return 0; // Table might not exist yet during first deploy
+  }
+}
+
+export async function markAsRead(notificationId: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  await db.notification.updateMany({
+    where: { id: notificationId, userId: session.user.id },
+    data: { read: true },
+  });
+
+  revalidatePath("/dashboard/notifications");
+  revalidatePath("/dashboard");
+  revalidatePath("/contractor");
+  return { success: true };
+}
+
+export async function markAllAsRead() {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const result = await db.notification.updateMany({
+    where: { userId: session.user.id, read: false },
+    data: { read: true },
+  });
+
+  revalidatePath("/dashboard/notifications");
+  revalidatePath("/dashboard");
+  revalidatePath("/contractor");
+  return { updated: result.count };
+}
+
+export async function deleteNotification(notificationId: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  await db.notification.deleteMany({
+    where: { id: notificationId, userId: session.user.id },
+  });
+
+  revalidatePath("/dashboard/notifications");
+  revalidatePath("/dashboard");
+  return { success: true };
+}
diff --git a/src/actions/phases.ts b/src/actions/phases.ts
index 1d4ad92..baff6b9 100644
--- a/src/actions/phases.ts
+++ b/src/actions/phases.ts
@@ -5,6 +5,7 @@ import { auth } from "@/lib/auth";
 import { canManagePhase } from "@/lib/permissions";
 import { revalidatePath } from "next/cache";
 import { z } from "zod";
+import { notify, getProjectMemberIds } from "@/lib/notifications";
 
 const CreatePhaseSchema = z.object({
   projectId: z.string().min(1),
@@ -53,6 +54,17 @@ export async function createPhase(data: z.infer<typeof CreatePhaseSchema>) {
     },
   });
 
+  // Log activity
+  db.activityLog.create({
+    data: {
+      action: "PHASE_CREATED",
+      message: `Added phase "${parsed.name}"`,
+      projectId: parsed.projectId,
+      userId: session.user.id,
+      data: { phaseId: phase.id },
+    },
+  }).catch(() => {});
+
   revalidatePath(`/dashboard/projects/${parsed.projectId}`);
   return phase;
 }
@@ -113,6 +125,38 @@ export async function updatePhaseStatus(
     include: { project: true },
   });
 
+  // Notify project members about status change
+  const statusLabels: Record<string, string> = {
+    IN_PROGRESS: "started",
+    REVIEW_REQUESTED: "ready for review",
+    UNDER_REVIEW: "under review",
+    COMPLETE: "completed",
+    PENDING: "set to pending",
+  };
+  const memberIds = await getProjectMemberIds(phase.projectId);
+  const notifType = status === "REVIEW_REQUESTED" ? "REVIEW_REQUESTED" as const : "PHASE_STATUS_CHANGED" as const;
+  notify({
+    type: notifType,
+    title: status === "REVIEW_REQUESTED"
+      ? `Review Requested: ${phase.name}`
+      : `Phase ${statusLabels[status] || "updated"}: ${phase.name}`,
+    message: `${phase.name} on ${phase.project.name} is now ${statusLabels[status] || status.toLowerCase()}`,
+    recipientIds: memberIds,
+    actorId: session.user.id,
+    data: { projectId: phase.projectId, phaseId: phase.id, newStatus: status },
+  });
+
+  // Log activity
+  db.activityLog.create({
+    data: {
+      action: "PHASE_STATUS_CHANGED",
+      message: `${phase.name} ${statusLabels[status] || "updated"}`,
+      projectId: phase.projectId,
+      userId: session.user.id,
+      data: { phaseId: phase.id, newStatus: status },
+    },
+  }).catch(() => {}); // fire-and-forget
+
   revalidatePath(`/dashboard/projects/${phase.projectId}`);
   return phase;
 }
@@ -145,15 +189,24 @@ export async function assignStaffToPhase(
 
   const assignment = await db.phaseAssignment.create({
     data: { phaseId, staffId, isOwner },
+    include: {
+      staff: { select: { name: true } },
+      phase: { select: { name: true, projectId: true } },
+    },
   });
 
-  const phase = await db.phase.findUnique({
-    where: { id: phaseId },
-    select: { projectId: true },
-  });
-  if (phase) {
-    revalidatePath(`/dashboard/projects/${phase.projectId}`);
-  }
+  // Log activity
+  db.activityLog.create({
+    data: {
+      action: "STAFF_ASSIGNED",
+      message: `Assigned ${assignment.staff.name} to ${assignment.phase.name}${isOwner ? " as owner" : ""}`,
+      projectId: assignment.phase.projectId,
+      userId: session.user.id,
+      data: { phaseId, staffId },
+    },
+  }).catch(() => {});
+
+  revalidatePath(`/dashboard/projects/${assignment.phase.projectId}`);
 
   return assignment;
 }
@@ -165,9 +218,22 @@ export async function unassignStaffFromPhase(assignmentId: string) {
 
   const assignment = await db.phaseAssignment.delete({
     where: { id: assignmentId },
-    include: { phase: { select: { projectId: true } } },
+    include: {
+      staff: { select: { name: true } },
+      phase: { select: { name: true, projectId: true } },
+    },
   });
 
+  // Log activity
+  db.activityLog.create({
+    data: {
+      action: "STAFF_UNASSIGNED",
+      message: `Removed ${assignment.staff.name} from ${assignment.phase.name}`,
+      projectId: assignment.phase.projectId,
+      userId: session.user.id,
+    },
+  }).catch(() => {});
+
   revalidatePath(`/dashboard/projects/${assignment.phase.projectId}`);
 }
 
diff --git a/src/actions/photos.ts b/src/actions/photos.ts
new file mode 100644
index 0000000..39d2065
--- /dev/null
+++ b/src/actions/photos.ts
@@ -0,0 +1,271 @@
+"use server";
+
+import { db } from "@/lib/db";
+import { auth } from "@/lib/auth";
+import { can } from "@/lib/permissions";
+import { revalidatePath } from "next/cache";
+import { del } from "@vercel/blob";
+import { notify, getProjectMemberIds } from "@/lib/notifications";
+
+type PhotoFlagType =
+  | "REPLACEMENT_NEEDED"
+  | "ADDITIONAL_ANGLES"
+  | "ADDITIONAL_PHOTOS"
+  | "CLARIFICATION_NEEDED";
+
+export async function createPhoto(data: {
+  phaseId: string;
+  url: string;
+  caption?: string;
+  latitude?: number;
+  longitude?: number;
+}) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const userRole = session.user.role || "VIEWER";
+  if (!can(userRole, "create", "photo")) throw new Error("Forbidden");
+
+  const phase = await db.phase.findUnique({
+    where: { id: data.phaseId },
+    select: { id: true, projectId: true, name: true },
+  });
+  if (!phase) throw new Error("Phase not found");
+
+  const photo = await db.photo.create({
+    data: {
+      url: data.url,
+      caption: data.caption || null,
+      phaseId: data.phaseId,
+      uploadedById: session.user.id,
+      latitude: data.latitude ?? null,
+      longitude: data.longitude ?? null,
+    },
+  });
+
+  // Log activity
+  db.activityLog.create({
+    data: {
+      action: "PHOTO_UPLOADED",
+      message: `Added photo to ${phase.name}`,
+      projectId: phase.projectId,
+      userId: session.user.id,
+      data: { photoId: photo.id, phaseId: phase.id },
+    },
+  }).catch(() => {});
+
+  revalidatePath(`/dashboard/projects/${phase.projectId}`);
+  return photo;
+}
+
+export async function createPhotoBatch(data: {
+  phaseId: string;
+  photos: { url: string; caption?: string }[];
+  latitude?: number;
+  longitude?: number;
+}) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const userRole = session.user.role || "VIEWER";
+  if (!can(userRole, "create", "photo")) throw new Error("Forbidden");
+
+  const phase = await db.phase.findUnique({
+    where: { id: data.phaseId },
+    select: { id: true, projectId: true, name: true },
+  });
+  if (!phase) throw new Error("Phase not found");
+
+  const created = await db.photo.createMany({
+    data: data.photos.map((p) => ({
+      url: p.url,
+      caption: p.caption || null,
+      phaseId: data.phaseId,
+      uploadedById: session.user.id,
+      latitude: data.latitude ?? null,
+      longitude: data.longitude ?? null,
+    })),
+  });
+
+  // Log activity
+  db.activityLog.create({
+    data: {
+      action: "PHOTO_UPLOADED",
+      message: `Added ${data.photos.length} photo${data.photos.length > 1 ? "s" : ""} to ${phase.name}`,
+      projectId: phase.projectId,
+      userId: session.user.id,
+      data: { phaseId: phase.id, count: data.photos.length },
+    },
+  }).catch(() => {});
+
+  // Notify project members
+  const memberIds = await getProjectMemberIds(phase.projectId);
+  notify({
+    type: "PHOTO_UPLOADED",
+    title: `${data.photos.length} photo${data.photos.length > 1 ? "s" : ""} added to ${phase.name}`,
+    message: `${session.user.name || session.user.email} uploaded ${data.photos.length} photo${data.photos.length > 1 ? "s" : ""} to ${phase.name}`,
+    recipientIds: memberIds,
+    actorId: session.user.id,
+    data: { projectId: phase.projectId, phaseId: phase.id },
+  });
+
+  revalidatePath(`/dashboard/projects/${phase.projectId}`);
+  return { count: created.count };
+}
+
+export async function deletePhoto(photoId: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const userRole = session.user.role || "VIEWER";
+  if (!can(userRole, "delete", "photo")) throw new Error("Forbidden");
+
+  const photo = await db.photo.findUnique({
+    where: { id: photoId },
+    include: {
+      phase: { select: { projectId: true } },
+    },
+  });
+  if (!photo) throw new Error("Photo not found");
+
+  // Delete from Vercel Blob storage
+  try {
+    await del(photo.url);
+  } catch (e) {
+    console.error("Failed to delete blob:", e);
+  }
+
+  await db.photo.delete({ where: { id: photoId } });
+
+  revalidatePath(`/dashboard/projects/${photo.phase.projectId}`);
+  return { success: true };
+}
+
+export async function updatePhotoCaption(photoId: string, caption: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const photo = await db.photo.findUnique({
+    where: { id: photoId },
+    include: { phase: { select: { projectId: true } } },
+  });
+  if (!photo) throw new Error("Photo not found");
+
+  const updated = await db.photo.update({
+    where: { id: photoId },
+    data: { caption },
+  });
+
+  revalidatePath(`/dashboard/projects/${photo.phase.projectId}`);
+  return updated;
+}
+
+export async function flagPhoto(
+  photoId: string,
+  flagType: PhotoFlagType,
+  flagNote?: string
+) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  // Only PM+ can flag photos
+  const userRole = session.user.role || "VIEWER";
+  if (userRole !== "ADMIN" && userRole !== "PROJECT_MANAGER") {
+    throw new Error("Only PMs and admins can flag photos");
+  }
+
+  const photo = await db.photo.findUnique({
+    where: { id: photoId },
+    include: {
+      phase: { select: { projectId: true, name: true } },
+    },
+  });
+  if (!photo) throw new Error("Photo not found");
+
+  const updated = await db.photo.update({
+    where: { id: photoId },
+    data: {
+      flagType: flagType as never,
+      flagNote: flagNote || null,
+      flaggedById: session.user.id,
+      flaggedAt: new Date(),
+    },
+  });
+
+  // Notify the photo uploader
+  const flagLabels: Record<string, string> = {
+    REPLACEMENT_NEEDED: "Replacement needed",
+    ADDITIONAL_ANGLES: "Additional angles requested",
+    ADDITIONAL_PHOTOS: "Additional photos requested",
+    CLARIFICATION_NEEDED: "Clarification needed",
+  };
+
+  if (photo.uploadedById !== session.user.id) {
+    notify({
+      type: "PHOTO_UPLOADED", // reuse existing type
+      title: `Photo flagged: ${flagLabels[flagType]}`,
+      message: `A photo in ${photo.phase.name} was flagged${flagNote ? `: "${flagNote}"` : ""}`,
+      recipientIds: [photo.uploadedById],
+      actorId: session.user.id,
+      data: {
+        projectId: photo.phase.projectId,
+        phaseId: photo.phaseId,
+        photoId,
+      },
+    });
+  }
+
+  revalidatePath(`/dashboard/projects/${photo.phase.projectId}`);
+  return updated;
+}
+
+export async function clearPhotoFlag(photoId: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const userRole = session.user.role || "VIEWER";
+  if (userRole !== "ADMIN" && userRole !== "PROJECT_MANAGER") {
+    throw new Error("Only PMs and admins can clear flags");
+  }
+
+  const photo = await db.photo.findUnique({
+    where: { id: photoId },
+    include: { phase: { select: { projectId: true } } },
+  });
+  if (!photo) throw new Error("Photo not found");
+
+  const updated = await db.photo.update({
+    where: { id: photoId },
+    data: {
+      flagType: null,
+      flagNote: null,
+      flaggedById: null,
+      flaggedAt: null,
+    },
+  });
+
+  revalidatePath(`/dashboard/projects/${photo.phase.projectId}`);
+  return updated;
+}
+export async function updatePhotoGps(
+  photoId: string,
+  latitude: number,
+  longitude: number
+) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const photo = await db.photo.findUnique({
+    where: { id: photoId },
+    include: { phase: { select: { projectId: true } } },
+  });
+  if (!photo) throw new Error("Photo not found");
+
+  const updated = await db.photo.update({
+    where: { id: photoId },
+    data: { latitude, longitude },
+  });
+
+  revalidatePath(`/dashboard/projects/${photo.phase.projectId}`);
+  return updated;
+}
diff --git a/src/actions/report-schedules.ts b/src/actions/report-schedules.ts
new file mode 100644
index 0000000..4479ae6
--- /dev/null
+++ b/src/actions/report-schedules.ts
@@ -0,0 +1,97 @@
+"use server";
+
+import { revalidatePath } from "next/cache";
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db-types";
+import type { ReportSchedule, ReportFrequency } from "@/lib/db-types";
+
+async function requireAdmin() {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthenticated");
+  // Any authenticated user can manage report schedules (org-level feature)
+  return session.user.id;
+}
+
+export async function getReportSchedules(): Promise<ReportSchedule[]> {
+  const session = await auth();
+  if (!session?.user?.id) return [];
+  return db.reportSchedule.findMany({ orderBy: { createdAt: "desc" } });
+}
+
+export async function createReportSchedule(data: {
+  frequency: ReportFrequency;
+  dayOfWeek?: number;
+  dayOfMonth?: number;
+  sendHour: number;
+  recipients: string[];
+  includeProjects?: string[];
+}): Promise<void> {
+  await requireAdmin();
+  if (data.recipients.length === 0) throw new Error("At least one recipient required");
+  await db.reportSchedule.create({
+    data: {
+      frequency: data.frequency,
+      dayOfWeek: data.dayOfWeek ?? null,
+      dayOfMonth: data.dayOfMonth ?? null,
+      sendHour: data.sendHour,
+      recipients: data.recipients,
+      includeProjects: data.includeProjects ?? [],
+      active: true,
+    },
+  });
+  revalidatePath("/dashboard/settings");
+}
+
+export async function toggleReportSchedule(id: string, active: boolean): Promise<void> {
+  await requireAdmin();
+  await db.reportSchedule.update({ where: { id }, data: { active } });
+  revalidatePath("/dashboard/settings");
+}
+
+export async function deleteReportSchedule(id: string): Promise<void> {
+  await requireAdmin();
+  await db.reportSchedule.delete({ where: { id } });
+  revalidatePath("/dashboard/settings");
+}
+
+// Called by a cron job / scheduled function (e.g. Vercel Cron, GitHub Actions)
+export async function sendDueReports(): Promise<{ sent: number }> {
+  const now = new Date();
+  const schedules: ReportSchedule[] = await db.reportSchedule.findMany({
+    where: { active: true },
+  });
+
+  let sent = 0;
+  for (const schedule of schedules) {
+    const isDue = isScheduleDue(schedule, now);
+    if (!isDue) continue;
+
+    // Mark as sent (actual email delivery would use nodemailer / Resend / SendGrid here)
+    await db.reportSchedule.update({
+      where: { id: schedule.id },
+      data: { lastSentAt: now },
+    });
+    sent++;
+  }
+  return { sent };
+}
+
+function isScheduleDue(schedule: ReportSchedule, now: Date): boolean {
+  if (schedule.lastSentAt) {
+    const last = new Date(schedule.lastSentAt);
+    const hoursSince = (now.getTime() - last.getTime()) / 3600000;
+    // Don't re-send if sent within the last 20 hours (prevents double-firing)
+    if (hoursSince < 20) return false;
+  }
+
+  const hour = now.getUTCHours();
+  if (hour !== schedule.sendHour) return false;
+
+  if (schedule.frequency === "WEEKLY") {
+    return now.getUTCDay() === (schedule.dayOfWeek ?? 1);
+  }
+  if (schedule.frequency === "MONTHLY") {
+    return now.getUTCDate() === (schedule.dayOfMonth ?? 1);
+  }
+  return false;
+}
diff --git a/src/actions/reports.ts b/src/actions/reports.ts
new file mode 100644
index 0000000..bfdba08
--- /dev/null
+++ b/src/actions/reports.ts
@@ -0,0 +1,408 @@
+"use server";
+
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db";
+
+// ── Admin / PM Reports ──
+
+export async function getProjectHealthReport() {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const projects = await db.project.findMany({
+    where: { members: { some: { userId: session.user.id } } },
+    include: {
+      phases: {
+        select: {
+          id: true,
+          name: true,
+          status: true,
+          progress: true,
+          estStart: true,
+          estEnd: true,
+          actualStart: true,
+          actualEnd: true,
+          isMilestone: true,
+        },
+      },
+      _count: { select: { phases: true, members: true } },
+    },
+    orderBy: { updatedAt: "desc" },
+  });
+
+  const now = new Date();
+
+  return projects.map((project: typeof projects[number]) => {
+    const phases = project.phases;
+    const completed = phases.filter((p: typeof phases[number]) => p.status === "COMPLETE").length;
+    const active = phases.filter(
+      (p: typeof phases[number]) =>
+        p.status === "IN_PROGRESS" ||
+        p.status === "REVIEW_REQUESTED" ||
+        p.status === "UNDER_REVIEW"
+    ).length;
+    const overdue = phases.filter(
+      (p: typeof phases[number]) => p.status !== "COMPLETE" && new Date(p.estEnd) < now
+    ).length;
+    const pending = phases.filter((p: typeof phases[number]) => p.status === "PENDING").length;
+    const total = phases.length;
+    const progress = total > 0 ? Math.round((completed / total) * 100) : 0;
+
+    // Schedule health: ratio of on-time vs overdue
+    const health =
+      overdue > 0 ? "at-risk" : active > 0 ? "on-track" : "not-started";
+
+    return {
+      id: project.id,
+      name: project.name,
+      address: project.address,
+      status: project.status,
+      budget: project.budget ? Number(project.budget) : null,
+      estCompletion: project.estCompletion,
+      memberCount: project._count.members,
+      phases: { total, completed, active, overdue, pending },
+      progress,
+      health,
+    };
+  });
+}
+
+export async function getPhaseStatusBreakdown() {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const phases = await db.phase.findMany({
+    where: { project: { members: { some: { userId: session.user.id } } } },
+    select: { status: true },
+  });
+
+  const counts: Record<string, number> = {
+    PENDING: 0,
+    IN_PROGRESS: 0,
+    REVIEW_REQUESTED: 0,
+    UNDER_REVIEW: 0,
+    COMPLETE: 0,
+  };
+  phases.forEach((p: typeof phases[number]) => {
+    counts[p.status] = (counts[p.status] || 0) + 1;
+  });
+
+  return Object.entries(counts).map(([status, count]: [string, number]) => ({
+    status,
+    count,
+  }));
+}
+
+export async function getDocumentStats() {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const where = {
+    phase: {
+      project: { members: { some: { userId: session.user.id } } },
+    },
+  };
+
+  const [total, byStatus, byCategory] = await Promise.all([
+    db.document.count({ where }),
+    db.document.groupBy({
+      by: ["status"],
+      where,
+      _count: true,
+    }),
+    db.document.groupBy({
+      by: ["category"],
+      where,
+      _count: true,
+    }),
+  ]);
+
+  return {
+    total,
+    byStatus: byStatus.map((s: typeof byStatus[number]) => ({ status: s.status, count: s._count })),
+    byCategory: byCategory.map((c: typeof byCategory[number]) => ({
+      category: c.category,
+      count: c._count,
+    })),
+  };
+}
+
+export async function getActivityTimeline(days: number = 30) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const since = new Date();
+  since.setDate(since.getDate() - days);
+
+  const activity = await db.activityLog.findMany({
+    where: {
+      project: { members: { some: { userId: session.user.id } } },
+      createdAt: { gte: since },
+    },
+    select: { action: true, createdAt: true },
+    orderBy: { createdAt: "asc" },
+  });
+
+  // Group by day
+  const dailyCounts: Record<string, number> = {};
+  activity.forEach((a: typeof activity[number]) => {
+    const day = a.createdAt.toISOString().split("T")[0];
+    dailyCounts[day] = (dailyCounts[day] || 0) + 1;
+  });
+
+  // Also group by action type
+  const actionCounts: Record<string, number> = {};
+  activity.forEach((a: typeof activity[number]) => {
+    actionCounts[a.action] = (actionCounts[a.action] || 0) + 1;
+  });
+
+  return {
+    daily: Object.entries(dailyCounts).map(([date, count]: [string, number]) => ({
+      date,
+      count,
+    })),
+    byAction: Object.entries(actionCounts)
+      .map(([action, count]: [string, number]) => ({ action, count }))
+      .sort((a: { action: string; count: number }, b: { action: string; count: number }) => b.count - a.count),
+    totalActions: activity.length,
+  };
+}
+
+export async function getTeamPerformance() {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  // Get all staff with their assignment data
+  const staff = await db.staff.findMany({
+    include: {
+      assignments: {
+        include: {
+          phase: {
+            select: {
+              id: true,
+              name: true,
+              status: true,
+              progress: true,
+              estEnd: true,
+              project: { select: { name: true } },
+            },
+          },
+        },
+      },
+    },
+    orderBy: { name: "asc" },
+  });
+
+  const now = new Date();
+
+  return staff
+    .filter((s: typeof staff[number]) => s.assignments.length > 0)
+    .map((s: typeof staff[number]) => {
+      const phases = s.assignments.map((a: typeof s.assignments[number]) => a.phase);
+      const completed = phases.filter((p: typeof phases[number]) => p.status === "COMPLETE").length;
+      const active = phases.filter(
+        (p: typeof phases[number]) =>
+          p.status === "IN_PROGRESS" ||
+          p.status === "REVIEW_REQUESTED" ||
+          p.status === "UNDER_REVIEW"
+      ).length;
+      const overdue = phases.filter(
+        (p: typeof phases[number]) => p.status !== "COMPLETE" && new Date(p.estEnd) < now
+      ).length;
+
+      return {
+        id: s.id,
+        name: s.name,
+        company: s.company,
+        role: s.role,
+        contactType: s.contactType,
+        totalAssignments: phases.length,
+        completed,
+        active,
+        overdue,
+        isOwnerCount: s.assignments.filter((a: typeof s.assignments[number]) => a.isOwner).length,
+      };
+    });
+}
+
+export async function getOverdueReport() {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const now = new Date();
+
+  const overduePhases = await db.phase.findMany({
+    where: {
+      project: { members: { some: { userId: session.user.id } } },
+      status: { not: "COMPLETE" },
+      estEnd: { lt: now },
+    },
+    include: {
+      project: { select: { id: true, name: true } },
+      assignments: {
+        include: { staff: { select: { name: true, company: true } } },
+        where: { isOwner: true },
+        take: 1,
+      },
+    },
+    orderBy: { estEnd: "asc" },
+  });
+
+  return overduePhases.map((p: typeof overduePhases[number]) => {
+    const daysOver = Math.ceil(
+      (now.getTime() - new Date(p.estEnd).getTime()) / 86400000
+    );
+    return {
+      id: p.id,
+      name: p.name,
+      status: p.status,
+      projectId: p.project.id,
+      projectName: p.project.name,
+      estEnd: p.estEnd,
+      daysOverdue: daysOver,
+      progress: p.progress,
+      owner: p.assignments[0]?.staff?.name || "Unassigned",
+      ownerCompany: p.assignments[0]?.staff?.company || null,
+    };
+  });
+}
+
+// ── Contractor Reports ──
+
+export async function getContractorPerformance() {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const now = new Date();
+
+  // Find phases assigned to this contractor via ProjectMember + PhaseAssignment
+  const [memberPhases, staffPhases, checklistActivity] = await Promise.all([
+    // Phases from projects where user is a member
+    db.phase.findMany({
+      where: {
+        project: {
+          members: {
+            some: { userId: session.user.id, role: "CONTRACTOR" },
+          },
+        },
+      },
+      include: {
+        project: { select: { name: true } },
+        checklist: {
+          include: {
+            items: {
+              select: { completed: true, completedAt: true, completedById: true },
+            },
+          },
+        },
+        _count: { select: { documents: true, photos: true } },
+      },
+    }),
+
+    // Phases assigned to staff matching user email
+    db.phaseAssignment.findMany({
+      where: {
+        staff: { email: session.user.email || "" },
+      },
+      include: {
+        phase: {
+          include: {
+            project: { select: { name: true } },
+            checklist: {
+              include: {
+                items: {
+                  select: { completed: true, completedAt: true, completedById: true },
+                },
+              },
+            },
+            _count: { select: { documents: true, photos: true } },
+          },
+        },
+      },
+    }),
+
+    // Checklist items completed by this user
+    db.checklistItem.count({
+      where: { completedById: session.user.id, completed: true },
+    }),
+  ]);
+
+  // Merge unique phases
+  const phaseMap = new Map<string, (typeof memberPhases)[number]>();
+  memberPhases.forEach((p: typeof memberPhases[number]) => phaseMap.set(p.id, p));
+  staffPhases.forEach((a: typeof staffPhases[number]) => {
+    if (!phaseMap.has(a.phase.id)) {
+      phaseMap.set(a.phase.id, a.phase);
+    }
+  });
+
+  const allPhases = Array.from(phaseMap.values());
+
+  const completed = allPhases.filter((p: typeof allPhases[number]) => p.status === "COMPLETE").length;
+  const active = allPhases.filter(
+    (p: typeof allPhases[number]) =>
+      p.status === "IN_PROGRESS" ||
+      p.status === "REVIEW_REQUESTED" ||
+      p.status === "UNDER_REVIEW"
+  ).length;
+  const overdue = allPhases.filter(
+    (p: typeof allPhases[number]) => p.status !== "COMPLETE" && new Date(p.estEnd) < now
+  ).length;
+
+  const totalDocs = allPhases.reduce((sum: number, p: typeof allPhases[number]) => sum + p._count.documents, 0);
+  const totalPhotos = allPhases.reduce((sum: number, p: typeof allPhases[number]) => sum + p._count.photos, 0);
+
+  // Checklist stats across all assigned phases
+  let checklistTotal = 0;
+  let checklistDone = 0;
+  allPhases.forEach((p: typeof allPhases[number]) => {
+    if (p.checklist) {
+      checklistTotal += p.checklist.items.length;
+      checklistDone += p.checklist.items.filter((i: typeof p.checklist.items[number]) => i.completed).length;
+    }
+  });
+
+  // On-time completion rate
+  const completedOnTime = allPhases.filter(
+    (p: typeof allPhases[number]) =>
+      p.status === "COMPLETE" &&
+      p.actualEnd &&
+      new Date(p.actualEnd) <= new Date(p.estEnd)
+  ).length;
+
+  return {
+    summary: {
+      totalPhases: allPhases.length,
+      completed,
+      active,
+      overdue,
+      onTimeRate:
+        completed > 0 ? Math.round((completedOnTime / completed) * 100) : 100,
+      checklistItemsCompleted: checklistActivity,
+      checklistProgress:
+        checklistTotal > 0
+          ? Math.round((checklistDone / checklistTotal) * 100)
+          : 0,
+      documentsUploaded: totalDocs,
+      photosUploaded: totalPhotos,
+    },
+    phases: allPhases.map((p: typeof allPhases[number]) => ({
+      id: p.id,
+      name: p.name,
+      status: p.status,
+      progress: p.progress,
+      projectName: p.project.name,
+      estEnd: p.estEnd,
+      daysOverdue:
+        p.status !== "COMPLETE" && new Date(p.estEnd) < now
+          ? Math.ceil(
+              (now.getTime() - new Date(p.estEnd).getTime()) / 86400000
+            )
+          : 0,
+      docs: p._count.documents,
+      photos: p._count.photos,
+      checklistTotal: p.checklist?.items.length || 0,
+      checklistDone: p.checklist?.items.filter((i: typeof p.checklist.items[number]) => i.completed).length || 0,
+    })),
+  };
+}
diff --git a/src/actions/search.ts b/src/actions/search.ts
new file mode 100644
index 0000000..8465395
--- /dev/null
+++ b/src/actions/search.ts
@@ -0,0 +1,124 @@
+"use server";
+
+import { db } from "@/lib/db";
+import { auth } from "@/lib/auth";
+
+export type SearchResult = {
+  type: "project" | "phase" | "document" | "staff";
+  id: string;
+  title: string;
+  subtitle?: string;
+  href: string;
+};
+
+export async function globalSearch(query: string): Promise<SearchResult[]> {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+  if (!query.trim() || query.trim().length < 2) return [];
+
+  const q = query.trim();
+  const contains = { contains: q, mode: "insensitive" as const };
+
+  const [projects, phases, documents, staff] = await Promise.all([
+    // Projects
+    db.project.findMany({
+      where: {
+        OR: [{ name: contains }, { description: contains }, { address: contains }],
+      },
+      select: { id: true, name: true, status: true, address: true },
+      take: 5,
+    }),
+
+    // Phases
+    db.phase.findMany({
+      where: {
+        OR: [{ name: contains }, { detail: contains }],
+      },
+      select: {
+        id: true,
+        name: true,
+        status: true,
+        project: { select: { id: true, name: true } },
+      },
+      take: 5,
+    }),
+
+    // Documents
+    db.document.findMany({
+      where: {
+        OR: [{ name: contains }, { notes: contains }],
+      },
+      select: {
+        id: true,
+        name: true,
+        category: true,
+        phase: {
+          select: {
+            id: true,
+            name: true,
+            project: { select: { id: true, name: true } },
+          },
+        },
+      },
+      take: 5,
+    }),
+
+    // Staff
+    db.staff.findMany({
+      where: {
+        OR: [
+          { name: contains },
+          { company: contains },
+          { role: contains },
+          { email: contains },
+        ],
+      },
+      select: { id: true, name: true, role: true, company: true },
+      take: 5,
+    }),
+  ]);
+
+  const results: SearchResult[] = [];
+
+  for (const p of projects) {
+    results.push({
+      type: "project",
+      id: p.id,
+      title: p.name,
+      subtitle: p.address || p.status.replace("_", " "),
+      href: `/dashboard/projects/${p.id}`,
+    });
+  }
+
+  for (const ph of phases) {
+    results.push({
+      type: "phase",
+      id: ph.id,
+      title: ph.name,
+      subtitle: ph.project.name,
+      href: `/dashboard/projects/${ph.project.id}/phases/${ph.id}`,
+    });
+  }
+
+  for (const d of documents) {
+    results.push({
+      type: "document",
+      id: d.id,
+      title: d.name,
+      subtitle: `${d.phase.project.name} → ${d.phase.name}`,
+      href: `/dashboard/projects/${d.phase.project.id}/phases/${d.phase.id}`,
+    });
+  }
+
+  for (const s of staff) {
+    results.push({
+      type: "staff",
+      id: s.id,
+      title: s.name,
+      subtitle: [s.role, s.company].filter(Boolean).join(" · "),
+      href: `/dashboard/directory`,
+    });
+  }
+
+  return results;
+}
diff --git a/src/actions/settings.ts b/src/actions/settings.ts
new file mode 100644
index 0000000..65885f9
--- /dev/null
+++ b/src/actions/settings.ts
@@ -0,0 +1,124 @@
+"use server";
+
+import { db } from "@/lib/db";
+import { auth } from "@/lib/auth";
+import { can } from "@/lib/permissions";
+import { revalidatePath } from "next/cache";
+import { THEME_PRESETS } from "@/lib/themes";
+import { put, del } from "@vercel/blob";
+
+// Fetch or create the single OrgSettings row
+export async function getOrgSettings() {
+  let settings = await db.orgSettings.findFirst();
+  if (!settings) {
+    settings = await db.orgSettings.create({
+      data: { theme: "blue" },
+    });
+  }
+  return settings;
+}
+
+export async function updateTheme(themeId: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const role = session.user.role || "VIEWER";
+  if (!can(role, "manage", "phase")) throw new Error("Forbidden");
+
+  // Validate preset exists
+  const valid = THEME_PRESETS.some((t) => t.id === themeId);
+  if (!valid) throw new Error("Invalid theme");
+
+  const settings = await getOrgSettings();
+  await db.orgSettings.update({
+    where: { id: settings.id },
+    data: { theme: themeId },
+  });
+
+  revalidatePath("/dashboard");
+  revalidatePath("/contractor");
+  revalidatePath("/dashboard/settings");
+}
+
+export async function uploadLogo(formData: FormData) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const role = session.user.role || "VIEWER";
+  if (!can(role, "manage", "phase")) throw new Error("Forbidden");
+
+  const file = formData.get("logo") as File;
+  if (!file || file.size === 0) throw new Error("No file provided");
+
+  // Validate size (2MB max)
+  if (file.size > 2 * 1024 * 1024) throw new Error("File too large (max 2MB)");
+
+  // Validate type
+  const allowed = ["image/png", "image/jpeg", "image/svg+xml", "image/webp"];
+  if (!allowed.includes(file.type)) throw new Error("Invalid file type. Use PNG, JPG, SVG, or WebP.");
+
+  // Upload to Vercel Blob
+  const blob = await put(`logos/${Date.now()}-${file.name}`, file, {
+    access: "public",
+  });
+
+  // Delete old logo if exists
+  const settings = await getOrgSettings();
+  if (settings.logoUrl) {
+    try { await del(settings.logoUrl); } catch { /* ok if old one is gone */ }
+  }
+
+  await db.orgSettings.update({
+    where: { id: settings.id },
+    data: {
+      logoUrl: blob.url,
+      logoMimeType: file.type,
+    },
+  });
+
+  revalidatePath("/dashboard");
+  revalidatePath("/contractor");
+  revalidatePath("/dashboard/settings");
+
+  return { url: blob.url };
+}
+
+export async function deleteLogo() {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const role = session.user.role || "VIEWER";
+  if (!can(role, "manage", "phase")) throw new Error("Forbidden");
+
+  const settings = await getOrgSettings();
+  if (settings.logoUrl) {
+    try { await del(settings.logoUrl); } catch { /* ok */ }
+  }
+
+  await db.orgSettings.update({
+    where: { id: settings.id },
+    data: { logoUrl: null, logoMimeType: null },
+  });
+
+  revalidatePath("/dashboard");
+  revalidatePath("/contractor");
+  revalidatePath("/dashboard/settings");
+}
+
+export async function updateCompanyName(name: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  const role = session.user.role || "VIEWER";
+  if (!can(role, "manage", "phase")) throw new Error("Forbidden");
+
+  const settings = await getOrgSettings();
+  await db.orgSettings.update({
+    where: { id: settings.id },
+    data: { companyName: name.trim() || null },
+  });
+
+  revalidatePath("/dashboard");
+  revalidatePath("/contractor");
+  revalidatePath("/dashboard/settings");
+}
diff --git a/src/actions/staff.ts b/src/actions/staff.ts
new file mode 100644
index 0000000..46468ee
--- /dev/null
+++ b/src/actions/staff.ts
@@ -0,0 +1,98 @@
+"use server";
+
+import { db } from "@/lib/db";
+import { auth } from "@/lib/auth";
+import { can } from "@/lib/permissions";
+import { revalidatePath } from "next/cache";
+import { z } from "zod";
+
+const CreateStaffSchema = z.object({
+  name: z.string().min(1, "Name is required").max(200),
+  company: z.string().max(200).optional(),
+  role: z.string().max(200).optional(),
+  contactType: z.enum(["TEAM", "SUBCONTRACTOR", "VENDOR", "INSPECTOR"]),
+  email: z.string().email("Invalid email").max(200).optional().or(z.literal("")),
+  phone: z.string().max(30).optional(),
+  notes: z.string().max(2000).optional(),
+});
+
+const UpdateStaffSchema = CreateStaffSchema.partial().extend({
+  id: z.string().min(1),
+});
+
+export async function createStaff(data: {
+  name: string;
+  company?: string;
+  role?: string;
+  contactType: "TEAM" | "SUBCONTRACTOR" | "VENDOR" | "INSPECTOR";
+  email?: string;
+  phone?: string;
+  notes?: string;
+}) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+  if (!can(session.user.role || "VIEWER", "create", "staff"))
+    throw new Error("Forbidden");
+
+  const parsed = CreateStaffSchema.parse(data);
+
+  const staff = await db.staff.create({
+    data: {
+      name: parsed.name,
+      company: parsed.company || null,
+      role: parsed.role || null,
+      contactType: parsed.contactType,
+      email: parsed.email || null,
+      phone: parsed.phone || null,
+      notes: parsed.notes || null,
+      createdById: session.user.id,
+    },
+  });
+
+  revalidatePath("/dashboard/directory");
+  return staff;
+}
+
+export async function updateStaff(data: {
+  id: string;
+  name?: string;
+  company?: string;
+  role?: string;
+  contactType?: "TEAM" | "SUBCONTRACTOR" | "VENDOR" | "INSPECTOR";
+  email?: string;
+  phone?: string;
+  notes?: string;
+}) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+  if (!can(session.user.role || "VIEWER", "update", "staff"))
+    throw new Error("Forbidden");
+
+  const parsed = UpdateStaffSchema.parse(data);
+  const { id, ...updates } = parsed;
+
+  // Clean empty strings to null
+  const cleaned: Record<string, unknown> = {};
+  for (const [key, value] of Object.entries(updates)) {
+    if (value === undefined) continue;
+    cleaned[key] = value === "" ? null : value;
+  }
+
+  const staff = await db.staff.update({
+    where: { id },
+    data: cleaned,
+  });
+
+  revalidatePath("/dashboard/directory");
+  return staff;
+}
+
+export async function deleteStaff(id: string) {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+  if (!can(session.user.role || "VIEWER", "delete", "staff"))
+    throw new Error("Forbidden");
+
+  await db.staff.delete({ where: { id } });
+  revalidatePath("/dashboard/directory");
+}
diff --git a/src/actions/subcontractor-bids.ts b/src/actions/subcontractor-bids.ts
new file mode 100644
index 0000000..edf4475
--- /dev/null
+++ b/src/actions/subcontractor-bids.ts
@@ -0,0 +1,83 @@
+"use server";
+
+import { revalidatePath } from "next/cache";
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db-types";
+import type { SubcontractorBid } from "@/lib/db-types";
+
+async function requireMember(phaseId: string) {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthenticated");
+  const phase = await (db as any).phase.findUnique({
+    where: { id: phaseId },
+    include: { project: { include: { members: { where: { userId: session.user.id } } } } },
+  });
+  if (!phase) throw new Error("Phase not found");
+  const member = phase.project.members[0];
+  if (!member) throw new Error("Not a project member");
+  return { userId: session.user.id, member, projectId: phase.projectId };
+}
+
+export async function getSubcontractorBids(phaseId: string): Promise<SubcontractorBid[]> {
+  const session = await auth();
+  if (!session?.user?.id) return [];
+  const bids = await db.subcontractorBid.findMany({
+    where: { phaseId },
+    orderBy: { submittedAt: "desc" },
+  });
+  return bids.map((b: any) => ({ ...b, amount: Number(b.amount) }));
+}
+
+export async function createSubcontractorBid(data: {
+  phaseId: string;
+  companyName: string;
+  contactName?: string;
+  email?: string;
+  phone?: string;
+  amount: number;
+  notes?: string;
+}): Promise<void> {
+  const { projectId } = await requireMember(data.phaseId);
+  await db.subcontractorBid.create({
+    data: {
+      phaseId: data.phaseId,
+      companyName: data.companyName,
+      contactName: data.contactName ?? null,
+      email: data.email ?? null,
+      phone: data.phone ?? null,
+      amount: data.amount,
+      notes: data.notes ?? null,
+    },
+  });
+  revalidatePath(`/dashboard/projects/${projectId}`);
+}
+
+export async function awardBid(bidId: string, awarded: boolean): Promise<void> {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthenticated");
+  const bid = await db.subcontractorBid.findUnique({
+    where: { id: bidId },
+    include: { phase: { include: { project: { include: { members: { where: { userId: session.user.id } } } } } } },
+  });
+  if (!bid) throw new Error("Bid not found");
+  const member = bid.phase.project.members[0];
+  if (!member || !["PM", "ADMIN"].includes(member.role)) throw new Error("Insufficient permissions");
+
+  await db.subcontractorBid.update({ where: { id: bidId }, data: { awarded } });
+  revalidatePath(`/dashboard/projects/${bid.phase.projectId}`);
+}
+
+export async function deleteSubcontractorBid(bidId: string): Promise<void> {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthenticated");
+  const bid = await db.subcontractorBid.findUnique({
+    where: { id: bidId },
+    include: { phase: { include: { project: { include: { members: { where: { userId: session.user.id } } } } } } },
+  });
+  if (!bid) throw new Error("Bid not found");
+  const member = bid.phase.project.members[0];
+  if (!member || !["PM", "ADMIN"].includes(member.role)) throw new Error("Insufficient permissions");
+
+  await db.subcontractorBid.delete({ where: { id: bidId } });
+  revalidatePath(`/dashboard/projects/${bid.phase.projectId}`);
+}
diff --git a/src/actions/templates.ts b/src/actions/templates.ts
new file mode 100644
index 0000000..2c4b97f
--- /dev/null
+++ b/src/actions/templates.ts
@@ -0,0 +1,94 @@
+"use server";
+
+import { db } from "@/lib/db";
+import { auth } from "@/lib/auth";
+import { revalidatePath } from "next/cache";
+
+async function requireAdmin() {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+  const role = session.user.role || "VIEWER";
+  if (role !== "ADMIN" && role !== "PROJECT_MANAGER") {
+    throw new Error("Only admins and PMs can manage templates");
+  }
+  return session;
+}
+
+export async function getChecklistTemplates() {
+  const session = await auth();
+  if (!session?.user) throw new Error("Unauthorized");
+
+  return db.checklistTemplate.findMany({
+    include: {
+      items: { orderBy: { order: "asc" } },
+    },
+    orderBy: { name: "asc" },
+  });
+}
+
+export async function createChecklistTemplate(data: {
+  name: string;
+  items: string[];
+}) {
+  await requireAdmin();
+
+  if (!data.name.trim()) throw new Error("Template name is required");
+  if (data.items.length === 0) throw new Error("At least one item is required");
+
+  const template = await db.checklistTemplate.create({
+    data: {
+      name: data.name.trim(),
+      items: {
+        create: data.items
+          .filter((t) => t.trim())
+          .map((title, i) => ({ title: title.trim(), order: i })),
+      },
+    },
+    include: { items: { orderBy: { order: "asc" } } },
+  });
+
+  revalidatePath("/dashboard/settings");
+  return template;
+}
+
+export async function updateChecklistTemplate(
+  templateId: string,
+  data: { name: string; items: string[] }
+) {
+  await requireAdmin();
+
+  if (!data.name.trim()) throw new Error("Template name is required");
+  if (data.items.length === 0) throw new Error("At least one item is required");
+
+  // Delete existing items and recreate
+  await db.checklistTemplateItem.deleteMany({
+    where: { templateId },
+  });
+
+  const template = await db.checklistTemplate.update({
+    where: { id: templateId },
+    data: {
+      name: data.name.trim(),
+      items: {
+        create: data.items
+          .filter((t) => t.trim())
+          .map((title, i) => ({ title: title.trim(), order: i })),
+      },
+    },
+    include: { items: { orderBy: { order: "asc" } } },
+  });
+
+  revalidatePath("/dashboard/settings");
+  return template;
+}
+
+export async function deleteChecklistTemplate(templateId: string) {
+  await requireAdmin();
+
+  await db.checklistTemplate.delete({
+    where: { id: templateId },
+  });
+
+  revalidatePath("/dashboard/settings");
+  return { success: true };
+}
diff --git a/src/actions/totp.ts b/src/actions/totp.ts
new file mode 100644
index 0000000..d19f315
--- /dev/null
+++ b/src/actions/totp.ts
@@ -0,0 +1,78 @@
+"use server";
+
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db-types";
+
+// We use dynamic imports so the build doesn't fail if otplib isn't installed yet.
+// After running `npm install`, these will resolve correctly.
+
+async function getOtplib() {
+  // eslint-disable-next-line @typescript-eslint/no-require-imports
+  const { authenticator } = await import("otplib");
+  return authenticator;
+}
+
+async function getQrcode() {
+  // eslint-disable-next-line @typescript-eslint/no-require-imports
+  const qrcode = await import("qrcode");
+  return qrcode.default ?? qrcode;
+}
+
+export async function getTotpStatus(): Promise<{ enabled: boolean; verified: boolean }> {
+  const session = await auth();
+  if (!session?.user?.id) return { enabled: false, verified: false };
+  const secret = await db.totpSecret.findUnique({ where: { userId: session.user.id } });
+  return { enabled: !!secret, verified: !!secret?.verified };
+}
+
+export async function setupTotp(): Promise<{ secret: string; otpAuthUrl: string; qrCodeDataUrl: string }> {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthenticated");
+
+  const authenticator = await getOtplib();
+  const qrcode = await getQrcode();
+
+  const secret = authenticator.generateSecret();
+  const label = encodeURIComponent(session.user.email ?? session.user.id);
+  const issuer = encodeURIComponent("ConstructionPM");
+  const otpAuthUrl = `otpauth://totp/${issuer}:${label}?secret=${secret}&issuer=${issuer}`;
+  const qrCodeDataUrl = await qrcode.toDataURL(otpAuthUrl);
+
+  // Save unverified secret (replaces any previous attempt)
+  await db.totpSecret.upsert({
+    where: { userId: session.user.id },
+    create: { userId: session.user.id, secret, verified: false },
+    update: { secret, verified: false },
+  });
+
+  return { secret, otpAuthUrl, qrCodeDataUrl };
+}
+
+export async function verifyAndEnableTotp(code: string): Promise<{ success: boolean; error?: string }> {
+  const session = await auth();
+  if (!session?.user?.id) return { success: false, error: "Unauthenticated" };
+
+  const record = await db.totpSecret.findUnique({ where: { userId: session.user.id } });
+  if (!record) return { success: false, error: "No 2FA setup in progress" };
+
+  const authenticator = await getOtplib();
+  const isValid = authenticator.check(code, record.secret);
+  if (!isValid) return { success: false, error: "Invalid code. Try again." };
+
+  await db.totpSecret.update({ where: { userId: session.user.id }, data: { verified: true } });
+  return { success: true };
+}
+
+export async function validateTotpCode(userId: string, code: string): Promise<boolean> {
+  const record = await db.totpSecret.findUnique({ where: { userId } });
+  if (!record || !record.verified) return true; // 2FA not enabled — allow
+
+  const authenticator = await getOtplib();
+  return authenticator.check(code, record.secret);
+}
+
+export async function disableTotp(): Promise<void> {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthenticated");
+  await db.totpSecret.delete({ where: { userId: session.user.id } });
+}
diff --git a/src/actions/webhooks.ts b/src/actions/webhooks.ts
new file mode 100644
index 0000000..7ecf8ae
--- /dev/null
+++ b/src/actions/webhooks.ts
@@ -0,0 +1,107 @@
+"use server";
+
+import { createHmac, randomBytes } from "crypto";
+import { revalidatePath } from "next/cache";
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db-types";
+import type { Webhook } from "@/lib/db-types";
+
+async function requireAuth() {
+  const session = await auth();
+  if (!session?.user?.id) throw new Error("Unauthenticated");
+  return session.user.id;
+}
+
+export const WEBHOOK_EVENTS = [
+  "project.created",
+  "project.updated",
+  "phase.status_changed",
+  "inspection.scheduled",
+  "inspection.result",
+  "change_order.submitted",
+  "change_order.approved",
+  "change_order.rejected",
+  "daily_log.created",
+  "document.uploaded",
+  "photo.uploaded",
+] as const;
+
+export type WebhookEvent = typeof WEBHOOK_EVENTS[number];
+
+export async function getWebhooks(): Promise<Webhook[]> {
+  await requireAuth();
+  return db.webhook.findMany({ orderBy: { createdAt: "desc" } });
+}
+
+export async function createWebhook(data: {
+  name: string;
+  url: string;
+  events: string[];
+}): Promise<void> {
+  await requireAuth();
+  if (!data.name.trim()) throw new Error("Name is required");
+  if (!data.url.startsWith("https://")) throw new Error("URL must use HTTPS");
+  if (data.events.length === 0) throw new Error("Select at least one event");
+
+  const secret = "whsec_" + randomBytes(24).toString("hex");
+  await db.webhook.create({
+    data: {
+      name: data.name.trim(),
+      url: data.url,
+      secret,
+      events: data.events,
+      active: true,
+    },
+  });
+  revalidatePath("/dashboard/settings");
+}
+
+export async function toggleWebhook(id: string, active: boolean): Promise<void> {
+  await requireAuth();
+  await db.webhook.update({ where: { id }, data: { active } });
+  revalidatePath("/dashboard/settings");
+}
+
+export async function deleteWebhook(id: string): Promise<void> {
+  await requireAuth();
+  await db.webhook.delete({ where: { id } });
+  revalidatePath("/dashboard/settings");
+}
+
+// Dispatch helper — called from notification pipeline or server actions
+export async function dispatchWebhook(event: string, payload: Record<string, unknown>): Promise<void> {
+  const webhooks: Webhook[] = await db.webhook.findMany({
+    where: { active: true },
+  });
+
+  for (const wh of webhooks) {
+    if (!wh.events.includes(event) && !wh.events.includes("*")) continue;
+
+    const body = JSON.stringify({ event, timestamp: new Date().toISOString(), data: payload });
+    const sig = createHmac("sha256", wh.secret).update(body).digest("hex");
+
+    // Fire-and-forget with status tracking
+    fetch(wh.url, {
+      method: "POST",
+      headers: {
+        "Content-Type": "application/json",
+        "X-Webhook-Event": event,
+        "X-Webhook-Signature": `sha256=${sig}`,
+      },
+      body,
+      signal: AbortSignal.timeout(10000),
+    })
+      .then((res) =>
+        db.webhook.update({
+          where: { id: wh.id },
+          data: { lastTriggeredAt: new Date(), lastStatusCode: res.status },
+        })
+      )
+      .catch(() =>
+        db.webhook.update({
+          where: { id: wh.id },
+          data: { lastTriggeredAt: new Date(), lastStatusCode: 0 },
+        })
+      );
+  }
+}
diff --git a/src/app/(auth)/invite/[token]/page.tsx b/src/app/(auth)/invite/[token]/page.tsx
new file mode 100644
index 0000000..315900a
--- /dev/null
+++ b/src/app/(auth)/invite/[token]/page.tsx
@@ -0,0 +1,29 @@
+import { getInvitationByToken } from "@/actions/invitations";
+import { auth } from "@/lib/auth";
+import { notFound } from "next/navigation";
+import { AcceptInvitation } from "@/components/project/AcceptInvitation";
+
+export default async function InvitePage({
+  params,
+}: {
+  params: Promise<{ token: string }>;
+}) {
+  const { token } = await params;
+
+  const invite = await getInvitationByToken(token);
+  if (!invite) notFound();
+
+  const session = await auth();
+
+  return (
+    <div className="min-h-screen flex items-center justify-center bg-gray-50 p-4">
+      <div className="bg-white rounded-2xl shadow-lg max-w-md w-full p-8">
+        <AcceptInvitation
+          token={token}
+          invite={invite}
+          isLoggedIn={!!session?.user}
+        />
+      </div>
+    </div>
+  );
+}
diff --git a/src/app/(auth)/login/page.tsx b/src/app/(auth)/login/page.tsx
index e56dc6a..0343ba5 100644
--- a/src/app/(auth)/login/page.tsx
+++ b/src/app/(auth)/login/page.tsx
@@ -3,6 +3,7 @@
 import { signIn } from "next-auth/react";
 import { useState, Suspense } from "react";
 import { useSearchParams } from "next/navigation";
+import { useTranslations } from "next-intl";
 
 function LoginForm() {
   const [email, setEmail] = useState("");
@@ -10,6 +11,8 @@ function LoginForm() {
   const searchParams = useSearchParams();
   const callbackUrl = searchParams.get("callbackUrl") || "/dashboard";
   const error = searchParams.get("error");
+  const t = useTranslations("auth");
+  const tc = useTranslations("common");
 
   async function handleDevLogin(e: React.FormEvent) {
     e.preventDefault();
@@ -21,17 +24,17 @@ function LoginForm() {
   return (
     <div className="w-full max-w-sm space-y-6">
       <div className="text-center">
-        <h1 className="text-2xl font-bold text-gray-900">Construction PM</h1>
+        <h1 className="text-2xl font-bold text-gray-900">{tc("appName")}</h1>
         <p className="mt-1 text-sm text-gray-500">
-          Sign in to manage your projects
+          {t("signInSubtitle")}
         </p>
       </div>
 
       {error && (
         <div className="p-3 bg-red-50 text-red-700 text-sm rounded-lg">
           {error === "CredentialsSignin"
-            ? "Invalid credentials"
-            : "Something went wrong. Please try again."}
+            ? t("invalidCredentials")
+            : t("genericError")}
         </div>
       )}
 
@@ -41,7 +44,7 @@ function LoginForm() {
             htmlFor="email"
             className="block text-sm font-medium text-gray-700 mb-1"
           >
-            Email address
+            {t("emailAddress")}
           </label>
           <input
             id="email"
@@ -50,22 +53,23 @@ function LoginForm() {
             required
             value={email}
             onChange={(e) => setEmail(e.target.value)}
-            placeholder="admin@constructionpm.com"
-            className="w-full p-3 border border-gray-300 rounded-lg text-base focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
+            placeholder={t("emailPlaceholder")}
+            className="w-full p-3 border border-gray-300 rounded-lg text-base focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
           />
         </div>
         <button
           type="submit"
           disabled={loading}
-          className="w-full p-3 bg-blue-600 text-white rounded-lg text-base font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors"
+          className="w-full p-3 bg-[var(--color-primary)] text-white rounded-lg text-base font-medium hover:bg-[var(--color-primary-dark)] disabled:opacity-50 transition-colors"
         >
-          {loading ? "Signing in..." : "Sign In"}
+          {loading ? t("signingIn") : t("signIn")}
         </button>
       </form>
 
-      <p className="text-xs text-center text-gray-400">
-        Use <strong>admin@constructionpm.com</strong> for demo access
-      </p>
+      <p
+        className="text-xs text-center text-gray-400"
+        dangerouslySetInnerHTML={{ __html: t("demoAccess") }}
+      />
     </div>
   );
 }
diff --git a/src/app/api/documents/[id]/extract/route.ts b/src/app/api/documents/[id]/extract/route.ts
new file mode 100644
index 0000000..a621b61
--- /dev/null
+++ b/src/app/api/documents/[id]/extract/route.ts
@@ -0,0 +1,155 @@
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db";
+import { NextRequest, NextResponse } from "next/server";
+
+/**
+ * Document metadata extraction endpoint.
+ *
+ * Current implementation: heuristic extraction from filename + document fields.
+ * To upgrade to real OCR, replace the `heuristicExtract` call with an
+ * external service (e.g. AWS Textract, Google Document AI, or OpenAI vision).
+ */
+export async function POST(
+  req: NextRequest,
+  { params }: { params: Promise<{ id: string }> }
+) {
+  const session = await auth();
+  if (!session?.user?.id) {
+    return NextResponse.json({ error: "Unauthorized" }, { status: 401 });
+  }
+
+  const { id: documentId } = await params;
+
+  const doc = await db.document.findUnique({
+    where: { id: documentId },
+    include: {
+      phase: { select: { projectId: true } },
+    },
+  });
+
+  if (!doc) {
+    return NextResponse.json({ error: "Document not found" }, { status: 404 });
+  }
+
+  // Verify user has access to this project
+  const membership = await db.projectMember.findFirst({
+    where: { projectId: doc.phase.projectId, userId: session.user.id },
+  });
+  if (!membership) {
+    return NextResponse.json({ error: "Forbidden" }, { status: 403 });
+  }
+
+  // Heuristic extraction from document metadata
+  const extracted = heuristicExtract(doc as {
+    name: string;
+    url: string;
+    category: string;
+    notes: string | null;
+  });
+
+  // Persist extracted data
+  const updated = await db.document.update({
+    where: { id: documentId },
+    data: { extractedData: extracted as never },
+  });
+
+  return NextResponse.json({ extractedData: updated.extractedData });
+}
+
+// ── Heuristic extractor ─────────────────────────────────────────────────────
+
+function heuristicExtract(doc: {
+  name: string;
+  url: string;
+  category: string;
+  notes: string | null;
+}) {
+  const text = [doc.name, doc.notes ?? ""].join(" ");
+  const name = doc.name;
+
+  // Detect file extension
+  const extMatch = doc.url.split("?")[0].match(/\.([a-zA-Z0-9]+)$/);
+  const fileExtension = extMatch ? extMatch[1].toUpperCase() : "UNKNOWN";
+
+  // Detect dates in filename / notes (various formats)
+  const datePatterns = [
+    /(\d{4}[-./]\d{2}[-./]\d{2})/g,
+    /(\d{2}[-./]\d{2}[-./]\d{4})/g,
+    /(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*[\s.-]\d{1,2}[\s,-]+\d{4}/gi,
+  ];
+  const detectedDates: string[] = [];
+  for (const pattern of datePatterns) {
+    const matches = text.matchAll(pattern);
+    for (const m of matches) {
+      const d = m[0];
+      if (!detectedDates.includes(d)) detectedDates.push(d);
+    }
+  }
+
+  // Detect dollar amounts
+  const amountPattern = /\$[\d,]+(?:\.\d{2})?|\b\d{1,3}(?:,\d{3})+(?:\.\d{2})?\b/g;
+  const detectedAmounts: string[] = [];
+  const amountMatches = text.matchAll(amountPattern);
+  for (const m of amountMatches) {
+    if (!detectedAmounts.includes(m[0])) detectedAmounts.push(m[0]);
+  }
+
+  // Detect permit / invoice / contract numbers
+  const refPatterns = [
+    /(?:permit|pmt)[#:\s-]*([A-Z0-9-]{4,})/gi,
+    /(?:invoice|inv)[#:\s-]*([A-Z0-9-]{4,})/gi,
+    /(?:contract|ctr)[#:\s-]*([A-Z0-9-]{4,})/gi,
+    /(?:ref|no|#)[.:\s]*([A-Z0-9]{5,})/gi,
+  ];
+  const refNumbers: string[] = [];
+  for (const p of refPatterns) {
+    const matches = text.matchAll(p);
+    for (const m of matches) {
+      if (!refNumbers.includes(m[1])) refNumbers.push(m[1]);
+    }
+  }
+
+  // Category-specific hints
+  const hints: Record<string, string[]> = {
+    PERMIT: ["Verify expiry date", "Check issuing authority"],
+    CONTRACT: ["Review payment schedule", "Note change order clause"],
+    INVOICE: ["Cross-check with budget line", "Verify vendor details"],
+    BLUEPRINT: ["Confirm revision number", "Check scale reference"],
+    INSPECTION: ["Review pass/fail status", "Note inspector signature"],
+  };
+
+  // Detect keywords related to construction
+  const constructionKeywords = [
+    "foundation", "framing", "roofing", "electrical", "plumbing",
+    "HVAC", "concrete", "steel", "inspection", "permit", "approval",
+    "revision", "amendment", "final", "preliminary",
+  ];
+  const detectedKeywords = constructionKeywords.filter((kw) =>
+    new RegExp(kw, "i").test(text)
+  );
+
+  // Confidence scoring (simple heuristic)
+  let confidence = 0.4; // base confidence for heuristic-only extraction
+  if (detectedDates.length > 0) confidence += 0.1;
+  if (detectedAmounts.length > 0) confidence += 0.1;
+  if (refNumbers.length > 0) confidence += 0.1;
+  if (detectedKeywords.length > 2) confidence += 0.1;
+  confidence = Math.min(confidence, 0.85);
+
+  return {
+    extractedAt: new Date().toISOString(),
+    method: "heuristic",
+    confidence: Math.round(confidence * 100),
+    fileExtension,
+    detectedDates,
+    detectedAmounts,
+    refNumbers,
+    detectedKeywords,
+    hints: hints[doc.category] ?? [],
+    summary:
+      detectedDates.length === 0 && detectedAmounts.length === 0 && refNumbers.length === 0
+        ? "No structured data detected automatically. Consider uploading a text-readable PDF for better extraction."
+        : `Found ${detectedDates.length} date(s), ${detectedAmounts.length} amount(s), ${refNumbers.length} reference number(s).`,
+    note: "For full OCR extraction, integrate AWS Textract, Google Document AI, or OpenAI vision API.",
+  };
+}
diff --git a/src/app/api/import/route.ts b/src/app/api/import/route.ts
new file mode 100644
index 0000000..be872a5
--- /dev/null
+++ b/src/app/api/import/route.ts
@@ -0,0 +1,116 @@
+import { NextRequest, NextResponse } from "next/server";
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db-types";
+
+interface CsvProject {
+  name: string;
+  description?: string;
+  status?: string;
+  location?: string;
+  startDate?: string;
+  endDate?: string;
+  budget?: string;
+  phases?: string; // comma-separated phase names
+}
+
+function parseCsv(text: string): Record<string, string>[] {
+  const lines = text.trim().split(/\r?\n/);
+  if (lines.length < 2) return [];
+  const headers = lines[0].split(",").map((h) => h.trim().replace(/^"|"$/g, ""));
+  return lines.slice(1)
+    .filter((l) => l.trim())
+    .map((line) => {
+      // Simple CSV parse (handles quoted fields with commas)
+      const values: string[] = [];
+      let cur = "";
+      let inQuotes = false;
+      for (const ch of line) {
+        if (ch === '"') { inQuotes = !inQuotes; continue; }
+        if (ch === "," && !inQuotes) { values.push(cur.trim()); cur = ""; continue; }
+        cur += ch;
+      }
+      values.push(cur.trim());
+      return Object.fromEntries(headers.map((h, i) => [h, values[i] ?? ""]));
+    });
+}
+
+const VALID_STATUSES = ["PLANNING", "IN_PROGRESS", "ON_HOLD", "COMPLETED", "CANCELLED"];
+
+export async function POST(req: NextRequest) {
+  const session = await auth();
+  if (!session?.user?.id) return NextResponse.json({ error: "Unauthenticated" }, { status: 401 });
+
+  const formData = await req.formData();
+  const file = formData.get("file") as File | null;
+  if (!file) return NextResponse.json({ error: "No file uploaded" }, { status: 400 });
+
+  const ext = file.name.split(".").pop()?.toLowerCase();
+  if (!["csv", "txt"].includes(ext ?? "")) {
+    return NextResponse.json({ error: "Only CSV files are supported" }, { status: 400 });
+  }
+
+  const text = await file.text();
+  const rows = parseCsv(text);
+  if (rows.length === 0) return NextResponse.json({ error: "No data rows found" }, { status: 400 });
+  if (rows.length > 100) return NextResponse.json({ error: "Maximum 100 projects per import" }, { status: 400 });
+
+  const errors: string[] = [];
+  const created: string[] = [];
+
+  for (let i = 0; i < rows.length; i++) {
+    const row = rows[i];
+    const rowNum = i + 2; // 1-indexed, +1 for header
+
+    const name = row["name"] || row["Name"] || row["project_name"] || row["Project Name"];
+    if (!name) { errors.push(`Row ${rowNum}: missing project name`); continue; }
+
+    const rawStatus = (row["status"] || row["Status"] || "PLANNING").toUpperCase().replace(/\s+/g, "_");
+    const status = VALID_STATUSES.includes(rawStatus) ? rawStatus : "PLANNING";
+
+    const budgetRaw = row["budget"] || row["Budget"] || row["budget_usd"];
+    const budget = budgetRaw ? parseFloat(budgetRaw.replace(/[^0-9.]/g, "")) : null;
+
+    try {
+      const project = await (db as any).project.create({
+        data: {
+          name,
+          description: row["description"] || row["Description"] || null,
+          status,
+          location: row["location"] || row["Location"] || row["address"] || null,
+          startDate: row["start_date"] || row["Start Date"] || row["startDate"] ? new Date(row["start_date"] || row["Start Date"] || row["startDate"]) : null,
+          endDate: row["end_date"] || row["End Date"] || row["endDate"] ? new Date(row["end_date"] || row["End Date"] || row["endDate"]) : null,
+          budget: budget ?? null,
+          members: {
+            create: { userId: session.user.id, role: "PM" },
+          },
+        },
+      });
+
+      // Create phases if provided
+      const phasesRaw = row["phases"] || row["Phases"] || "";
+      if (phasesRaw.trim()) {
+        const phaseNames = phasesRaw.split(";").map((p: string) => p.trim()).filter(Boolean);
+        for (let pi = 0; pi < phaseNames.length; pi++) {
+          await (db as any).phase.create({
+            data: {
+              name: phaseNames[pi],
+              projectId: project.id,
+              sortOrder: pi,
+              status: "PLANNING",
+            },
+          });
+        }
+      }
+
+      created.push(project.id);
+    } catch (err) {
+      errors.push(`Row ${rowNum}: ${err instanceof Error ? err.message : "Failed to create project"}`);
+    }
+  }
+
+  return NextResponse.json({
+    created: created.length,
+    errors,
+    total: rows.length,
+  });
+}
diff --git a/src/app/api/notifications/unread-count/route.ts b/src/app/api/notifications/unread-count/route.ts
new file mode 100644
index 0000000..691be7c
--- /dev/null
+++ b/src/app/api/notifications/unread-count/route.ts
@@ -0,0 +1,14 @@
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db";
+import { NextResponse } from "next/server";
+
+export async function GET() {
+  const session = await auth();
+  if (!session?.user?.id) {
+    return NextResponse.json({ count: 0 });
+  }
+  const count = await db.notification.count({
+    where: { userId: session.user.id, read: false },
+  });
+  return NextResponse.json({ count });
+}
diff --git a/src/app/api/sse/notifications/route.ts b/src/app/api/sse/notifications/route.ts
new file mode 100644
index 0000000..2376716
--- /dev/null
+++ b/src/app/api/sse/notifications/route.ts
@@ -0,0 +1,75 @@
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db";
+import { NextRequest } from "next/server";
+
+export const dynamic = "force-dynamic";
+export const runtime = "nodejs";
+
+export async function GET(req: NextRequest) {
+  const session = await auth();
+  if (!session?.user?.id) {
+    return new Response("Unauthorized", { status: 401 });
+  }
+  const userId = session.user.id;
+
+  const encoder = new TextEncoder();
+  let closed = false;
+
+  const stream = new ReadableStream({
+    async start(controller) {
+      const send = (data: object) => {
+        if (closed) return;
+        try {
+          controller.enqueue(
+            encoder.encode(`data: ${JSON.stringify(data)}\n\n`)
+          );
+        } catch {
+          closed = true;
+        }
+      };
+
+      // Send initial unread count immediately
+      const count = await db.notification.count({
+        where: { userId, read: false },
+      });
+      send({ type: "unread_count", count });
+
+      // Poll every 15s and push updates
+      const interval = setInterval(async () => {
+        if (closed) {
+          clearInterval(interval);
+          return;
+        }
+        try {
+          const latest = await db.notification.count({
+            where: { userId, read: false },
+          });
+          send({ type: "unread_count", count: latest });
+        } catch {
+          clearInterval(interval);
+          closed = true;
+        }
+      }, 15_000);
+
+      // Clean up if client disconnects
+      req.signal.addEventListener("abort", () => {
+        closed = true;
+        clearInterval(interval);
+        try {
+          controller.close();
+        } catch {
+          // already closed
+        }
+      });
+    },
+  });
+
+  return new Response(stream, {
+    headers: {
+      "Content-Type": "text/event-stream",
+      "Cache-Control": "no-cache, no-transform",
+      Connection: "keep-alive",
+      "X-Accel-Buffering": "no",
+    },
+  });
+}
diff --git a/src/app/client/[token]/page.tsx b/src/app/client/[token]/page.tsx
new file mode 100644
index 0000000..6c6687a
--- /dev/null
+++ b/src/app/client/[token]/page.tsx
@@ -0,0 +1,228 @@
+import { notFound } from "next/navigation";
+import { db } from "@/lib/db-types";
+import {
+  Building2,
+  MapPin,
+  Calendar,
+  DollarSign,
+  CheckCircle2,
+  Clock,
+  AlertTriangle,
+  XCircle,
+  HardHat,
+  FileText,
+  Camera,
+} from "lucide-react";
+
+function statusBadge(status: string) {
+  const map: Record<string, { label: string; color: string }> = {
+    PLANNING: { label: "Planning", color: "bg-gray-100 text-gray-600" },
+    IN_PROGRESS: { label: "In Progress", color: "bg-blue-100 text-blue-700" },
+    ON_HOLD: { label: "On Hold", color: "bg-amber-100 text-amber-700" },
+    COMPLETED: { label: "Completed", color: "bg-green-100 text-green-700" },
+    CANCELLED: { label: "Cancelled", color: "bg-red-100 text-red-600" },
+  };
+  const cfg = map[status] ?? { label: status, color: "bg-gray-100 text-gray-600" };
+  return (
+    <span className={`text-xs px-2 py-0.5 rounded-full font-medium ${cfg.color}`}>
+      {cfg.label}
+    </span>
+  );
+}
+
+function fmt(n: number | null | undefined) {
+  if (n == null) return "—";
+  return new Intl.NumberFormat("en-US", { style: "currency", currency: "USD", maximumFractionDigits: 0 }).format(n);
+}
+
+function fmtDate(d: Date | string | null | undefined) {
+  if (!d) return "—";
+  return new Date(d).toLocaleDateString(undefined, { month: "short", day: "numeric", year: "numeric" });
+}
+
+export default async function ClientPortalPage({
+  params,
+}: {
+  params: Promise<{ token: string }>;
+}) {
+  const { token } = await params;
+
+  const ct = await db.clientToken.findUnique({ where: { token } });
+  if (!ct || !ct.active) notFound();
+  if (ct.expiresAt && new Date(ct.expiresAt) < new Date()) notFound();
+  if (!ct.projectId) notFound();
+
+  const project = await (db as any).project.findUnique({
+    where: { id: ct.projectId },
+    include: {
+      phases: {
+        include: {
+          assignments: {
+            include: {
+              staff: { select: { id: true, name: true, company: true, role: true } },
+            },
+          },
+          checklist: {
+            include: { items: { select: { id: true, completed: true } } },
+          },
+          _count: { select: { documents: true, photos: true } },
+        },
+        orderBy: { sortOrder: "asc" },
+      },
+    },
+  });
+  if (!project) notFound();
+
+  const phases = project.phases ?? [];
+  const totalPhases = phases.length;
+  const completedPhases = phases.filter((p: any) => p.status === "COMPLETED").length;
+  const overallProgress = totalPhases > 0 ? Math.round((completedPhases / totalPhases) * 100) : 0;
+
+  const budget = project.budget ? Number(project.budget) : null;
+  const spent = project.amountSpent ? Number(project.amountSpent) : null;
+
+  return (
+    <div className="min-h-screen bg-gray-50">
+      {/* Header */}
+      <header className="bg-white border-b border-gray-200">
+        <div className="max-w-4xl mx-auto px-4 py-4 flex items-center gap-3">
+          <Building2 className="w-6 h-6 text-[var(--color-primary)]" />
+          <div>
+            <p className="text-xs text-gray-400 uppercase tracking-wide">Project Status Report</p>
+            <h1 className="text-lg font-bold text-gray-900">{project.name}</h1>
+          </div>
+          <div className="ml-auto flex items-center gap-2">
+            {statusBadge(project.status)}
+          </div>
+        </div>
+      </header>
+
+      <main className="max-w-4xl mx-auto px-4 py-6 space-y-6">
+        {/* Project overview */}
+        <div className="bg-white rounded-xl border border-gray-200 p-5">
+          <h2 className="text-sm font-semibold text-gray-700 uppercase tracking-wide mb-4">Overview</h2>
+          <div className="grid grid-cols-2 sm:grid-cols-4 gap-4">
+            {project.location && (
+              <div className="flex items-start gap-2">
+                <MapPin className="w-4 h-4 text-gray-400 mt-0.5 shrink-0" />
+                <div>
+                  <p className="text-xs text-gray-400">Location</p>
+                  <p className="text-sm font-medium text-gray-800">{project.location}</p>
+                </div>
+              </div>
+            )}
+            {project.startDate && (
+              <div className="flex items-start gap-2">
+                <Calendar className="w-4 h-4 text-gray-400 mt-0.5 shrink-0" />
+                <div>
+                  <p className="text-xs text-gray-400">Start Date</p>
+                  <p className="text-sm font-medium text-gray-800">{fmtDate(project.startDate)}</p>
+                </div>
+              </div>
+            )}
+            {project.endDate && (
+              <div className="flex items-start gap-2">
+                <Calendar className="w-4 h-4 text-gray-400 mt-0.5 shrink-0" />
+                <div>
+                  <p className="text-xs text-gray-400">Target Completion</p>
+                  <p className="text-sm font-medium text-gray-800">{fmtDate(project.endDate)}</p>
+                </div>
+              </div>
+            )}
+            {budget != null && (
+              <div className="flex items-start gap-2">
+                <DollarSign className="w-4 h-4 text-gray-400 mt-0.5 shrink-0" />
+                <div>
+                  <p className="text-xs text-gray-400">Budget</p>
+                  <p className="text-sm font-medium text-gray-800">{fmt(budget)}</p>
+                  {spent != null && (
+                    <p className={`text-xs ${spent > budget ? "text-red-500" : "text-gray-400"}`}>
+                      {fmt(spent)} spent
+                    </p>
+                  )}
+                </div>
+              </div>
+            )}
+          </div>
+          {project.description && (
+            <p className="text-sm text-gray-600 mt-4 leading-relaxed">{project.description}</p>
+          )}
+        </div>
+
+        {/* Progress bar */}
+        <div className="bg-white rounded-xl border border-gray-200 p-5">
+          <div className="flex items-center justify-between mb-2">
+            <h2 className="text-sm font-semibold text-gray-700 uppercase tracking-wide">Overall Progress</h2>
+            <span className="text-2xl font-bold text-[var(--color-primary)]">{overallProgress}%</span>
+          </div>
+          <div className="w-full bg-gray-100 rounded-full h-3 overflow-hidden">
+            <div
+              className="h-3 rounded-full bg-[var(--color-primary)] transition-all duration-500"
+              style={{ width: `${overallProgress}%` }}
+            />
+          </div>
+          <p className="text-xs text-gray-400 mt-1">
+            {completedPhases} of {totalPhases} phases completed
+          </p>
+        </div>
+
+        {/* Phases */}
+        {phases.length > 0 && (
+          <div className="bg-white rounded-xl border border-gray-200 p-5">
+            <h2 className="text-sm font-semibold text-gray-700 uppercase tracking-wide mb-4">Phase Status</h2>
+            <div className="space-y-3">
+              {phases.map((phase: any) => {
+                const items = phase.checklist?.items ?? [];
+                const checked = items.filter((i: any) => i.completed).length;
+                const pct = items.length > 0 ? Math.round((checked / items.length) * 100) : 0;
+                return (
+                  <div key={phase.id} className="border border-gray-100 rounded-lg p-3">
+                    <div className="flex items-center justify-between mb-2">
+                      <div className="flex items-center gap-2">
+                        <span className="text-sm font-medium text-gray-900">{phase.name}</span>
+                        {statusBadge(phase.status)}
+                      </div>
+                      <div className="flex items-center gap-3 text-xs text-gray-400">
+                        {phase._count.documents > 0 && (
+                          <span className="flex items-center gap-1">
+                            <FileText className="w-3 h-3" />{phase._count.documents}
+                          </span>
+                        )}
+                        {phase._count.photos > 0 && (
+                          <span className="flex items-center gap-1">
+                            <Camera className="w-3 h-3" />{phase._count.photos}
+                          </span>
+                        )}
+                      </div>
+                    </div>
+                    {items.length > 0 && (
+                      <div>
+                        <div className="w-full bg-gray-100 rounded-full h-1.5 overflow-hidden mb-1">
+                          <div
+                            className="h-1.5 rounded-full bg-[var(--color-primary)]"
+                            style={{ width: `${pct}%` }}
+                          />
+                        </div>
+                        <p className="text-xs text-gray-400">{checked}/{items.length} checklist items</p>
+                      </div>
+                    )}
+                    {phase.startDate && (
+                      <div className="flex items-center gap-3 text-xs text-gray-400 mt-2">
+                        <span>{fmtDate(phase.startDate)} → {fmtDate(phase.endDate)}</span>
+                      </div>
+                    )}
+                  </div>
+                );
+              })}
+            </div>
+          </div>
+        )}
+
+        {/* Footer */}
+        <p className="text-xs text-center text-gray-400 pb-4">
+          This is a read-only view shared with you by the project team. Last updated: {fmtDate(new Date())}.
+        </p>
+      </main>
+    </div>
+  );
+}
diff --git a/src/app/contractor/documents/page.tsx b/src/app/contractor/documents/page.tsx
new file mode 100644
index 0000000..d260953
--- /dev/null
+++ b/src/app/contractor/documents/page.tsx
@@ -0,0 +1,128 @@
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db";
+import { redirect } from "next/navigation";
+import Link from "next/link";
+import {
+  FileText,
+  FileImage,
+  FileSpreadsheet,
+  ExternalLink,
+} from "lucide-react";
+
+const categoryColors: Record<string, string> = {
+  PERMIT: "bg-blue-100 text-blue-700",
+  CONTRACT: "bg-purple-100 text-purple-700",
+  INVOICE: "bg-green-100 text-green-700",
+  BLUEPRINT: "bg-indigo-100 text-indigo-700",
+  INSPECTION: "bg-yellow-100 text-yellow-700",
+  OTHER: "bg-gray-100 text-gray-700",
+};
+
+const statusColors: Record<string, string> = {
+  PENDING: "bg-gray-100 text-gray-600",
+  APPROVED: "bg-green-100 text-green-700",
+  REJECTED: "bg-red-100 text-red-700",
+  EXPIRED: "bg-orange-100 text-orange-700",
+};
+
+function getFileIcon(mimeType: string) {
+  if (mimeType.startsWith("image/")) return FileImage;
+  if (mimeType.includes("spreadsheet") || mimeType.includes("excel"))
+    return FileSpreadsheet;
+  return FileText;
+}
+
+function formatSize(bytes: number) {
+  if (bytes < 1024) return `${bytes} B`;
+  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(0)} KB`;
+  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;
+}
+
+export default async function ContractorDocuments() {
+  const session = await auth();
+  if (!session?.user) redirect("/login");
+
+  // Get all documents from projects this contractor is a member of
+  const memberships = await db.projectMember.findMany({
+    where: { userId: session.user.id },
+    select: { project: { select: { id: true, name: true } } },
+  });
+
+  const projectIds = memberships.map((m: { project: { id: string; name: string } }) => m.project.id);
+
+  const documents = await db.document.findMany({
+    where: {
+      phase: { projectId: { in: projectIds } },
+    },
+    include: {
+      phase: {
+        select: { name: true, project: { select: { name: true } } },
+      },
+      uploadedBy: { select: { name: true } },
+    },
+    orderBy: { createdAt: "desc" },
+  });
+
+  return (
+    <div className="space-y-6">
+      <div>
+        <h1 className="text-2xl font-bold text-gray-900">Documents</h1>
+        <p className="text-sm text-gray-500 mt-1">
+          All documents across your assigned projects
+        </p>
+      </div>
+
+      {documents.length === 0 ? (
+        <div className="text-center py-16 bg-white rounded-xl border border-gray-200">
+          <FileText className="w-10 h-10 text-gray-300 mx-auto mb-3" />
+          <p className="text-sm text-gray-500">No documents yet</p>
+          <p className="text-xs text-gray-400 mt-1">
+            Documents uploaded to your project phases will appear here
+          </p>
+        </div>
+      ) : (
+        <div className="bg-white rounded-xl border border-gray-200 divide-y divide-gray-100">
+          {documents.map((doc: { id: string; name: string; mimeType: string; url: string; size: number; createdAt: Date; category: string; status: string; phase: { name: string; project: { name: string } } }) => {
+            const Icon = getFileIcon(doc.mimeType);
+            return (
+              <div
+                key={doc.id}
+                className="flex items-center gap-3 p-4 hover:bg-gray-50"
+              >
+                <Icon className="w-5 h-5 text-gray-400 shrink-0" />
+                <div className="flex-1 min-w-0">
+                  <div className="flex items-center gap-2">
+                    <a
+                      href={doc.url}
+                      target="_blank"
+                      rel="noopener noreferrer"
+                      className="text-sm font-medium text-gray-900 hover:text-blue-600 truncate"
+                    >
+                      {doc.name}
+                    </a>
+                    <ExternalLink className="w-3 h-3 text-gray-400 shrink-0" />
+                  </div>
+                  <p className="text-xs text-gray-500 mt-0.5">
+                    {doc.phase.project.name} · {doc.phase.name} ·{" "}
+                    {formatSize(doc.size)} ·{" "}
+                    {doc.createdAt.toLocaleDateString()}
+                  </p>
+                </div>
+                <span
+                  className={`text-xs px-2 py-0.5 rounded-full font-medium ${categoryColors[doc.category] || categoryColors.OTHER}`}
+                >
+                  {doc.category}
+                </span>
+                <span
+                  className={`text-xs px-2 py-0.5 rounded-full font-medium ${statusColors[doc.status] || statusColors.PENDING}`}
+                >
+                  {doc.status}
+                </span>
+              </div>
+            );
+          })}
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/app/contractor/layout.tsx b/src/app/contractor/layout.tsx
new file mode 100644
index 0000000..1b05493
--- /dev/null
+++ b/src/app/contractor/layout.tsx
@@ -0,0 +1,41 @@
+import { auth } from "@/lib/auth";
+import { redirect } from "next/navigation";
+import { ContractorNav } from "@/components/contractor/ContractorNav";
+import { getOrgSettings } from "@/actions/settings";
+import { getThemeCSS } from "@/lib/themes";
+import { getUnreadCount } from "@/actions/notifications";
+import { OnboardingTour } from "@/components/help/OnboardingTour";
+
+export default async function ContractorLayout({
+  children,
+}: {
+  children: React.ReactNode;
+}) {
+  const session = await auth();
+  if (!session?.user) redirect("/login");
+
+  // Only contractors use this portal; others go to main dashboard
+  if (session.user.role !== "CONTRACTOR") redirect("/dashboard");
+
+  const [orgSettings, unreadCount] = await Promise.all([
+    getOrgSettings(),
+    getUnreadCount(),
+  ]);
+  const themeVars = getThemeCSS(orgSettings.theme);
+
+  return (
+    <div className="min-h-screen bg-gray-50" style={themeVars as React.CSSProperties}>
+      <ContractorNav
+        user={session.user}
+        logoUrl={orgSettings.logoUrl}
+        companyName={orgSettings.companyName}
+        unreadCount={unreadCount}
+      />
+      <main className="max-w-5xl mx-auto px-4 py-6 pb-20 sm:pb-6">{children}</main>
+      <OnboardingTour
+        userRole={session.user.role || "CONTRACTOR"}
+        userName={session.user.name || undefined}
+      />
+    </div>
+  );
+}
diff --git a/src/app/contractor/notifications/page.tsx b/src/app/contractor/notifications/page.tsx
new file mode 100644
index 0000000..01ea07f
--- /dev/null
+++ b/src/app/contractor/notifications/page.tsx
@@ -0,0 +1,37 @@
+import { auth } from "@/lib/auth";
+import { redirect } from "next/navigation";
+import { getNotifications, getUnreadCount } from "@/actions/notifications";
+import { NotificationList } from "@/components/notifications/NotificationList";
+
+export default async function ContractorNotificationsPage() {
+  const session = await auth();
+  if (!session?.user) redirect("/login");
+
+  const [{ notifications, total, hasMore }, unreadCount] = await Promise.all([
+    getNotifications(1, 20),
+    getUnreadCount(),
+  ]);
+
+  return (
+    <div className="max-w-3xl mx-auto">
+      <div className="mb-6">
+        <h1 className="text-2xl font-bold text-gray-900">Notifications</h1>
+        <p className="text-sm text-gray-500 mt-1">
+          Stay updated on your assignments
+          {unreadCount > 0 && (
+            <span className="ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[var(--color-primary)] text-white">
+              {unreadCount} unread
+            </span>
+          )}
+        </p>
+      </div>
+
+      <NotificationList
+        initialNotifications={notifications}
+        initialTotal={total}
+        initialHasMore={hasMore}
+        unreadCount={unreadCount}
+      />
+    </div>
+  );
+}
diff --git a/src/app/contractor/page.tsx b/src/app/contractor/page.tsx
new file mode 100644
index 0000000..2eec06f
--- /dev/null
+++ b/src/app/contractor/page.tsx
@@ -0,0 +1,484 @@
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db";
+import { redirect } from "next/navigation";
+import Link from "next/link";
+import {
+  Clock,
+  CheckCircle2,
+  AlertCircle,
+  ChevronRight,
+  MapPin,
+  FileText,
+  Camera,
+  HardHat,
+  AlertTriangle,
+  Eye,
+  Calendar,
+} from "lucide-react";
+import { cn } from "@/lib/utils";
+
+const statusConfig: Record<
+  string,
+  { label: string; color: string; bg: string; icon: typeof Clock }
+> = {
+  PENDING: {
+    label: "Pending",
+    color: "text-gray-600",
+    bg: "bg-gray-100",
+    icon: Clock,
+  },
+  IN_PROGRESS: {
+    label: "In Progress",
+    color: "text-blue-700",
+    bg: "bg-blue-100",
+    icon: HardHat,
+  },
+  REVIEW_REQUESTED: {
+    label: "Review Requested",
+    color: "text-yellow-700",
+    bg: "bg-yellow-100",
+    icon: Eye,
+  },
+  UNDER_REVIEW: {
+    label: "Under Review",
+    color: "text-purple-700",
+    bg: "bg-purple-100",
+    icon: Clock,
+  },
+  COMPLETE: {
+    label: "Complete",
+    color: "text-green-700",
+    bg: "bg-green-100",
+    icon: CheckCircle2,
+  },
+};
+
+export default async function ContractorDashboard() {
+  const session = await auth();
+  if (!session?.user) redirect("/login");
+
+  const user = await db.user.findUnique({
+    where: { id: session.user.id },
+    select: { email: true, name: true },
+  });
+
+  // Get projects the contractor is a member of
+  const memberships = await db.projectMember.findMany({
+    where: { userId: session.user.id },
+    include: {
+      project: {
+        include: {
+          phases: {
+            include: {
+              assignments: {
+                include: { staff: true },
+              },
+              _count: { select: { documents: true, photos: true } },
+            },
+            orderBy: { sortOrder: "asc" },
+          },
+        },
+      },
+    },
+  });
+
+  // Also find phases assigned via Staff records matching this user's email
+  const staffAssignments = await db.phaseAssignment.findMany({
+    where: {
+      staff: { email: user?.email },
+    },
+    include: {
+      phase: {
+        include: {
+          project: true,
+          _count: { select: { documents: true, photos: true } },
+        },
+      },
+      staff: true,
+    },
+  });
+
+  // Build a unified list of assigned phases
+  type AssignedPhase = {
+    id: string;
+    name: string;
+    status: string;
+    detail: string | null;
+    projectName: string;
+    projectAddress: string | null;
+    projectId: string;
+    estStart: Date;
+    estEnd: Date;
+    progress: number;
+    docCount: number;
+    photoCount: number;
+    isOwner: boolean;
+  };
+
+  const phaseMap = new Map<string, AssignedPhase>();
+
+  for (const m of memberships) {
+    for (const phase of m.project.phases) {
+      if (!phaseMap.has(phase.id)) {
+        const assignment = phase.assignments.find(
+          (a: { isOwner: boolean; staff: { email: string | null } }) => a.staff.email === user?.email
+        );
+        phaseMap.set(phase.id, {
+          id: phase.id,
+          name: phase.name,
+          status: phase.status,
+          detail: phase.detail,
+          projectName: m.project.name,
+          projectAddress: m.project.address,
+          projectId: m.project.id,
+          estStart: phase.estStart,
+          estEnd: phase.estEnd,
+          progress: phase.progress,
+          docCount: phase._count.documents,
+          photoCount: phase._count.photos,
+          isOwner: assignment?.isOwner ?? false,
+        });
+      }
+    }
+  }
+
+  for (const a of staffAssignments) {
+    if (!phaseMap.has(a.phase.id)) {
+      phaseMap.set(a.phase.id, {
+        id: a.phase.id,
+        name: a.phase.name,
+        status: a.phase.status,
+        detail: a.phase.detail,
+        projectName: a.phase.project.name,
+        projectAddress: a.phase.project.address,
+        projectId: a.phase.project.id,
+        estStart: a.phase.estStart,
+        estEnd: a.phase.estEnd,
+        progress: a.phase.progress,
+        docCount: a.phase._count.documents,
+        photoCount: a.phase._count.photos,
+        isOwner: a.isOwner,
+      });
+    }
+  }
+
+  const assignedPhases = Array.from(phaseMap.values()).sort((a, b) => {
+    const statusOrder: Record<string, number> = {
+      IN_PROGRESS: 0,
+      REVIEW_REQUESTED: 1,
+      UNDER_REVIEW: 2,
+      PENDING: 3,
+      COMPLETE: 4,
+    };
+    const aOrder = statusOrder[a.status] ?? 5;
+    const bOrder = statusOrder[b.status] ?? 5;
+    if (aOrder !== bOrder) return aOrder - bOrder;
+    return a.estStart.getTime() - b.estStart.getTime();
+  });
+
+  // Fetch recent activity for assigned phases
+  const phaseIds = Array.from(phaseMap.keys());
+  const recentActivity = phaseIds.length > 0
+    ? await db.activityLog.findMany({
+        where: {
+          OR: phaseIds.map((id) => ({
+            data: { path: ["phaseId"], equals: id },
+          })),
+        },
+        include: { user: { select: { name: true, email: true } } },
+        orderBy: { createdAt: "desc" },
+        take: 5,
+      }).catch(() => [] as never[])
+    : [];
+
+  const now = new Date();
+  const activePhases = assignedPhases.filter(
+    (p) =>
+      p.status === "IN_PROGRESS" ||
+      p.status === "REVIEW_REQUESTED" ||
+      p.status === "UNDER_REVIEW"
+  );
+  const completedPhases = assignedPhases.filter(
+    (p) => p.status === "COMPLETE"
+  );
+  const overduePhases = assignedPhases.filter(
+    (p) => p.status !== "COMPLETE" && new Date(p.estEnd) < now
+  );
+
+  // Phases ending soon (within 7 days, not complete)
+  const sevenDays = new Date(now.getTime() + 7 * 86400000);
+  const upcomingDeadlines = assignedPhases.filter(
+    (p) =>
+      p.status !== "COMPLETE" &&
+      new Date(p.estEnd) >= now &&
+      new Date(p.estEnd) <= sevenDays
+  );
+
+  return (
+    <div className="space-y-5">
+      {/* Header */}
+      <div>
+        <h1 className="text-xl sm:text-2xl font-bold text-gray-900">
+          Hey, {user?.name?.split(" ")[0] || "there"}
+        </h1>
+        <p className="text-xs sm:text-sm text-gray-500 mt-1">
+          {activePhases.length > 0
+            ? `${activePhases.length} active phase${activePhases.length !== 1 ? "s" : ""}`
+            : "No active phases right now"}
+          {completedPhases.length > 0 &&
+            ` · ${completedPhases.length} completed`}
+        </p>
+      </div>
+
+      {/* KPI Row */}
+      <div className="grid grid-cols-3 gap-3">
+        <div className="bg-blue-50 rounded-xl p-3 text-center border border-blue-100">
+          <HardHat className="w-5 h-5 text-blue-600 mx-auto mb-1" />
+          <p className="text-xl font-bold text-blue-700">
+            {activePhases.length}
+          </p>
+          <p className="text-[10px] font-medium text-blue-600 uppercase">
+            Active
+          </p>
+        </div>
+        <div
+          className={cn(
+            "rounded-xl p-3 text-center border",
+            overduePhases.length > 0
+              ? "bg-red-50 border-red-100"
+              : "bg-green-50 border-green-100"
+          )}
+        >
+          <AlertTriangle
+            className={cn(
+              "w-5 h-5 mx-auto mb-1",
+              overduePhases.length > 0 ? "text-red-500" : "text-green-500"
+            )}
+          />
+          <p
+            className={cn(
+              "text-xl font-bold",
+              overduePhases.length > 0 ? "text-red-600" : "text-green-600"
+            )}
+          >
+            {overduePhases.length}
+          </p>
+          <p
+            className={cn(
+              "text-[10px] font-medium uppercase",
+              overduePhases.length > 0 ? "text-red-500" : "text-green-500"
+            )}
+          >
+            Overdue
+          </p>
+        </div>
+        <div className="bg-green-50 rounded-xl p-3 text-center border border-green-100">
+          <CheckCircle2 className="w-5 h-5 text-green-600 mx-auto mb-1" />
+          <p className="text-xl font-bold text-green-700">
+            {completedPhases.length}
+          </p>
+          <p className="text-[10px] font-medium text-green-600 uppercase">
+            Done
+          </p>
+        </div>
+      </div>
+
+      {/* Overdue alert */}
+      {overduePhases.length > 0 && (
+        <div className="bg-red-50 border border-red-200 rounded-xl p-4">
+          <h3 className="text-sm font-semibold text-red-800 flex items-center gap-2 mb-2">
+            <AlertTriangle className="w-4 h-4" />
+            Overdue
+          </h3>
+          <div className="space-y-2">
+            {overduePhases.map((phase) => {
+              const daysOver = Math.ceil(
+                (now.getTime() - new Date(phase.estEnd).getTime()) / 86400000
+              );
+              return (
+                <Link
+                  key={phase.id}
+                  href={`/contractor/phases/${phase.id}`}
+                  className="flex items-center justify-between p-2 bg-white rounded-lg hover:bg-red-50 transition-colors"
+                >
+                  <div className="min-w-0">
+                    <span className="text-sm font-medium text-gray-900 truncate block">
+                      {phase.name}
+                    </span>
+                    <span className="text-xs text-gray-500">
+                      {phase.projectName}
+                    </span>
+                  </div>
+                  <span className="text-xs font-medium text-red-600 shrink-0 ml-2">
+                    {daysOver}d overdue
+                  </span>
+                </Link>
+              );
+            })}
+          </div>
+        </div>
+      )}
+
+      {/* Upcoming deadlines */}
+      {upcomingDeadlines.length > 0 && (
+        <div className="bg-amber-50 border border-amber-200 rounded-xl p-4">
+          <h3 className="text-sm font-semibold text-amber-800 flex items-center gap-2 mb-2">
+            <Calendar className="w-4 h-4" />
+            Due This Week
+          </h3>
+          <div className="space-y-2">
+            {upcomingDeadlines.map((phase) => {
+              const daysLeft = Math.ceil(
+                (new Date(phase.estEnd).getTime() - now.getTime()) / 86400000
+              );
+              return (
+                <Link
+                  key={phase.id}
+                  href={`/contractor/phases/${phase.id}`}
+                  className="flex items-center justify-between p-2 bg-white rounded-lg hover:bg-amber-50 transition-colors"
+                >
+                  <div className="min-w-0">
+                    <span className="text-sm font-medium text-gray-900 truncate block">
+                      {phase.name}
+                    </span>
+                    <span className="text-xs text-gray-500">
+                      {phase.projectName}
+                    </span>
+                  </div>
+                  <span className="text-xs font-medium text-amber-700 shrink-0 ml-2">
+                    {daysLeft === 0 ? "Due today" : `${daysLeft}d left`}
+                  </span>
+                </Link>
+              );
+            })}
+          </div>
+        </div>
+      )}
+
+      {/* Recent activity */}
+      {recentActivity.length > 0 && (
+        <div className="bg-white rounded-xl border border-gray-200 p-4">
+          <h3 className="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3">
+            Recent Activity
+          </h3>
+          <div className="space-y-3">
+            {recentActivity.map((entry: { id: string; message: string; createdAt: Date; user: { name: string | null; email: string } }) => (
+              <div key={entry.id} className="flex items-start gap-3">
+                <div className="w-1.5 h-1.5 rounded-full bg-gray-300 mt-1.5 shrink-0" />
+                <div className="min-w-0">
+                  <p className="text-sm text-gray-700">{entry.message}</p>
+                  <p className="text-xs text-gray-400 mt-0.5">
+                    {entry.user.name || entry.user.email} ·{" "}
+                    {new Date(entry.createdAt).toLocaleDateString("en-US", {
+                      month: "short",
+                      day: "numeric",
+                    })}
+                  </p>
+                </div>
+              </div>
+            ))}
+          </div>
+        </div>
+      )}
+
+      {/* Phase cards */}
+      {assignedPhases.length === 0 ? (
+        <div className="text-center py-16 bg-white rounded-xl border border-gray-200">
+          <Clock className="w-10 h-10 text-gray-300 mx-auto mb-3" />
+          <p className="text-sm text-gray-500">No phases assigned yet</p>
+          <p className="text-xs text-gray-400 mt-1">
+            Your project manager will assign you to phases as work begins
+          </p>
+        </div>
+      ) : (
+        <div className="space-y-3">
+          {assignedPhases.map((phase) => {
+            const config = statusConfig[phase.status] || statusConfig.PENDING;
+            const StatusIcon = config.icon;
+            const startStr = phase.estStart.toLocaleDateString("en-US", {
+              month: "short",
+              day: "numeric",
+            });
+            const endStr = phase.estEnd.toLocaleDateString("en-US", {
+              month: "short",
+              day: "numeric",
+            });
+
+            return (
+              <Link
+                key={phase.id}
+                href={`/contractor/phases/${phase.id}`}
+                className="block bg-white rounded-xl border border-gray-200 p-4 hover:border-[var(--color-primary-light)] hover:shadow-sm transition-all group"
+              >
+                <div className="flex items-start justify-between gap-3">
+                  <div className="flex-1 min-w-0">
+                    <div className="flex items-center gap-2 mb-1">
+                      <span className="text-xs font-medium text-gray-500 uppercase tracking-wide truncate">
+                        {phase.projectName}
+                      </span>
+                      {phase.isOwner && (
+                        <span className="text-xs bg-[var(--color-primary-bg)] text-[var(--color-primary-dark)] px-1.5 py-0.5 rounded font-medium">
+                          Lead
+                        </span>
+                      )}
+                    </div>
+                    <h3 className="text-base font-semibold text-gray-900 truncate">
+                      {phase.name}
+                    </h3>
+                    {phase.detail && (
+                      <p className="text-sm text-gray-500 mt-0.5 line-clamp-1">
+                        {phase.detail}
+                      </p>
+                    )}
+                    <div className="flex flex-wrap items-center gap-x-4 gap-y-1 mt-2 text-xs text-gray-500">
+                      <span>
+                        {startStr} — {endStr}
+                      </span>
+                      {phase.projectAddress && (
+                        <span className="flex items-center gap-1">
+                          <MapPin className="w-3 h-3" />
+                          {phase.projectAddress.split(",")[0]}
+                        </span>
+                      )}
+                      {phase.docCount > 0 && (
+                        <span className="flex items-center gap-1">
+                          <FileText className="w-3 h-3" />
+                          {phase.docCount}
+                        </span>
+                      )}
+                      {phase.photoCount > 0 && (
+                        <span className="flex items-center gap-1">
+                          <Camera className="w-3 h-3" />
+                          {phase.photoCount}
+                        </span>
+                      )}
+                    </div>
+                  </div>
+
+                  <div className="flex items-center gap-2 shrink-0">
+                    <span
+                      className={`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${config.bg} ${config.color}`}
+                    >
+                      <StatusIcon className="w-3 h-3" />
+                      <span className="hidden sm:inline">{config.label}</span>
+                    </span>
+                    <ChevronRight className="w-4 h-4 text-gray-300 group-hover:text-[var(--color-primary)] transition-colors" />
+                  </div>
+                </div>
+
+                {phase.progress > 0 && phase.status !== "COMPLETE" && (
+                  <div className="mt-3 h-1.5 bg-gray-100 rounded-full overflow-hidden">
+                    <div
+                      className="h-full bg-[var(--color-primary)] rounded-full transition-all"
+                      style={{ width: `${phase.progress}%` }}
+                    />
+                  </div>
+                )}
+              </Link>
+            );
+          })}
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/app/contractor/phases/[phaseId]/page.tsx b/src/app/contractor/phases/[phaseId]/page.tsx
new file mode 100644
index 0000000..1118267
--- /dev/null
+++ b/src/app/contractor/phases/[phaseId]/page.tsx
@@ -0,0 +1,239 @@
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db";
+import { redirect, notFound } from "next/navigation";
+import Link from "next/link";
+import { ArrowLeft, MapPin, Calendar, Users } from "lucide-react";
+import { ChecklistSection } from "@/components/phase/ChecklistSection";
+import { DocumentSection } from "@/components/phase/DocumentSection";
+import { PhotoSection } from "@/components/phase/PhotoSection";
+import { ContractorPhaseActions } from "@/components/contractor/ContractorPhaseActions";
+
+const statusConfig: Record<
+  string,
+  { label: string; color: string; bg: string }
+> = {
+  PENDING: { label: "Pending", color: "text-gray-600", bg: "bg-gray-100" },
+  IN_PROGRESS: {
+    label: "In Progress",
+    color: "text-blue-700",
+    bg: "bg-blue-100",
+  },
+  REVIEW_REQUESTED: {
+    label: "Review Requested",
+    color: "text-yellow-700",
+    bg: "bg-yellow-100",
+  },
+  UNDER_REVIEW: {
+    label: "Under Review",
+    color: "text-purple-700",
+    bg: "bg-purple-100",
+  },
+  COMPLETE: {
+    label: "Complete",
+    color: "text-green-700",
+    bg: "bg-green-100",
+  },
+};
+
+export default async function ContractorPhaseDetail({
+  params,
+}: {
+  params: Promise<{ phaseId: string }>;
+}) {
+  const { phaseId } = await params;
+  const session = await auth();
+  if (!session?.user) redirect("/login");
+
+  const phase = await db.phase.findUnique({
+    where: { id: phaseId },
+    include: {
+      project: {
+        select: {
+          id: true,
+          name: true,
+          address: true,
+          members: { where: { userId: session.user.id } },
+        },
+      },
+      checklist: {
+        include: {
+          items: {
+            include: {
+              completedBy: { select: { id: true, name: true, email: true } },
+            },
+            orderBy: { order: "asc" },
+          },
+        },
+      },
+      documents: {
+        include: {
+          uploadedBy: { select: { id: true, name: true, email: true } },
+        },
+        orderBy: { createdAt: "desc" },
+      },
+      photos: {
+        include: {
+          uploadedBy: { select: { id: true, name: true } },
+          flaggedBy: { select: { name: true } },
+        },
+        orderBy: { takenAt: "desc" },
+      },
+      assignments: {
+        include: { staff: { select: { id: true, name: true, role: true, company: true } } },
+        orderBy: { assignedAt: "asc" },
+      },
+    },
+  });
+
+  if (!phase) notFound();
+
+  if (phase.project.members.length === 0) {
+    redirect("/contractor");
+  }
+
+  const config = statusConfig[phase.status] || statusConfig.PENDING;
+
+  const startStr = phase.estStart.toLocaleDateString("en-US", {
+    month: "short",
+    day: "numeric",
+    year: "numeric",
+  });
+  const endStr = phase.estEnd.toLocaleDateString("en-US", {
+    month: "short",
+    day: "numeric",
+    year: "numeric",
+  });
+
+  return (
+    <div className="space-y-4 sm:space-y-6">
+      {/* Back link */}
+      <Link
+        href="/contractor"
+        className="inline-flex items-center gap-1.5 text-sm text-gray-500 hover:text-gray-700 transition-colors"
+      >
+        <ArrowLeft className="w-4 h-4" />
+        Back to My Work
+      </Link>
+
+      {/* Phase header */}
+      <div className="bg-white rounded-xl border border-gray-200 p-4 sm:p-5">
+        <div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3">
+          <div>
+            <p className="text-xs font-medium text-gray-500 uppercase tracking-wide mb-1">
+              {phase.project.name}
+            </p>
+            <h1 className="text-lg sm:text-xl font-bold text-gray-900">
+              {phase.name}
+            </h1>
+            {phase.detail && (
+              <p className="text-sm text-gray-600 mt-1">{phase.detail}</p>
+            )}
+          </div>
+          <span
+            className={`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium shrink-0 ${config.bg} ${config.color}`}
+          >
+            {config.label}
+          </span>
+        </div>
+
+        {/* Meta */}
+        <div className="flex flex-wrap items-center gap-x-4 gap-y-1 mt-4 text-sm text-gray-500">
+          <span className="flex items-center gap-1.5">
+            <Calendar className="w-4 h-4" />
+            {startStr} — {endStr}
+          </span>
+          {phase.project.address && (
+            <span className="flex items-center gap-1.5">
+              <MapPin className="w-4 h-4" />
+              {phase.project.address}
+            </span>
+          )}
+        </div>
+
+        {/* Progress bar */}
+        {phase.progress > 0 && (
+          <div className="mt-4">
+            <div className="flex items-center justify-between text-xs text-gray-500 mb-1">
+              <span>Progress</span>
+              <span>{phase.progress}%</span>
+            </div>
+            <div className="h-2 bg-gray-100 rounded-full overflow-hidden">
+              <div
+                className="h-full bg-[var(--color-primary)] rounded-full transition-all"
+                style={{ width: `${phase.progress}%` }}
+              />
+            </div>
+          </div>
+        )}
+
+        {/* Action button: Request Review (only when IN_PROGRESS) */}
+        {phase.status === "IN_PROGRESS" && (
+          <div className="mt-4 pt-4 border-t border-gray-100">
+            <ContractorPhaseActions
+              phaseId={phase.id}
+              status={phase.status}
+            />
+          </div>
+        )}
+      </div>
+
+      {/* Team */}
+      {phase.assignments.length > 0 && (
+        <div className="bg-white rounded-xl border border-gray-200 p-4 sm:p-5">
+          <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3 flex items-center gap-2">
+            <Users className="w-4 h-4 text-gray-400" />
+            Team ({phase.assignments.length})
+          </h2>
+          <div className="space-y-2">
+            {phase.assignments.map((a: { id: string; isOwner: boolean; staff: { name: string; role: string | null; company: string | null } }) => (
+              <div key={a.id} className="flex items-center gap-3">
+                <div className="w-7 h-7 rounded-full bg-[var(--color-primary-bg)] text-[var(--color-primary)] flex items-center justify-center text-xs font-semibold shrink-0">
+                  {a.staff.name[0]}
+                </div>
+                <div className="min-w-0 flex-1">
+                  <p className="text-sm font-medium text-gray-900 truncate">
+                    {a.staff.name}
+                    {a.isOwner && (
+                      <span className="ml-2 text-xs text-[var(--color-primary)] font-normal">
+                        Lead
+                      </span>
+                    )}
+                  </p>
+                  <p className="text-xs text-gray-500">
+                    {a.staff.role}
+                    {a.staff.company && ` · ${a.staff.company}`}
+                  </p>
+                </div>
+              </div>
+            ))}
+          </div>
+        </div>
+      )}
+
+      {/* Checklist */}
+      <ChecklistSection
+        phaseId={phase.id}
+        checklist={phase.checklist}
+        templates={[]}
+        canEdit={true}
+        canManage={false}
+      />
+
+      {/* Documents */}
+      <DocumentSection
+        phaseId={phase.id}
+        documents={phase.documents}
+        canUpload={true}
+        canManageStatus={false}
+      />
+
+      {/* Photos */}
+      <PhotoSection
+        phaseId={phase.id}
+        photos={phase.photos}
+        canUpload={true}
+        canDelete={false}
+      />
+    </div>
+  );
+}
diff --git a/src/app/contractor/photos/page.tsx b/src/app/contractor/photos/page.tsx
new file mode 100644
index 0000000..85f3d6c
--- /dev/null
+++ b/src/app/contractor/photos/page.tsx
@@ -0,0 +1,79 @@
+import { auth } from "@/lib/auth";
+import { db } from "@/lib/db";
+import { redirect } from "next/navigation";
+import { Camera } from "lucide-react";
+
+export default async function ContractorPhotos() {
+  const session = await auth();
+  if (!session?.user) redirect("/login");
+
+  const memberships = await db.projectMember.findMany({
+    where: { userId: session.user.id },
+    select: { project: { select: { id: true, name: true } } },
+  });
+
+  const projectIds = memberships.map((m: { project: { id: string; name: string } }) => m.project.id);
+
+  const photos = await db.photo.findMany({
+    where: {
+      phase: { projectId: { in: projectIds } },
+    },
+    include: {
+      phase: {
+        select: { name: true, project: { select: { name: true } } },
+      },
+      uploadedBy: { select: { name: true } },
+    },
+    orderBy: { takenAt: "desc" },
+  });
+
+  return (
+    <div className="space-y-6">
+      <div>
+        <h1 className="text-2xl font-bold text-gray-900">Site Photos</h1>
+        <p className="text-sm text-gray-500 mt-1">
+          Photo documentation across your assigned projects
+        </p>
+      </div>
+
+      {photos.length === 0 ? (
+        <div className="text-center py-16 bg-white rounded-xl border border-gray-200">
+          <Camera className="w-10 h-10 text-gray-300 mx-auto mb-3" />
+          <p className="text-sm text-gray-500">No photos yet</p>
+          <p className="text-xs text-gray-400 mt-1">
+            Site photos will appear here once uploaded to your project phases
+          </p>
+        </div>
+      ) : (
+        <div className="grid grid-cols-2 sm:grid-cols-3 gap-3">
+          {photos.map((photo: { id: string; url: string; caption: string | null; phase: { name: string; project: { name: string } } }) => (
+            <a
+              key={photo.id}
+              href={photo.url}
+              target="_blank"
+              rel="noopener noreferrer"
+              className="group relative aspect-square bg-gray-100 rounded-xl overflow-hidden border border-gray-200 hover:border-orange-300"
+            >
+              {/* eslint-disable-next-line @next/next/no-img-element */}
+              <img
+                src={photo.url}
+                alt={photo.caption || "Site photo"}
+                className="w-full h-full object-cover"
+              />
+              <div className="absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/60 to-transparent p-3">
+                <p className="text-white text-xs font-medium truncate">
+                  {photo.phase.project.name} · {photo.phase.name}
+                </p>
+                {photo.caption && (
+                  <p className="text-white/70 text-xs truncate mt-0.5">
+                    {photo.caption}
+                  </p>
+                )}
+              </div>
+            </a>
+          ))}
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/app/contractor/reports/page.tsx b/src/app/contractor/reports/page.tsx
new file mode 100644
index 0000000..7d32854
--- /dev/null
+++ b/src/app/contractor/reports/page.tsx
@@ -0,0 +1,242 @@
+import { auth } from "@/lib/auth";
+import { redirect } from "next/navigation";
+import Link from "next/link";
+import { getContractorPerformance } from "@/actions/reports";
+import { cn, statusColor, statusLabel, fmtShort } from "@/lib/utils";
+import {
+  BarChart3,
+  CheckCircle2,
+  Clock,
+  AlertTriangle,
+  FileText,
+  Camera,
+  ClipboardCheck,
+  TrendingUp,
+  HardHat,
+  ChevronRight,
+  Target,
+} from "lucide-react";
+
+export default async function ContractorReportsPage() {
+  const session = await auth();
+  if (!session?.user) redirect("/login");
+
+  const report = await getContractorPerformance();
+  const { summary, phases } = report;
+
+  const activePhases = phases.filter(
+    (p) =>
+      p.status === "IN_PROGRESS" ||
+      p.status === "REVIEW_REQUESTED" ||
+      p.status === "UNDER_REVIEW"
+  );
+  const overduePhases = phases.filter((p) => p.daysOverdue > 0);
+  const completedPhases = phases.filter((p) => p.status === "COMPLETE");
+
+  return (
+    <div className="space-y-6">
+      {/* Header */}
+      <div>
+        <h1 className="text-xl sm:text-2xl font-bold text-gray-900 flex items-center gap-2">
+          <BarChart3 className="w-6 h-6 text-[var(--color-primary)]" />
+          My Performance
+        </h1>
+        <p className="text-sm text-gray-500 mt-1">
+          Your work summary across all assigned phases
+        </p>
+      </div>
+
+      {/* KPI Grid */}
+      <div className="grid grid-cols-2 sm:grid-cols-4 gap-3">
+        <div className="bg-[var(--color-primary-bg)] border border-[var(--color-primary-bg)] rounded-xl p-4">
+          <div className="flex items-center gap-2 mb-1">
+            <HardHat className="w-4 h-4 text-[var(--color-primary)]" />
+            <span className="text-xs font-medium text-[var(--color-primary)] opacity-80">
+              Total Phases
+            </span>
+          </div>
+          <p className="text-2xl font-bold text-[var(--color-primary)]">
+            {summary.totalPhases}
+          </p>
+          <p className="text-xs text-[var(--color-primary)] opacity-60 mt-1">
+            {summary.active} active · {summary.completed} done
+          </p>
+        </div>
+
+        <div
+          className={cn(
+            "rounded-xl border p-4",
+            summary.onTimeRate >= 80
+              ? "bg-green-50 border-green-100"
+              : summary.onTimeRate >= 50
+              ? "bg-amber-50 border-amber-100"
+              : "bg-red-50 border-red-100"
+          )}
+        >
+          <div className="flex items-center gap-2 mb-1">
+            <Target className="w-4 h-4" />
+            <span className="text-xs font-medium opacity-80">On-Time Rate</span>
+          </div>
+          <p className="text-2xl font-bold">{summary.onTimeRate}%</p>
+          <p className="text-xs opacity-60 mt-1">
+            Completed on schedule
+          </p>
+        </div>
+
+        <div className="bg-green-50 border border-green-100 rounded-xl p-4">
+          <div className="flex items-center gap-2 mb-1">
+            <ClipboardCheck className="w-4 h-4 text-green-600" />
+            <span className="text-xs font-medium text-green-600 opacity-80">
+              Checklist
+            </span>
+          </div>
+          <p className="text-2xl font-bold text-green-600">
+            {summary.checklistProgress}%
+          </p>
+          <p className="text-xs text-green-600 opacity-60 mt-1">
+            {summary.checklistItemsCompleted} items checked
+          </p>
+        </div>
+
+        <div className="bg-purple-50 border border-purple-100 rounded-xl p-4">
+          <div className="flex items-center gap-2 mb-1">
+            <Camera className="w-4 h-4 text-purple-600" />
+            <span className="text-xs font-medium text-purple-600 opacity-80">
+              Uploads
+            </span>
+          </div>
+          <p className="text-2xl font-bold text-purple-600">
+            {summary.documentsUploaded + summary.photosUploaded}
+          </p>
+          <p className="text-xs text-purple-600 opacity-60 mt-1">
+            {summary.documentsUploaded} docs · {summary.photosUploaded} photos
+          </p>
+        </div>
+      </div>
+
+      {/* Overdue Alert */}
+      {overduePhases.length > 0 && (
+        <div className="bg-red-50 border border-red-200 rounded-xl p-4">
+          <h3 className="text-sm font-semibold text-red-800 flex items-center gap-2 mb-3">
+            <AlertTriangle className="w-4 h-4" />
+            Overdue ({overduePhases.length})
+          </h3>
+          <div className="space-y-2">
+            {overduePhases.map((phase) => (
+              <Link
+                key={phase.id}
+                href={`/contractor/phases/${phase.id}`}
+                className="flex items-center justify-between p-3 bg-white rounded-lg hover:bg-red-50 transition-colors group"
+              >
+                <div className="min-w-0">
+                  <p className="text-sm font-medium text-gray-900 truncate">
+                    {phase.name}
+                  </p>
+                  <p className="text-xs text-gray-500">{phase.projectName}</p>
+                </div>
+                <div className="flex items-center gap-3 shrink-0">
+                  <span className="text-sm font-semibold text-red-600">
+                    {phase.daysOverdue}d late
+                  </span>
+                  <ChevronRight className="w-4 h-4 text-gray-300 group-hover:text-red-500" />
+                </div>
+              </Link>
+            ))}
+          </div>
+        </div>
+      )}
+
+      {/* Phase-by-Phase Breakdown */}
+      <div className="bg-white rounded-xl border border-gray-200 overflow-hidden">
+        <div className="px-5 py-4 border-b border-gray-100">
+          <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
+            Phase Breakdown
+          </h2>
+        </div>
+        <div className="divide-y divide-gray-100">
+          {phases.length === 0 ? (
+            <div className="p-8 text-center">
+              <HardHat className="w-10 h-10 text-gray-300 mx-auto mb-2" />
+              <p className="text-sm text-gray-500">
+                No phases assigned yet
+              </p>
+            </div>
+          ) : (
+            phases.map((phase) => (
+              <Link
+                key={phase.id}
+                href={`/contractor/phases/${phase.id}`}
+                className="flex items-center gap-4 px-5 py-4 hover:bg-gray-50 transition-colors group"
+              >
+                <div className="flex-1 min-w-0">
+                  <div className="flex items-center gap-2 mb-1">
+                    <p className="text-sm font-medium text-gray-900 truncate">
+                      {phase.name}
+                    </p>
+                    <span
+                      className={cn(
+                        "text-[10px] font-medium px-1.5 py-0.5 rounded-full shrink-0",
+                        statusColor(phase.status)
+                      )}
+                    >
+                      {statusLabel(phase.status)}
+                    </span>
+                  </div>
+                  <p className="text-xs text-gray-500">{phase.projectName}</p>
+                  <div className="flex items-center gap-4 mt-2">
+                    {/* Progress bar */}
+                    <div className="flex items-center gap-2 flex-1">
+                      <div className="flex-1 bg-gray-100 rounded-full h-1.5 max-w-[120px]">
+                        <div
+                          className={cn(
+                            "h-1.5 rounded-full",
+                            phase.status === "COMPLETE"
+                              ? "bg-green-500"
+                              : phase.daysOverdue > 0
+                              ? "bg-red-500"
+                              : "bg-[var(--color-primary)]"
+                          )}
+                          style={{ width: `${phase.progress}%` }}
+                        />
+                      </div>
+                      <span className="text-xs text-gray-500">
+                        {phase.progress}%
+                      </span>
+                    </div>
+                    {/* Stats */}
+                    <div className="flex items-center gap-3 text-xs text-gray-400">
+                      {phase.checklistTotal > 0 && (
+                        <span className="flex items-center gap-1">
+                          <ClipboardCheck className="w-3 h-3" />
+                          {phase.checklistDone}/{phase.checklistTotal}
+                        </span>
+                      )}
+                      {phase.docs > 0 && (
+                        <span className="flex items-center gap-1">
+                          <FileText className="w-3 h-3" />
+                          {phase.docs}
+                        </span>
+                      )}
+                      {phase.photos > 0 && (
+                        <span className="flex items-center gap-1">
+                          <Camera className="w-3 h-3" />
+                          {phase.photos}
+                        </span>
+                      )}
+                    </div>
+                  </div>
+                </div>
+                {phase.daysOverdue > 0 && (
+                  <span className="text-xs font-medium text-red-600 bg-red-50 px-2 py-0.5 rounded-full shrink-0">
+                    {phase.daysOverdue}d late
+                  </span>
+                )}
+                <ChevronRight className="w-4 h-4 text-gray-300 group-hover:text-[var(--color-primary)] shrink-0" />
+              </Link>
+            ))
+          )}
+        </div>
+      </div>
+    </div>
+  );
+}
diff --git a/src/app/dashboard/directory/page.tsx b/src/app/dashboard/directory/page.tsx
index bbf19f2..b215421 100644
--- a/src/app/dashboard/directory/page.tsx
+++ b/src/app/dashboard/directory/page.tsx
@@ -1,45 +1,8 @@
 import { auth } from "@/lib/auth";
 import { db } from "@/lib/db";
 import { redirect } from "next/navigation";
-import { Users, Mail, Phone, Building2, HardHat, Truck, ClipboardCheck } from "lucide-react";
-
-const TYPE_CONFIG = {
-  TEAM: {
-    label: "Team",
-    description: "Your employees and core team",
-    icon: HardHat,
-    color: "bg-blue-50 text-blue-700 border-blue-200",
-    badge: "bg-blue-100 text-blue-700",
-  },
-  SUBCONTRACTOR: {
-    label: "Subcontractors",
-    description: "Trades and specialty contractors",
-    icon: Users,
-    color: "bg-orange-50 text-orange-700 border-orange-200",
-    badge: "bg-orange-100 text-orange-700",
-  },
-  VENDOR: {
-    label: "Vendors",
-    description: "Suppliers and material providers",
-    icon: Truck,
-    color: "bg-green-50 text-green-700 border-green-200",
-    badge: "bg-green-100 text-green-700",
-  },
-  INSPECTOR: {
-    label: "Inspectors",
-    description: "City inspectors, engineers, and consultants",
-    icon: ClipboardCheck,
-    color: "bg-purple-50 text-purple-700 border-purple-200",
-    badge: "bg-purple-100 text-purple-700",
-  },
-} as const;
-
-const TYPE_ORDER: (keyof typeof TYPE_CONFIG)[] = [
-  "TEAM",
-  "SUBCONTRACTOR",
-  "INSPECTOR",
-  "VENDOR",
-];
+import { can } from "@/lib/permissions";
+import { DirectoryClient } from "@/components/directory/DirectoryClient";
 
 export default async function DirectoryPage() {
   const session = await auth();
@@ -58,127 +21,8 @@ export default async function DirectoryPage() {
     orderBy: { name: "asc" },
   });
 
-  const grouped = TYPE_ORDER.map((type) => ({
-    type,
-    config: TYPE_CONFIG[type],
-    contacts: contacts.filter((c) => c.contactType === type),
-  })).filter((g) => g.contacts.length > 0);
-
-  return (
-    <div className="p-6 max-w-7xl mx-auto">
-      <div className="flex items-center justify-between mb-6">
-        <div>
-          <h1 className="text-2xl font-bold text-gray-900">Directory</h1>
-          <p className="text-sm text-gray-500 mt-1">
-            {contacts.length} contact{contacts.length !== 1 ? "s" : ""} across{" "}
-            {grouped.length} categories
-          </p>
-        </div>
-      </div>
-
-      {contacts.length === 0 ? (
-        <div className="text-center py-16 bg-white rounded-xl border border-gray-200">
-          <Users className="w-12 h-12 text-gray-300 mx-auto mb-4" />
-          <h3 className="text-lg font-medium text-gray-900 mb-1">
-            No contacts yet
-          </h3>
-          <p className="text-sm text-gray-500">
-            Add team members, subcontractors, vendors, and inspectors to your
-            directory.
-          </p>
-        </div>
-      ) : (
-        <div className="space-y-8">
-          {grouped.map(({ type, config, contacts: groupContacts }) => {
-            const Icon = config.icon;
-            return (
-              <div key={type}>
-                <div className="flex items-center gap-2 mb-3">
-                  <Icon className="w-5 h-5 text-gray-400" />
-                  <h2 className="text-lg font-semibold text-gray-900">
-                    {config.label}
-                  </h2>
-                  <span className="text-xs text-gray-400">
-                    {groupContacts.length}
-                  </span>
-                </div>
-                <p className="text-sm text-gray-500 mb-3 -mt-1">
-                  {config.description}
-                </p>
-
-                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
-                  {groupContacts.map((person) => (
-                    <div
-                      key={person.id}
-                      className="bg-white rounded-xl border border-gray-200 p-5 hover:border-blue-300 hover:shadow-md transition-all"
-                    >
-                      <div className="flex items-start gap-3 mb-3">
-                        <div className="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 font-medium text-sm shrink-0">
-                          {person.name[0]}
-                        </div>
-                        <div className="min-w-0 flex-1">
-                          <h3 className="text-base font-semibold text-gray-900 truncate">
-                            {person.name}
-                          </h3>
-                          {person.role && (
-                            <p className="text-sm text-gray-500">
-                              {person.role}
-                            </p>
-                          )}
-                        </div>
-                        <span
-                          className={`text-[10px] font-medium px-1.5 py-0.5 rounded ${config.badge}`}
-                        >
-                          {config.label}
-                        </span>
-                      </div>
-
-                      <div className="space-y-1.5 text-sm">
-                        {person.company && (
-                          <div className="flex items-center gap-2 text-gray-600">
-                            <Building2 className="w-3.5 h-3.5 text-gray-400 shrink-0" />
-                            <span className="truncate">{person.company}</span>
-                          </div>
-                        )}
-                        {person.email && (
-                          <div className="flex items-center gap-2 text-gray-600">
-                            <Mail className="w-3.5 h-3.5 text-gray-400 shrink-0" />
-                            <span className="truncate">{person.email}</span>
-                          </div>
-                        )}
-                        {person.phone && (
-                          <div className="flex items-center gap-2 text-gray-600">
-                            <Phone className="w-3.5 h-3.5 text-gray-400 shrink-0" />
-                            {person.phone}
-                          </div>
-                        )}
-                      </div>
+  const userRole = session.user.role || "VIEWER";
+  const canManage = can(userRole, "create", "staff");
 
-                      {person.assignments.length > 0 && (
-                        <div className="mt-3 pt-3 border-t border-gray-100">
-                          <p className="text-xs text-gray-400 uppercase tracking-wide mb-1.5">
-                            Assigned to
-                          </p>
-                          <div className="flex flex-wrap gap-1.5">
-                            {person.assignments.map((a) => (
-                              <span
-                                key={a.id}
-                                className="text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full"
-                              >
-                                {a.phase.name}
-                              </span>
-                            ))}
-                          </div>
-                        </div>
-                      )}
-                    </div>
-                  ))}
-                </div>
-              </div>
-            );
-          })}
-        </div>
-      )}
-    </div>
-  );
+  return <DirectoryClient contacts={contacts} canManage={canManage} />;
 }
diff --git a/src/app/dashboard/help/page.tsx b/src/app/dashboard/help/page.tsx
new file mode 100644
index 0000000..f2c4c6f
--- /dev/null
+++ b/src/app/dashboard/help/page.tsx
@@ -0,0 +1,23 @@
+import { auth } from "@/lib/auth";
+import { redirect } from "next/navigation";
+import { HelpCenter } from "@/components/help/HelpCenter";
+import { getTranslations } from "next-intl/server";
+
+export default async function HelpPage() {
+  const session = await auth();
+  if (!session?.user) redirect("/login");
+
+  const t = await getTranslations("nav");
+
+  return (
+    <div className="p-6 max-w-4xl mx-auto">
+      <div className="mb-6">
+        <h1 className="text-2xl font-bold text-gray-900">{t("help")}</h1>
+        <p className="text-sm text-gray-500 mt-1">
+          Guides, tips, and answers to common questions
+        </p>
+      </div>
+      <HelpCenter userRole={session.user.role || "VIEWER"} />
+    </div>
+  );
+}
diff --git a/src/app/dashboard/layout.tsx b/src/app/dashboard/layout.tsx
index a8927a1..8599d48 100644
--- a/src/app/dashboard/layout.tsx
+++ b/src/app/dashboard/layout.tsx
@@ -1,6 +1,11 @@
 import { auth } from "@/lib/auth";
 import { redirect } from "next/navigation";
 import { Sidebar } from "@/components/ui/Sidebar";
+import { getOrgSettings } from "@/actions/settings";
+import { getThemeCSS } from "@/lib/themes";
+import { getUnreadCount } from "@/actions/notifications";
+import { OnboardingTour } from "@/components/help/OnboardingTour";
+import { InstallPrompt } from "@/components/ui/InstallPrompt";
 
 export default async function DashboardLayout({
   children,
@@ -10,10 +15,28 @@ export default async function DashboardLayout({
   const session = await auth();
   if (!session?.user) redirect("/login");
 
+  const [orgSettings, unreadCount] = await Promise.all([
+    getOrgSettings(),
+    getUnreadCount(),
+  ]);
+  const themeVars = getThemeCSS(orgSettings.theme);
+
   return (
-    <div className="flex h-screen bg-gray-50">
-      <Sidebar user={session.user} />
-      <main className="flex-1 overflow-auto">{children}</main>
+    <div className="flex h-screen bg-gray-50" style={themeVars as React.CSSProperties}>
+      <Sidebar
+        user={session.user}
+        logoUrl={orgSettings.logoUrl}
+        companyName={orgSettings.companyName}
+        unreadCount={unreadCount}
+      />
+      <main className="flex-1 overflow-auto pt-14 pb-16 lg:pt-0 lg:pb-0">
+        {children}
+      </main>
+      <OnboardingTour
+        userRole={session.user.role || "VIEWER"}
+        userName={session.user.name || undefined}
+      />
+      <InstallPrompt />
     </div>
   );
 }
diff --git a/src/app/dashboard/notifications/page.tsx b/src/app/dashboard/notifications/page.tsx
index dcac87d..a74293e 100644
--- a/src/app/dashboard/notifications/page.tsx
+++ b/src/app/dashboard/notifications/page.tsx
@@ -1,29 +1,39 @@
 import { auth } from "@/lib/auth";
 import { redirect } from "next/navigation";
-import { Bell } from "lucide-react";
+import { getNotifications, getUnreadCount } from "@/actions/notifications";
+import { NotificationList } from "@/components/notifications/NotificationList";
+import { getTranslations } from "next-intl/server";
 
 export default async function NotificationsPage() {
   const session = await auth();
   if (!session?.user) redirect("/login");
 
+  const [{ notifications, total, hasMore }, unreadCount, t] = await Promise.all([
+    getNotifications(1, 20),
+    getUnreadCount(),
+    getTranslations("notifications"),
+  ]);
+
   return (
     <div className="p-6 max-w-4xl mx-auto">
       <div className="mb-6">
-        <h1 className="text-2xl font-bold text-gray-900">Notifications</h1>
+        <h1 className="text-2xl font-bold text-gray-900">{t("title")}</h1>
         <p className="text-sm text-gray-500 mt-1">
-          Stay updated on project activity
+          {t("emptyMessage").split(".")[0]}
+          {unreadCount > 0 && (
+            <span className="ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[var(--color-primary)] text-white">
+              {unreadCount} unread
+            </span>
+          )}
         </p>
       </div>
 
-      <div className="text-center py-16 bg-white rounded-xl border border-gray-200">
-        <Bell className="w-12 h-12 text-gray-300 mx-auto mb-4" />
-        <h3 className="text-lg font-medium text-gray-900 mb-1">
-          No notifications yet
-        </h3>
-        <p className="text-sm text-gray-500">
-          You&apos;ll be notified when there are updates to your projects.
-        </p>
-      </div>
+      <NotificationList
+        initialNotifications={notifications}
+        initialTotal={total}
+        initialHasMore={hasMore}
+        unreadCount={unreadCount}
+      />
     </div>
   );
 }
diff --git a/src/app/dashboard/page.tsx b/src/app/dashboard/page.tsx
index cd12b72..1c9fdaa 100644
--- a/src/app/dashboard/page.tsx
+++ b/src/app/dashboard/page.tsx
@@ -16,240 +16,316 @@ import {
   FileText,
   ArrowRight,
   Activity,
+  Bell,
+  Eye,
+  ChevronRight,
+  Building2,
+  TrendingUp,
+  CircleDot,
 } from "lucide-react";
 import { cn, statusColor, statusLabel, fmtShort, fmtRelative } from "@/lib/utils";
+import { getTranslations } from "next-intl/server";
+import { getLocale } from "@/i18n/locale";
+import { getAnalytics } from "@/actions/analytics";
+import { AnalyticsWidgets } from "@/components/dashboard/AnalyticsWidgets";
 
 export default async function DashboardPage() {
   const session = await auth();
   if (!session?.user) redirect("/login");
 
+  const [t, tc, tn, locale, analytics] = await Promise.all([
+    getTranslations("dashboard"),
+    getTranslations("common"),
+    getTranslations("nav"),
+    getLocale(),
+    getAnalytics().catch(() => null),
+  ]);
+
   // Fetch all data in parallel
-  const [projects, allPhases, recentActivity, _totalChecklistItems] =
-    await Promise.all([
-      // Projects with counts
-      db.project.findMany({
-        where: { members: { some: { userId: session.user.id } } },
-        include: {
-          _count: { select: { phases: true, members: true } },
-          phases: {
-            select: {
-              id: true,
-              name: true,
-              status: true,
-              progress: true,
-              estStart: true,
-              estEnd: true,
-              worstEnd: true,
-              projectId: true,
-            },
-            orderBy: { sortOrder: "asc" },
+  const [
+    projects,
+    allPhases,
+    recentNotifications,
+    pendingDocuments,
+    checklistStats,
+    recentActivity,
+  ] = await Promise.all([
+    db.project.findMany({
+      where: { members: { some: { userId: session.user.id } } },
+      include: {
+        _count: { select: { phases: true, members: true } },
+        phases: {
+          select: {
+            id: true, name: true, status: true, progress: true,
+            estStart: true, estEnd: true, worstEnd: true, projectId: true,
           },
+          orderBy: { sortOrder: "asc" },
         },
-        orderBy: { updatedAt: "desc" },
-      }),
-
-      // All phases the user can see (for widgets)
-      db.phase.findMany({
-        where: {
-          project: { members: { some: { userId: session.user.id } } },
+      },
+      orderBy: { updatedAt: "desc" },
+    }),
+    db.phase.findMany({
+      where: {
+        project: { members: { some: { userId: session.user.id } } },
+      },
+      include: {
+        project: { select: { id: true, name: true } },
+        assignments: {
+          include: { staff: { select: { name: true } } },
+          where: { isOwner: true },
+          take: 1,
         },
-        include: {
-          project: { select: { id: true, name: true } },
-          assignments: {
-            include: { staff: { select: { name: true } } },
-            where: { isOwner: true },
-            take: 1,
+      },
+      orderBy: { estEnd: "asc" },
+    }),
+    db.notification
+      .findMany({
+        where: { userId: session.user.id },
+        orderBy: { createdAt: "desc" },
+        take: 8,
+      })
+      .catch(() => [] as never[]),
+    db.document
+      .count({
+        where: {
+          status: "PENDING",
+          phase: {
+            project: {
+              members: { some: { userId: session.user.id } },
+            },
           },
         },
-        orderBy: { estEnd: "asc" },
-      }),
-
-      // Recent activity
-      db.activityLog
-        .findMany({
+      })
+      .catch(() => 0),
+    Promise.all([
+      db.checklistItem
+        .count({
           where: {
-            project: { members: { some: { userId: session.user.id } } },
-          },
-          include: {
-            user: { select: { name: true, email: true } },
-            project: { select: { name: true } },
+            completed: true,
+            checklist: {
+              phase: {
+                status: { in: ["IN_PROGRESS", "REVIEW_REQUESTED", "UNDER_REVIEW"] },
+                project: { members: { some: { userId: session.user.id } } },
+              },
+            },
           },
-          orderBy: { createdAt: "desc" },
-          take: 15,
         })
-        .catch(() => [] as never[]), // Table might not exist yet
-
-      // Checklist completion stats — count total and completed separately
+        .catch(() => 0),
       db.checklistItem
         .count({
           where: {
             checklist: {
               phase: {
-                project: {
-                  members: { some: { userId: session.user.id } },
-                },
+                status: { in: ["IN_PROGRESS", "REVIEW_REQUESTED", "UNDER_REVIEW"] },
+                project: { members: { some: { userId: session.user.id } } },
               },
             },
           },
         })
         .catch(() => 0),
-    ]);
+    ]),
+    db.activityLog
+      .findMany({
+        where: {
+          project: { members: { some: { userId: session.user.id } } },
+        },
+        include: {
+          user: { select: { name: true, email: true } },
+          project: { select: { name: true } },
+        },
+        orderBy: { createdAt: "desc" },
+        take: 10,
+      })
+      .catch(() => [] as never[]),
+  ]);
 
   const showCreate = canCreateProject(session.user.role);
   const now = new Date();
+  const [completedItems, totalItems] = checklistStats;
 
-  // Compute widget data
   const activePhases = allPhases.filter(
     (p: { status: string }) =>
-      p.status === "IN_PROGRESS" ||
-      p.status === "REVIEW_REQUESTED" ||
-      p.status === "UNDER_REVIEW"
+      p.status === "IN_PROGRESS" || p.status === "REVIEW_REQUESTED" || p.status === "UNDER_REVIEW"
   );
-
-  const overduePhases = allPhases.filter(
-    (p: { status: string; estEnd: Date }) =>
-      p.status !== "COMPLETE" && new Date(p.estEnd) < now
+  const reviewPhases = allPhases.filter(
+    (p: { status: string }) => p.status === "REVIEW_REQUESTED"
   );
-
-  const completedPhases = allPhases.filter(
-    (p: { status: string }) => p.status === "COMPLETE"
+  const overduePhases = allPhases.filter(
+    (p: { status: string; estEnd: Date | string }) => p.status !== "COMPLETE" && new Date(p.estEnd) < now
   );
-
   const upcomingPhases = allPhases
     .filter(
-      (p: { status: string; estStart: Date }) =>
+      (p: { status: string; estStart: Date | string }) =>
         p.status === "PENDING" &&
         new Date(p.estStart) <= new Date(now.getTime() + 14 * 86400000)
     )
     .slice(0, 5);
 
-  const greeting = getGreeting();
+  const greeting = getGreeting(t);
+  const checklistPercent =
+    totalItems > 0 ? Math.round((completedItems / totalItems) * 100) : 0;
+  const attentionCount = reviewPhases.length + (pendingDocuments as number) + overduePhases.length;
 
   return (
-    <div className="p-6 max-w-7xl mx-auto space-y-6">
+    <div className="p-4 sm:p-6 max-w-7xl mx-auto space-y-4 sm:space-y-6">
       {/* Header */}
-      <div className="flex items-center justify-between">
+      <div className="flex items-start sm:items-center justify-between gap-3">
         <div>
-          <h1 className="text-2xl font-bold text-gray-900">
+          <h1 className="text-xl sm:text-2xl font-bold text-gray-900">
             {greeting}, {session.user.name?.split(" ")[0] || "there"}
           </h1>
-          <p className="text-sm text-gray-500 mt-1">
-            {new Date().toLocaleDateString("en-US", {
+          <p className="text-xs sm:text-sm text-gray-500 mt-1">
+            {new Date().toLocaleDateString(locale === "es" ? "es-MX" : "en-US", {
               weekday: "long",
               month: "long",
               day: "numeric",
               year: "numeric",
             })}
+            {attentionCount > 0 && (
+              <span className="ml-2 text-amber-600 font-medium">
+                · {attentionCount} {attentionCount === 1 ? "item needs" : "items need"} attention
+              </span>
+            )}
           </p>
         </div>
         {showCreate && (
           <Link
             href="/dashboard/projects/new"
-            className="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors"
+            className="inline-flex items-center gap-2 px-3 sm:px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg text-sm font-medium hover:bg-[var(--color-primary-dark)] transition-colors shrink-0"
           >
             <Plus className="w-4 h-4" />
-            New Project
+            <span className="hidden sm:inline">{t("newProject")}</span>
+            <span className="sm:hidden">{t("new")}</span>
           </Link>
         )}
       </div>
 
-      {/* Summary Widgets */}
-      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
+      {/* KPI Widgets */}
+      <div className="flex gap-3 overflow-x-auto pb-1 sm:grid sm:grid-cols-3 sm:overflow-visible lg:grid-cols-5">
         <WidgetCard
           icon={<HardHat className="w-5 h-5" />}
-          label="Active Phases"
+          label={t("activePhases")}
           value={activePhases.length}
           color="blue"
-          detail={`${allPhases.length} total`}
+          detail={`${allPhases.length} ${tc("total")}`}
+        />
+        <WidgetCard
+          icon={<Eye className="w-5 h-5" />}
+          label={t("needsReview")}
+          value={reviewPhases.length}
+          color={reviewPhases.length > 0 ? "amber" : "green"}
+          detail={reviewPhases.length > 0 ? t("awaitingApproval") : t("allClear")}
         />
         <WidgetCard
           icon={<AlertTriangle className="w-5 h-5" />}
-          label="Overdue"
+          label={t("overdue")}
           value={overduePhases.length}
           color={overduePhases.length > 0 ? "red" : "green"}
-          detail={overduePhases.length > 0 ? "needs attention" : "all on track"}
+          detail={overduePhases.length > 0 ? t("pastDeadline") : t("onTrack")}
         />
         <WidgetCard
-          icon={<CheckCircle2 className="w-5 h-5" />}
-          label="Completed"
-          value={completedPhases.length}
-          color="green"
-          detail={`of ${allPhases.length} phases`}
+          icon={<FileText className="w-5 h-5" />}
+          label={t("pendingDocs")}
+          value={pendingDocuments as number}
+          color={(pendingDocuments as number) > 0 ? "amber" : "green"}
+          detail={(pendingDocuments as number) > 0 ? t("needReview") : t("allReviewed")}
         />
         <WidgetCard
-          icon={<FolderKanban className="w-5 h-5" />}
-          label="Projects"
-          value={projects.length}
-          color="purple"
-          detail={`${projects.filter((p: { status: string }) => p.status === "ACTIVE").length} active`}
+          icon={<ClipboardCheck className="w-5 h-5" />}
+          label={t("checklists")}
+          value={checklistPercent}
+          valueSuffix="%"
+          color={checklistPercent >= 80 ? "green" : checklistPercent >= 50 ? "blue" : "amber"}
+          detail={`${completedItems}/${totalItems} ${tc("items")}`}
         />
       </div>
 
-      {/* Main content: two columns */}
-      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
-        {/* Left column: Projects + Overdue + Upcoming */}
-        <div className="lg:col-span-2 space-y-6">
-          {/* Overdue Alert */}
-          {overduePhases.length > 0 && (
-            <div className="bg-red-50 border border-red-200 rounded-xl p-4">
-              <h3 className="text-sm font-semibold text-red-800 flex items-center gap-2 mb-3">
-                <AlertTriangle className="w-4 h-4" />
-                Overdue Phases ({overduePhases.length})
-              </h3>
-              <div className="space-y-2">
-                {overduePhases.slice(0, 4).map((phase: { id: string; name: string; estEnd: Date; project: { id: string; name: string }; assignments: { staff: { name: string } }[] }) => {
-                  const daysOver = Math.ceil(
-                    (now.getTime() - new Date(phase.estEnd).getTime()) / 86400000
-                  );
-                  return (
-                    <Link
-                      key={phase.id}
-                      href={`/dashboard/projects/${phase.project.id}/phases/${phase.id}`}
-                      className="flex items-center justify-between p-2 bg-white rounded-lg hover:bg-red-50 transition-colors"
-                    >
-                      <div>
-                        <span className="text-sm font-medium text-gray-900">
-                          {phase.name}
-                        </span>
-                        <span className="text-xs text-gray-500 ml-2">
-                          {phase.project.name}
-                        </span>
-                      </div>
-                      <span className="text-xs font-medium text-red-600">
-                        {daysOver}d overdue
-                      </span>
-                    </Link>
-                  );
-                })}
-              </div>
-            </div>
-          )}
+      {/* Attention Panel */}
+      {(reviewPhases.length > 0 || overduePhases.length > 0) && (
+        <div className="bg-white rounded-xl border border-gray-200 overflow-hidden">
+          <div className="px-5 py-3 border-b border-gray-100 bg-gray-50">
+            <h2 className="text-sm font-semibold text-gray-900 flex items-center gap-2">
+              <CircleDot className="w-4 h-4 text-amber-500" />
+              {t("needsYourAttention")}
+            </h2>
+          </div>
+          <div className="divide-y divide-gray-100">
+            {reviewPhases.map((phase: typeof allPhases[0]) => (
+              <Link
+                key={phase.id}
+                href={`/dashboard/projects/${phase.project.id}/phases/${phase.id}`}
+                className="flex items-center gap-4 px-5 py-3 hover:bg-blue-50/50 transition-colors group"
+              >
+                <div className="p-2 rounded-lg bg-amber-100 text-amber-600 shrink-0">
+                  <Eye className="w-4 h-4" />
+                </div>
+                <div className="flex-1 min-w-0">
+                  <p className="text-sm font-medium text-gray-900 truncate">
+                    {t("reviewRequestedLabel", { name: phase.name })}
+                  </p>
+                  <p className="text-xs text-gray-500">
+                    {phase.project.name}
+                    {phase.assignments[0] && ` · ${phase.assignments[0].staff.name}`}
+                  </p>
+                </div>
+                <span className={cn("text-xs font-medium px-2 py-0.5 rounded-full shrink-0", statusColor("REVIEW_REQUESTED"))}>
+                  {statusLabel("REVIEW_REQUESTED")}
+                </span>
+                <ChevronRight className="w-4 h-4 text-gray-300 group-hover:text-[var(--color-primary)] transition-colors shrink-0" />
+              </Link>
+            ))}
+            {overduePhases.slice(0, 4).map((phase: typeof allPhases[0]) => {
+              const daysOver = Math.ceil((now.getTime() - new Date(phase.estEnd).getTime()) / 86400000);
+              return (
+                <Link
+                  key={phase.id}
+                  href={`/dashboard/projects/${phase.project.id}/phases/${phase.id}`}
+                  className="flex items-center gap-4 px-5 py-3 hover:bg-red-50/50 transition-colors group"
+                >
+                  <div className="p-2 rounded-lg bg-red-100 text-red-600 shrink-0">
+                    <AlertTriangle className="w-4 h-4" />
+                  </div>
+                  <div className="flex-1 min-w-0">
+                    <p className="text-sm font-medium text-gray-900 truncate">
+                      {t("overdueLabel", { name: phase.name })}
+                    </p>
+                    <p className="text-xs text-gray-500">
+                      {phase.project.name}
+                      {phase.assignments[0] && ` · ${phase.assignments[0].staff.name}`}
+                    </p>
+                  </div>
+                  <span className="text-xs font-medium text-red-600 bg-red-50 px-2 py-0.5 rounded-full shrink-0">
+                    {t("daysOverdue", { days: daysOver })}
+                  </span>
+                  <ChevronRight className="w-4 h-4 text-gray-300 group-hover:text-red-500 transition-colors shrink-0" />
+                </Link>
+              );
+            })}
+          </div>
+        </div>
+      )}
 
-          {/* Upcoming Starts */}
+      {/* Main content */}
+      <div className="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6">
+        <div className="lg:col-span-2 space-y-4 sm:space-y-6">
           {upcomingPhases.length > 0 && (
             <div className="bg-amber-50 border border-amber-200 rounded-xl p-4">
               <h3 className="text-sm font-semibold text-amber-800 flex items-center gap-2 mb-3">
                 <Clock className="w-4 h-4" />
-                Starting Soon (next 2 weeks)
+                {t("startingSoon")}
               </h3>
               <div className="space-y-2">
-                {upcomingPhases.map((phase: { id: string; name: string; estStart: Date; project: { id: string; name: string }; assignments: { staff: { name: string } }[] }) => (
+                {upcomingPhases.map((phase: typeof allPhases[0]) => (
                   <Link
                     key={phase.id}
                     href={`/dashboard/projects/${phase.project.id}/phases/${phase.id}`}
                     className="flex items-center justify-between p-2 bg-white rounded-lg hover:bg-amber-50 transition-colors"
                   >
                     <div>
-                      <span className="text-sm font-medium text-gray-900">
-                        {phase.name}
-                      </span>
-                      <span className="text-xs text-gray-500 ml-2">
-                        {phase.project.name}
-                      </span>
+                      <span className="text-sm font-medium text-gray-900">{phase.name}</span>
+                      <span className="text-xs text-gray-500 ml-2">{phase.project.name}</span>
                     </div>
-                    <span className="text-xs text-amber-700">
-                      {fmtShort(phase.estStart)}
-                    </span>
+                    <span className="text-xs text-amber-700">{fmtShort(phase.estStart)}</span>
                   </Link>
                 ))}
               </div>
@@ -258,92 +334,62 @@ export default async function DashboardPage() {
 
           {/* Project Cards */}
           <div>
-            <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3">
-              Projects
-            </h2>
+            <div className="flex items-center justify-between mb-3">
+              <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
+                {tn("projects")}
+              </h2>
+              <span className="text-xs text-gray-500">
+                {projects.filter((p: { status: string }) => p.status === "ACTIVE").length} {tc("active").toLowerCase()} · {projects.length} {tc("total")}
+              </span>
+            </div>
             {projects.length === 0 ? (
               <div className="text-center py-12 bg-white rounded-xl border border-gray-200">
                 <FolderKanban className="w-12 h-12 text-gray-300 mx-auto mb-4" />
-                <h3 className="text-lg font-medium text-gray-900 mb-1">
-                  No projects yet
-                </h3>
-                <p className="text-sm text-gray-500 mb-4">
-                  Create your first project to get started.
-                </p>
+                <h3 className="text-lg font-medium text-gray-900 mb-1">{t("noProjectsYet")}</h3>
+                <p className="text-sm text-gray-500 mb-4">{t("createFirstProject")}</p>
                 {showCreate && (
                   <Link
                     href="/dashboard/projects/new"
-                    className="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700"
+                    className="inline-flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg text-sm font-medium hover:bg-[var(--color-primary-dark)]"
                   >
                     <Plus className="w-4 h-4" />
-                    New Project
+                    {t("newProject")}
                   </Link>
                 )}
               </div>
             ) : (
               <div className="space-y-3">
-                {projects.map((project: typeof projects[number]) => {
+                {projects.map((project: (typeof projects)[number]) => {
                   const phases = project.phases;
-                  const completed = phases.filter(
-                    (p: { status: string }) => p.status === "COMPLETE"
-                  ).length;
+                  const completed = phases.filter((p: { status: string }) => p.status === "COMPLETE").length;
                   const total = project._count.phases;
-                  const progress =
-                    total > 0 ? Math.round((completed / total) * 100) : 0;
-
-                  // Find the current active phase
+                  const progress = total > 0 ? Math.round((completed / total) * 100) : 0;
                   const currentPhase = phases.find(
                     (p: { status: string }) =>
-                      p.status === "IN_PROGRESS" ||
-                      p.status === "REVIEW_REQUESTED" ||
-                      p.status === "UNDER_REVIEW"
-                  );
-
-                  // Next pending phase
-                  const nextPhase = phases.find(
-                    (p: { status: string }) => p.status === "PENDING"
+                      p.status === "IN_PROGRESS" || p.status === "REVIEW_REQUESTED" || p.status === "UNDER_REVIEW"
                   );
+                  const nextPhase = phases.find((p: { status: string }) => p.status === "PENDING");
 
                   return (
                     <Link
                       key={project.id}
-                      href={`/dashboard/projects/${project.id}/timeline`}
-                      className="block bg-white rounded-xl border border-gray-200 p-5 hover:border-blue-300 hover:shadow-md transition-all"
+                      href={`/dashboard/projects/${project.id}`}
+                      className="block bg-white rounded-xl border border-gray-200 p-5 hover:border-[var(--color-primary-light)] hover:shadow-md transition-all"
                     >
                       <div className="flex items-start justify-between mb-2">
                         <div>
-                          <h3 className="text-base font-semibold text-gray-900">
-                            {project.name}
-                          </h3>
-                          {project.address && (
-                            <p className="text-sm text-gray-500 mt-0.5">
-                              {project.address}
-                            </p>
-                          )}
+                          <h3 className="text-base font-semibold text-gray-900">{project.name}</h3>
+                          {project.address && <p className="text-sm text-gray-500 mt-0.5">{project.address}</p>}
                         </div>
-                        <span
-                          className={cn(
-                            "text-xs font-medium px-2 py-0.5 rounded-full whitespace-nowrap",
-                            statusColor(project.status)
-                          )}
-                        >
+                        <span className={cn("text-xs font-medium px-2 py-0.5 rounded-full whitespace-nowrap", statusColor(project.status))}>
                           {statusLabel(project.status)}
                         </span>
                       </div>
-
-                      {/* Current / Next Phase */}
                       {currentPhase && (
-                        <div className="flex items-center gap-2 mb-3 p-2 bg-blue-50 rounded-lg">
-                          <HardHat className="w-4 h-4 text-blue-600 shrink-0" />
-                          <span className="text-sm text-blue-900 font-medium truncate">
-                            {currentPhase.name}
-                          </span>
-                          <span
-                            className={cn(
-                              "text-[10px] font-medium px-1.5 py-0.5 rounded ml-auto shrink-0",
-                              statusColor(currentPhase.status)
-                            )}
-                          >
+                        <div className="flex items-center gap-2 mb-3 p-2 bg-[var(--color-primary-bg)] rounded-lg">
+                          <HardHat className="w-4 h-4 text-[var(--color-primary)] shrink-0" />
+                          <span className="text-sm text-[var(--color-primary-dark)] font-medium truncate">{currentPhase.name}</span>
+                          <span className={cn("text-[10px] font-medium px-1.5 py-0.5 rounded ml-auto shrink-0", statusColor(currentPhase.status))}>
                             {statusLabel(currentPhase.status)}
                           </span>
                         </div>
@@ -352,30 +398,22 @@ export default async function DashboardPage() {
                         <div className="flex items-center gap-2 mb-3 p-2 bg-gray-50 rounded-lg">
                           <Clock className="w-4 h-4 text-gray-500 shrink-0" />
                           <span className="text-sm text-gray-700 truncate">
-                            Next: {nextPhase.name}
-                          </span>
-                          <span className="text-xs text-gray-500 ml-auto shrink-0">
-                            {fmtShort(nextPhase.estStart)}
+                            {t("nextPhase", { name: nextPhase.name })}
                           </span>
+                          <span className="text-xs text-gray-500 ml-auto shrink-0">{fmtShort(nextPhase.estStart)}</span>
                         </div>
                       )}
-
-                      {/* Progress + Stats */}
                       <div className="flex items-center gap-4">
                         <div className="flex-1">
                           <div className="w-full bg-gray-100 rounded-full h-1.5">
                             <div
                               className="h-1.5 rounded-full transition-all"
-                              style={{
-                                width: `${progress}%`,
-                                backgroundColor:
-                                  progress === 100 ? "#16a34a" : "#3b82f6",
-                              }}
+                              style={{ width: `${progress}%`, backgroundColor: progress === 100 ? "#16a34a" : "var(--color-primary)" }}
                             />
                           </div>
                         </div>
                         <span className="text-xs text-gray-500 whitespace-nowrap">
-                          {completed}/{total} phases
+                          {completed}/{total} {tc("phases")}
                         </span>
                         <span className="flex items-center gap-1 text-xs text-gray-500">
                           <Users className="w-3.5 h-3.5" />
@@ -390,73 +428,105 @@ export default async function DashboardPage() {
           </div>
         </div>
 
-        {/* Right column: Activity Feed */}
-        <div>
-          <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3">
-            Recent Activity
-          </h2>
-          <div className="bg-white rounded-xl border border-gray-200 overflow-hidden">
-            {recentActivity.length === 0 ? (
-              <div className="p-6 text-center">
-                <Activity className="w-8 h-8 text-gray-300 mx-auto mb-2" />
-                <p className="text-sm text-gray-500">No activity yet</p>
-                <p className="text-xs text-gray-400 mt-1">
-                  Actions like status changes, assignments, and uploads will
-                  appear here
-                </p>
-              </div>
-            ) : (
-              <div className="divide-y divide-gray-100">
-                {recentActivity.map((entry: { id: string; action: string; message: string; createdAt: Date; user: { name: string | null; email: string }; project: { name: string } }) => (
-                  <div key={entry.id} className="p-3">
-                    <div className="flex items-start gap-2">
-                      <div className="mt-0.5 shrink-0">
-                        {getActivityIcon(entry.action)}
+        {/* Right column */}
+        <div className="space-y-5">
+          <div>
+            <div className="flex items-center justify-between mb-3">
+              <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
+                {tn("notifications")}
+              </h2>
+              <Link href="/dashboard/notifications" className="text-xs text-[var(--color-primary)] hover:underline">
+                {tc("viewAll")}
+              </Link>
+            </div>
+            <div className="bg-white rounded-xl border border-gray-200 overflow-hidden">
+              {recentNotifications.length === 0 ? (
+                <div className="p-6 text-center">
+                  <Bell className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+                  <p className="text-sm text-gray-500">{t("noNotificationsYet")}</p>
+                  <p className="text-xs text-gray-400 mt-1">{t("notificationsWillAppear")}</p>
+                </div>
+              ) : (
+                <div className="divide-y divide-gray-100">
+                  {recentNotifications.map(
+                    (notif: { id: string; type: string; title: string; message: string; read: boolean; createdAt: Date }) => (
+                      <div key={notif.id} className={cn("px-4 py-3 transition-colors", !notif.read && "bg-blue-50/40")}>
+                        <div className="flex items-start gap-2.5">
+                          {!notif.read && <span className="mt-1.5 w-2 h-2 rounded-full bg-[var(--color-primary)] shrink-0" />}
+                          <div className="min-w-0 flex-1">
+                            <p className={cn("text-sm truncate", !notif.read ? "font-medium text-gray-900" : "text-gray-700")}>{notif.title}</p>
+                            <p className="text-xs text-gray-500 mt-0.5 truncate">{notif.message}</p>
+                            <p className="text-xs text-gray-400 mt-0.5">{fmtRelative(notif.createdAt)}</p>
+                          </div>
+                        </div>
                       </div>
-                      <div className="min-w-0">
-                        <p className="text-sm text-gray-900">{entry.message}</p>
-                        <div className="flex items-center gap-2 mt-0.5">
-                          <span className="text-xs text-gray-500">
-                            {entry.user.name || entry.user.email}
-                          </span>
-                          <span className="text-xs text-gray-400">·</span>
-                          <span className="text-xs text-gray-400">
-                            {fmtRelative(entry.createdAt)}
-                          </span>
+                    )
+                  )}
+                </div>
+              )}
+            </div>
+          </div>
+
+          <div>
+            <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3">{t("activity")}</h2>
+            <div className="bg-white rounded-xl border border-gray-200 overflow-hidden">
+              {recentActivity.length === 0 ? (
+                <div className="p-6 text-center">
+                  <Activity className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+                  <p className="text-sm text-gray-500">{t("noActivityYet")}</p>
+                  <p className="text-xs text-gray-400 mt-1">{t("activityWillAppear")}</p>
+                </div>
+              ) : (
+                <div className="divide-y divide-gray-100">
+                  {recentActivity.map(
+                    (entry: { id: string; action: string; message: string; createdAt: Date; user: { name: string | null; email: string }; project: { name: string } }) => (
+                      <div key={entry.id} className="px-4 py-3">
+                        <div className="flex items-start gap-2">
+                          <div className="mt-0.5 shrink-0">{getActivityIcon(entry.action)}</div>
+                          <div className="min-w-0">
+                            <p className="text-sm text-gray-900">{entry.message}</p>
+                            <div className="flex items-center gap-2 mt-0.5">
+                              <span className="text-xs text-gray-500">{entry.user.name || entry.user.email}</span>
+                              <span className="text-xs text-gray-400">·</span>
+                              <span className="text-xs text-gray-400">{fmtRelative(entry.createdAt)}</span>
+                            </div>
+                          </div>
                         </div>
                       </div>
-                    </div>
-                  </div>
-                ))}
-              </div>
-            )}
+                    )
+                  )}
+                </div>
+              )}
+            </div>
           </div>
 
-          {/* Quick Links */}
-          <div className="mt-4 space-y-2">
+          <div className="space-y-2">
             <Link
               href="/dashboard/directory"
-              className="flex items-center justify-between p-3 bg-white rounded-xl border border-gray-200 hover:border-blue-300 transition-colors"
+              className="flex items-center justify-between p-3 bg-white rounded-xl border border-gray-200 hover:border-[var(--color-primary-light)] transition-colors"
             >
               <span className="flex items-center gap-2 text-sm font-medium text-gray-700">
                 <Users className="w-4 h-4 text-gray-400" />
-                Directory
+                {tn("directory")}
               </span>
               <ArrowRight className="w-4 h-4 text-gray-400" />
             </Link>
             <Link
-              href="/dashboard/notifications"
-              className="flex items-center justify-between p-3 bg-white rounded-xl border border-gray-200 hover:border-blue-300 transition-colors"
+              href="/dashboard/settings"
+              className="flex items-center justify-between p-3 bg-white rounded-xl border border-gray-200 hover:border-[var(--color-primary-light)] transition-colors"
             >
               <span className="flex items-center gap-2 text-sm font-medium text-gray-700">
-                <Activity className="w-4 h-4 text-gray-400" />
-                Notifications
+                <Building2 className="w-4 h-4 text-gray-400" />
+                {tn("settings")}
               </span>
-              <ArrowRight className="w-4 h-4 text-gray-400" />
+              <ArrowRight className="w-4 h-4" />
             </Link>
           </div>
         </div>
       </div>
+
+      {/* Analytics Charts */}
+      {analytics && <AnalyticsWidgets data={analytics} />}
     </div>
   );
 }
@@ -464,43 +534,35 @@ export default async function DashboardPage() {
 // ── Helper Components ──
 
 function WidgetCard({
-  icon,
-  label,
-  value,
-  color,
-  detail,
+  icon, label, value, valueSuffix, color, detail,
 }: {
-  icon: React.ReactNode;
-  label: string;
-  value: number;
-  color: "blue" | "red" | "green" | "purple";
-  detail: string;
+  icon: React.ReactNode; label: string; value: number;
+  valueSuffix?: string; color: "blue" | "red" | "green" | "purple" | "amber"; detail: string;
 }) {
   const colorMap = {
-    blue: "bg-blue-50 text-blue-600 border-blue-100",
+    blue: "bg-[var(--color-primary-bg)] text-[var(--color-primary)] border-[var(--color-primary-bg)]",
     red: "bg-red-50 text-red-600 border-red-100",
     green: "bg-green-50 text-green-600 border-green-100",
     purple: "bg-purple-50 text-purple-600 border-purple-100",
+    amber: "bg-amber-50 text-amber-600 border-amber-100",
   };
-
   const iconBg = {
-    blue: "bg-blue-100 text-blue-600",
+    blue: "bg-[var(--color-primary-bg)] text-[var(--color-primary)]",
     red: "bg-red-100 text-red-600",
     green: "bg-green-100 text-green-600",
     purple: "bg-purple-100 text-purple-600",
+    amber: "bg-amber-100 text-amber-600",
   };
 
   return (
-    <div
-      className={cn(
-        "rounded-xl border p-4 transition-colors",
-        colorMap[color]
-      )}
-    >
+    <div className={cn("rounded-xl border p-4 transition-colors min-w-[140px] sm:min-w-0 shrink-0 sm:shrink", colorMap[color])}>
       <div className="flex items-center gap-3">
         <div className={cn("p-2 rounded-lg", iconBg[color])}>{icon}</div>
         <div>
-          <p className="text-2xl font-bold">{value}</p>
+          <p className="text-2xl font-bold">
+            {value}
+            {valueSuffix && <span className="text-base font-semibold">{valueSuffix}</span>}
+          </p>
           <p className="text-xs font-medium opacity-80">{label}</p>
         </div>
       </div>
@@ -509,18 +571,18 @@ function WidgetCard({
   );
 }
 
-function getGreeting(): string {
+function getGreeting(t: (key: string) => string): string {
   const hour = new Date().getHours();
-  if (hour < 12) return "Good morning";
-  if (hour < 17) return "Good afternoon";
-  return "Good evening";
+  if (hour < 12) return t("goodMorning");
+  if (hour < 17) return t("goodAfternoon");
+  return t("goodEvening");
 }
 
 function getActivityIcon(action: string): React.ReactNode {
   const iconClass = "w-4 h-4";
   switch (action) {
     case "PHASE_STATUS_CHANGED":
-      return <HardHat className={cn(iconClass, "text-blue-500")} />;
+      return <HardHat className={cn(iconClass, "text-[var(--color-primary)]")} />;
     case "STAFF_ASSIGNED":
     case "STAFF_UNASSIGNED":
       return <Users className={cn(iconClass, "text-purple-500")} />;
diff --git a/src/app/dashboard/projects/[id]/page.tsx b/src/app/dashboard/projects/[id]/page.tsx
index 4267a4b..687e0be 100644
--- a/src/app/dashboard/projects/[id]/page.tsx
+++ b/src/app/dashboard/projects/[id]/page.tsx
@@ -1,11 +1,635 @@
-import { redirect } from "next/navigation";
+import { db } from "@/lib/db";
+import { auth } from "@/lib/auth";
+import { notFound, redirect } from "next/navigation";
+import Link from "next/link";
+import {
+  ArrowLeft,
+  Calendar,
+  MapPin,
+  DollarSign,
+  Users,
+  HardHat,
+  AlertTriangle,
+  CheckCircle2,
+  Clock,
+  ClipboardCheck,
+  FileText,
+  Camera,
+  ChevronRight,
+  Activity,
+  Eye,
+  TrendingUp,
+  Edit,
+  Plus,
+} from "lucide-react";
+import { cn, statusColor, statusLabel, fmtShort, fmtLong, fmtRelative } from "@/lib/utils";
+import { can } from "@/lib/permissions";
+import { BudgetSection } from "@/components/project/BudgetSection";
+import { TeamSection } from "@/components/project/TeamSection";
+import { ClientTokenSection } from "@/components/project/ClientTokenSection";
+import { DailyLogSection } from "@/components/project/DailyLogSection";
+import { getProjectInvitations } from "@/actions/invitations";
 
-// Project overview redirects to timeline view
-export default async function ProjectPage({
+export default async function ProjectOverviewPage({
   params,
 }: {
   params: Promise<{ id: string }>;
 }) {
+  const session = await auth();
+  if (!session?.user) redirect("/login");
+
   const { id } = await params;
-  redirect(`/dashboard/projects/${id}/timeline`);
+
+  const [project, recentActivity] = await Promise.all([
+    db.project.findUnique({
+      where: { id },
+      include: {
+        phases: {
+          include: {
+            assignments: {
+              include: {
+                staff: { select: { id: true, name: true, company: true, role: true } },
+              },
+            },
+            checklist: {
+              include: {
+                items: { select: { id: true, completed: true } },
+              },
+            },
+            _count: { select: { documents: true, photos: true } },
+          },
+          orderBy: { sortOrder: "asc" },
+        },
+        members: {
+          include: {
+            user: { select: { id: true, name: true, email: true, role: true, image: true } },
+          },
+        },
+      },
+    }),
+    db.activityLog
+      .findMany({
+        where: { projectId: id },
+        include: {
+          user: { select: { name: true, email: true } },
+        },
+        orderBy: { createdAt: "desc" },
+        take: 5,
+      })
+      .catch(() => [] as never[]),
+  ]);
+
+  if (!project) notFound();
+
+  const now = new Date();
+  const phases = project.phases;
+
+  // Compute stats
+  const activePhases = phases.filter(
+    (p: typeof phases[0]) =>
+      p.status === "IN_PROGRESS" ||
+      p.status === "REVIEW_REQUESTED" ||
+      p.status === "UNDER_REVIEW"
+  );
+  const completedPhases = phases.filter((p: typeof phases[0]) => p.status === "COMPLETE");
+  const overduePhases = phases.filter(
+    (p: typeof phases[0]) => p.status !== "COMPLETE" && new Date(p.estEnd) < now
+  );
+  const reviewPhases = phases.filter((p: typeof phases[0]) => p.status === "REVIEW_REQUESTED");
+  const overallProgress =
+    phases.length > 0
+      ? Math.round((completedPhases.length / phases.length) * 100)
+      : 0;
+
+  // Checklist stats
+  const allChecklistItems = phases.flatMap(
+    (p: typeof phases[0]) => p.checklist?.items || []
+  );
+  const completedChecklistItems = allChecklistItems.filter((i: { completed: boolean }) => i.completed);
+  const checklistPercent =
+    allChecklistItems.length > 0
+      ? Math.round(
+          (completedChecklistItems.length / allChecklistItems.length) * 100
+        )
+      : 0;
+
+  // Document and photo counts
+  const totalDocs = phases.reduce((sum: number, p: typeof phases[0]) => sum + p._count.documents, 0);
+  const totalPhotos = phases.reduce((sum: number, p: typeof phases[0]) => sum + p._count.photos, 0);
+
+  // Budget calculations
+  const totalBudget = project.budget ? Number(project.budget) : 0;
+  const totalSpent = phases.reduce((sum: number, p: typeof phases[0]) => {
+    const cost = p.actualCost ? Number(p.actualCost) : 0;
+    return sum + cost;
+  }, 0);
+  const totalRemaining = totalBudget - totalSpent;
+  const budgetPercent = totalBudget > 0 ? Math.round((totalSpent / totalBudget) * 100) : 0;
+
+  const userRole = session.user.role || "VIEWER";
+  const canManageBudget = can(userRole, "manage", "phase");
+  const canInvite = can(userRole, "create", "member");
+  const canEditProject = can(userRole, "update", "project");
+
+  // Fetch pending invitations for the team section
+  const invitations = canInvite
+    ? await getProjectInvitations(id).catch(() => [])
+    : [];
+  // Fetch daily logs
+  const dailyLogs = await (db as any).dailyLog.findMany({
+    where: { projectId: id },
+    orderBy: { date: "desc" },
+    take: 20,
+  }).catch(() => []);
+
+  // Fetch client portal tokens (PM/Admin only)
+  const clientTokens = canManageBudget
+    ? await (db as any).clientToken.findMany({ where: { projectId: id }, orderBy: { createdAt: "desc" } }).catch(() => [])
+    : [];
+
+  const budgetPhases = phases.map((p: typeof phases[number]) => ({
+    id: p.id,
+    name: p.name,
+    status: p.status,
+    estimatedCost: p.estimatedCost ? Number(p.estimatedCost) : null,
+    actualCost: p.actualCost ? Number(p.actualCost) : null,
+  }));
+
+  return (
+    <div className="p-4 sm:p-6 max-w-7xl mx-auto space-y-4 sm:space-y-6">
+      {/* Navigation Breadcrumb */}
+      <Link
+        href="/dashboard"
+        className="inline-flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700"
+      >
+        <ArrowLeft className="w-4 h-4" />
+        Back to Dashboard
+      </Link>
+
+      {/* Project Header */}
+      <div className="space-y-3">
+        <div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3">
+          <div className="flex-1">
+            <h1 className="text-2xl sm:text-3xl font-bold text-gray-900">{project.name}</h1>
+            <div className="flex flex-wrap items-center gap-x-4 gap-y-2 mt-2 text-sm text-gray-600">
+              {project.address && (
+                <span className="flex items-center gap-1.5">
+                  <MapPin className="w-4 h-4 text-gray-400" />
+                  {project.address}
+                </span>
+              )}
+              {project.estCompletion && (
+                <span className="flex items-center gap-1.5">
+                  <Calendar className="w-4 h-4 text-gray-400" />
+                  Est. {fmtLong(project.estCompletion)}
+                </span>
+              )}
+            </div>
+          </div>
+          <div className="flex items-center gap-2 shrink-0">
+            <span
+              className={cn(
+                "text-xs font-medium px-3 py-1 rounded-full whitespace-nowrap",
+                statusColor(project.status)
+              )}
+            >
+              {statusLabel(project.status)}
+            </span>
+            {canEditProject && (
+              <Link
+                href={`/dashboard/projects/${id}/edit`}
+                className="inline-flex items-center gap-2 px-3 py-1.5 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium transition-colors"
+              >
+                <Edit className="w-4 h-4" />
+                <span className="hidden sm:inline">Edit</span>
+              </Link>
+            )}
+            <Link
+              href={`/dashboard/projects/${id}/timeline`}
+              className="inline-flex items-center gap-2 px-3 py-1.5 bg-[var(--color-primary)] text-white rounded-lg text-sm font-medium hover:bg-[var(--color-primary-dark)] transition-colors"
+            >
+              <Calendar className="w-4 h-4" />
+              <span className="hidden sm:inline">Timeline</span>
+            </Link>
+          </div>
+        </div>
+      </div>
+
+      {/* Budget Summary Cards */}
+      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
+        <BudgetCard
+          label="Total Budget"
+          value={totalBudget}
+          icon={<DollarSign className="w-5 h-5" />}
+          color="blue"
+        />
+        <BudgetCard
+          label="Total Spent"
+          value={totalSpent}
+          icon={<TrendingUp className="w-5 h-5" />}
+          color={budgetPercent > 80 ? "red" : "amber"}
+        />
+        <BudgetCard
+          label="Remaining"
+          value={totalRemaining}
+          icon={<CheckCircle2 className="w-5 h-5" />}
+          color={totalRemaining < 0 ? "red" : "green"}
+        />
+        <div className="bg-white rounded-xl border border-gray-200 p-4 sm:p-5">
+          <div className="flex items-start justify-between mb-3">
+            <span className="text-xs font-semibold uppercase text-gray-600 tracking-wide">Budget Used</span>
+            <span className="text-2xl font-bold text-gray-900">{budgetPercent}%</span>
+          </div>
+          <div className="w-full bg-gray-100 rounded-full h-2.5">
+            <div
+              className="h-2.5 rounded-full transition-all"
+              style={{
+                width: `${Math.min(budgetPercent, 100)}%`,
+                backgroundColor:
+                  budgetPercent > 100 ? "#dc2626" :
+                  budgetPercent > 80 ? "#ea580c" :
+                  budgetPercent > 50 ? "#f59e0b" :
+                  "var(--color-primary)",
+              }}
+            />
+          </div>
+          <p className="text-xs text-gray-500 mt-2">
+            {budgetPercent > 100
+              ? `Over budget by $${Math.abs(totalRemaining).toLocaleString()}`
+              : `$${totalRemaining.toLocaleString()} remaining`
+            }
+          </p>
+        </div>
+      </div>
+
+      {/* Timeline Preview */}
+      <div className="bg-white rounded-xl border border-gray-200 p-5">
+        <div className="flex items-center justify-between mb-4">
+          <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
+            Project Progress
+          </h2>
+          <Link
+            href={`/dashboard/projects/${id}/timeline`}
+            className="text-xs text-[var(--color-primary)] hover:underline font-medium"
+          >
+            View full timeline
+          </Link>
+        </div>
+        <div className="space-y-3">
+          <div>
+            <div className="flex items-center justify-between mb-2">
+              <span className="text-sm font-medium text-gray-700">Phases Completed</span>
+              <span className="text-sm font-bold text-gray-900">{overallProgress}%</span>
+            </div>
+            <div className="w-full bg-gray-100 rounded-full h-3">
+              <div
+                className="h-3 rounded-full transition-all"
+                style={{
+                  width: `${overallProgress}%`,
+                  backgroundColor:
+                    overallProgress === 100 ? "#16a34a" : "var(--color-primary)",
+                }}
+              />
+            </div>
+            <p className="text-xs text-gray-500 mt-1.5">
+              {completedPhases.length} of {phases.length} phases complete
+            </p>
+          </div>
+        </div>
+      </div>
+
+      {/* Quick Stats */}
+      <div className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3">
+        <StatCard
+          icon={<HardHat className="w-4 h-4" />}
+          label="Active"
+          value={activePhases.length}
+          color="blue"
+        />
+        <StatCard
+          icon={<Eye className="w-4 h-4" />}
+          label="Review"
+          value={reviewPhases.length}
+          color={reviewPhases.length > 0 ? "amber" : "green"}
+        />
+        <StatCard
+          icon={<AlertTriangle className="w-4 h-4" />}
+          label="Overdue"
+          value={overduePhases.length}
+          color={overduePhases.length > 0 ? "red" : "green"}
+        />
+        <StatCard
+          icon={<ClipboardCheck className="w-4 h-4" />}
+          label="Checklist"
+          value={`${checklistPercent}%`}
+          color={checklistPercent >= 80 ? "green" : "blue"}
+        />
+        <StatCard
+          icon={<FileText className="w-4 h-4" />}
+          label="Documents"
+          value={totalDocs}
+          color="purple"
+        />
+        <StatCard
+          icon={<Camera className="w-4 h-4" />}
+          label="Photos"
+          value={totalPhotos}
+          color="purple"
+        />
+      </div>
+
+      {/* Budget */}
+      <BudgetSection
+        projectId={id}
+        projectBudget={project.budget ? Number(project.budget) : null}
+        phases={budgetPhases}
+        canManage={canManageBudget}
+      />
+
+      {/* Daily Logs */}
+      <DailyLogSection
+        projectId={id}
+        logs={dailyLogs}
+        canCreate={can(userRole, "create", "document")}
+      />
+
+      {/* Main content */}
+      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
+        {/* Left: Phase list */}
+        <div className="lg:col-span-2 space-y-4">
+          <div className="flex items-center justify-between">
+            <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
+              All Phases
+            </h2>
+            {canEditProject && (
+              <Link
+                href={`/dashboard/projects/${id}/phases/new`}
+                className="inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-[var(--color-primary)] hover:bg-[var(--color-primary-bg)] rounded-lg transition-colors"
+              >
+                <Plus className="w-4 h-4" />
+                <span className="hidden sm:inline">Add Phase</span>
+              </Link>
+            )}
+          </div>
+          <div className="space-y-2">
+            {phases.map((phase: typeof phases[0]) => {
+              const isOverdue =
+                phase.status !== "COMPLETE" && new Date(phase.estEnd) < now;
+              const checkItems = phase.checklist?.items || [];
+              const checkDone = checkItems.filter((i: { completed: boolean }) => i.completed).length;
+              const owner = phase.assignments.find(
+                (a: { isOwner: boolean }) => a.isOwner
+              );
+
+              return (
+                <Link
+                  key={phase.id}
+                  href={`/dashboard/projects/${id}/phases/${phase.id}`}
+                  className="flex items-center gap-4 p-4 bg-white rounded-xl border border-gray-200 hover:border-[var(--color-primary-light)] hover:shadow-sm transition-all group"
+                >
+                  {/* Status indicator */}
+                  <div
+                    className={cn(
+                      "w-2 h-2 rounded-full shrink-0",
+                      phase.status === "COMPLETE"
+                        ? "bg-green-500"
+                        : phase.status === "IN_PROGRESS"
+                        ? "bg-blue-500"
+                        : phase.status === "REVIEW_REQUESTED"
+                        ? "bg-amber-500"
+                        : phase.status === "UNDER_REVIEW"
+                        ? "bg-purple-500"
+                        : "bg-gray-300"
+                    )}
+                  />
+
+                  <div className="flex-1 min-w-0">
+                    <div className="flex items-center gap-2">
+                      <span className="text-sm font-medium text-gray-900 truncate">
+                        {phase.name}
+                      </span>
+                      {phase.isMilestone && (
+                        <span className="text-[10px] font-medium px-1.5 py-0.5 bg-amber-100 text-amber-700 rounded">
+                          Milestone
+                        </span>
+                      )}
+                    </div>
+                    <div className="flex items-center gap-3 mt-0.5 text-xs text-gray-500">
+                      <span>
+                        {fmtShort(phase.estStart)} — {fmtShort(phase.estEnd)}
+                      </span>
+                      {owner && (
+                        <span className="truncate">
+                          {owner.staff.name}
+                        </span>
+                      )}
+                      {checkItems.length > 0 && (
+                        <span>
+                          {checkDone}/{checkItems.length} items
+                        </span>
+                      )}
+                    </div>
+                  </div>
+
+                  {/* Counters — hidden on very small screens */}
+                  <div className="hidden sm:flex items-center gap-3 shrink-0">
+                    {phase._count.documents > 0 && (
+                      <span className="flex items-center gap-1 text-xs text-gray-400">
+                        <FileText className="w-3.5 h-3.5" />
+                        {phase._count.documents}
+                      </span>
+                    )}
+                    {phase._count.photos > 0 && (
+                      <span className="flex items-center gap-1 text-xs text-gray-400">
+                        <Camera className="w-3.5 h-3.5" />
+                        {phase._count.photos}
+                      </span>
+                    )}
+                  </div>
+
+                  {/* Status badge */}
+                  <span
+                    className={cn(
+                      "text-xs font-medium px-2 py-0.5 rounded-full whitespace-nowrap shrink-0",
+                      isOverdue
+                        ? "bg-red-100 text-red-700"
+                        : statusColor(phase.status)
+                    )}
+                  >
+                    {isOverdue ? "Overdue" : statusLabel(phase.status)}
+                  </span>
+
+                  <ChevronRight className="w-4 h-4 text-gray-300 group-hover:text-[var(--color-primary)] transition-colors shrink-0" />
+                </Link>
+              );
+            })}
+          </div>
+        </div>
+
+        {/* Right: Team + Activity */}
+        <div className="space-y-5">
+          {/* Team */}
+          <TeamSection
+            projectId={id}
+            members={project.members.map((m: { id: string; role: string; user: { id: string; name: string | null; email: string; role: string; image: string | null } }) => ({
+              id: m.id,
+              role: m.role,
+              user: m.user,
+            }))}
+            invitations={invitations.map((inv: { id: string; email: string; role: string; expiresAt: Date; createdAt: Date }) => ({
+              id: inv.id,
+              email: inv.email,
+              role: inv.role,
+              expiresAt: inv.expiresAt,
+              createdAt: inv.createdAt,
+            }))}
+            canInvite={canInvite}
+          />
+
+          {/* Client Portal Links */}
+          {canManageBudget && clientTokens.length >= 0 && (
+            <ClientTokenSection projectId={id} tokens={clientTokens} />
+          )}
+
+          {/* Recent Activity */}
+          <div>
+            <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3">
+              Recent Activity
+            </h2>
+            <div className="bg-white rounded-xl border border-gray-200 overflow-hidden">
+              {recentActivity.length === 0 ? (
+                <div className="p-6 text-center">
+                  <Activity className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+                  <p className="text-sm text-gray-500">No activity yet</p>
+                </div>
+              ) : (
+                <div className="divide-y divide-gray-100">
+                  {recentActivity.slice(0, 5).map(
+                    (entry: { id: string; action: string; message: string; createdAt: Date; user: { name: string | null; email: string } }) => (
+                      <div key={entry.id} className="px-4 py-3 hover:bg-gray-50 transition-colors">
+                        <div className="flex items-start gap-3">
+                          <div className="mt-0.5 shrink-0">
+                            {getActivityIcon(entry.action)}
+                          </div>
+                          <div className="min-w-0 flex-1">
+                            <p className="text-sm font-medium text-gray-900">
+                              {entry.message}
+                            </p>
+                            <div className="flex items-center gap-2 mt-1">
+                              <span className="text-xs text-gray-500">
+                                {entry.user.name || entry.user.email}
+                              </span>
+                              <span className="text-xs text-gray-400">·</span>
+                              <span className="text-xs text-gray-400">
+                                {fmtRelative(entry.createdAt)}
+                              </span>
+                            </div>
+                          </div>
+                        </div>
+                      </div>
+                    )
+                  )}
+                </div>
+              )}
+            </div>
+          </div>
+        </div>
+      </div>
+    </div>
+  );
+}
+
+// ── Helper Components ──
+
+function BudgetCard({
+  label,
+  value,
+  icon,
+  color,
+}: {
+  label: string;
+  value: number;
+  icon: React.ReactNode;
+  color: "blue" | "red" | "green" | "amber";
+}): React.ReactNode {
+  const colorMap: Record<string, string> = {
+    blue: "bg-[var(--color-primary-bg)] text-[var(--color-primary)] border-[var(--color-primary-bg)]",
+    red: "bg-red-50 text-red-600 border-red-100",
+    green: "bg-green-50 text-green-600 border-green-100",
+    amber: "bg-amber-50 text-amber-600 border-amber-100",
+  };
+
+  const iconBg: Record<string, string> = {
+    blue: "bg-[var(--color-primary-bg)] text-[var(--color-primary)]",
+    red: "bg-red-100 text-red-600",
+    green: "bg-green-100 text-green-600",
+    amber: "bg-amber-100 text-amber-600",
+  };
+
+  return (
+    <div className={cn("rounded-xl border p-4 sm:p-5", colorMap[color])}>
+      <div className="flex items-start justify-between mb-3">
+        <div className={cn("p-2 rounded-lg", iconBg[color])}>
+          {icon}
+        </div>
+        <span className="text-xs font-semibold uppercase text-current opacity-70">
+          {label}
+        </span>
+      </div>
+      <p className="text-2xl font-bold text-current">
+        ${value.toLocaleString()}
+      </p>
+    </div>
+  );
+}
+
+function StatCard({
+  icon,
+  label,
+  value,
+  color,
+}: {
+  icon: React.ReactNode;
+  label: string;
+  value: number | string;
+  color: "blue" | "red" | "green" | "purple" | "amber";
+}): React.ReactNode {
+  const colors: Record<string, string> = {
+    blue: "bg-[var(--color-primary-bg)] text-[var(--color-primary)]",
+    red: "bg-red-50 text-red-600",
+    green: "bg-green-50 text-green-600",
+    purple: "bg-purple-50 text-purple-600",
+    amber: "bg-amber-50 text-amber-600",
+  };
+
+  return (
+    <div className={cn("rounded-xl p-3 text-center", colors[color])}>
+      <div className="flex justify-center mb-1">{icon}</div>
+      <p className="text-xl font-bold">{value}</p>
+      <p className="text-[10px] font-medium uppercase opacity-70">{label}</p>
+    </div>
+  );
+}
+
+function getActivityIcon(action: string): React.ReactNode {
+  const iconClass = "w-4 h-4";
+  switch (action) {
+    case "PHASE_STATUS_CHANGED":
+      return <HardHat className={cn(iconClass, "text-[var(--color-primary)]")} />;
+    case "PHASE_CREATED":
+      return <TrendingUp className={cn(iconClass, "text-green-500")} />;
+    case "STAFF_ASSIGNED":
+    case "STAFF_UNASSIGNED":
+      return <Users className={cn(iconClass, "text-purple-500")} />;
+    case "CHECKLIST_APPLIED":
+    case "CHECKLIST_ITEM_TOGGLED":
+      return <ClipboardCheck className={cn(iconClass, "text-green-500")} />;
+    case "DOCUMENT_UPLOADED":
+    case "DOCUMENT_STATUS_CHANGED":
+      return <FileText className={cn(iconClass, "text-amber-500")} />;
+    case "PHOTO_UPLOADED":
+      return <Camera className={cn(iconClass, "text-pink-500")} />;
+    default:
+      return <Activity className={cn(iconClass, "text-gray-400")} />;
+  }
 }
diff --git a/src/app/dashboard/projects/[id]/phases/[phaseId]/page.tsx b/src/app/dashboard/projects/[id]/phases/[phaseId]/page.tsx
index 08c3b19..f6ce145 100644
--- a/src/app/dashboard/projects/[id]/phases/[phaseId]/page.tsx
+++ b/src/app/dashboard/projects/[id]/phases/[phaseId]/page.tsx
@@ -7,6 +7,13 @@ import { PhaseInfoSection } from "@/components/phase/PhaseInfoSection";
 import { AssignmentSection } from "@/components/phase/AssignmentSection";
 import { ChecklistSection } from "@/components/phase/ChecklistSection";
 import { DocumentSection } from "@/components/phase/DocumentSection";
+import { PhotoSection } from "@/components/phase/PhotoSection";
+import { CommentSection } from "@/components/phase/CommentSection";
+import { InspectionSection } from "@/components/phase/InspectionSection";
+import { SubcontractorBidSection } from "@/components/phase/SubcontractorBidSection";
+import { MaterialSection } from "@/components/phase/MaterialSection";
+import { ChangeOrderSection } from "@/components/phase/ChangeOrderSection";
+import { getPhaseComments } from "@/actions/comments";
 
 export default async function PhaseDetailPage({
   params,
@@ -47,6 +54,7 @@ export default async function PhaseDetailPage({
       photos: {
         include: {
           uploadedBy: { select: { id: true, name: true } },
+          flaggedBy: { select: { name: true } },
         },
         orderBy: { takenAt: "desc" },
       },
@@ -55,16 +63,36 @@ export default async function PhaseDetailPage({
 
   if (!phase || phase.project.id !== projectId) notFound();
 
-  // Get all staff for assignment modal
-  const allStaff = await db.staff.findMany({
-    orderBy: { name: "asc" },
-  });
+  const dbc = db as any;
 
-  // Get checklist templates for template picker
-  const templates = await db.checklistTemplate.findMany({
-    include: { items: { orderBy: { order: "asc" } } },
-    orderBy: { name: "asc" },
-  });
+  const [comments, allStaff, templates, inspections, bids, materials, changeOrders] = await Promise.all([
+    getPhaseComments(phaseId),
+    db.staff.findMany({ orderBy: { name: "asc" } }),
+    db.checklistTemplate.findMany({
+      include: { items: { orderBy: { order: "asc" } } },
+      orderBy: { name: "asc" },
+    }),
+    dbc.inspection.findMany({
+      where: { phaseId },
+      orderBy: { scheduledDate: "asc" },
+    }).catch(() => []),
+    dbc.subcontractorBid.findMany({
+      where: { phaseId },
+      orderBy: { createdAt: "asc" },
+    }).catch(() => []),
+    dbc.material.findMany({
+      where: { phaseId },
+      orderBy: { createdAt: "asc" },
+    }).then((mats: any[]) =>
+      mats.map((m: any) => ({ ...m, cost: m.cost ? Number(m.cost) : null }))
+    ).catch(() => []),
+    dbc.changeOrder.findMany({
+      where: { phaseId },
+      orderBy: { createdAt: "desc" },
+    }).then((cos: any[]) =>
+      cos.map((co: any) => ({ ...co, amount: co.amount ? Number(co.amount) : null }))
+    ).catch(() => []),
+  ]);
 
   const userRole = session.user.role || "VIEWER";
   const canEdit = can(userRole, "update", "phase");
@@ -80,7 +108,7 @@ export default async function PhaseDetailPage({
         canManage={canManage}
       />
 
-      <div className="flex-1 p-6 max-w-5xl mx-auto w-full space-y-6">
+      <div className="flex-1 p-4 sm:p-6 max-w-5xl mx-auto w-full space-y-4 sm:space-y-6">
         <PhaseInfoSection phase={phase} canEdit={canEdit} />
 
         <AssignmentSection
@@ -98,12 +126,53 @@ export default async function PhaseDetailPage({
           canManage={canManage}
         />
 
+        <InspectionSection
+          phaseId={phaseId}
+          inspections={inspections}
+          canCreate={canEdit}
+          canRecord={canEdit}
+        />
+
+        <SubcontractorBidSection
+          phaseId={phaseId}
+          bids={bids}
+          canManage={canManage}
+        />
+
+        <MaterialSection
+          phaseId={phaseId}
+          materials={materials}
+          canManage={canManage}
+        />
+
+        <ChangeOrderSection
+          phaseId={phaseId}
+          changeOrders={changeOrders}
+          canCreate={canEdit}
+          canApprove={canManage}
+        />
+
         <DocumentSection
           phaseId={phaseId}
           documents={phase.documents}
           canUpload={can(userRole, "create", "document")}
           canManageStatus={canManage}
         />
+
+        <PhotoSection
+          phaseId={phaseId}
+          photos={phase.photos}
+          canUpload={can(userRole, "create", "photo")}
+          canDelete={can(userRole, "delete", "photo")}
+          canFlag={canManage}
+        />
+
+        <CommentSection
+          phaseId={phaseId}
+          comments={comments}
+          currentUserId={session.user.id}
+          isAdmin={(session.user as any).role === "ADMIN"}
+        />
       </div>
     </div>
   );
diff --git a/src/app/dashboard/projects/[id]/timeline/page.tsx b/src/app/dashboard/projects/[id]/timeline/page.tsx
index de85065..7decdb3 100644
--- a/src/app/dashboard/projects/[id]/timeline/page.tsx
+++ b/src/app/dashboard/projects/[id]/timeline/page.tsx
@@ -42,12 +42,12 @@ export default async function TimelinePage({
 
   // Calculate summary stats
   const lastEstPhase = project.phases
-    .filter((p) => !p.isMilestone)
-    .sort((a, b) => b.estEnd.getTime() - a.estEnd.getTime())[0];
+    .filter((p: typeof project.phases[0]) => !p.isMilestone)
+    .sort((a: typeof project.phases[0], b: typeof project.phases[0]) => b.estEnd.getTime() - a.estEnd.getTime())[0];
 
   const lastWorstPhase = project.phases
-    .filter((p) => !p.isMilestone && p.worstEnd)
-    .sort((a, b) => (b.worstEnd?.getTime() || 0) - (a.worstEnd?.getTime() || 0))[0];
+    .filter((p: typeof project.phases[0]) => !p.isMilestone && p.worstEnd)
+    .sort((a: typeof project.phases[0], b: typeof project.phases[0]) => (b.worstEnd?.getTime() || 0) - (a.worstEnd?.getTime() || 0))[0];
 
   const planApproval = project.planApproval || project.createdAt;
 
@@ -132,7 +132,7 @@ export default async function TimelinePage({
                 Phases
               </p>
               <p className="text-lg font-semibold text-gray-900">
-                {project.phases.filter((p) => p.status === "COMPLETE").length}/
+                {project.phases.filter((p: typeof project.phases[0]) => p.status === "COMPLETE").length}/
                 {project.phases.length}
               </p>
               <p className="text-xs text-gray-500">completed</p>
diff --git a/src/app/dashboard/projects/page.tsx b/src/app/dashboard/projects/page.tsx
index 96d8361..17bc2b1 100644
--- a/src/app/dashboard/projects/page.tsx
+++ b/src/app/dashboard/projects/page.tsx
@@ -5,6 +5,7 @@ import { redirect } from "next/navigation";
 import Link from "next/link";
 import { Plus, FolderKanban, Calendar, Users } from "lucide-react";
 import { cn, statusColor, statusLabel, fmtShort } from "@/lib/utils";
+import { BulkImportButton } from "@/components/dashboard/BulkImportButton";
 
 export default async function ProjectsPage() {
   const session = await auth();
@@ -36,13 +37,16 @@ export default async function ProjectsPage() {
           </p>
         </div>
         {showCreate && (
-          <Link
-            href="/dashboard/projects/new"
-            className="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors"
-          >
-            <Plus className="w-4 h-4" />
-            New Project
-          </Link>
+          <div className="flex items-center gap-2">
+            <BulkImportButton />
+            <Link
+              href="/dashboard/projects/new"
+              className="inline-flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg text-sm font-medium hover:bg-[var(--color-primary-dark)] transition-colors"
+            >
+              <Plus className="w-4 h-4" />
+              New Project
+            </Link>
+          </div>
         )}
       </div>
 
@@ -56,18 +60,21 @@ export default async function ProjectsPage() {
             Create your first project to get started.
           </p>
           {showCreate && (
-            <Link
-              href="/dashboard/projects/new"
-              className="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700"
-            >
-              <Plus className="w-4 h-4" />
-              New Project
-            </Link>
+            <div className="flex items-center justify-center gap-3">
+              <BulkImportButton />
+              <Link
+                href="/dashboard/projects/new"
+                className="inline-flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg text-sm font-medium hover:bg-[var(--color-primary-dark)]"
+              >
+                <Plus className="w-4 h-4" />
+                New Project
+              </Link>
+            </div>
           )}
         </div>
       ) : (
         <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
-          {projects.map((project) => {
+          {projects.map((project: typeof projects[0]) => {
             const completed = project.phases.filter(
               (p: { status: string }) => p.status === "COMPLETE"
             ).length;
@@ -80,7 +87,7 @@ export default async function ProjectsPage() {
               <Link
                 key={project.id}
                 href={`/dashboard/projects/${project.id}/timeline`}
-                className="block bg-white rounded-xl border border-gray-200 p-5 hover:border-blue-300 hover:shadow-md transition-all"
+                className="block bg-white rounded-xl border border-gray-200 p-5 hover:border-[var(--color-primary-light)] hover:shadow-md transition-all"
               >
                 <div className="flex items-start justify-between mb-3">
                   <h3 className="text-base font-semibold text-gray-900 truncate pr-2">
@@ -111,7 +118,7 @@ export default async function ProjectsPage() {
                   </div>
                   <div className="w-full bg-gray-100 rounded-full h-1.5">
                     <div
-                      className="bg-blue-600 h-1.5 rounded-full transition-all"
+                      className="bg-[var(--color-primary)] h-1.5 rounded-full transition-all"
                       style={{ width: `${progress}%` }}
                     />
                   </div>
diff --git a/src/app/dashboard/reports/page.tsx b/src/app/dashboard/reports/page.tsx
new file mode 100644
index 0000000..c5401b8
--- /dev/null
+++ b/src/app/dashboard/reports/page.tsx
@@ -0,0 +1,633 @@
+import { auth } from "@/lib/auth";
+import { redirect } from "next/navigation";
+import Link from "next/link";
+import {
+  getProjectHealthReport,
+  getPhaseStatusBreakdown,
+  getDocumentStats,
+  getActivityTimeline,
+  getTeamPerformance,
+  getOverdueReport,
+} from "@/actions/reports";
+import { cn, statusColor, statusLabel, fmtShort } from "@/lib/utils";
+import { ExportButton } from "@/components/reports/ExportButton";
+import {
+  BarChart3,
+  TrendingUp,
+  AlertTriangle,
+  CheckCircle2,
+  Clock,
+  FileText,
+  Users,
+  Activity,
+  ChevronRight,
+  Shield,
+  HardHat,
+  Camera,
+  ArrowUpRight,
+  ArrowDownRight,
+  Minus,
+} from "lucide-react";
+
+export default async function ReportsPage() {
+  const session = await auth();
+  if (!session?.user) redirect("/login");
+
+  const role = session.user.role;
+  const isAdmin = role === "ADMIN";
+  const isPM = role === "PROJECT_MANAGER";
+
+  // If not admin or PM, show read-only stakeholder view
+  const canManage = isAdmin || isPM;
+
+  const [
+    projectHealth,
+    phaseBreakdown,
+    documentStats,
+    activityTimeline,
+    teamPerformance,
+    overdueReport,
+  ] = await Promise.all([
+    getProjectHealthReport(),
+    getPhaseStatusBreakdown(),
+    getDocumentStats(),
+    getActivityTimeline(30),
+    canManage ? getTeamPerformance() : Promise.resolve([]),
+    getOverdueReport(),
+  ]);
+
+  const totalPhases = phaseBreakdown.reduce((s, p) => s + p.count, 0);
+  const completedPhases =
+    phaseBreakdown.find((p) => p.status === "COMPLETE")?.count || 0;
+  const overallProgress =
+    totalPhases > 0 ? Math.round((completedPhases / totalPhases) * 100) : 0;
+
+  return (
+    <div className="p-4 sm:p-6 max-w-7xl mx-auto space-y-6">
+      {/* Header */}
+      <div className="flex items-center justify-between">
+        <div>
+          <h1 className="text-xl sm:text-2xl font-bold text-gray-900 flex items-center gap-2">
+            <BarChart3 className="w-6 h-6 text-[var(--color-primary)]" />
+            Reports &amp; Analytics
+          </h1>
+          <p className="text-sm text-gray-500 mt-1">
+            {isAdmin
+              ? "Organization-wide overview"
+              : isPM
+              ? "Your project portfolio"
+              : "Project overview"}
+            {" · "}Last 30 days
+          </p>
+        </div>
+        <div className="flex items-center gap-2">
+          {isAdmin && (
+            <span className="inline-flex items-center gap-1.5 px-3 py-1 bg-purple-50 text-purple-700 rounded-full text-xs font-medium">
+              <Shield className="w-3.5 h-3.5" />
+              Admin View
+            </span>
+          )}
+          <ExportButton
+            data={{
+              projectHealth: projectHealth.map((p: typeof projectHealth[number]) => ({
+                project: p.name,
+                status: p.status,
+                phases: p.phases.total,
+                completedPhases: p.phases.completed,
+                progress: p.progress,
+                overdue: p.phases.overdue,
+              })),
+              phaseBreakdown: phaseBreakdown.map((p) => ({
+                status: p.status,
+                count: p.count,
+              })),
+              documentStats: {
+                total: documentStats.total,
+                byStatus: Object.fromEntries(
+                  documentStats.byStatus.map((s: typeof documentStats.byStatus[number]) => [s.status, s.count])
+                ),
+              },
+              overdueReport: overdueReport.map((o: typeof overdueReport[number]) => ({
+                phaseName: o.name,
+                projectName: o.projectName,
+                daysOverdue: o.daysOverdue,
+                owner: o.owner,
+              })),
+              teamPerformance: canManage
+                ? (teamPerformance as Awaited<ReturnType<typeof getTeamPerformance>>).map((t: typeof teamPerformance[number]) => ({
+                    name: t.name,
+                    assigned: t.totalAssignments,
+                    completed: t.completed,
+                    active: t.active,
+                    overdue: t.overdue,
+                  }))
+                : undefined,
+            }}
+          />
+        </div>
+      </div>
+
+      {/* Top-level KPIs */}
+      <div className="grid grid-cols-2 sm:grid-cols-4 gap-3">
+        <KpiCard
+          label="Overall Progress"
+          value={`${overallProgress}%`}
+          icon={<TrendingUp className="w-5 h-5" />}
+          color="blue"
+          detail={`${completedPhases}/${totalPhases} phases done`}
+        />
+        <KpiCard
+          label="Projects"
+          value={projectHealth.length}
+          icon={<HardHat className="w-5 h-5" />}
+          color="blue"
+          detail={`${projectHealth.filter((p: typeof projectHealth[number]) => p.health === "on-track").length} on track`}
+        />
+        <KpiCard
+          label="Overdue"
+          value={overdueReport.length}
+          icon={<AlertTriangle className="w-5 h-5" />}
+          color={overdueReport.length > 0 ? "red" : "green"}
+          detail={
+            overdueReport.length > 0
+              ? `Avg ${Math.round(overdueReport.reduce((s: number, o: typeof overdueReport[number]) => s + o.daysOverdue, 0) / overdueReport.length)}d behind`
+              : "All on schedule"
+          }
+        />
+        <KpiCard
+          label="Activity"
+          value={activityTimeline.totalActions}
+          icon={<Activity className="w-5 h-5" />}
+          color="purple"
+          detail="Actions this month"
+        />
+      </div>
+
+      {/* Main grid */}
+      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
+        {/* Left: 2 columns */}
+        <div className="lg:col-span-2 space-y-6">
+          {/* Phase Status Breakdown */}
+          <div className="bg-white rounded-xl border border-gray-200 p-5">
+            <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-4">
+              Phase Status Distribution
+            </h2>
+            <div className="space-y-3">
+              {phaseBreakdown.map((item) => {
+                const pct =
+                  totalPhases > 0
+                    ? Math.round((item.count / totalPhases) * 100)
+                    : 0;
+                return (
+                  <div key={item.status} className="flex items-center gap-3">
+                    <span
+                      className={cn(
+                        "text-xs font-medium px-2 py-0.5 rounded-full w-32 text-center shrink-0",
+                        statusColor(item.status)
+                      )}
+                    >
+                      {statusLabel(item.status)}
+                    </span>
+                    <div className="flex-1 bg-gray-100 rounded-full h-2.5">
+                      <div
+                        className={cn("h-2.5 rounded-full transition-all", barColor(item.status))}
+                        style={{ width: `${pct}%` }}
+                      />
+                    </div>
+                    <span className="text-sm font-medium text-gray-700 w-14 text-right">
+                      {item.count}{" "}
+                      <span className="text-xs text-gray-400">({pct}%)</span>
+                    </span>
+                  </div>
+                );
+              })}
+            </div>
+          </div>
+
+          {/* Project Health Table */}
+          <div className="bg-white rounded-xl border border-gray-200 overflow-hidden">
+            <div className="px-5 py-4 border-b border-gray-100">
+              <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
+                Project Health
+              </h2>
+            </div>
+            <div className="overflow-x-auto">
+              <table className="w-full text-sm">
+                <thead>
+                  <tr className="bg-gray-50 text-left">
+                    <th className="px-5 py-2.5 font-medium text-gray-600">
+                      Project
+                    </th>
+                    <th className="px-3 py-2.5 font-medium text-gray-600 text-center">
+                      Status
+                    </th>
+                    <th className="px-3 py-2.5 font-medium text-gray-600 text-center hidden sm:table-cell">
+                      Phases
+                    </th>
+                    <th className="px-3 py-2.5 font-medium text-gray-600 text-center">
+                      Progress
+                    </th>
+                    <th className="px-3 py-2.5 font-medium text-gray-600 text-center">
+                      Health
+                    </th>
+                  </tr>
+                </thead>
+                <tbody className="divide-y divide-gray-100">
+                  {projectHealth.map((project: typeof projectHealth[number]) => (
+                    <tr key={project.id} className="hover:bg-gray-50">
+                      <td className="px-5 py-3">
+                        <Link
+                          href={`/dashboard/projects/${project.id}`}
+                          className="font-medium text-gray-900 hover:text-[var(--color-primary)]"
+                        >
+                          {project.name}
+                        </Link>
+                        {project.address && (
+                          <p className="text-xs text-gray-500 mt-0.5">
+                            {project.address}
+                          </p>
+                        )}
+                      </td>
+                      <td className="px-3 py-3 text-center">
+                        <span
+                          className={cn(
+                            "text-xs font-medium px-2 py-0.5 rounded-full",
+                            statusColor(project.status)
+                          )}
+                        >
+                          {statusLabel(project.status)}
+                        </span>
+                      </td>
+                      <td className="px-3 py-3 text-center hidden sm:table-cell">
+                        <span className="text-gray-700">
+                          {project.phases.completed}/{project.phases.total}
+                        </span>
+                      </td>
+                      <td className="px-3 py-3">
+                        <div className="flex items-center gap-2 justify-center">
+                          <div className="w-16 bg-gray-100 rounded-full h-1.5">
+                            <div
+                              className="h-1.5 rounded-full bg-[var(--color-primary)]"
+                              style={{ width: `${project.progress}%` }}
+                            />
+                          </div>
+                          <span className="text-xs text-gray-600">
+                            {project.progress}%
+                          </span>
+                        </div>
+                      </td>
+                      <td className="px-3 py-3 text-center">
+                        <HealthBadge health={project.health} />
+                      </td>
+                    </tr>
+                  ))}
+                </tbody>
+              </table>
+            </div>
+          </div>
+
+          {/* Overdue Report */}
+          {overdueReport.length > 0 && (
+            <div className="bg-white rounded-xl border border-red-200 overflow-hidden">
+              <div className="px-5 py-4 border-b border-red-100 bg-red-50">
+                <h2 className="text-sm font-semibold text-red-800 uppercase tracking-wide flex items-center gap-2">
+                  <AlertTriangle className="w-4 h-4" />
+                  Overdue Phases ({overdueReport.length})
+                </h2>
+              </div>
+              <div className="divide-y divide-gray-100">
+                {overdueReport.map((phase: typeof overdueReport[number]) => (
+                  <Link
+                    key={phase.id}
+                    href={`/dashboard/projects/${phase.projectId}/phases/${phase.id}`}
+                    className="flex items-center gap-4 px-5 py-3 hover:bg-red-50/30 transition-colors group"
+                  >
+                    <div className="flex-1 min-w-0">
+                      <p className="text-sm font-medium text-gray-900 truncate">
+                        {phase.name}
+                      </p>
+                      <p className="text-xs text-gray-500">
+                        {phase.projectName} · {phase.owner}
+                      </p>
+                    </div>
+                    <div className="text-right shrink-0">
+                      <span className="text-sm font-semibold text-red-600">
+                        {phase.daysOverdue}d
+                      </span>
+                      <p className="text-xs text-gray-400">
+                        Due {fmtShort(phase.estEnd)}
+                      </p>
+                    </div>
+                    <div className="flex items-center gap-2 shrink-0">
+                      <div className="w-12 bg-gray-100 rounded-full h-1.5">
+                        <div
+                          className="h-1.5 rounded-full bg-red-500"
+                          style={{ width: `${phase.progress}%` }}
+                        />
+                      </div>
+                      <span className="text-xs text-gray-500">
+                        {phase.progress}%
+                      </span>
+                    </div>
+                    <ChevronRight className="w-4 h-4 text-gray-300 group-hover:text-red-500 shrink-0" />
+                  </Link>
+                ))}
+              </div>
+            </div>
+          )}
+        </div>
+
+        {/* Right column */}
+        <div className="space-y-6">
+          {/* Document Stats */}
+          <div className="bg-white rounded-xl border border-gray-200 p-5">
+            <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-4">
+              Documents
+            </h2>
+            <div className="text-center mb-4">
+              <p className="text-3xl font-bold text-gray-900">
+                {documentStats.total}
+              </p>
+              <p className="text-xs text-gray-500">Total documents</p>
+            </div>
+            <div className="space-y-2">
+              <p className="text-xs text-gray-500 font-medium uppercase tracking-wide">
+                By Status
+              </p>
+              {documentStats.byStatus.map((s: typeof documentStats.byStatus[number]) => (
+                <div key={s.status} className="flex items-center justify-between">
+                  <span
+                    className={cn(
+                      "text-xs font-medium px-2 py-0.5 rounded-full",
+                      statusColor(s.status)
+                    )}
+                  >
+                    {statusLabel(s.status)}
+                  </span>
+                  <span className="text-sm font-medium text-gray-700">
+                    {s.count}
+                  </span>
+                </div>
+              ))}
+            </div>
+            {documentStats.byCategory.length > 0 && (
+              <div className="mt-4 pt-4 border-t border-gray-100 space-y-2">
+                <p className="text-xs text-gray-500 font-medium uppercase tracking-wide">
+                  By Category
+                </p>
+                {documentStats.byCategory.map((c: typeof documentStats.byCategory[number]) => (
+                  <div
+                    key={c.category}
+                    className="flex items-center justify-between"
+                  >
+                    <span className="text-xs text-gray-600">
+                      {statusLabel(c.category)}
+                    </span>
+                    <span className="text-sm font-medium text-gray-700">
+                      {c.count}
+                    </span>
+                  </div>
+                ))}
+              </div>
+            )}
+          </div>
+
+          {/* Activity Summary */}
+          <div className="bg-white rounded-xl border border-gray-200 p-5">
+            <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-4">
+              Activity Breakdown
+            </h2>
+            {activityTimeline.byAction.length === 0 ? (
+              <p className="text-sm text-gray-500 text-center py-4">
+                No activity recorded yet
+              </p>
+            ) : (
+              <div className="space-y-2">
+                {activityTimeline.byAction.slice(0, 8).map((a) => (
+                  <div
+                    key={a.action}
+                    className="flex items-center justify-between"
+                  >
+                    <span className="text-xs text-gray-600 truncate">
+                      {formatAction(a.action)}
+                    </span>
+                    <span className="text-sm font-medium text-gray-700 shrink-0 ml-2">
+                      {a.count}
+                    </span>
+                  </div>
+                ))}
+              </div>
+            )}
+          </div>
+
+          {/* Activity Sparkline (text-based) */}
+          {activityTimeline.daily.length > 0 && (
+            <div className="bg-white rounded-xl border border-gray-200 p-5">
+              <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3">
+                Daily Activity (30d)
+              </h2>
+              <div className="flex items-end gap-[2px] h-16">
+                {(() => {
+                  const max = Math.max(
+                    ...activityTimeline.daily.map((d) => d.count),
+                    1
+                  );
+                  return activityTimeline.daily.slice(-30).map((d, i) => (
+                    <div
+                      key={i}
+                      className="flex-1 bg-[var(--color-primary)] rounded-t opacity-70 hover:opacity-100 transition-opacity"
+                      style={{
+                        height: `${Math.max((d.count / max) * 100, 4)}%`,
+                      }}
+                      title={`${d.date}: ${d.count} actions`}
+                    />
+                  ));
+                })()}
+              </div>
+              <div className="flex justify-between mt-1">
+                <span className="text-[10px] text-gray-400">30d ago</span>
+                <span className="text-[10px] text-gray-400">Today</span>
+              </div>
+            </div>
+          )}
+        </div>
+      </div>
+
+      {/* Team Performance — admin/PM only */}
+      {canManage && (teamPerformance as ReturnType<typeof Array>).length > 0 && (
+        <div className="bg-white rounded-xl border border-gray-200 overflow-hidden">
+          <div className="px-5 py-4 border-b border-gray-100">
+            <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2">
+              <Users className="w-4 h-4 text-gray-500" />
+              Team Performance
+            </h2>
+          </div>
+          <div className="overflow-x-auto">
+            <table className="w-full text-sm">
+              <thead>
+                <tr className="bg-gray-50 text-left">
+                  <th className="px-5 py-2.5 font-medium text-gray-600">
+                    Name
+                  </th>
+                  <th className="px-3 py-2.5 font-medium text-gray-600 hidden sm:table-cell">
+                    Company
+                  </th>
+                  <th className="px-3 py-2.5 font-medium text-gray-600 text-center">
+                    Assigned
+                  </th>
+                  <th className="px-3 py-2.5 font-medium text-gray-600 text-center">
+                    Completed
+                  </th>
+                  <th className="px-3 py-2.5 font-medium text-gray-600 text-center">
+                    Active
+                  </th>
+                  <th className="px-3 py-2.5 font-medium text-gray-600 text-center">
+                    Overdue
+                  </th>
+                  <th className="px-3 py-2.5 font-medium text-gray-600 text-center hidden sm:table-cell">
+                    Lead
+                  </th>
+                </tr>
+              </thead>
+              <tbody className="divide-y divide-gray-100">
+                {(teamPerformance as Awaited<ReturnType<typeof getTeamPerformance>>).map((member: Awaited<ReturnType<typeof getTeamPerformance>>[number]) => (
+                  <tr key={member.id} className="hover:bg-gray-50">
+                    <td className="px-5 py-3">
+                      <p className="font-medium text-gray-900">{member.name}</p>
+                      <p className="text-xs text-gray-500">{member.role}</p>
+                    </td>
+                    <td className="px-3 py-3 text-gray-600 hidden sm:table-cell">
+                      {member.company || "—"}
+                    </td>
+                    <td className="px-3 py-3 text-center text-gray-700">
+                      {member.totalAssignments}
+                    </td>
+                    <td className="px-3 py-3 text-center">
+                      <span className="text-green-600 font-medium">
+                        {member.completed}
+                      </span>
+                    </td>
+                    <td className="px-3 py-3 text-center">
+                      <span className="text-blue-600 font-medium">
+                        {member.active}
+                      </span>
+                    </td>
+                    <td className="px-3 py-3 text-center">
+                      {member.overdue > 0 ? (
+                        <span className="text-red-600 font-medium">
+                          {member.overdue}
+                        </span>
+                      ) : (
+                        <span className="text-gray-400">0</span>
+                      )}
+                    </td>
+                    <td className="px-3 py-3 text-center hidden sm:table-cell">
+                      {member.isOwnerCount > 0 ? (
+                        <span className="text-xs bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full">
+                          {member.isOwnerCount}
+                        </span>
+                      ) : (
+                        <span className="text-gray-400">—</span>
+                      )}
+                    </td>
+                  </tr>
+                ))}
+              </tbody>
+            </table>
+          </div>
+        </div>
+      )}
+    </div>
+  );
+}
+
+// ── Helper Components ──
+
+function KpiCard({
+  label,
+  value,
+  icon,
+  color,
+  detail,
+}: {
+  label: string;
+  value: string | number;
+  icon: React.ReactNode;
+  color: "blue" | "red" | "green" | "purple";
+  detail: string;
+}) {
+  const colorMap = {
+    blue: "bg-[var(--color-primary-bg)] text-[var(--color-primary)] border-[var(--color-primary-bg)]",
+    red: "bg-red-50 text-red-600 border-red-100",
+    green: "bg-green-50 text-green-600 border-green-100",
+    purple: "bg-purple-50 text-purple-600 border-purple-100",
+  };
+  const iconBg = {
+    blue: "bg-[var(--color-primary-bg)] text-[var(--color-primary)]",
+    red: "bg-red-100 text-red-600",
+    green: "bg-green-100 text-green-600",
+    purple: "bg-purple-100 text-purple-600",
+  };
+
+  return (
+    <div className={cn("rounded-xl border p-4", colorMap[color])}>
+      <div className="flex items-center gap-3">
+        <div className={cn("p-2 rounded-lg", iconBg[color])}>{icon}</div>
+        <div>
+          <p className="text-2xl font-bold">{value}</p>
+          <p className="text-xs font-medium opacity-80">{label}</p>
+        </div>
+      </div>
+      <p className="text-xs mt-2 opacity-70">{detail}</p>
+    </div>
+  );
+}
+
+function HealthBadge({ health }: { health: string }) {
+  if (health === "on-track") {
+    return (
+      <span className="inline-flex items-center gap-1 text-xs font-medium text-green-700 bg-green-50 px-2 py-0.5 rounded-full">
+        <CheckCircle2 className="w-3 h-3" />
+        On Track
+      </span>
+    );
+  }
+  if (health === "at-risk") {
+    return (
+      <span className="inline-flex items-center gap-1 text-xs font-medium text-red-700 bg-red-50 px-2 py-0.5 rounded-full">
+        <AlertTriangle className="w-3 h-3" />
+        At Risk
+      </span>
+    );
+  }
+  return (
+    <span className="inline-flex items-center gap-1 text-xs font-medium text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full">
+      <Clock className="w-3 h-3" />
+      Not Started
+    </span>
+  );
+}
+
+function barColor(status: string): string {
+  switch (status) {
+    case "COMPLETE":
+      return "bg-green-500";
+    case "IN_PROGRESS":
+      return "bg-blue-500";
+    case "REVIEW_REQUESTED":
+      return "bg-amber-500";
+    case "UNDER_REVIEW":
+      return "bg-purple-500";
+    case "PENDING":
+      return "bg-gray-400";
+    default:
+      return "bg-gray-400";
+  }
+}
+
+function formatAction(action: string): string {
+  return action
+    .replace(/_/g, " ")
+    .toLowerCase()
+    .replace(/\b\w/g, (c) => c.toUpperCase());
+}
diff --git a/src/app/dashboard/settings/page.tsx b/src/app/dashboard/settings/page.tsx
index 2a6f11b..28de82c 100644
--- a/src/app/dashboard/settings/page.tsx
+++ b/src/app/dashboard/settings/page.tsx
@@ -1,40 +1,81 @@
 import { auth } from "@/lib/auth";
 import { redirect } from "next/navigation";
-import { Settings } from "lucide-react";
+import { can } from "@/lib/permissions";
+import { getOrgSettings } from "@/actions/settings";
+import { getChecklistTemplates } from "@/actions/templates";
+import { ThemeSelector } from "@/components/settings/ThemeSelector";
+import { LogoUploader } from "@/components/settings/LogoUploader";
+import { ChecklistTemplateManager } from "@/components/settings/ChecklistTemplateManager";
+import { NotificationSettings } from "@/components/settings/NotificationSettings";
+import {
+  getNotificationPreferences,
+  getUserPhone,
+} from "@/actions/notification-preferences";
+import { LanguagePicker } from "@/components/settings/LanguagePicker";
+import { TotpSection } from "@/components/settings/TotpSection";
+import { ApiKeySection } from "@/components/settings/ApiKeySection";
+import { WebhookSection } from "@/components/settings/WebhookSection";
+import { ReportScheduleSection } from "@/components/settings/ReportScheduleSection";
+import { getTotpStatus } from "@/actions/totp";
+import { getApiKeys } from "@/actions/api-keys";
+import { getWebhooks } from "@/actions/webhooks";
+import { getReportSchedules } from "@/actions/report-schedules";
+import { getLocale } from "@/i18n/locale";
+import { getTranslations } from "next-intl/server";
 
 export default async function SettingsPage() {
   const session = await auth();
   if (!session?.user) redirect("/login");
 
+  const [orgSettings, notifPrefs, userPhone, currentLocale, t] = await Promise.all([
+    getOrgSettings(),
+    getNotificationPreferences(),
+    getUserPhone(),
+    getLocale(),
+    getTranslations("settings"),
+  ]);
+  const userRole = session.user.role || "VIEWER";
+  const canManage = can(userRole, "manage", "phase");
+  const templates = canManage ? await getChecklistTemplates() : [];
+
+  // Sprint H — security & integrations (fetched in parallel, fall back gracefully)
+  const [totpStatus, apiKeys, webhooks, reportSchedules] = await Promise.all([
+    getTotpStatus().catch(() => ({ enabled: false, verified: false })),
+    getApiKeys().catch(() => []),
+    getWebhooks().catch(() => []),
+    getReportSchedules().catch(() => []),
+  ]);
+
   return (
     <div className="p-6 max-w-4xl mx-auto">
       <div className="mb-6">
-        <h1 className="text-2xl font-bold text-gray-900">Settings</h1>
+        <h1 className="text-2xl font-bold text-gray-900">{t("title")}</h1>
         <p className="text-sm text-gray-500 mt-1">
-          Manage your account and preferences
+          {t("subtitle")}
         </p>
       </div>
 
+      {/* Profile section */}
       <div className="bg-white rounded-xl border border-gray-200 p-6">
-        <h2 className="text-lg font-semibold text-gray-900 mb-4">Profile</h2>
+        <h2 className="text-lg font-semibold text-gray-900 mb-4">{t("profile")}</h2>
         <div className="space-y-3">
           <div>
             <label className="block text-sm font-medium text-gray-500 mb-0.5">
-              Name
+              {t("name")}
             </label>
             <p className="text-base text-gray-900">
-              {session.user.name || "Not set"}
+              {session.user.name || t("notSet")}
             </p>
           </div>
           <div>
             <label className="block text-sm font-medium text-gray-500 mb-0.5">
-              Email
+              {t("email")}
             </label>
             <p className="text-base text-gray-900">{session.user.email}</p>
           </div>
           <div>
             <label className="block text-sm font-medium text-gray-500 mb-0.5">
-              Role
+              {t("role")}
             </label>
             <p className="text-base text-gray-900 capitalize">
               {(session.user.role || "viewer").replace("_", " ").toLowerCase()}
@@ -43,14 +84,62 @@ export default async function SettingsPage() {
         </div>
       </div>
 
+      {/* Two-Factor Authentication */}
+      <div className="mt-6">
+        <TotpSection enabled={totpStatus.enabled} verified={totpStatus.verified} />
+      </div>
+
+      {/* Language section */}
       <div className="mt-6 bg-white rounded-xl border border-gray-200 p-6">
-        <h2 className="text-lg font-semibold text-gray-900 mb-2">
-          Notification Preferences
-        </h2>
-        <p className="text-sm text-gray-500">
-          Email and SMS notification settings coming soon.
-        </p>
+        <h2 className="text-lg font-semibold text-gray-900 mb-1">{t("language")}</h2>
+        <p className="text-sm text-gray-500 mb-4">{t("languageDescription")}</p>
+        <LanguagePicker currentLocale={currentLocale} />
       </div>
+
+      {/* Appearance section (admin/PM only) */}
+      {canManage && (
+        <div className="mt-6 bg-white rounded-xl border border-gray-200 p-6 space-y-8">
+          <h2 className="text-lg font-semibold text-gray-900">{t("appearance")}</h2>
+
+          <LogoUploader
+            logoUrl={orgSettings.logoUrl}
+            companyName={orgSettings.companyName}
+          />
+
+          <div className="border-t border-gray-100 pt-6">
+            <ThemeSelector currentTheme={orgSettings.theme} />
+          </div>
+        </div>
+      )}
+
+      {/* Checklist Templates (admin/PM only) */}
+      {canManage && (
+        <div className="mt-6 bg-white rounded-xl border border-gray-200 p-6">
+          <ChecklistTemplateManager templates={templates} />
+        </div>
+      )}
+
+      {/* Notification Preferences */}
+      <div className="mt-6 bg-white rounded-xl border border-gray-200 p-6">
+        <NotificationSettings preferences={notifPrefs} phone={userPhone} />
+      </div>
+
+      {/* API Keys */}
+      <div className="mt-6">
+        <ApiKeySection apiKeys={apiKeys} />
+      </div>
+
+      {/* Webhooks */}
+      <div className="mt-6">
+        <WebhookSection webhooks={webhooks} />
+      </div>
+
+      {/* Automated Report Schedules (admin/PM only) */}
+      {canManage && (
+        <div className="mt-6">
+          <ReportScheduleSection schedules={reportSchedules} />
+        </div>
+      )}
     </div>
   );
 }
diff --git a/src/app/globals.css b/src/app/globals.css
index a2dc41e..84c4de5 100644
--- a/src/app/globals.css
+++ b/src/app/globals.css
@@ -3,22 +3,23 @@
 :root {
   --background: #ffffff;
   --foreground: #171717;
+  --color-primary: #2563eb;
+  --color-primary-dark: #1e40af;
+  --color-primary-light: #3b82f6;
+  --color-primary-bg: #eff6ff;
 }
 
 @theme inline {
   --color-background: var(--background);
   --color-foreground: var(--foreground);
+  --color-primary: var(--color-primary);
+  --color-primary-dark: var(--color-primary-dark);
+  --color-primary-light: var(--color-primary-light);
+  --color-primary-bg: var(--color-primary-bg);
   --font-sans: var(--font-geist-sans);
   --font-mono: var(--font-geist-mono);
 }
 
-@media (prefers-color-scheme: dark) {
-  :root {
-    --background: #0a0a0a;
-    --foreground: #ededed;
-  }
-}
-
 body {
   background: var(--background);
   color: var(--foreground);
diff --git a/src/app/layout.tsx b/src/app/layout.tsx
index d76d4d3..a82b2b2 100644
--- a/src/app/layout.tsx
+++ b/src/app/layout.tsx
@@ -2,6 +2,9 @@ import type { Metadata } from "next";
 import { Geist, Geist_Mono } from "next/font/google";
 import "./globals.css";
 import { Providers } from "./providers";
+import { ServiceWorkerRegister } from "@/components/ui/ServiceWorkerRegister";
+import { NextIntlClientProvider } from "next-intl";
+import { getLocale, getMessages } from "next-intl/server";
 
 const geistSans = Geist({
   variable: "--font-geist-sans",
@@ -16,19 +19,42 @@ const geistMono = Geist_Mono({
 export const metadata: Metadata = {
   title: "Construction PM",
   description: "Construction Project Management Tool",
+  manifest: "/manifest.json",
+  appleWebApp: {
+    capable: true,
+    statusBarStyle: "default",
+    title: "Construction PM",
+  },
+  formatDetection: {
+    telephone: true,
+  },
 };
 
-export default function RootLayout({
+export const viewport = {
+  width: "device-width",
+  initialScale: 1,
+  maximumScale: 1,
+  userScalable: false,
+  themeColor: "#4F6DF5",
+};
+
+export default async function RootLayout({
   children,
 }: Readonly<{
   children: React.ReactNode;
 }>) {
+  const locale = await getLocale();
+  const messages = await getMessages();
+
   return (
-    <html lang="en">
+    <html lang={locale}>
       <body
         className={`${geistSans.variable} ${geistMono.variable} antialiased`}
       >
-        <Providers>{children}</Providers>
+        <NextIntlClientProvider messages={messages}>
+          <Providers>{children}</Providers>
+        </NextIntlClientProvider>
+        <ServiceWorkerRegister />
       </body>
     </html>
   );
diff --git a/src/app/page.tsx b/src/app/page.tsx
index a128b8b..fa3b9c5 100644
--- a/src/app/page.tsx
+++ b/src/app/page.tsx
@@ -1,23 +1,26 @@
 import Link from "next/link";
 import { HardHat, ArrowRight } from "lucide-react";
+import { getTranslations } from "next-intl/server";
+
+export default async function Home() {
+  const t = await getTranslations("home");
+  const tc = await getTranslations("common");
 
-export default function Home() {
   return (
     <div className="min-h-screen flex flex-col items-center justify-center bg-gray-50 p-4">
       <div className="text-center max-w-lg">
         <HardHat className="w-16 h-16 text-blue-600 mx-auto mb-6" />
         <h1 className="text-4xl font-bold text-gray-900 mb-3">
-          Construction PM
+          {tc("appName")}
         </h1>
         <p className="text-lg text-gray-500 mb-8">
-          Manage construction projects, track timelines, coordinate contractors,
-          and keep every phase on schedule.
+          {t("tagline")}
         </p>
         <Link
           href="/dashboard"
-          className="inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg text-base font-medium hover:bg-blue-700 transition-colors"
+          className="inline-flex items-center gap-2 px-6 py-3 bg-[var(--color-primary)] text-white rounded-lg text-base font-medium hover:bg-[var(--color-primary-dark)] transition-colors"
         >
-          Go to Dashboard
+          {t("goToDashboard")}
           <ArrowRight className="w-5 h-5" />
         </Link>
       </div>
diff --git a/src/components/contractor/ContractorNav.tsx b/src/components/contractor/ContractorNav.tsx
new file mode 100644
index 0000000..1e2b89e
--- /dev/null
+++ b/src/components/contractor/ContractorNav.tsx
@@ -0,0 +1,192 @@
+"use client";
+
+import Link from "next/link";
+import { usePathname } from "next/navigation";
+import { signOut } from "next-auth/react";
+import { cn } from "@/lib/utils";
+import {
+  HardHat,
+  LayoutDashboard,
+  LogOut,
+  FileText,
+  Camera,
+  Bell,
+  BarChart3,
+} from "lucide-react";
+import { useTranslations } from "next-intl";
+
+interface ContractorNavProps {
+  user: {
+    name?: string | null;
+    email?: string | null;
+    image?: string | null;
+    role: string;
+  };
+  logoUrl?: string | null;
+  companyName?: string | null;
+  unreadCount?: number;
+}
+
+export function ContractorNav({
+  user,
+  logoUrl,
+  companyName,
+  unreadCount = 0,
+}: ContractorNavProps) {
+  const pathname = usePathname();
+  const t = useTranslations("nav");
+  const tc = useTranslations("common");
+  const tcon = useTranslations("contractor");
+
+  const navigation = [
+    { name: t("myWork"), href: "/contractor", icon: LayoutDashboard },
+    { name: t("documents"), href: "/contractor/documents", icon: FileText },
+    { name: t("photos"), href: "/contractor/photos", icon: Camera },
+    { name: t("reports"), href: "/contractor/reports", icon: BarChart3 },
+    { name: t("notifications"), href: "/contractor/notifications", icon: Bell },
+  ];
+
+  function isActive(href: string) {
+    return (
+      pathname === href ||
+      (href !== "/contractor" && pathname.startsWith(href))
+    );
+  }
+
+  return (
+    <>
+      {/* Desktop top nav — visible on sm+ */}
+      <header className="hidden sm:block bg-white border-b border-gray-200 sticky top-0 z-30">
+        <div className="max-w-5xl mx-auto px-4">
+          <div className="flex items-center justify-between h-14">
+            {/* Logo */}
+            <Link
+              href="/contractor"
+              className="flex items-center gap-2 shrink-0"
+            >
+              {logoUrl ? (
+                <img
+                  src={logoUrl}
+                  alt={companyName || "Logo"}
+                  className="w-6 h-6 rounded object-contain"
+                />
+              ) : (
+                <HardHat className="w-6 h-6 text-[var(--color-primary)]" />
+              )}
+              <span className="text-base font-bold text-gray-900">
+                {companyName || t("contractorPortal")}
+              </span>
+            </Link>
+
+            {/* Nav links */}
+            <nav className="flex items-center gap-1">
+              {navigation.map((item) => (
+                <Link
+                  key={item.name}
+                  href={item.href}
+                  className={cn(
+                    "flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",
+                    isActive(item.href)
+                      ? "bg-[var(--color-primary-bg)] text-[var(--color-primary-dark)]"
+                      : "text-gray-600 hover:bg-gray-100 hover:text-gray-900"
+                  )}
+                >
+                  <item.icon className="w-4 h-4" />
+                  {item.name}
+                  {item.href === "/contractor/notifications" && unreadCount > 0 && (
+                    <span className="inline-flex items-center justify-center min-w-[18px] h-[18px] px-1 text-[10px] font-semibold rounded-full bg-[var(--color-primary)] text-white">
+                      {unreadCount > 99 ? "99+" : unreadCount}
+                    </span>
+                  )}
+                </Link>
+              ))}
+            </nav>
+
+            {/* User */}
+            <div className="flex items-center gap-3">
+              <div className="text-right">
+                <p className="text-sm font-medium text-gray-900 leading-tight">
+                  {user.name || user.email}
+                </p>
+                <p className="text-xs text-[var(--color-primary)]">
+                  {tcon("role")}
+                </p>
+              </div>
+              <div className="w-8 h-8 rounded-full bg-[var(--color-primary-bg)] flex items-center justify-center text-[var(--color-primary-dark)] text-sm font-medium">
+                {user.name?.[0] || user.email?.[0] || "?"}
+              </div>
+              <button
+                onClick={() => signOut({ callbackUrl: "/login" })}
+                className="p-1.5 text-gray-400 hover:text-gray-600 rounded"
+                title={tc("signOut")}
+              >
+                <LogOut className="w-4 h-4" />
+              </button>
+            </div>
+          </div>
+        </div>
+      </header>
+
+      {/* Mobile top bar — logo + user avatar + sign out */}
+      <header className="sm:hidden bg-white border-b border-gray-200 sticky top-0 z-30">
+        <div className="flex items-center justify-between px-4 h-12">
+          <Link
+            href="/contractor"
+            className="flex items-center gap-2"
+          >
+            {logoUrl ? (
+              <img
+                src={logoUrl}
+                alt={companyName || "Logo"}
+                className="w-5 h-5 rounded object-contain"
+              />
+            ) : (
+              <HardHat className="w-5 h-5 text-[var(--color-primary)]" />
+            )}
+            <span className="text-sm font-bold text-gray-900">
+              {companyName || tc("appName")}
+            </span>
+          </Link>
+          <div className="flex items-center gap-2">
+            <div className="w-7 h-7 rounded-full bg-[var(--color-primary-bg)] flex items-center justify-center text-[var(--color-primary-dark)] text-xs font-medium">
+              {user.name?.[0] || user.email?.[0] || "?"}
+            </div>
+            <button
+              onClick={() => signOut({ callbackUrl: "/login" })}
+              className="p-1 text-gray-400 hover:text-gray-600"
+              title={tc("signOut")}
+            >
+              <LogOut className="w-4 h-4" />
+            </button>
+          </div>
+        </div>
+      </header>
+
+      {/* Mobile bottom tab bar */}
+      <nav className="sm:hidden fixed bottom-0 left-0 right-0 z-30 bg-white border-t border-gray-200 pb-[env(safe-area-inset-bottom)]">
+        <div className="flex items-center justify-around h-14">
+          {navigation.map((item) => (
+            <Link
+              key={item.name}
+              href={item.href}
+              className={cn(
+                "flex flex-col items-center gap-0.5 px-3 py-1.5 rounded-lg transition-colors relative",
+                isActive(item.href)
+                  ? "text-[var(--color-primary)]"
+                  : "text-gray-400"
+              )}
+            >
+              <item.icon className="w-5 h-5" />
+              <span className="text-[10px] font-medium">{item.name}</span>
+              {item.href === "/contractor/notifications" && unreadCount > 0 && (
+                <span className="absolute -top-0.5 right-0 w-4 h-4 bg-[var(--color-primary)] text-white text-[9px] font-bold rounded-full flex items-center justify-center">
+                  {unreadCount > 9 ? "9+" : unreadCount}
+                </span>
+              )}
+            </Link>
+          ))}
+        </div>
+      </nav>
+    </>
+  );
+}
diff --git a/src/components/contractor/ContractorPhaseActions.tsx b/src/components/contractor/ContractorPhaseActions.tsx
new file mode 100644
index 0000000..640faae
--- /dev/null
+++ b/src/components/contractor/ContractorPhaseActions.tsx
@@ -0,0 +1,62 @@
+"use client";
+
+import { useState } from "react";
+import { updatePhaseStatus } from "@/actions/phases";
+import { Eye, Loader2 } from "lucide-react";
+import { useTranslations } from "next-intl";
+
+interface ContractorPhaseActionsProps {
+  phaseId: string;
+  status: string;
+}
+
+export function ContractorPhaseActions({
+  phaseId,
+  status,
+}: ContractorPhaseActionsProps) {
+  const t = useTranslations("contractor");
+  const [loading, setLoading] = useState(false);
+  const [done, setDone] = useState(false);
+
+  async function handleRequestReview() {
+    setLoading(true);
+    try {
+      await updatePhaseStatus(phaseId, "REVIEW_REQUESTED");
+      setDone(true);
+    } catch (e) {
+      console.error("Failed to request review:", e);
+    }
+    setLoading(false);
+  }
+
+  if (done) {
+    return (
+      <div className="flex items-center gap-2 text-sm text-amber-700 bg-amber-50 px-4 py-2.5 rounded-lg">
+        <Eye className="w-4 h-4" />
+        {t("reviewRequested")}
+      </div>
+    );
+  }
+
+  if (status !== "IN_PROGRESS") return null;
+
+  return (
+    <button
+      onClick={handleRequestReview}
+      disabled={loading}
+      className="w-full sm:w-auto inline-flex items-center justify-center gap-2 px-5 py-2.5 bg-[var(--color-primary)] text-white rounded-lg text-sm font-medium hover:bg-[var(--color-primary-dark)] transition-colors disabled:opacity-50"
+    >
+      {loading ? (
+        <>
+          <Loader2 className="w-4 h-4 animate-spin" />
+          {t("requesting")}
+        </>
+      ) : (
+        <>
+          <Eye className="w-4 h-4" />
+          {t("requestReview")}
+        </>
+      )}
+    </button>
+  );
+}
diff --git a/src/components/dashboard/AnalyticsWidgets.tsx b/src/components/dashboard/AnalyticsWidgets.tsx
new file mode 100644
index 0000000..2aa4ec0
--- /dev/null
+++ b/src/components/dashboard/AnalyticsWidgets.tsx
@@ -0,0 +1,332 @@
+"use client";
+
+import type { AnalyticsData } from "@/actions/analytics";
+import {
+  BarChart,
+  Bar,
+  XAxis,
+  YAxis,
+  CartesianGrid,
+  Tooltip,
+  ResponsiveContainer,
+  PieChart,
+  Pie,
+  Cell,
+  LineChart,
+  Line,
+  Legend,
+} from "recharts";
+import { TrendingUp, DollarSign, Users, BarChart2 } from "lucide-react";
+
+const STATUS_COLORS: Record<string, string> = {
+  ACTIVE: "#3b82f6",
+  PLANNING: "#a855f7",
+  ON_HOLD: "#f59e0b",
+  COMPLETE: "#22c55e",
+  ARCHIVED: "#6b7280",
+  IN_PROGRESS: "#3b82f6",
+  PENDING: "#94a3b8",
+  REVIEW_REQUESTED: "#f59e0b",
+  UNDER_REVIEW: "#f97316",
+  APPROVED: "#22c55e",
+  REJECTED: "#ef4444",
+};
+
+const CHART_COLORS = [
+  "#3b82f6",
+  "#22c55e",
+  "#f59e0b",
+  "#a855f7",
+  "#f97316",
+  "#ec4899",
+  "#06b6d4",
+  "#6366f1",
+];
+
+function fmt(n: number): string {
+  if (n >= 1_000_000) return `$${(n / 1_000_000).toFixed(1)}M`;
+  if (n >= 1_000) return `$${(n / 1_000).toFixed(0)}K`;
+  return `$${n.toFixed(0)}`;
+}
+
+function SectionHeader({ icon, title }: { icon: React.ReactNode; title: string }) {
+  return (
+    <h3 className="text-sm font-semibold text-gray-700 flex items-center gap-2 mb-3">
+      {icon}
+      {title}
+    </h3>
+  );
+}
+
+export function AnalyticsWidgets({ data }: { data: AnalyticsData }) {
+  const { totalEstimated, totalActual } = data.budgetSummary;
+  const budgetVariance = totalActual - totalEstimated;
+  const budgetPct =
+    totalEstimated > 0 ? Math.round((totalActual / totalEstimated) * 100) : 0;
+
+  return (
+    <div className="space-y-5">
+      <div className="flex items-center gap-2 mb-1">
+        <BarChart2 className="w-4 h-4 text-[var(--color-primary)]" />
+        <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
+          Analytics
+        </h2>
+      </div>
+
+      {/* Budget Summary */}
+      <div className="grid grid-cols-1 sm:grid-cols-3 gap-3">
+        <div className="bg-white rounded-xl border border-gray-200 p-4">
+          <div className="flex items-center gap-2 mb-1">
+            <DollarSign className="w-4 h-4 text-gray-400" />
+            <span className="text-xs text-gray-500">Estimated Budget</span>
+          </div>
+          <p className="text-xl font-bold text-gray-900">{fmt(totalEstimated)}</p>
+        </div>
+        <div className="bg-white rounded-xl border border-gray-200 p-4">
+          <div className="flex items-center gap-2 mb-1">
+            <DollarSign className="w-4 h-4 text-gray-400" />
+            <span className="text-xs text-gray-500">Actual Spend</span>
+          </div>
+          <p className="text-xl font-bold text-gray-900">{fmt(totalActual)}</p>
+          {totalEstimated > 0 && (
+            <p className="text-xs text-gray-500 mt-0.5">{budgetPct}% of estimate</p>
+          )}
+        </div>
+        <div
+          className={
+            "bg-white rounded-xl border p-4 " +
+            (budgetVariance > 0
+              ? "border-red-200"
+              : budgetVariance < 0
+              ? "border-green-200"
+              : "border-gray-200")
+          }
+        >
+          <div className="flex items-center gap-2 mb-1">
+            <TrendingUp
+              className={
+                "w-4 h-4 " +
+                (budgetVariance > 0
+                  ? "text-red-500"
+                  : budgetVariance < 0
+                  ? "text-green-500"
+                  : "text-gray-400")
+              }
+            />
+            <span className="text-xs text-gray-500">Variance</span>
+          </div>
+          <p
+            className={
+              "text-xl font-bold " +
+              (budgetVariance > 0
+                ? "text-red-600"
+                : budgetVariance < 0
+                ? "text-green-600"
+                : "text-gray-900")
+            }
+          >
+            {budgetVariance > 0 ? "+" : ""}
+            {fmt(Math.abs(budgetVariance))}
+          </p>
+          <p className="text-xs text-gray-500 mt-0.5">
+            {budgetVariance > 0
+              ? "over budget"
+              : budgetVariance < 0
+              ? "under budget"
+              : "on budget"}
+          </p>
+        </div>
+      </div>
+
+      {/* Monthly Activity + Phase Completion Trend */}
+      <div className="grid grid-cols-1 lg:grid-cols-2 gap-4">
+        {/* Monthly Activity Bar Chart */}
+        <div className="bg-white rounded-xl border border-gray-200 p-4">
+          <SectionHeader
+            icon={<BarChart2 className="w-4 h-4 text-[var(--color-primary)]" />}
+            title="Monthly Activity (6 months)"
+          />
+          <ResponsiveContainer width="100%" height={180}>
+            <BarChart data={data.monthlyActivity} margin={{ top: 0, right: 4, left: -24, bottom: 0 }}>
+              <CartesianGrid strokeDasharray="3 3" stroke="#f1f5f9" />
+              <XAxis
+                dataKey="month"
+                tick={{ fontSize: 10, fill: "#94a3b8" }}
+                tickFormatter={(v: string) => v.slice(5)}
+              />
+              <YAxis tick={{ fontSize: 10, fill: "#94a3b8" }} allowDecimals={false} />
+              <Tooltip
+                contentStyle={{ fontSize: 11, borderRadius: 8, border: "1px solid #e2e8f0" }}
+              />
+              <Legend wrapperStyle={{ fontSize: 11 }} />
+              <Bar dataKey="phases" name="Phases" fill="#3b82f6" radius={[3, 3, 0, 0]} />
+              <Bar dataKey="documents" name="Documents" fill="#a855f7" radius={[3, 3, 0, 0]} />
+            </BarChart>
+          </ResponsiveContainer>
+        </div>
+
+        {/* Phase Completion Trend */}
+        <div className="bg-white rounded-xl border border-gray-200 p-4">
+          <SectionHeader
+            icon={<TrendingUp className="w-4 h-4 text-green-500" />}
+            title="Phase Completions (8 weeks)"
+          />
+          <ResponsiveContainer width="100%" height={180}>
+            <LineChart
+              data={data.phaseCompletionTrend}
+              margin={{ top: 0, right: 4, left: -24, bottom: 0 }}
+            >
+              <CartesianGrid strokeDasharray="3 3" stroke="#f1f5f9" />
+              <XAxis
+                dataKey="week"
+                tick={{ fontSize: 10, fill: "#94a3b8" }}
+              />
+              <YAxis tick={{ fontSize: 10, fill: "#94a3b8" }} allowDecimals={false} />
+              <Tooltip
+                contentStyle={{ fontSize: 11, borderRadius: 8, border: "1px solid #e2e8f0" }}
+              />
+              <Line
+                type="monotone"
+                dataKey="completed"
+                name="Completed"
+                stroke="#22c55e"
+                strokeWidth={2}
+                dot={{ r: 3, fill: "#22c55e" }}
+                activeDot={{ r: 5 }}
+              />
+            </LineChart>
+          </ResponsiveContainer>
+        </div>
+      </div>
+
+      {/* Status Pies + Team Workload */}
+      <div className="grid grid-cols-1 lg:grid-cols-3 gap-4">
+        {/* Project Status Pie */}
+        <div className="bg-white rounded-xl border border-gray-200 p-4">
+          <SectionHeader
+            icon={<BarChart2 className="w-4 h-4 text-[var(--color-primary)]" />}
+            title="Project Status"
+          />
+          {data.projectStatusCounts.length === 0 ? (
+            <p className="text-xs text-gray-400 text-center py-8">No data</p>
+          ) : (
+            <ResponsiveContainer width="100%" height={160}>
+              <PieChart>
+                <Pie
+                  data={data.projectStatusCounts}
+                  dataKey="count"
+                  nameKey="status"
+                  cx="50%"
+                  cy="50%"
+                  innerRadius={40}
+                  outerRadius={65}
+                  paddingAngle={2}
+                >
+                  {data.projectStatusCounts.map((entry, i) => (
+                    <Cell
+                      key={entry.status}
+                      fill={STATUS_COLORS[entry.status] ?? CHART_COLORS[i % CHART_COLORS.length]}
+                    />
+                  ))}
+                </Pie>
+                <Tooltip
+                  contentStyle={{ fontSize: 11, borderRadius: 8, border: "1px solid #e2e8f0" }}
+                  formatter={(v: number, name: string) => [v, name.replace(/_/g, " ")]}
+                />
+                <Legend
+                  formatter={(v: string) => v.replace(/_/g, " ")}
+                  wrapperStyle={{ fontSize: 10 }}
+                />
+              </PieChart>
+            </ResponsiveContainer>
+          )}
+        </div>
+
+        {/* Phase Status Pie */}
+        <div className="bg-white rounded-xl border border-gray-200 p-4">
+          <SectionHeader
+            icon={<BarChart2 className="w-4 h-4 text-purple-500" />}
+            title="Phase Status"
+          />
+          {data.phaseStatusCounts.length === 0 ? (
+            <p className="text-xs text-gray-400 text-center py-8">No data</p>
+          ) : (
+            <ResponsiveContainer width="100%" height={160}>
+              <PieChart>
+                <Pie
+                  data={data.phaseStatusCounts}
+                  dataKey="count"
+                  nameKey="status"
+                  cx="50%"
+                  cy="50%"
+                  innerRadius={40}
+                  outerRadius={65}
+                  paddingAngle={2}
+                >
+                  {data.phaseStatusCounts.map((entry, i) => (
+                    <Cell
+                      key={entry.status}
+                      fill={STATUS_COLORS[entry.status] ?? CHART_COLORS[i % CHART_COLORS.length]}
+                    />
+                  ))}
+                </Pie>
+                <Tooltip
+                  contentStyle={{ fontSize: 11, borderRadius: 8, border: "1px solid #e2e8f0" }}
+                  formatter={(v: number, name: string) => [v, name.replace(/_/g, " ")]}
+                />
+                <Legend
+                  formatter={(v: string) => v.replace(/_/g, " ")}
+                  wrapperStyle={{ fontSize: 10 }}
+                />
+              </PieChart>
+            </ResponsiveContainer>
+          )}
+        </div>
+
+        {/* Team Workload */}
+        <div className="bg-white rounded-xl border border-gray-200 p-4">
+          <SectionHeader
+            icon={<Users className="w-4 h-4 text-blue-500" />}
+            title="Team Workload"
+          />
+          {data.teamWorkload.length === 0 ? (
+            <p className="text-xs text-gray-400 text-center py-8">No assignments</p>
+          ) : (
+            <ResponsiveContainer width="100%" height={160}>
+              <BarChart
+                layout="vertical"
+                data={data.teamWorkload}
+                margin={{ top: 0, right: 8, left: 4, bottom: 0 }}
+              >
+                <CartesianGrid strokeDasharray="3 3" stroke="#f1f5f9" horizontal={false} />
+                <XAxis
+                  type="number"
+                  tick={{ fontSize: 10, fill: "#94a3b8" }}
+                  allowDecimals={false}
+                />
+                <YAxis
+                  type="category"
+                  dataKey="name"
+                  tick={{ fontSize: 10, fill: "#64748b" }}
+                  width={72}
+                  tickFormatter={(v: string) =>
+                    v.length > 10 ? v.slice(0, 10) + "…" : v
+                  }
+                />
+                <Tooltip
+                  contentStyle={{ fontSize: 11, borderRadius: 8, border: "1px solid #e2e8f0" }}
+                />
+                <Bar
+                  dataKey="assignedPhases"
+                  name="Phases"
+                  fill="#3b82f6"
+                  radius={[0, 3, 3, 0]}
+                />
+              </BarChart>
+            </ResponsiveContainer>
+          )}
+        </div>
+      </div>
+    </div>
+  );
+}
diff --git a/src/components/dashboard/BulkImportButton.tsx b/src/components/dashboard/BulkImportButton.tsx
new file mode 100644
index 0000000..2fdca4a
--- /dev/null
+++ b/src/components/dashboard/BulkImportButton.tsx
@@ -0,0 +1,166 @@
+"use client";
+
+import { useState, useRef } from "react";
+import {
+  Upload,
+  Loader2,
+  AlertCircle,
+  CheckCircle2,
+  X,
+  FileSpreadsheet,
+  Download,
+} from "lucide-react";
+
+const CSV_TEMPLATE = `name,description,status,location,start_date,end_date,budget,phases
+"Riverside Apartments","8-unit residential complex","IN_PROGRESS","123 Main St, Springfield","2025-01-15","2025-09-30","850000","Foundation;Framing;Mechanical;Finishes"
+"Office Renovation","Open-plan office remodel","PLANNING","456 Commerce Ave","2025-03-01","2025-06-30","120000","Demo;Framing;Electrical;Painting"
+`;
+
+interface ImportResult {
+  created: number;
+  errors: string[];
+  total: number;
+}
+
+export function BulkImportButton() {
+  const [open, setOpen] = useState(false);
+  const [uploading, setUploading] = useState(false);
+  const [result, setResult] = useState<ImportResult | null>(null);
+  const [error, setError] = useState<string | null>(null);
+  const fileRef = useRef<HTMLInputElement>(null);
+
+  const handleFile = async (e: React.ChangeEvent<HTMLInputElement>) => {
+    const file = e.target.files?.[0];
+    if (!file) return;
+    setUploading(true);
+    setError(null);
+    setResult(null);
+
+    const formData = new FormData();
+    formData.append("file", file);
+
+    try {
+      const res = await fetch("/api/import", { method: "POST", body: formData });
+      const json = await res.json();
+      if (!res.ok) {
+        setError(json.error ?? "Import failed");
+      } else {
+        setResult(json as ImportResult);
+        if (json.created > 0) {
+          // Refresh the page to show new projects
+          setTimeout(() => window.location.reload(), 1500);
+        }
+      }
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Import failed");
+    } finally {
+      setUploading(false);
+      if (fileRef.current) fileRef.current.value = "";
+    }
+  };
+
+  const downloadTemplate = () => {
+    const blob = new Blob([CSV_TEMPLATE], { type: "text/csv" });
+    const url = URL.createObjectURL(blob);
+    const a = document.createElement("a");
+    a.href = url;
+    a.download = "projects-import-template.csv";
+    a.click();
+    URL.revokeObjectURL(url);
+  };
+
+  return (
+    <>
+      <button
+        onClick={() => setOpen(true)}
+        className="inline-flex items-center gap-1.5 text-sm text-gray-600 hover:text-gray-900 px-3 py-1.5 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"
+      >
+        <Upload className="w-4 h-4" />
+        Import CSV
+      </button>
+
+      {open && (
+        <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
+          <div className="absolute inset-0 bg-black/40" onClick={() => setOpen(false)} />
+          <div className="relative bg-white rounded-xl shadow-xl w-full max-w-md p-6 z-10">
+            <div className="flex items-center justify-between mb-4">
+              <h2 className="text-base font-semibold text-gray-900 flex items-center gap-2">
+                <FileSpreadsheet className="w-5 h-5 text-[var(--color-primary)]" />
+                Bulk Import Projects
+              </h2>
+              <button onClick={() => setOpen(false)} className="text-gray-400 hover:text-gray-600">
+                <X className="w-5 h-5" />
+              </button>
+            </div>
+
+            <p className="text-sm text-gray-600 mb-4">
+              Upload a CSV file to create multiple projects at once. Each row becomes one project.
+              Separate phase names with semicolons (;).
+            </p>
+
+            <button
+              onClick={downloadTemplate}
+              className="w-full mb-4 flex items-center justify-center gap-2 py-2 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg border border-blue-100"
+            >
+              <Download className="w-4 h-4" />
+              Download CSV Template
+            </button>
+
+            {error && (
+              <div className="mb-3 flex items-center gap-2 p-2.5 bg-red-50 text-red-700 text-sm rounded-lg">
+                <AlertCircle className="w-4 h-4 shrink-0" />
+                <span className="flex-1">{error}</span>
+              </div>
+            )}
+
+            {result && (
+              <div className={`mb-3 p-3 rounded-lg border text-sm ${result.created > 0 ? "bg-green-50 border-green-200" : "bg-amber-50 border-amber-200"}`}>
+                <p className={`font-medium ${result.created > 0 ? "text-green-800" : "text-amber-800"}`}>
+                  {result.created > 0
+                    ? `✓ Created ${result.created} of ${result.total} projects`
+                    : `No projects created`}
+                </p>
+                {result.errors.length > 0 && (
+                  <ul className="mt-1.5 space-y-0.5">
+                    {result.errors.map((e, i) => (
+                      <li key={i} className="text-xs text-amber-700">{e}</li>
+                    ))}
+                  </ul>
+                )}
+                {result.created > 0 && (
+                  <p className="text-xs text-green-600 mt-1">Refreshing page…</p>
+                )}
+              </div>
+            )}
+
+            <label className={`block w-full cursor-pointer ${uploading ? "opacity-60 pointer-events-none" : ""}`}>
+              <div className="flex flex-col items-center justify-center gap-3 p-6 border-2 border-dashed border-gray-200 rounded-xl hover:border-[var(--color-primary)] hover:bg-gray-50 transition-colors">
+                {uploading ? (
+                  <>
+                    <Loader2 className="w-8 h-8 text-[var(--color-primary)] animate-spin" />
+                    <p className="text-sm text-gray-600">Importing…</p>
+                  </>
+                ) : (
+                  <>
+                    <Upload className="w-8 h-8 text-gray-400" />
+                    <div className="text-center">
+                      <p className="text-sm font-medium text-gray-700">Click to upload CSV</p>
+                      <p className="text-xs text-gray-400 mt-0.5">Max 100 projects per file</p>
+                    </div>
+                  </>
+                )}
+              </div>
+              <input
+                ref={fileRef}
+                type="file"
+                accept=".csv,.txt"
+                onChange={handleFile}
+                className="sr-only"
+              />
+            </label>
+          </div>
+        </div>
+      )}
+    </>
+  );
+}
diff --git a/src/components/directory/ContactFormModal.tsx b/src/components/directory/ContactFormModal.tsx
new file mode 100644
index 0000000..f5cfd91
--- /dev/null
+++ b/src/components/directory/ContactFormModal.tsx
@@ -0,0 +1,256 @@
+"use client";
+
+import { useState } from "react";
+import { X } from "lucide-react";
+import { createStaff, updateStaff, deleteStaff } from "@/actions/staff";
+import { cn } from "@/lib/utils";
+import { useTranslations } from "next-intl";
+
+type ContactType = "TEAM" | "SUBCONTRACTOR" | "VENDOR" | "INSPECTOR";
+
+interface Contact {
+  id: string;
+  name: string;
+  company: string | null;
+  role: string | null;
+  contactType: string;
+  email: string | null;
+  phone: string | null;
+  notes: string | null;
+}
+
+interface ContactFormModalProps {
+  mode: "add" | "edit";
+  contact?: Contact;
+  onClose: () => void;
+}
+
+export function ContactFormModal({ mode, contact, onClose }: ContactFormModalProps) {
+  const t = useTranslations("directory");
+  const tc = useTranslations("common");
+
+  const CONTACT_TYPES: { value: ContactType; label: string }[] = [
+    { value: "TEAM", label: t("teamMember") },
+    { value: "SUBCONTRACTOR", label: t("subcontractor") },
+    { value: "VENDOR", label: t("vendorSupplier") },
+    { value: "INSPECTOR", label: t("inspector") },
+  ];
+
+  const [saving, setSaving] = useState(false);
+  const [deleting, setDeleting] = useState(false);
+  const [error, setError] = useState<string | null>(null);
+
+  const [name, setName] = useState(contact?.name ?? "");
+  const [company, setCompany] = useState(contact?.company ?? "");
+  const [role, setRole] = useState(contact?.role ?? "");
+  const [contactType, setContactType] = useState<ContactType>(
+    (contact?.contactType as ContactType) ?? "SUBCONTRACTOR"
+  );
+  const [email, setEmail] = useState(contact?.email ?? "");
+  const [phone, setPhone] = useState(contact?.phone ?? "");
+  const [notes, setNotes] = useState(contact?.notes ?? "");
+
+  async function handleSubmit(e: React.FormEvent) {
+    e.preventDefault();
+    if (!name.trim()) {
+      setError(t("nameRequired"));
+      return;
+    }
+
+    setError(null);
+    setSaving(true);
+
+    try {
+      if (mode === "add") {
+        await createStaff({
+          name: name.trim(),
+          company: company.trim() || undefined,
+          role: role.trim() || undefined,
+          contactType,
+          email: email.trim() || undefined,
+          phone: phone.trim() || undefined,
+          notes: notes.trim() || undefined,
+        });
+      } else if (contact) {
+        await updateStaff({
+          id: contact.id,
+          name: name.trim(),
+          company: company.trim() || undefined,
+          role: role.trim() || undefined,
+          contactType,
+          email: email.trim() || undefined,
+          phone: phone.trim() || undefined,
+          notes: notes.trim() || undefined,
+        });
+      }
+      onClose();
+    } catch (e) {
+      setError(e instanceof Error ? e.message : t("somethingWentWrong"));
+      setSaving(false);
+    }
+  }
+
+  async function handleDelete() {
+    if (!contact) return;
+    if (!confirm(t("deleteConfirm", { name: contact.name }))) return;
+
+    setDeleting(true);
+    try {
+      await deleteStaff(contact.id);
+      onClose();
+    } catch (e) {
+      setError(e instanceof Error ? e.message : t("failedToDelete"));
+      setDeleting(false);
+    }
+  }
+
+  return (
+    <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
+      <div className="absolute inset-0 bg-black/40" onClick={onClose} />
+
+      <div className="relative bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-auto">
+        <div className="flex items-center justify-between p-5 border-b border-gray-200">
+          <h2 className="text-lg font-semibold text-gray-900">
+            {mode === "add" ? t("addContactModal") : t("editContactModal")}
+          </h2>
+          <button onClick={onClose} className="p-1 text-gray-400 hover:text-gray-600 rounded">
+            <X className="w-5 h-5" />
+          </button>
+        </div>
+
+        <form onSubmit={handleSubmit} className="p-5 space-y-4">
+          {error && (
+            <div className="p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700">
+              {error}
+            </div>
+          )}
+
+          <div>
+            <label className="block text-sm font-medium text-gray-700 mb-2">{t("type")}</label>
+            <div className="grid grid-cols-2 gap-2">
+              {CONTACT_TYPES.map((ct) => (
+                <button
+                  key={ct.value}
+                  type="button"
+                  onClick={() => setContactType(ct.value)}
+                  className={cn(
+                    "px-3 py-2 text-sm font-medium rounded-lg border transition-colors text-center",
+                    contactType === ct.value
+                      ? "border-[var(--color-primary)] bg-[var(--color-primary-bg)] text-[var(--color-primary-dark)]"
+                      : "border-gray-200 bg-white text-gray-600 hover:bg-gray-50"
+                  )}
+                >
+                  {ct.label}
+                </button>
+              ))}
+            </div>
+          </div>
+
+          <div>
+            <label className="block text-sm font-medium text-gray-700 mb-1">{t("nameField")}</label>
+            <input
+              type="text"
+              value={name}
+              onChange={(e) => setName(e.target.value)}
+              placeholder={t("namePlaceholder")}
+              className="w-full p-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
+              autoFocus
+            />
+          </div>
+
+          <div className="grid grid-cols-2 gap-3">
+            <div>
+              <label className="block text-sm font-medium text-gray-700 mb-1">{t("company")}</label>
+              <input
+                type="text"
+                value={company}
+                onChange={(e) => setCompany(e.target.value)}
+                placeholder={t("companyPlaceholder")}
+                className="w-full p-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
+              />
+            </div>
+            <div>
+              <label className="block text-sm font-medium text-gray-700 mb-1">{t("roleTrade")}</label>
+              <input
+                type="text"
+                value={role}
+                onChange={(e) => setRole(e.target.value)}
+                placeholder={t("rolePlaceholder")}
+                className="w-full p-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
+              />
+            </div>
+          </div>
+
+          <div className="grid grid-cols-2 gap-3">
+            <div>
+              <label className="block text-sm font-medium text-gray-700 mb-1">{t("email")}</label>
+              <input
+                type="email"
+                value={email}
+                onChange={(e) => setEmail(e.target.value)}
+                placeholder={t("emailPlaceholder")}
+                className="w-full p-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
+              />
+            </div>
+            <div>
+              <label className="block text-sm font-medium text-gray-700 mb-1">{t("phone")}</label>
+              <input
+                type="tel"
+                value={phone}
+                onChange={(e) => setPhone(e.target.value)}
+                placeholder={t("phonePlaceholder")}
+                className="w-full p-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
+              />
+            </div>
+          </div>
+
+          <div>
+            <label className="block text-sm font-medium text-gray-700 mb-1">{t("notes")}</label>
+            <textarea
+              value={notes}
+              onChange={(e) => setNotes(e.target.value)}
+              rows={2}
+              placeholder={t("notesPlaceholder")}
+              className="w-full p-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none resize-none"
+            />
+          </div>
+
+          <div className="flex items-center justify-between pt-2">
+            <div>
+              {mode === "edit" && contact && (
+                <button
+                  type="button"
+                  onClick={handleDelete}
+                  disabled={deleting}
+                  className="text-sm text-red-600 hover:text-red-700 font-medium disabled:opacity-50"
+                >
+                  {deleting ? t("deleting") : t("deleteContact")}
+                </button>
+              )}
+            </div>
+            <div className="flex items-center gap-2">
+              <button
+                type="button"
+                onClick={onClose}
+                className="px-4 py-2 text-sm font-medium text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"
+              >
+                {tc("cancel")}
+              </button>
+              <button
+                type="submit"
+                disabled={saving || !name.trim()}
+                className="px-4 py-2 text-sm font-medium bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)] transition-colors disabled:opacity-50"
+              >
+                {saving
+                  ? tc("saving")
+                  : mode === "add"
+                    ? t("addContactBtn")
+                    : t("saveChanges")}
+              </button>
+            </div>
+          </div>
+        </form>
+      </div>
+    </div>
+  );
+}
diff --git a/src/components/directory/DirectoryClient.tsx b/src/components/directory/DirectoryClient.tsx
new file mode 100644
index 0000000..a69bfaf
--- /dev/null
+++ b/src/components/directory/DirectoryClient.tsx
@@ -0,0 +1,232 @@
+"use client";
+
+import { useState } from "react";
+import {
+  Users,
+  Mail,
+  Phone,
+  Building2,
+  HardHat,
+  Truck,
+  ClipboardCheck,
+  Plus,
+  Pencil,
+} from "lucide-react";
+import { ContactFormModal } from "./ContactFormModal";
+import { useTranslations } from "next-intl";
+
+type ContactType = "TEAM" | "SUBCONTRACTOR" | "VENDOR" | "INSPECTOR";
+
+interface Contact {
+  id: string;
+  name: string;
+  company: string | null;
+  role: string | null;
+  contactType: string;
+  email: string | null;
+  phone: string | null;
+  notes: string | null;
+  assignments: {
+    id: string;
+    phase: { id: string; name: string; projectId: string };
+  }[];
+}
+
+interface DirectoryClientProps {
+  contacts: Contact[];
+  canManage: boolean;
+}
+
+export function DirectoryClient({ contacts, canManage }: DirectoryClientProps) {
+  const t = useTranslations("directory");
+  const tc = useTranslations("common");
+
+  const TYPE_CONFIG: Record<ContactType, {
+    label: string;
+    description: string;
+    icon: React.ComponentType<{ className?: string }>;
+    color: string;
+    badge: string;
+  }> = {
+    TEAM: {
+      label: t("teamLabel"),
+      description: t("teamDesc"),
+      icon: HardHat,
+      color: "bg-blue-50 text-blue-700 border-blue-200",
+      badge: "bg-blue-100 text-blue-700",
+    },
+    SUBCONTRACTOR: {
+      label: t("subcontractorLabel"),
+      description: t("subcontractorDesc"),
+      icon: Users,
+      color: "bg-orange-50 text-orange-700 border-orange-200",
+      badge: "bg-orange-100 text-orange-700",
+    },
+    VENDOR: {
+      label: t("vendorLabel"),
+      description: t("vendorDesc"),
+      icon: Truck,
+      color: "bg-green-50 text-green-700 border-green-200",
+      badge: "bg-green-100 text-green-700",
+    },
+    INSPECTOR: {
+      label: t("inspectorLabel"),
+      description: t("inspectorDesc"),
+      icon: ClipboardCheck,
+      color: "bg-purple-50 text-purple-700 border-purple-200",
+      badge: "bg-purple-100 text-purple-700",
+    },
+  };
+
+  const TYPE_ORDER: ContactType[] = ["TEAM", "SUBCONTRACTOR", "INSPECTOR", "VENDOR"];
+
+  const [modalState, setModalState] = useState<
+    | { mode: "add"; contact?: undefined }
+    | { mode: "edit"; contact: Contact }
+    | null
+  >(null);
+
+  const grouped = TYPE_ORDER.map((type) => ({
+    type,
+    config: TYPE_CONFIG[type],
+    contacts: contacts.filter((c) => c.contactType === type),
+  })).filter((g) => g.contacts.length > 0);
+
+  return (
+    <div className="p-6 max-w-7xl mx-auto">
+      <div className="flex items-center justify-between mb-6">
+        <div>
+          <h1 className="text-2xl font-bold text-gray-900">{t("title")}</h1>
+          <p className="text-sm text-gray-500 mt-1">
+            {t("contactCount", { count: contacts.length, groups: grouped.length })}
+          </p>
+        </div>
+        {canManage && (
+          <button
+            onClick={() => setModalState({ mode: "add" })}
+            className="inline-flex items-center gap-1.5 px-4 py-2.5 text-sm font-medium bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)] transition-colors"
+          >
+            <Plus className="w-4 h-4" />
+            {t("addContact")}
+          </button>
+        )}
+      </div>
+
+      {contacts.length === 0 ? (
+        <div className="text-center py-16 bg-white rounded-xl border border-gray-200">
+          <Users className="w-12 h-12 text-gray-300 mx-auto mb-4" />
+          <h3 className="text-lg font-medium text-gray-900 mb-1">{t("noContactsYet")}</h3>
+          <p className="text-sm text-gray-500 mb-4">{t("noContactsMessage")}</p>
+          {canManage && (
+            <button
+              onClick={() => setModalState({ mode: "add" })}
+              className="inline-flex items-center gap-1.5 px-4 py-2.5 text-sm font-medium bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)] transition-colors"
+            >
+              <Plus className="w-4 h-4" />
+              {t("addFirstContact")}
+            </button>
+          )}
+        </div>
+      ) : (
+        <div className="space-y-8">
+          {grouped.map(({ type, config, contacts: groupContacts }) => {
+            const Icon = config.icon;
+            return (
+              <div key={type}>
+                <div className="flex items-center gap-2 mb-3">
+                  <Icon className="w-5 h-5 text-gray-400" />
+                  <h2 className="text-lg font-semibold text-gray-900">{config.label}</h2>
+                  <span className="text-xs text-gray-400">{groupContacts.length}</span>
+                </div>
+                <p className="text-sm text-gray-500 mb-3 -mt-1">{config.description}</p>
+
+                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
+                  {groupContacts.map((person) => (
+                    <div
+                      key={person.id}
+                      className="bg-white rounded-xl border border-gray-200 p-5 hover:border-[var(--color-primary-light)] hover:shadow-md transition-all group relative"
+                    >
+                      {canManage && (
+                        <button
+                          onClick={() => setModalState({ mode: "edit", contact: person })}
+                          className="absolute top-3 right-3 p-1.5 text-gray-300 hover:text-[var(--color-primary)] rounded opacity-0 group-hover:opacity-100 transition-opacity"
+                          title={t("editContact")}
+                        >
+                          <Pencil className="w-3.5 h-3.5" />
+                        </button>
+                      )}
+
+                      <div className="flex items-start gap-3 mb-3">
+                        <div className="w-10 h-10 rounded-full bg-[var(--color-primary-bg)] flex items-center justify-center text-[var(--color-primary-dark)] font-medium text-sm shrink-0">
+                          {person.name[0]}
+                        </div>
+                        <div className="min-w-0 flex-1">
+                          <h3 className="text-base font-semibold text-gray-900 truncate">
+                            {person.name}
+                          </h3>
+                          {person.role && (
+                            <p className="text-sm text-gray-500">{person.role}</p>
+                          )}
+                        </div>
+                        <span className={`text-[10px] font-medium px-1.5 py-0.5 rounded ${config.badge}`}>
+                          {config.label}
+                        </span>
+                      </div>
+
+                      <div className="space-y-1.5 text-sm">
+                        {person.company && (
+                          <div className="flex items-center gap-2 text-gray-600">
+                            <Building2 className="w-3.5 h-3.5 text-gray-400 shrink-0" />
+                            <span className="truncate">{person.company}</span>
+                          </div>
+                        )}
+                        {person.email && (
+                          <div className="flex items-center gap-2 text-gray-600">
+                            <Mail className="w-3.5 h-3.5 text-gray-400 shrink-0" />
+                            <span className="truncate">{person.email}</span>
+                          </div>
+                        )}
+                        {person.phone && (
+                          <div className="flex items-center gap-2 text-gray-600">
+                            <Phone className="w-3.5 h-3.5 text-gray-400 shrink-0" />
+                            {person.phone}
+                          </div>
+                        )}
+                      </div>
+
+                      {person.assignments.length > 0 && (
+                        <div className="mt-3 pt-3 border-t border-gray-100">
+                          <p className="text-xs text-gray-400 uppercase tracking-wide mb-1.5">
+                            {t("assignedTo")}
+                          </p>
+                          <div className="flex flex-wrap gap-1.5">
+                            {person.assignments.map((a) => (
+                              <span
+                                key={a.id}
+                                className="text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full"
+                              >
+                                {a.phase.name}
+                              </span>
+                            ))}
+                          </div>
+                        </div>
+                      )}
+                    </div>
+                  ))}
+                </div>
+              </div>
+            );
+          })}
+        </div>
+      )}
+
+      {modalState && (
+        <ContactFormModal
+          mode={modalState.mode}
+          contact={modalState.contact}
+          onClose={() => setModalState(null)}
+        />
+      )}
+    </div>
+  );
+}
diff --git a/src/components/help/HelpCenter.tsx b/src/components/help/HelpCenter.tsx
new file mode 100644
index 0000000..6d5daad
--- /dev/null
+++ b/src/components/help/HelpCenter.tsx
@@ -0,0 +1,345 @@
+"use client";
+
+import { useState } from "react";
+import {
+  Search,
+  FolderKanban,
+  HardHat,
+  Users,
+  ClipboardCheck,
+  FileText,
+  Camera,
+  Bell,
+  Settings,
+  ChevronDown,
+  ChevronRight,
+  MessageSquare,
+  Shield,
+  ExternalLink,
+  BookOpen,
+} from "lucide-react";
+import { PlayCircle } from "lucide-react";
+import { resetTour } from "./OnboardingTour";
+import { cn } from "@/lib/utils";
+import { useTranslations } from "next-intl";
+
+interface GuideSection {
+  id: string;
+  titleKey: string;
+  icon: React.ReactNode;
+  category: "getting-started" | "features" | "admin";
+  articles: Article[];
+}
+
+interface Article {
+  id: string;
+  titleKey: string;
+  contentKey: string;
+  tags: string[];
+}
+
+function useGuides(t: (key: string) => string): GuideSection[] {
+  return [
+    {
+      id: "getting-started",
+      titleKey: "sections.gettingStarted",
+      icon: <BookOpen className="w-5 h-5" />,
+      category: "getting-started",
+      articles: [
+        { id: "gs-overview", titleKey: "articles.appOverview", contentKey: "articles.appOverviewContent", tags: ["overview", "intro", "navigation", "dashboard"] },
+        { id: "gs-first-project", titleKey: "articles.firstProject", contentKey: "articles.firstProjectContent", tags: ["create", "new", "project", "setup"] },
+        { id: "gs-roles", titleKey: "articles.roles", contentKey: "articles.rolesContent", tags: ["roles", "permissions", "admin", "contractor", "manager"] },
+      ],
+    },
+    {
+      id: "projects",
+      titleKey: "sections.projects",
+      icon: <FolderKanban className="w-5 h-5" />,
+      category: "features",
+      articles: [
+        { id: "proj-overview", titleKey: "articles.projectOverview", contentKey: "articles.projectOverviewContent", tags: ["project", "overview", "budget", "progress"] },
+        { id: "proj-budget", titleKey: "articles.budgetTracking", contentKey: "articles.budgetTrackingContent", tags: ["budget", "cost", "money", "spending", "variance"] },
+      ],
+    },
+    {
+      id: "phases",
+      titleKey: "sections.phases",
+      icon: <HardHat className="w-5 h-5" />,
+      category: "features",
+      articles: [
+        { id: "phase-lifecycle", titleKey: "articles.phaseLifecycle", contentKey: "articles.phaseLifecycleContent", tags: ["phase", "status", "lifecycle", "review", "complete"] },
+        { id: "phase-dependencies", titleKey: "articles.phaseDependencies", contentKey: "articles.phaseDependenciesContent", tags: ["dependency", "dependencies", "link", "scheduling", "timeline"] },
+      ],
+    },
+    {
+      id: "checklists",
+      titleKey: "sections.checklists",
+      icon: <ClipboardCheck className="w-5 h-5" />,
+      category: "features",
+      articles: [
+        { id: "check-templates", titleKey: "articles.checklistTemplates", contentKey: "articles.checklistTemplatesContent", tags: ["checklist", "template", "items", "check", "complete"] },
+      ],
+    },
+    {
+      id: "documents",
+      titleKey: "sections.documents",
+      icon: <FileText className="w-5 h-5" />,
+      category: "features",
+      articles: [
+        { id: "doc-management", titleKey: "articles.documentManagement", contentKey: "articles.documentManagementContent", tags: ["document", "upload", "approve", "reject", "pdf"] },
+      ],
+    },
+    {
+      id: "photos",
+      titleKey: "sections.photos",
+      icon: <Camera className="w-5 h-5" />,
+      category: "features",
+      articles: [
+        { id: "photo-progress", titleKey: "articles.progressPhotos", contentKey: "articles.progressPhotosContent", tags: ["photo", "camera", "progress", "flag", "image"] },
+      ],
+    },
+    {
+      id: "team",
+      titleKey: "sections.team",
+      icon: <Users className="w-5 h-5" />,
+      category: "features",
+      articles: [
+        { id: "team-invite", titleKey: "articles.invitingTeam", contentKey: "articles.invitingTeamContent", tags: ["invite", "team", "member", "email", "join"] },
+      ],
+    },
+    {
+      id: "notifications",
+      titleKey: "sections.notifications",
+      icon: <Bell className="w-5 h-5" />,
+      category: "features",
+      articles: [
+        { id: "notif-channels", titleKey: "articles.notifChannels", contentKey: "articles.notifChannelsContent", tags: ["notification", "email", "sms", "alert", "preference"] },
+      ],
+    },
+    {
+      id: "comments",
+      titleKey: "sections.comments",
+      icon: <MessageSquare className="w-5 h-5" />,
+      category: "features",
+      articles: [
+        { id: "comments-usage", titleKey: "articles.phaseComments", contentKey: "articles.phaseCommentsContent", tags: ["comment", "discuss", "communication", "message"] },
+      ],
+    },
+    {
+      id: "settings",
+      titleKey: "sections.settingsAdmin",
+      icon: <Settings className="w-5 h-5" />,
+      category: "admin",
+      articles: [
+        { id: "settings-theme", titleKey: "articles.themeCustomization", contentKey: "articles.themeCustomizationContent", tags: ["theme", "color", "logo", "brand", "appearance"] },
+        { id: "settings-security", titleKey: "articles.securityAccess", contentKey: "articles.securityAccessContent", tags: ["security", "login", "password", "oauth", "access"] },
+      ],
+    },
+  ];
+}
+
+interface Props {
+  userRole: string;
+}
+
+export function HelpCenter({ userRole }: Props) {
+  const [search, setSearch] = useState("");
+  const [expandedSection, setExpandedSection] = useState<string | null>("getting-started");
+  const [expandedArticle, setExpandedArticle] = useState<string | null>("gs-overview");
+  const t = useTranslations("help");
+  const tc = useTranslations("common");
+
+  const GUIDES = useGuides(t);
+
+  // Filter guides based on role (hide admin section for non-admin/PM)
+  const isAdmin = userRole === "ADMIN" || userRole === "PROJECT_MANAGER";
+  const visibleGuides = GUIDES.filter(
+    (g) => g.category !== "admin" || isAdmin
+  );
+
+  // Search filter
+  const searchLower = search.toLowerCase().trim();
+  const filteredGuides = searchLower
+    ? visibleGuides
+        .map((section) => ({
+          ...section,
+          articles: section.articles.filter(
+            (a) =>
+              t(a.titleKey).toLowerCase().includes(searchLower) ||
+              t(a.contentKey).toLowerCase().includes(searchLower) ||
+              a.tags.some((tag) => tag.includes(searchLower))
+          ),
+        }))
+        .filter((section) => section.articles.length > 0)
+    : visibleGuides;
+
+  const totalArticles = filteredGuides.reduce(
+    (sum, s) => sum + s.articles.length,
+    0
+  );
+
+  return (
+    <div>
+      {/* Search */}
+      <div className="relative mb-6">
+        <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" />
+        <input
+          type="text"
+          placeholder={t("searchPlaceholder")}
+          value={search}
+          onChange={(e) => {
+            setSearch(e.target.value);
+            if (e.target.value) {
+              setExpandedSection(null);
+              setExpandedArticle(null);
+            }
+          }}
+          className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
+        />
+        {search && (
+          <span className="absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400">
+            {totalArticles} {totalArticles !== 1 ? "results" : "result"}
+          </span>
+        )}
+      </div>
+
+      {/* Quick Links */}
+      {!search && (
+        <div className="grid grid-cols-2 sm:grid-cols-5 gap-3 mb-6">
+          <button
+            onClick={() => resetTour()}
+            className="flex items-center gap-2 p-3 bg-[var(--color-primary-bg)] rounded-lg border border-[var(--color-primary-light)]/30 hover:border-[var(--color-primary-light)] hover:shadow-sm transition-all text-sm font-medium text-[var(--color-primary-dark)]"
+          >
+            <PlayCircle className="w-4 h-4" />
+            {t("replayIntro")}
+          </button>
+          {[
+            { label: t("createProject"), icon: <FolderKanban className="w-4 h-4" />, section: "projects", article: "proj-overview" },
+            { label: t("phaseStatus"), icon: <HardHat className="w-4 h-4" />, section: "phases", article: "phase-lifecycle" },
+            { label: t("inviteTeam"), icon: <Users className="w-4 h-4" />, section: "team", article: "team-invite" },
+            { label: tc("search"), icon: <Bell className="w-4 h-4" />, section: "notifications", article: "notif-channels" },
+          ].map((link) => (
+            <button
+              key={link.label}
+              onClick={() => {
+                setExpandedSection(link.section);
+                setExpandedArticle(link.article);
+              }}
+              className="flex items-center gap-2 p-3 bg-white rounded-lg border border-gray-200 hover:border-[var(--color-primary-light)] hover:shadow-sm transition-all text-sm font-medium text-gray-700"
+            >
+              <span className="text-[var(--color-primary)]">{link.icon}</span>
+              {link.label}
+            </button>
+          ))}
+        </div>
+      )}
+
+      {/* Guide Sections */}
+      <div className="space-y-3">
+        {filteredGuides.map((section) => {
+          const isOpen = search ? true : expandedSection === section.id;
+          return (
+            <div
+              key={section.id}
+              className="bg-white rounded-xl border border-gray-200 overflow-hidden"
+            >
+              <button
+                onClick={() => {
+                  if (!search) {
+                    setExpandedSection(isOpen ? null : section.id);
+                    if (!isOpen) setExpandedArticle(section.articles[0]?.id || null);
+                  }
+                }}
+                className="w-full flex items-center gap-3 px-5 py-4 text-left hover:bg-gray-50 transition-colors"
+              >
+                <span className="text-[var(--color-primary)]">{section.icon}</span>
+                <span className="text-sm font-semibold text-gray-900 flex-1">
+                  {t(section.titleKey)}
+                </span>
+                <span className="text-xs text-gray-400 mr-2">
+                  {section.articles.length} {section.articles.length !== 1 ? "articles" : "article"}
+                </span>
+                {isOpen ? (
+                  <ChevronDown className="w-4 h-4 text-gray-400" />
+                ) : (
+                  <ChevronRight className="w-4 h-4 text-gray-400" />
+                )}
+              </button>
+
+              {isOpen && (
+                <div className="border-t border-gray-100">
+                  {section.articles.map((article) => {
+                    const isArticleOpen = search || expandedArticle === article.id;
+                    return (
+                      <div key={article.id} className="border-b border-gray-50 last:border-0">
+                        <button
+                          onClick={() =>
+                            setExpandedArticle(
+                              isArticleOpen ? null : article.id
+                            )
+                          }
+                          className="w-full flex items-center gap-2 px-5 py-3 text-left hover:bg-gray-50 transition-colors"
+                        >
+                          {isArticleOpen ? (
+                            <ChevronDown className="w-3.5 h-3.5 text-[var(--color-primary)]" />
+                          ) : (
+                            <ChevronRight className="w-3.5 h-3.5 text-gray-400" />
+                          )}
+                          <span
+                            className={cn(
+                              "text-sm",
+                              isArticleOpen
+                                ? "font-medium text-[var(--color-primary-dark)]"
+                                : "text-gray-700"
+                            )}
+                          >
+                            {t(article.titleKey)}
+                          </span>
+                        </button>
+                        {isArticleOpen && (
+                          <div className="px-5 pb-4 pl-10">
+                            <div className="text-sm text-gray-600 leading-relaxed whitespace-pre-line">
+                              {t(article.contentKey)}
+                            </div>
+                          </div>
+                        )}
+                      </div>
+                    );
+                  })}
+                </div>
+              )}
+            </div>
+          );
+        })}
+
+        {filteredGuides.length === 0 && (
+          <div className="text-center py-12 bg-white rounded-xl border border-gray-200">
+            <Search className="w-10 h-10 text-gray-300 mx-auto mb-3" />
+            <p className="text-sm font-medium text-gray-900">{tc("noResults")}</p>
+            <p className="text-xs text-gray-500 mt-1">
+              {tc("tryAgain")}
+            </p>
+          </div>
+        )}
+      </div>
+
+      {/* Contact Support */}
+      <div className="mt-8 bg-[var(--color-primary-bg)] rounded-xl p-6 text-center">
+        <Shield className="w-8 h-8 text-[var(--color-primary)] mx-auto mb-3" />
+        <h3 className="text-sm font-semibold text-gray-900 mb-1">
+          {t("needMoreHelp")}
+        </h3>
+        <p className="text-sm text-gray-600 mb-3">
+          {t("contactAdmin")}
+        </p>
+        <a
+          href="mailto:support@constructionpm.app"
+          className="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-[var(--color-primary)] hover:bg-white/60 rounded-lg transition-colors"
+        >
+          <ExternalLink className="w-4 h-4" />
+          {t("contactSupport")}
+        </a>
+      </div>
+    </div>
+  );
+}
diff --git a/src/components/help/OnboardingTour.tsx b/src/components/help/OnboardingTour.tsx
new file mode 100644
index 0000000..f074342
--- /dev/null
+++ b/src/components/help/OnboardingTour.tsx
@@ -0,0 +1,211 @@
+"use client";
+
+import { useState, useEffect } from "react";
+import {
+  X,
+  ChevronRight,
+  ChevronLeft,
+  FolderKanban,
+  HardHat,
+  Users,
+  ClipboardCheck,
+  Camera,
+  Bell,
+  Rocket,
+} from "lucide-react";
+import { cn } from "@/lib/utils";
+import { useTranslations } from "next-intl";
+
+interface TourStep {
+  icon: React.ReactNode;
+  titleKey: string;
+  descKey: string;
+  tipKey?: string;
+}
+
+const ADMIN_STEPS: TourStep[] = [
+  { icon: <Rocket className="w-8 h-8" />, titleKey: "welcomeTitle", descKey: "welcomeDesc", tipKey: "welcomeTip" },
+  { icon: <FolderKanban className="w-8 h-8" />, titleKey: "projectsTitle", descKey: "projectsDesc", tipKey: "projectsTip" },
+  { icon: <HardHat className="w-8 h-8" />, titleKey: "phasesTitle", descKey: "phasesDesc", tipKey: "phasesTip" },
+  { icon: <Users className="w-8 h-8" />, titleKey: "teamTitle", descKey: "teamDesc", tipKey: "teamTip" },
+  { icon: <ClipboardCheck className="w-8 h-8" />, titleKey: "checklistsTitle", descKey: "checklistsDesc", tipKey: "checklistsTip" },
+  { icon: <Bell className="w-8 h-8" />, titleKey: "notificationsTitle", descKey: "notificationsDesc", tipKey: "notificationsTip" },
+];
+
+const CONTRACTOR_STEPS: TourStep[] = [
+  { icon: <Rocket className="w-8 h-8" />, titleKey: "welcomeTitle", descKey: "contractorWelcomeDesc" },
+  { icon: <HardHat className="w-8 h-8" />, titleKey: "assignedTitle", descKey: "assignedDesc", tipKey: "assignedTip" },
+  { icon: <Camera className="w-8 h-8" />, titleKey: "uploadTitle", descKey: "uploadDesc", tipKey: "uploadTip" },
+  { icon: <ClipboardCheck className="w-8 h-8" />, titleKey: "reviewTitle", descKey: "reviewDesc", tipKey: "reviewTip" },
+];
+
+interface Props {
+  userRole: string;
+  userName?: string;
+}
+
+export const TOUR_STORAGE_KEY = "construction-pm-tour-complete";
+
+/** Call this to clear the tour flag and trigger a page-level re-render */
+export function resetTour() {
+  localStorage.removeItem(TOUR_STORAGE_KEY);
+  window.dispatchEvent(new Event("replay-tour"));
+}
+
+export function OnboardingTour({ userRole, userName }: Props) {
+  const [isOpen, setIsOpen] = useState(false);
+  const [step, setStep] = useState(0);
+  const t = useTranslations("tour");
+  const tc = useTranslations("common");
+
+  const isContractor = userRole === "CONTRACTOR";
+  const steps = isContractor ? CONTRACTOR_STEPS : ADMIN_STEPS;
+
+  useEffect(() => {
+    const tourComplete = localStorage.getItem(TOUR_STORAGE_KEY);
+    if (!tourComplete) {
+      const timer = setTimeout(() => setIsOpen(true), 1000);
+      return () => clearTimeout(timer);
+    }
+
+    function handleReplay() {
+      setStep(0);
+      setIsOpen(true);
+    }
+    window.addEventListener("replay-tour", handleReplay);
+    return () => window.removeEventListener("replay-tour", handleReplay);
+  }, []);
+
+  function completeTour() {
+    localStorage.setItem(TOUR_STORAGE_KEY, "true");
+    setIsOpen(false);
+  }
+
+  function handleNext() {
+    if (step < steps.length - 1) {
+      setStep(step + 1);
+    } else {
+      completeTour();
+    }
+  }
+
+  function handlePrev() {
+    if (step > 0) setStep(step - 1);
+  }
+
+  if (!isOpen) return null;
+
+  const currentStep = steps[step];
+  const isLast = step === steps.length - 1;
+  const progress = ((step + 1) / steps.length) * 100;
+
+  return (
+    <div className="fixed inset-0 z-[100] flex items-center justify-center p-4">
+      {/* Backdrop */}
+      <div
+        className="absolute inset-0 bg-black/50 backdrop-blur-sm"
+        onClick={completeTour}
+      />
+
+      {/* Modal */}
+      <div className="relative bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden">
+        {/* Progress bar */}
+        <div className="h-1 bg-gray-100">
+          <div
+            className="h-1 bg-[var(--color-primary)] transition-all duration-300"
+            style={{ width: `${progress}%` }}
+          />
+        </div>
+
+        {/* Close button */}
+        <button
+          onClick={completeTour}
+          className="absolute top-4 right-4 p-1 text-gray-400 hover:text-gray-600 rounded-lg z-10"
+        >
+          <X className="w-5 h-5" />
+        </button>
+
+        {/* Content */}
+        <div className="p-8 text-center">
+          {/* Step counter */}
+          <div className="flex items-center justify-center gap-1.5 mb-6">
+            {steps.map((_, i) => (
+              <div
+                key={i}
+                className={cn(
+                  "w-2 h-2 rounded-full transition-all",
+                  i === step
+                    ? "w-6 bg-[var(--color-primary)]"
+                    : i < step
+                    ? "bg-[var(--color-primary)]/40"
+                    : "bg-gray-200"
+                )}
+              />
+            ))}
+          </div>
+
+          {/* Icon */}
+          <div className="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-[var(--color-primary-bg)] text-[var(--color-primary)] mb-5">
+            {currentStep.icon}
+          </div>
+
+          {/* Title */}
+          <h2 className="text-xl font-bold text-gray-900 mb-3">
+            {step === 0 && userName
+              ? t("welcomeUser", { name: userName })
+              : t(currentStep.titleKey)}
+          </h2>
+
+          {/* Description */}
+          <p className="text-sm text-gray-600 leading-relaxed mb-4">
+            {t(currentStep.descKey)}
+          </p>
+
+          {/* Tip */}
+          {currentStep.tipKey && (
+            <div className="bg-[var(--color-primary-bg)]/50 rounded-lg px-4 py-3 mb-6">
+              <p className="text-xs text-[var(--color-primary-dark)] font-medium">
+                💡 {t(currentStep.tipKey)}
+              </p>
+            </div>
+          )}
+        </div>
+
+        {/* Navigation */}
+        <div className="flex items-center justify-between px-8 pb-8">
+          <button
+            onClick={handlePrev}
+            disabled={step === 0}
+            className={cn(
+              "inline-flex items-center gap-1.5 px-4 py-2 text-sm font-medium rounded-lg transition-colors",
+              step === 0
+                ? "text-gray-300 cursor-not-allowed"
+                : "text-gray-600 hover:bg-gray-100"
+            )}
+          >
+            <ChevronLeft className="w-4 h-4" />
+            {tc("back")}
+          </button>
+
+          <div className="flex items-center gap-2">
+            {!isLast && (
+              <button
+                onClick={completeTour}
+                className="px-4 py-2 text-sm text-gray-500 hover:text-gray-700"
+              >
+                {t("skip")}
+              </button>
+            )}
+            <button
+              onClick={handleNext}
+              className="inline-flex items-center gap-1.5 px-5 py-2.5 text-sm font-medium text-white bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] rounded-lg transition-colors"
+            >
+              {isLast ? t("getStarted") : tc("next")}
+              {!isLast && <ChevronRight className="w-4 h-4" />}
+            </button>
+          </div>
+        </div>
+      </div>
+    </div>
+  );
+}
diff --git a/src/components/notifications/NotificationList.tsx b/src/components/notifications/NotificationList.tsx
new file mode 100644
index 0000000..f441356
--- /dev/null
+++ b/src/components/notifications/NotificationList.tsx
@@ -0,0 +1,286 @@
+"use client";
+
+import { useState, useTransition } from "react";
+import { useRouter } from "next/navigation";
+import {
+  Bell,
+  HardHat,
+  ClipboardCheck,
+  FileText,
+  FileCheck,
+  UserPlus,
+  Clock,
+  CheckCircle2,
+  Trash2,
+  CheckCheck,
+} from "lucide-react";
+import { cn } from "@/lib/utils";
+import {
+  markAsRead,
+  markAllAsRead,
+  deleteNotification,
+  getNotifications,
+} from "@/actions/notifications";
+import { toast } from "sonner";
+import { formatDistanceToNow, isToday, isYesterday, subDays, isAfter } from "date-fns";
+import { useTranslations } from "next-intl";
+
+interface Notification {
+  id: string;
+  type: string;
+  title: string;
+  message: string;
+  read: boolean;
+  data: Record<string, unknown> | null;
+  createdAt: Date;
+}
+
+interface Props {
+  initialNotifications: Notification[];
+  initialTotal: number;
+  initialHasMore: boolean;
+  unreadCount: number;
+}
+
+function getNotificationIcon(type: string) {
+  const cls = "w-5 h-5";
+  switch (type) {
+    case "PHASE_STATUS_CHANGED":
+      return <HardHat className={cn(cls, "text-[var(--color-primary)]")} />;
+    case "REVIEW_REQUESTED":
+      return <Clock className={cn(cls, "text-amber-500")} />;
+    case "REVIEW_COMPLETED":
+      return <CheckCircle2 className={cn(cls, "text-green-500")} />;
+    case "CHECKLIST_COMPLETED":
+      return <ClipboardCheck className={cn(cls, "text-green-500")} />;
+    case "DOCUMENT_UPLOADED":
+      return <FileText className={cn(cls, "text-amber-500")} />;
+    case "DOCUMENT_STATUS_CHANGED":
+      return <FileCheck className={cn(cls, "text-purple-500")} />;
+    case "MEMBER_INVITED":
+      return <UserPlus className={cn(cls, "text-[var(--color-primary)]")} />;
+    case "TIMELINE_SHIFTED":
+      return <Clock className={cn(cls, "text-red-500")} />;
+    default:
+      return <Bell className={cn(cls, "text-gray-400")} />;
+  }
+}
+
+function getNotificationLink(data: Record<string, unknown> | null): string {
+  if (!data) return "/dashboard";
+  const projectId = data.projectId as string | undefined;
+  const phaseId = data.phaseId as string | undefined;
+  if (projectId && phaseId) {
+    return `/dashboard/projects/${projectId}/phases/${phaseId}`;
+  }
+  if (projectId) {
+    return `/dashboard/projects/${projectId}/timeline`;
+  }
+  return "/dashboard";
+}
+
+type DateGroup = "today" | "yesterday" | "thisWeek" | "older";
+
+function groupByDate(notifications: Notification[]): Record<DateGroup, Notification[]> {
+  const groups: Record<DateGroup, Notification[]> = {
+    today: [],
+    yesterday: [],
+    thisWeek: [],
+    older: [],
+  };
+
+  const weekAgo = subDays(new Date(), 7);
+
+  for (const n of notifications) {
+    const d = new Date(n.createdAt);
+    if (isToday(d)) {
+      groups.today.push(n);
+    } else if (isYesterday(d)) {
+      groups.yesterday.push(n);
+    } else if (isAfter(d, weekAgo)) {
+      groups.thisWeek.push(n);
+    } else {
+      groups.older.push(n);
+    }
+  }
+
+  return groups;
+}
+
+export function NotificationList({
+  initialNotifications,
+  initialTotal,
+  initialHasMore,
+  unreadCount: initialUnreadCount,
+}: Props) {
+  const router = useRouter();
+  const [notifications, setNotifications] = useState(initialNotifications);
+  const [hasMore, setHasMore] = useState(initialHasMore);
+  const [page, setPage] = useState(1);
+  const [unread, setUnread] = useState(initialUnreadCount);
+  const [isPending, startTransition] = useTransition();
+  const [loadingMore, setLoadingMore] = useState(false);
+  const t = useTranslations("notifications");
+  const tc = useTranslations("common");
+
+  async function handleMarkAllRead() {
+    startTransition(async () => {
+      const result = await markAllAsRead();
+      setNotifications((prev) => prev.map((n) => ({ ...n, read: true })));
+      setUnread(0);
+      toast.success(t("markAllRead"));
+    });
+  }
+
+  async function handleClick(notification: Notification) {
+    if (!notification.read) {
+      setNotifications((prev) =>
+        prev.map((n) => (n.id === notification.id ? { ...n, read: true } : n))
+      );
+      setUnread((prev) => Math.max(0, prev - 1));
+      markAsRead(notification.id); // fire-and-forget
+    }
+    const link = getNotificationLink(notification.data);
+    router.push(link);
+  }
+
+  async function handleDelete(e: React.MouseEvent, id: string) {
+    e.stopPropagation();
+    const n = notifications.find((n) => n.id === id);
+    setNotifications((prev) => prev.filter((n) => n.id !== id));
+    if (n && !n.read) setUnread((prev) => Math.max(0, prev - 1));
+    deleteNotification(id); // fire-and-forget
+    toast.success(t("deleted"));
+  }
+
+  async function handleLoadMore() {
+    setLoadingMore(true);
+    const nextPage = page + 1;
+    const result = await getNotifications(nextPage, 20);
+    setNotifications((prev) => [
+      ...prev,
+      ...(result.notifications as Notification[]),
+    ]);
+    setHasMore(result.hasMore);
+    setPage(nextPage);
+    setLoadingMore(false);
+  }
+
+  const groups = groupByDate(notifications);
+  const groupOrder: DateGroup[] = ["today", "yesterday", "thisWeek", "older"];
+  const hasAny = notifications.length > 0;
+
+  return (
+    <div>
+      {/* Header actions */}
+      {hasAny && unread > 0 && (
+        <div className="flex justify-end mb-4">
+          <button
+            onClick={handleMarkAllRead}
+            disabled={isPending}
+            className="inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-[var(--color-primary)] hover:bg-[var(--color-primary-bg)] rounded-lg transition-colors disabled:opacity-50"
+          >
+            <CheckCheck className="w-4 h-4" />
+            {t("markAllRead")}
+          </button>
+        </div>
+      )}
+
+      {/* Empty state */}
+      {!hasAny && (
+        <div className="text-center py-16 bg-white rounded-xl border border-gray-200">
+          <Bell className="w-12 h-12 text-gray-300 mx-auto mb-4" />
+          <h3 className="text-lg font-medium text-gray-900 mb-1">
+            {t("noNotificationsYet")}
+          </h3>
+          <p className="text-sm text-gray-500">
+            {t("emptyMessage")}
+          </p>
+        </div>
+      )}
+
+      {/* Grouped notifications */}
+      {groupOrder.map((groupName) => {
+        const items = groups[groupName];
+        if (items.length === 0) return null;
+        return (
+          <div key={groupName} className="mb-6">
+            <h3 className="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2 px-1">
+              {tc(groupName)}
+            </h3>
+            <div className="bg-white rounded-xl border border-gray-200 divide-y divide-gray-100 overflow-hidden">
+              {items.map((notification) => (
+                <div
+                  key={notification.id}
+                  onClick={() => handleClick(notification)}
+                  className={cn(
+                    "flex items-start gap-3 px-4 py-3 cursor-pointer transition-colors group",
+                    notification.read
+                      ? "hover:bg-gray-50"
+                      : "bg-[var(--color-primary-bg)]/40 hover:bg-[var(--color-primary-bg)]/60"
+                  )}
+                >
+                  {/* Unread dot */}
+                  <div className="mt-1.5 shrink-0 w-2">
+                    {!notification.read && (
+                      <div className="w-2 h-2 rounded-full bg-[var(--color-primary)]" />
+                    )}
+                  </div>
+
+                  {/* Icon */}
+                  <div className="mt-0.5 shrink-0">
+                    {getNotificationIcon(notification.type)}
+                  </div>
+
+                  {/* Content */}
+                  <div className="flex-1 min-w-0">
+                    <p
+                      className={cn(
+                        "text-sm",
+                        notification.read
+                          ? "text-gray-700"
+                          : "text-gray-900 font-medium"
+                      )}
+                    >
+                      {notification.title}
+                    </p>
+                    <p className="text-sm text-gray-500 mt-0.5 truncate">
+                      {notification.message}
+                    </p>
+                    <p className="text-xs text-gray-400 mt-1">
+                      {formatDistanceToNow(new Date(notification.createdAt), {
+                        addSuffix: true,
+                      })}
+                    </p>
+                  </div>
+
+                  {/* Delete button */}
+                  <button
+                    onClick={(e) => handleDelete(e, notification.id)}
+                    className="mt-1 p-1 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all shrink-0"
+                    title={tc("delete")}
+                  >
+                    <Trash2 className="w-4 h-4" />
+                  </button>
+                </div>
+              ))}
+            </div>
+          </div>
+        );
+      })}
+
+      {/* Load more */}
+      {hasMore && (
+        <div className="text-center mt-4">
+          <button
+            onClick={handleLoadMore}
+            disabled={loadingMore}
+            className="px-4 py-2 text-sm font-medium text-[var(--color-primary)] hover:bg-[var(--color-primary-bg)] rounded-lg transition-colors disabled:opacity-50"
+          >
+            {loadingMore ? tc("loading") : tc("loadMore")}
+          </button>
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/components/phase/AssignmentSection.tsx b/src/components/phase/AssignmentSection.tsx
index ee476fa..5a1b9bf 100644
--- a/src/components/phase/AssignmentSection.tsx
+++ b/src/components/phase/AssignmentSection.tsx
@@ -3,6 +3,7 @@
 import { useState } from "react";
 import { Users, Plus, X, Crown, Building2 } from "lucide-react";
 import { assignStaffToPhase, unassignStaffFromPhase } from "@/actions/phases";
+import { useTranslations } from "next-intl";
 
 interface Assignment {
   id: string;
@@ -37,6 +38,8 @@ export function AssignmentSection({
   allStaff,
   canEdit,
 }: AssignmentSectionProps) {
+  const t = useTranslations("team");
+  const tc = useTranslations("common");
   const [showModal, setShowModal] = useState(false);
   const [search, setSearch] = useState("");
   const [loading, setLoading] = useState(false);
@@ -69,15 +72,15 @@ export function AssignmentSection({
     <div className="bg-white rounded-xl border border-gray-200 p-5">
       <div className="flex items-center justify-between mb-4">
         <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
-          Team ({assignments.length})
+          {t("title", { count: assignments.length })}
         </h2>
         {canEdit && (
           <button
             onClick={() => setShowModal(true)}
-            className="inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 font-medium"
+            className="inline-flex items-center gap-1 text-sm text-[var(--color-primary)] hover:text-[var(--color-primary-dark)] font-medium"
           >
             <Plus className="w-4 h-4" />
-            Assign
+            {t("assign")}
           </button>
         )}
       </div>
@@ -85,86 +88,53 @@ export function AssignmentSection({
       {assignments.length === 0 ? (
         <div className="text-center py-6">
           <Users className="w-8 h-8 text-gray-300 mx-auto mb-2" />
-          <p className="text-sm text-gray-500">No one assigned yet</p>
+          <p className="text-sm text-gray-500">{t("noOneAssigned")}</p>
         </div>
       ) : (
         <div className="space-y-2">
-          {owner && (
-            <StaffCard
-              assignment={owner}
-              canEdit={canEdit}
-              onUnassign={handleUnassign}
-            />
-          )}
+          {owner && <StaffCard assignment={owner} canEdit={canEdit} onUnassign={handleUnassign} removeLabel={tc("remove")} />}
           {others.map((a) => (
-            <StaffCard
-              key={a.id}
-              assignment={a}
-              canEdit={canEdit}
-              onUnassign={handleUnassign}
-            />
+            <StaffCard key={a.id} assignment={a} canEdit={canEdit} onUnassign={handleUnassign} removeLabel={tc("remove")} />
           ))}
         </div>
       )}
 
-      {/* Assignment Modal */}
       {showModal && (
         <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4">
           <div className="bg-white rounded-xl shadow-xl w-full max-w-md max-h-[70vh] flex flex-col">
             <div className="p-4 border-b border-gray-200 flex items-center justify-between">
-              <h3 className="font-semibold text-gray-900">
-                Assign to Phase
-              </h3>
-              <button
-                onClick={() => {
-                  setShowModal(false);
-                  setSearch("");
-                }}
-                className="text-gray-400 hover:text-gray-600"
-              >
+              <h3 className="font-semibold text-gray-900">{t("assignToPhase")}</h3>
+              <button onClick={() => { setShowModal(false); setSearch(""); }} className="text-gray-400 hover:text-gray-600">
                 <X className="w-5 h-5" />
               </button>
             </div>
-
             <div className="p-4 border-b border-gray-100">
               <input
                 type="text"
-                placeholder="Search by name, company, or role..."
+                placeholder={t("searchPlaceholder")}
                 value={search}
                 onChange={(e) => setSearch(e.target.value)}
-                className="w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
+                className="w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
                 autoFocus
               />
             </div>
-
             <div className="flex-1 overflow-auto p-2">
               {available.length === 0 ? (
-                <p className="text-sm text-gray-500 text-center py-4">
-                  No matching contacts found
-                </p>
+                <p className="text-sm text-gray-500 text-center py-4">{t("noMatchingContacts")}</p>
               ) : (
                 available.map((staff) => (
-                  <div
-                    key={staff.id}
-                    className="flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg"
-                  >
+                  <div key={staff.id} className="flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg">
                     <div>
-                      <p className="text-sm font-medium text-gray-900">
-                        {staff.name}
-                      </p>
-                      <p className="text-xs text-gray-500">
-                        {[staff.role, staff.company]
-                          .filter(Boolean)
-                          .join(" · ")}
-                      </p>
+                      <p className="text-sm font-medium text-gray-900">{staff.name}</p>
+                      <p className="text-xs text-gray-500">{[staff.role, staff.company].filter(Boolean).join(" · ")}</p>
                     </div>
                     <div className="flex gap-1.5">
                       <button
                         onClick={() => handleAssign(staff.id, false)}
                         disabled={loading}
-                        className="px-2.5 py-1 text-xs font-medium bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 disabled:opacity-50"
+                        className="px-2.5 py-1 text-xs font-medium bg-[var(--color-primary-bg)] text-[var(--color-primary-dark)] rounded-lg hover:bg-[var(--color-primary-bg)] disabled:opacity-50"
                       >
-                        Add
+                        {tc("add")}
                       </button>
                       {!owner && (
                         <button
@@ -172,7 +142,7 @@ export function AssignmentSection({
                           disabled={loading}
                           className="px-2.5 py-1 text-xs font-medium bg-yellow-50 text-yellow-700 rounded-lg hover:bg-yellow-100 disabled:opacity-50"
                         >
-                          Add as Owner
+                          {t("addAsOwner")}
                         </button>
                       )}
                     </div>
@@ -191,25 +161,23 @@ function StaffCard({
   assignment,
   canEdit,
   onUnassign,
+  removeLabel,
 }: {
   assignment: Assignment;
   canEdit: boolean;
   onUnassign: (id: string) => void;
+  removeLabel: string;
 }) {
   return (
     <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
       <div className="flex items-center gap-3">
-        <div className="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 text-sm font-medium">
+        <div className="w-8 h-8 rounded-full bg-[var(--color-primary-bg)] flex items-center justify-center text-[var(--color-primary-dark)] text-sm font-medium">
           {assignment.staff.name[0]}
         </div>
         <div>
           <div className="flex items-center gap-1.5">
-            <span className="text-sm font-medium text-gray-900">
-              {assignment.staff.name}
-            </span>
-            {assignment.isOwner && (
-              <Crown className="w-3.5 h-3.5 text-yellow-500" />
-            )}
+            <span className="text-sm font-medium text-gray-900">{assignment.staff.name}</span>
+            {assignment.isOwner && <Crown className="w-3.5 h-3.5 text-yellow-500" />}
           </div>
           <div className="flex items-center gap-1.5 text-xs text-gray-500">
             {assignment.staff.role && <span>{assignment.staff.role}</span>}
@@ -226,11 +194,7 @@ function StaffCard({
         </div>
       </div>
       {canEdit && (
-        <button
-          onClick={() => onUnassign(assignment.id)}
-          className="text-gray-400 hover:text-red-500 p-1"
-          title="Remove"
-        >
+        <button onClick={() => onUnassign(assignment.id)} className="text-gray-400 hover:text-red-500 p-1" title={removeLabel}>
           <X className="w-4 h-4" />
         </button>
       )}
diff --git a/src/components/phase/ChangeOrderSection.tsx b/src/components/phase/ChangeOrderSection.tsx
new file mode 100644
index 0000000..3191d4f
--- /dev/null
+++ b/src/components/phase/ChangeOrderSection.tsx
@@ -0,0 +1,322 @@
+"use client";
+
+import { useState } from "react";
+import {
+  FileDiff,
+  Plus,
+  Check,
+  X,
+  Trash2,
+  Loader2,
+  ChevronDown,
+  AlertCircle,
+  DollarSign,
+  Clock,
+  CheckCircle2,
+  XCircle,
+} from "lucide-react";
+import {
+  createChangeOrder,
+  updateChangeOrderStatus,
+  deleteChangeOrder,
+} from "@/actions/change-orders";
+import type { ChangeOrder } from "@/lib/db-types";
+
+interface ChangeOrderSectionProps {
+  phaseId: string;
+  changeOrders: ChangeOrder[];
+  canCreate: boolean;
+  canApprove: boolean;
+}
+
+const STATUS_CONFIG: Record<
+  string,
+  { icon: typeof Clock; color: string; bg: string; label: string }
+> = {
+  PENDING: { icon: Clock, color: "text-amber-600", bg: "bg-amber-50", label: "Pending" },
+  APPROVED: { icon: CheckCircle2, color: "text-green-600", bg: "bg-green-50", label: "Approved" },
+  REJECTED: { icon: XCircle, color: "text-red-500", bg: "bg-red-50", label: "Rejected" },
+};
+
+function fmtAmount(n: number | null): string {
+  if (n == null) return "—";
+  return new Intl.NumberFormat("en-US", { style: "currency", currency: "USD", maximumFractionDigits: 0 }).format(n);
+}
+
+export function ChangeOrderSection({
+  phaseId,
+  changeOrders,
+  canCreate,
+  canApprove,
+}: ChangeOrderSectionProps) {
+  const [showForm, setShowForm] = useState(false);
+  const [submitting, setSubmitting] = useState(false);
+  const [actionId, setActionId] = useState<string | null>(null);
+  const [error, setError] = useState<string | null>(null);
+  const [form, setForm] = useState({
+    number: "",
+    title: "",
+    description: "",
+    amount: "",
+    reason: "",
+  });
+
+  const totalApproved = changeOrders
+    .filter((co) => co.status === "APPROVED" && co.amount)
+    .reduce((sum, co) => sum + Number(co.amount), 0);
+
+  const pendingCount = changeOrders.filter((co) => co.status === "PENDING").length;
+
+  const handleSubmit = async (e: React.FormEvent) => {
+    e.preventDefault();
+    if (!form.number.trim() || !form.title.trim()) return;
+    setSubmitting(true);
+    setError(null);
+    try {
+      await createChangeOrder({
+        phaseId,
+        number: form.number.trim(),
+        title: form.title.trim(),
+        description: form.description.trim() || undefined,
+        amount: form.amount ? Number(form.amount) : undefined,
+        reason: form.reason.trim() || undefined,
+      });
+      setForm({ number: "", title: "", description: "", amount: "", reason: "" });
+      setShowForm(false);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to create change order");
+    } finally {
+      setSubmitting(false);
+    }
+  };
+
+  const handleStatus = async (id: string, status: "APPROVED" | "REJECTED") => {
+    setActionId(id);
+    setError(null);
+    try {
+      await updateChangeOrderStatus(id, status);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to update status");
+    } finally {
+      setActionId(null);
+    }
+  };
+
+  const handleDelete = async (id: string) => {
+    if (!confirm("Delete this change order?")) return;
+    setActionId(id);
+    try {
+      await deleteChangeOrder(id);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to delete");
+    } finally {
+      setActionId(null);
+    }
+  };
+
+  return (
+    <div className="bg-white rounded-xl border border-gray-200 p-5">
+      {/* Header */}
+      <div className="flex items-center justify-between mb-4">
+        <div className="flex items-center gap-2">
+          <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
+            Change Orders
+          </h2>
+          {pendingCount > 0 && (
+            <span className="text-xs font-medium text-amber-600 bg-amber-50 px-1.5 py-0.5 rounded-full">
+              {pendingCount} pending
+            </span>
+          )}
+        </div>
+        <div className="flex items-center gap-3">
+          {totalApproved > 0 && (
+            <span className="text-xs text-gray-500 flex items-center gap-1">
+              <DollarSign className="w-3 h-3" />
+              {fmtAmount(totalApproved)} approved
+            </span>
+          )}
+          {canCreate && (
+            <button
+              onClick={() => setShowForm((v) => !v)}
+              className="inline-flex items-center gap-1.5 text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-primary-dark)]"
+            >
+              <Plus className="w-4 h-4" />
+              <span className="hidden sm:inline">New CO</span>
+            </button>
+          )}
+        </div>
+      </div>
+
+      {/* Error */}
+      {error && (
+        <div className="mb-3 flex items-center gap-2 p-2.5 bg-red-50 text-red-700 text-sm rounded-lg">
+          <AlertCircle className="w-4 h-4 shrink-0" />
+          <span className="flex-1">{error}</span>
+          <button onClick={() => setError(null)}><X className="w-3.5 h-3.5" /></button>
+        </div>
+      )}
+
+      {/* New CO form */}
+      {showForm && (
+        <form onSubmit={handleSubmit} className="mb-4 p-4 bg-gray-50 rounded-lg space-y-3">
+          <div className="grid grid-cols-2 gap-3">
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">CO Number *</label>
+              <input
+                required
+                value={form.number}
+                onChange={(e) => setForm((f) => ({ ...f, number: e.target.value }))}
+                placeholder="CO-001"
+                className="w-full text-sm border border-gray-200 rounded-md px-3 py-1.5 focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Amount ($)</label>
+              <input
+                type="number"
+                value={form.amount}
+                onChange={(e) => setForm((f) => ({ ...f, amount: e.target.value }))}
+                placeholder="0"
+                min="0"
+                step="0.01"
+                className="w-full text-sm border border-gray-200 rounded-md px-3 py-1.5 focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+          </div>
+          <div>
+            <label className="block text-xs font-medium text-gray-700 mb-1">Title *</label>
+            <input
+              required
+              value={form.title}
+              onChange={(e) => setForm((f) => ({ ...f, title: e.target.value }))}
+              placeholder="Brief description of the change"
+              className="w-full text-sm border border-gray-200 rounded-md px-3 py-1.5 focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+            />
+          </div>
+          <div>
+            <label className="block text-xs font-medium text-gray-700 mb-1">Reason</label>
+            <input
+              value={form.reason}
+              onChange={(e) => setForm((f) => ({ ...f, reason: e.target.value }))}
+              placeholder="Why is this change needed?"
+              className="w-full text-sm border border-gray-200 rounded-md px-3 py-1.5 focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+            />
+          </div>
+          <div>
+            <label className="block text-xs font-medium text-gray-700 mb-1">Description</label>
+            <textarea
+              value={form.description}
+              onChange={(e) => setForm((f) => ({ ...f, description: e.target.value }))}
+              placeholder="Detailed description..."
+              rows={2}
+              className="w-full text-sm border border-gray-200 rounded-md px-3 py-1.5 focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] resize-none"
+            />
+          </div>
+          <div className="flex gap-2 justify-end">
+            <button
+              type="button"
+              onClick={() => setShowForm(false)}
+              className="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-200 rounded-md"
+            >
+              Cancel
+            </button>
+            <button
+              type="submit"
+              disabled={submitting}
+              className="px-4 py-1.5 text-sm font-medium text-white bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] rounded-md disabled:opacity-60 inline-flex items-center gap-1.5"
+            >
+              {submitting && <Loader2 className="w-3.5 h-3.5 animate-spin" />}
+              Submit CO
+            </button>
+          </div>
+        </form>
+      )}
+
+      {/* Empty state */}
+      {changeOrders.length === 0 && !showForm ? (
+        <div className="text-center py-8 border-2 border-dashed border-gray-200 rounded-lg">
+          <FileDiff className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+          <p className="text-sm text-gray-500">No change orders</p>
+          {canCreate && (
+            <p className="text-xs text-gray-400 mt-1">Click "New CO" to submit a change order</p>
+          )}
+        </div>
+      ) : (
+        <div className="space-y-2">
+          {changeOrders.map((co) => {
+            const cfg = STATUS_CONFIG[co.status] ?? STATUS_CONFIG.PENDING;
+            const StatusIcon = cfg.icon;
+            return (
+              <div
+                key={co.id}
+                className="border border-gray-100 rounded-lg p-3 hover:border-gray-200 transition-colors"
+              >
+                <div className="flex items-start justify-between gap-3">
+                  <div className="min-w-0 flex-1">
+                    <div className="flex items-center gap-2 flex-wrap">
+                      <span className="text-xs font-mono text-gray-500">{co.number}</span>
+                      <span className="text-sm font-medium text-gray-900 truncate">{co.title}</span>
+                      <span className={`inline-flex items-center gap-1 text-xs px-1.5 py-0.5 rounded-full ${cfg.bg} ${cfg.color}`}>
+                        <StatusIcon className="w-3 h-3" />
+                        {cfg.label}
+                      </span>
+                    </div>
+                    {co.reason && (
+                      <p className="text-xs text-gray-500 mt-0.5">{co.reason}</p>
+                    )}
+                    <div className="flex items-center gap-3 mt-1 text-xs text-gray-400">
+                      {co.amount != null && (
+                        <span className="font-medium text-gray-700">{fmtAmount(co.amount)}</span>
+                      )}
+                      <span>{co.requestedBy?.name || co.requestedBy?.email || "—"}</span>
+                      <span>{new Date(co.createdAt).toLocaleDateString()}</span>
+                    </div>
+                  </div>
+
+                  <div className="flex items-center gap-1 shrink-0">
+                    {/* Approve/Reject (PM/Admin on pending COs) */}
+                    {canApprove && co.status === "PENDING" && (
+                      <>
+                        <button
+                          onClick={() => handleStatus(co.id, "APPROVED")}
+                          disabled={actionId === co.id}
+                          title="Approve"
+                          className="p-1.5 text-green-600 hover:bg-green-50 rounded transition-colors"
+                        >
+                          {actionId === co.id ? (
+                            <Loader2 className="w-4 h-4 animate-spin" />
+                          ) : (
+                            <Check className="w-4 h-4" />
+                          )}
+                        </button>
+                        <button
+                          onClick={() => handleStatus(co.id, "REJECTED")}
+                          disabled={actionId === co.id}
+                          title="Reject"
+                          className="p-1.5 text-red-500 hover:bg-red-50 rounded transition-colors"
+                        >
+                          <X className="w-4 h-4" />
+                        </button>
+                      </>
+                    )}
+                    {/* Delete */}
+                    {canApprove && (
+                      <button
+                        onClick={() => handleDelete(co.id)}
+                        disabled={actionId === co.id}
+                        title="Delete"
+                        className="p-1.5 text-gray-300 hover:text-red-500 rounded transition-colors opacity-0 group-hover:opacity-100"
+                      >
+                        <Trash2 className="w-3.5 h-3.5" />
+                      </button>
+                    )}
+                  </div>
+                </div>
+              </div>
+            );
+          })}
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/components/phase/ChecklistSection.tsx b/src/components/phase/ChecklistSection.tsx
index 2fa76f1..bd3b087 100644
--- a/src/components/phase/ChecklistSection.tsx
+++ b/src/components/phase/ChecklistSection.tsx
@@ -16,6 +16,7 @@ import {
   addCustomChecklistItem,
   deleteChecklistItem,
 } from "@/actions/checklists";
+import { useTranslations } from "next-intl";
 
 interface ChecklistItem {
   id: string;
@@ -52,6 +53,8 @@ export function ChecklistSection({
   canEdit,
   canManage,
 }: ChecklistSectionProps) {
+  const t = useTranslations("checklist");
+  const tc = useTranslations("common");
   const [showTemplatePicker, setShowTemplatePicker] = useState(false);
   const [showAddItem, setShowAddItem] = useState(false);
   const [newItemTitle, setNewItemTitle] = useState("");
@@ -109,7 +112,7 @@ export function ChecklistSection({
     <div className="bg-white rounded-xl border border-gray-200 p-5">
       <div className="flex items-center justify-between mb-4">
         <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
-          Checklist
+          {t("title")}
           {total > 0 && (
             <span className="ml-2 text-gray-500 normal-case font-normal">
               {completed}/{total}
@@ -119,10 +122,10 @@ export function ChecklistSection({
         {canEdit && checklist && (
           <button
             onClick={() => setShowAddItem(true)}
-            className="inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 font-medium"
+            className="inline-flex items-center gap-1 text-sm text-[var(--color-primary)] hover:text-[var(--color-primary-dark)] font-medium"
           >
             <Plus className="w-4 h-4" />
-            Add Item
+            {t("addItem")}
           </button>
         )}
       </div>
@@ -130,20 +133,19 @@ export function ChecklistSection({
       {!checklist ? (
         <div className="text-center py-6">
           <ClipboardList className="w-8 h-8 text-gray-300 mx-auto mb-2" />
-          <p className="text-sm text-gray-500 mb-3">No checklist yet</p>
+          <p className="text-sm text-gray-500 mb-3">{t("noChecklistYet")}</p>
           {canEdit && templates.length > 0 && (
             <button
               onClick={() => setShowTemplatePicker(true)}
-              className="inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700"
+              className="inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)]"
             >
               <ListChecks className="w-4 h-4" />
-              Apply Template
+              {t("applyTemplate")}
             </button>
           )}
         </div>
       ) : (
         <>
-          {/* Progress bar */}
           {total > 0 && (
             <div className="mb-4">
               <div className="h-2 bg-gray-100 rounded-full overflow-hidden">
@@ -151,22 +153,17 @@ export function ChecklistSection({
                   className="h-full rounded-full transition-all duration-300"
                   style={{
                     width: `${progressPct}%`,
-                    backgroundColor:
-                      progressPct === 100 ? "#16a34a" : "#3b82f6",
+                    backgroundColor: progressPct === 100 ? "#16a34a" : "var(--color-primary)",
                   }}
                 />
               </div>
-              <p className="text-xs text-gray-500 mt-1">{progressPct}% complete</p>
+              <p className="text-xs text-gray-500 mt-1">{progressPct}{t("percentComplete")}</p>
             </div>
           )}
 
-          {/* Items */}
           <div className="space-y-1">
             {items.map((item) => (
-              <div
-                key={item.id}
-                className="flex items-start gap-3 p-2 rounded-lg hover:bg-gray-50 group"
-              >
+              <div key={item.id} className="flex items-start gap-3 p-2 rounded-lg hover:bg-gray-50 group">
                 <button
                   onClick={() => canEdit && handleToggle(item.id)}
                   disabled={!canEdit || togglingId === item.id}
@@ -179,20 +176,13 @@ export function ChecklistSection({
                   )}
                 </button>
                 <div className="flex-1 min-w-0">
-                  <span
-                    className={`text-sm ${
-                      item.completed
-                        ? "text-gray-400 line-through"
-                        : "text-gray-900"
-                    }`}
-                  >
+                  <span className={`text-sm ${item.completed ? "text-gray-400 line-through" : "text-gray-900"}`}>
                     {item.title}
                   </span>
                   {item.completed && item.completedBy && (
                     <p className="text-xs text-gray-400 mt-0.5">
                       {item.completedBy.name || item.completedBy.email}
-                      {item.completedAt &&
-                        ` · ${new Date(item.completedAt).toLocaleDateString()}`}
+                      {item.completedAt && ` · ${new Date(item.completedAt).toLocaleDateString()}`}
                     </p>
                   )}
                 </div>
@@ -200,7 +190,7 @@ export function ChecklistSection({
                   <button
                     onClick={() => handleDeleteItem(item.id)}
                     className="opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 p-1 shrink-0"
-                    title="Delete item"
+                    title={tc("delete")}
                   >
                     <Trash2 className="w-3.5 h-3.5" />
                   </button>
@@ -209,32 +199,25 @@ export function ChecklistSection({
             ))}
           </div>
 
-          {/* Add item inline */}
           {showAddItem && (
             <div className="flex items-center gap-2 mt-3 pt-3 border-t border-gray-100">
               <input
                 type="text"
-                placeholder="New checklist item..."
+                placeholder={t("newItemPlaceholder")}
                 value={newItemTitle}
                 onChange={(e) => setNewItemTitle(e.target.value)}
                 onKeyDown={(e) => e.key === "Enter" && handleAddItem()}
-                className="flex-1 p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
+                className="flex-1 p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
                 autoFocus
               />
               <button
                 onClick={handleAddItem}
                 disabled={loading || !newItemTitle.trim()}
-                className="px-3 py-2 text-sm font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"
+                className="px-3 py-2 text-sm font-medium bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)] disabled:opacity-50"
               >
-                Add
+                {tc("add")}
               </button>
-              <button
-                onClick={() => {
-                  setShowAddItem(false);
-                  setNewItemTitle("");
-                }}
-                className="p-2 text-gray-400 hover:text-gray-600"
-              >
+              <button onClick={() => { setShowAddItem(false); setNewItemTitle(""); }} className="p-2 text-gray-400 hover:text-gray-600">
                 <X className="w-4 h-4" />
               </button>
             </div>
@@ -242,36 +225,25 @@ export function ChecklistSection({
         </>
       )}
 
-      {/* Template Picker Modal */}
       {showTemplatePicker && (
         <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4">
           <div className="bg-white rounded-xl shadow-xl w-full max-w-md">
             <div className="p-4 border-b border-gray-200 flex items-center justify-between">
-              <h3 className="font-semibold text-gray-900">
-                Choose a Template
-              </h3>
-              <button
-                onClick={() => setShowTemplatePicker(false)}
-                className="text-gray-400 hover:text-gray-600"
-              >
+              <h3 className="font-semibold text-gray-900">{t("chooseTemplate")}</h3>
+              <button onClick={() => setShowTemplatePicker(false)} className="text-gray-400 hover:text-gray-600">
                 <X className="w-5 h-5" />
               </button>
             </div>
-
             <div className="p-2">
-              {templates.map((t) => (
+              {templates.map((tmpl) => (
                 <button
-                  key={t.id}
-                  onClick={() => handleApplyTemplate(t.id)}
+                  key={tmpl.id}
+                  onClick={() => handleApplyTemplate(tmpl.id)}
                   disabled={loading}
                   className="w-full text-left p-3 hover:bg-gray-50 rounded-lg disabled:opacity-50"
                 >
-                  <p className="text-sm font-medium text-gray-900">
-                    {t.name}
-                  </p>
-                  <p className="text-xs text-gray-500 mt-0.5">
-                    {t.items.length} items
-                  </p>
+                  <p className="text-sm font-medium text-gray-900">{tmpl.name}</p>
+                  <p className="text-xs text-gray-500 mt-0.5">{t("itemCount", { count: tmpl.items.length })}</p>
                 </button>
               ))}
             </div>
diff --git a/src/components/phase/CommentSection.tsx b/src/components/phase/CommentSection.tsx
new file mode 100644
index 0000000..7d303be
--- /dev/null
+++ b/src/components/phase/CommentSection.tsx
@@ -0,0 +1,162 @@
+"use client";
+
+import React from "react";
+import { useState, useTransition } from "react";
+import { MessageSquare, Send, Trash2, Loader2 } from "lucide-react";
+import { addPhaseComment, deletePhaseComment } from "@/actions/comments";
+import { formatDistanceToNow } from "date-fns";
+import { useTranslations } from "next-intl";
+
+interface User {
+  id: string;
+  name: string | null;
+  email: string;
+  image: string | null;
+}
+
+interface Comment {
+  id: string;
+  content: string;
+  createdAt: Date;
+  user: User;
+}
+
+interface CommentSectionProps {
+  phaseId: string;
+  comments: Comment[];
+  currentUserId: string;
+  isAdmin?: boolean;
+}
+
+export function CommentSection({
+  phaseId,
+  comments,
+  currentUserId,
+  isAdmin = false,
+}: CommentSectionProps) {
+  const t = useTranslations("comments");
+  const [newComment, setNewComment] = useState<string>("");
+  const [isPending, startTransition] = useTransition();
+  const [deletingId, setDeletingId] = useState<string | null>(null);
+  const [localComments, setLocalComments] = useState<Comment[]>(comments);
+
+  const handleAddComment = async (): Promise<void> => {
+    if (!newComment.trim()) return;
+    const commentText: string = newComment.trim();
+    setNewComment("");
+    startTransition(async () => {
+      try {
+        const result: Comment = await addPhaseComment({ phaseId, content: commentText });
+        setLocalComments((prev: Comment[]) => [result, ...prev]);
+      } catch (error: unknown) {
+        console.error("Failed to add comment:", error);
+        setNewComment(commentText);
+      }
+    });
+  };
+
+  const handleDeleteComment = (commentId: string): void => {
+    setDeletingId(commentId);
+    startTransition(async () => {
+      try {
+        await deletePhaseComment(commentId);
+        setLocalComments((prev: Comment[]) => prev.filter((c) => c.id !== commentId));
+      } catch (error: unknown) {
+        console.error("Failed to delete comment:", error);
+      } finally {
+        setDeletingId(null);
+      }
+    });
+  };
+
+  const getAvatarLetter = (user: User): string =>
+    user.name ? user.name.charAt(0).toUpperCase() : user.email.charAt(0).toUpperCase();
+
+  const getUserDisplayName = (user: User): string => user.name || user.email;
+  const canDelete = (commentUserId: string): boolean =>
+    commentUserId === currentUserId || isAdmin;
+
+  const sortedComments: Comment[] = [...localComments].sort(
+    (a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+  );
+
+  return (
+    <div className="bg-white rounded-xl border border-gray-200 p-5">
+      <div className="flex items-center gap-2 mb-4">
+        <MessageSquare className="w-5 h-5 text-gray-600" />
+        <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
+          {t("title")}
+          {localComments.length > 0 && (
+            <span className="ml-2 text-gray-500 normal-case font-normal">
+              {localComments.length}
+            </span>
+          )}
+        </h2>
+      </div>
+
+      {localComments.length === 0 ? (
+        <div className="text-center py-6">
+          <MessageSquare className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+          <p className="text-sm text-gray-500">{t("noCommentsYet")}</p>
+        </div>
+      ) : (
+        <div className="space-y-3 mb-4 max-h-96 overflow-y-auto">
+          {sortedComments.map((comment: Comment) => (
+            <div key={comment.id} className="flex gap-3 p-3 rounded-lg hover:bg-gray-50 group">
+              <div className="flex-shrink-0">
+                {comment.user.image ? (
+                  <img src={comment.user.image} alt={getUserDisplayName(comment.user)} className="w-8 h-8 rounded-full" />
+                ) : (
+                  <div className="w-8 h-8 rounded-full bg-[var(--color-primary)] text-white text-xs font-semibold flex items-center justify-center">
+                    {getAvatarLetter(comment.user)}
+                  </div>
+                )}
+              </div>
+              <div className="flex-1 min-w-0">
+                <div className="flex items-baseline gap-2">
+                  <p className="text-sm font-medium text-gray-900">{getUserDisplayName(comment.user)}</p>
+                  <p className="text-xs text-gray-500">
+                    {formatDistanceToNow(new Date(comment.createdAt), { addSuffix: true })}
+                  </p>
+                </div>
+                <p className="text-sm text-gray-700 mt-1 break-words">{comment.content}</p>
+              </div>
+              {canDelete(comment.user.id) && (
+                <button
+                  onClick={() => handleDeleteComment(comment.id)}
+                  disabled={deletingId === comment.id || isPending}
+                  className="opacity-0 group-hover:opacity-100 flex-shrink-0 text-gray-400 hover:text-red-500 p-1 disabled:opacity-50"
+                  title={t("deleteComment")}
+                >
+                  {deletingId === comment.id ? <Loader2 className="w-4 h-4 animate-spin" /> : <Trash2 className="w-4 h-4" />}
+                </button>
+              )}
+            </div>
+          ))}
+        </div>
+      )}
+
+      <div className="flex items-end gap-2 pt-3 border-t border-gray-100">
+        <input
+          type="text"
+          placeholder={t("addComment")}
+          value={newComment}
+          onChange={(e: React.ChangeEvent<HTMLInputElement>) => setNewComment(e.target.value)}
+          onKeyDown={(e: React.KeyboardEvent<HTMLInputElement>) => {
+            if (e.key === "Enter" && !e.shiftKey && !isPending) { e.preventDefault(); handleAddComment(); }
+          }}
+          disabled={isPending}
+          className="flex-1 p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none disabled:bg-gray-50"
+        />
+        <button
+          onClick={handleAddComment}
+          disabled={isPending || !newComment.trim()}
+          className="p-2 text-[var(--color-primary)] hover:text-[var(--color-primary-dark)] disabled:opacity-50 disabled:cursor-not-allowed"
+          title={t("sendComment")}
+        >
+          {isPending ? <Loader2 className="w-5 h-5 animate-spin" /> : <Send className="w-5 h-5" />}
+        </button>
+      </div>
+    </div>
+  );
+}
diff --git a/src/components/phase/DocumentAIPanel.tsx b/src/components/phase/DocumentAIPanel.tsx
new file mode 100644
index 0000000..645f03d
--- /dev/null
+++ b/src/components/phase/DocumentAIPanel.tsx
@@ -0,0 +1,235 @@
+"use client";
+
+import { useState } from "react";
+import {
+  Sparkles,
+  Loader2,
+  ChevronDown,
+  ChevronUp,
+  Calendar,
+  DollarSign,
+  Hash,
+  Tag,
+  AlertCircle,
+  CheckCircle2,
+} from "lucide-react";
+
+interface ExtractedData {
+  extractedAt: string;
+  method: string;
+  confidence: number;
+  fileExtension: string;
+  detectedDates: string[];
+  detectedAmounts: string[];
+  refNumbers: string[];
+  detectedKeywords: string[];
+  hints: string[];
+  summary: string;
+  note?: string;
+}
+
+interface DocumentAIPanelProps {
+  documentId: string;
+  initialData?: ExtractedData | null;
+}
+
+export function DocumentAIPanel({ documentId, initialData }: DocumentAIPanelProps) {
+  const [data, setData] = useState<ExtractedData | null>(initialData ?? null);
+  const [loading, setLoading] = useState(false);
+  const [error, setError] = useState<string | null>(null);
+  const [expanded, setExpanded] = useState(!!initialData);
+
+  const runExtraction = async () => {
+    setLoading(true);
+    setError(null);
+    try {
+      const res = await fetch(`/api/documents/${documentId}/extract`, {
+        method: "POST",
+      });
+      if (!res.ok) throw new Error("Extraction failed");
+      const json = await res.json();
+      setData(json.extractedData as ExtractedData);
+      setExpanded(true);
+    } catch (e) {
+      setError(e instanceof Error ? e.message : "Failed to extract");
+    } finally {
+      setLoading(false);
+    }
+  };
+
+  const confidenceColor =
+    !data
+      ? ""
+      : data.confidence >= 70
+      ? "text-green-600"
+      : data.confidence >= 50
+      ? "text-amber-600"
+      : "text-red-500";
+
+  return (
+    <div className="mt-3 border border-gray-100 rounded-lg overflow-hidden">
+      {/* Header bar */}
+      <div
+        className="flex items-center justify-between px-3 py-2 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors"
+        onClick={() => data && setExpanded((v) => !v)}
+      >
+        <div className="flex items-center gap-2">
+          <Sparkles className="w-3.5 h-3.5 text-purple-500" />
+          <span className="text-xs font-semibold text-gray-700">AI Extraction</span>
+          {data && (
+            <span className={`text-xs font-medium ${confidenceColor}`}>
+              {data.confidence}% confidence
+            </span>
+          )}
+        </div>
+        <div className="flex items-center gap-2">
+          <button
+            onClick={(e) => {
+              e.stopPropagation();
+              runExtraction();
+            }}
+            disabled={loading}
+            className="inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium text-purple-700 bg-purple-50 hover:bg-purple-100 rounded transition-colors disabled:opacity-60"
+          >
+            {loading ? (
+              <Loader2 className="w-3 h-3 animate-spin" />
+            ) : (
+              <Sparkles className="w-3 h-3" />
+            )}
+            {data ? "Re-run" : "Extract"}
+          </button>
+          {data &&
+            (expanded ? (
+              <ChevronUp className="w-3.5 h-3.5 text-gray-400" />
+            ) : (
+              <ChevronDown className="w-3.5 h-3.5 text-gray-400" />
+            ))}
+        </div>
+      </div>
+
+      {/* Error */}
+      {error && (
+        <div className="px-3 py-2 bg-red-50 text-xs text-red-600 flex items-center gap-1.5">
+          <AlertCircle className="w-3.5 h-3.5 shrink-0" />
+          {error}
+        </div>
+      )}
+
+      {/* Content */}
+      {data && expanded && (
+        <div className="px-3 py-3 space-y-3 text-xs">
+          {/* Summary */}
+          <div className="flex items-start gap-1.5 text-gray-600">
+            <CheckCircle2 className="w-3.5 h-3.5 text-green-500 shrink-0 mt-0.5" />
+            <span>{data.summary}</span>
+          </div>
+
+          {/* Dates */}
+          {data.detectedDates.length > 0 && (
+            <div>
+              <div className="flex items-center gap-1 text-gray-500 mb-1">
+                <Calendar className="w-3 h-3" />
+                <span className="font-medium uppercase tracking-wide text-[10px]">Dates</span>
+              </div>
+              <div className="flex flex-wrap gap-1">
+                {data.detectedDates.map((d, i) => (
+                  <span
+                    key={i}
+                    className="px-1.5 py-0.5 bg-blue-50 text-blue-700 rounded font-mono"
+                  >
+                    {d}
+                  </span>
+                ))}
+              </div>
+            </div>
+          )}
+
+          {/* Amounts */}
+          {data.detectedAmounts.length > 0 && (
+            <div>
+              <div className="flex items-center gap-1 text-gray-500 mb-1">
+                <DollarSign className="w-3 h-3" />
+                <span className="font-medium uppercase tracking-wide text-[10px]">Amounts</span>
+              </div>
+              <div className="flex flex-wrap gap-1">
+                {data.detectedAmounts.map((a, i) => (
+                  <span
+                    key={i}
+                    className="px-1.5 py-0.5 bg-green-50 text-green-700 rounded font-mono"
+                  >
+                    {a}
+                  </span>
+                ))}
+              </div>
+            </div>
+          )}
+
+          {/* Reference numbers */}
+          {data.refNumbers.length > 0 && (
+            <div>
+              <div className="flex items-center gap-1 text-gray-500 mb-1">
+                <Hash className="w-3 h-3" />
+                <span className="font-medium uppercase tracking-wide text-[10px]">
+                  Reference Numbers
+                </span>
+              </div>
+              <div className="flex flex-wrap gap-1">
+                {data.refNumbers.map((r, i) => (
+                  <span
+                    key={i}
+                    className="px-1.5 py-0.5 bg-amber-50 text-amber-700 rounded font-mono"
+                  >
+                    {r}
+                  </span>
+                ))}
+              </div>
+            </div>
+          )}
+
+          {/* Keywords */}
+          {data.detectedKeywords.length > 0 && (
+            <div>
+              <div className="flex items-center gap-1 text-gray-500 mb-1">
+                <Tag className="w-3 h-3" />
+                <span className="font-medium uppercase tracking-wide text-[10px]">Keywords</span>
+              </div>
+              <div className="flex flex-wrap gap-1">
+                {data.detectedKeywords.map((k, i) => (
+                  <span
+                    key={i}
+                    className="px-1.5 py-0.5 bg-gray-100 text-gray-600 rounded capitalize"
+                  >
+                    {k}
+                  </span>
+                ))}
+              </div>
+            </div>
+          )}
+
+          {/* Hints */}
+          {data.hints.length > 0 && (
+            <div className="border-t border-gray-100 pt-2">
+              <p className="font-medium text-gray-500 uppercase tracking-wide text-[10px] mb-1">
+                Suggestions
+              </p>
+              <ul className="space-y-0.5">
+                {data.hints.map((h, i) => (
+                  <li key={i} className="text-gray-600 flex items-start gap-1">
+                    <span className="text-purple-400 shrink-0">›</span>
+                    {h}
+                  </li>
+                ))}
+              </ul>
+            </div>
+          )}
+
+          {/* Footer */}
+          <p className="text-[10px] text-gray-400 border-t border-gray-100 pt-2">
+            Extracted {new Date(data.extractedAt).toLocaleString()} · {data.method}
+            {data.note && ` · ${data.note}`}
+          </p>
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/components/phase/DocumentSection.tsx b/src/components/phase/DocumentSection.tsx
index eec4a4a..4bd4c46 100644
--- a/src/components/phase/DocumentSection.tsx
+++ b/src/components/phase/DocumentSection.tsx
@@ -21,6 +21,8 @@ import {
   updateDocumentStatus,
   deleteDocument,
 } from "@/actions/documents";
+import { useTranslations } from "next-intl";
+import { DocumentAIPanel } from "./DocumentAIPanel";
 
 interface Document {
   id: string;
@@ -34,6 +36,8 @@ interface Document {
   notes: string | null;
   createdAt: Date;
   uploadedBy: { id: string; name: string | null; email: string };
+  // eslint-disable-next-line @typescript-eslint/no-explicit-any
+  extractedData?: any;
 }
 
 interface DocumentSectionProps {
@@ -58,24 +62,13 @@ const STATUS_BADGE: Record<string, string> = {
   EXPIRED: "bg-gray-100 text-gray-600",
 };
 
-const CATEGORY_LABEL: Record<string, string> = {
-  PERMIT: "Permit",
-  CONTRACT: "Contract",
-  INVOICE: "Invoice",
-  BLUEPRINT: "Blueprint",
-  INSPECTION: "Inspection",
-  OTHER: "Other",
+const STATUS_LABEL_KEYS: Record<string, string> = {
+  PENDING: "pending",
+  APPROVED: "approved",
+  REJECTED: "rejected",
+  EXPIRED: "expired",
 };
 
-const CATEGORY_OPTIONS: { value: DocCategory; label: string }[] = [
-  { value: "PERMIT", label: "Permit" },
-  { value: "CONTRACT", label: "Contract" },
-  { value: "INVOICE", label: "Invoice" },
-  { value: "BLUEPRINT", label: "Blueprint" },
-  { value: "INSPECTION", label: "Inspection" },
-  { value: "OTHER", label: "Other" },
-];
-
 function formatFileSize(bytes: number): string {
   if (bytes < 1024) return `${bytes} B`;
   if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;
@@ -94,7 +87,7 @@ function getFileIcon(mimeType: string) {
 }
 
 function formatDate(date: Date): string {
-  return new Date(date).toLocaleDateString("en-US", {
+  return new Date(date).toLocaleDateString(undefined, {
     month: "short",
     day: "numeric",
   });
@@ -106,6 +99,28 @@ export function DocumentSection({
   canUpload,
   canManageStatus,
 }: DocumentSectionProps) {
+  const t = useTranslations("documents");
+  const ts = useTranslations("status");
+  const tc = useTranslations("common");
+
+  const CATEGORY_LABEL: Record<string, string> = {
+    PERMIT: t("permit"),
+    CONTRACT: t("contract"),
+    INVOICE: t("invoice"),
+    BLUEPRINT: t("blueprint"),
+    INSPECTION: t("inspection"),
+    OTHER: t("other"),
+  };
+
+  const CATEGORY_OPTIONS: { value: DocCategory; label: string }[] = [
+    { value: "PERMIT", label: t("permit") },
+    { value: "CONTRACT", label: t("contract") },
+    { value: "INVOICE", label: t("invoice") },
+    { value: "BLUEPRINT", label: t("blueprint") },
+    { value: "INSPECTION", label: t("inspection") },
+    { value: "OTHER", label: t("other") },
+  ];
+
   const [isDragging, setIsDragging] = useState(false);
   const [isUploading, setIsUploading] = useState(false);
   const [uploadProgress, setUploadProgress] = useState<string | null>(null);
@@ -165,17 +180,15 @@ export function DocumentSection({
         const file = pendingFiles[i];
         setUploadProgress(
           pendingFiles.length > 1
-            ? `Uploading ${i + 1} of ${pendingFiles.length}...`
-            : `Uploading ${file.name}...`
+            ? t("uploading", { current: i + 1, total: pendingFiles.length })
+            : t("uploadingFile", { name: file.name })
         );
 
-        // Upload to Vercel Blob
         const blob = await upload(file.name, file, {
           access: "public",
           handleUploadUrl: "/api/upload",
         });
 
-        // Create document record in database
         await createDocument({
           phaseId,
           name: file.name,
@@ -186,7 +199,6 @@ export function DocumentSection({
         });
       }
 
-      // Reset form
       setPendingFiles([]);
       setShowUploadForm(false);
       setSelectedCategory("OTHER");
@@ -212,18 +224,18 @@ export function DocumentSection({
       setStatusMenuId(null);
     } catch (err) {
       setError(
-        err instanceof Error ? err.message : "Failed to update status"
+        err instanceof Error ? err.message : t("failedToUpdateStatus")
       );
     }
   };
 
   const handleDelete = async (docId: string) => {
-    if (!confirm("Delete this document? This cannot be undone.")) return;
+    if (!confirm(t("deleteConfirm"))) return;
     setDeletingId(docId);
     try {
       await deleteDocument(docId);
     } catch (err) {
-      setError(err instanceof Error ? err.message : "Failed to delete");
+      setError(err instanceof Error ? err.message : t("failedToDelete"));
     } finally {
       setDeletingId(null);
     }
@@ -240,15 +252,15 @@ export function DocumentSection({
     <div className="bg-white rounded-xl border border-gray-200 p-5">
       <div className="flex items-center justify-between mb-4">
         <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
-          Documents ({documents.length})
+          {t("title", { count: documents.length })}
         </h2>
         {canUpload && !showUploadForm && (
           <button
             onClick={() => fileInputRef.current?.click()}
-            className="inline-flex items-center gap-1.5 text-sm font-medium text-blue-600 hover:text-blue-700"
+            className="inline-flex items-center gap-1.5 text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-primary-dark)]"
           >
             <Upload className="w-4 h-4" />
-            Upload
+            {tc("upload")}
           </button>
         )}
         <input
@@ -274,15 +286,14 @@ export function DocumentSection({
 
       {/* Upload form (shown after files selected) */}
       {showUploadForm && (
-        <div className="mb-4 p-4 bg-blue-50 rounded-lg border border-blue-200">
+        <div className="mb-4 p-4 bg-[var(--color-primary-bg)] rounded-lg border border-[var(--color-primary-light)]">
           <div className="flex items-center justify-between mb-3">
-            <span className="text-sm font-medium text-blue-900">
-              {pendingFiles.length} file{pendingFiles.length > 1 ? "s" : ""}{" "}
-              selected
+            <span className="text-sm font-medium text-[var(--color-primary-dark)]">
+              {t("filesSelected", { count: pendingFiles.length })}
             </span>
             <button
               onClick={cancelUpload}
-              className="text-blue-400 hover:text-blue-600"
+              className="text-[var(--color-primary-light)] hover:text-[var(--color-primary)]"
               disabled={isUploading}
             >
               <X className="w-4 h-4" />
@@ -294,11 +305,11 @@ export function DocumentSection({
             {pendingFiles.map((file, i) => (
               <div
                 key={i}
-                className="flex items-center gap-2 text-xs text-blue-800"
+                className="flex items-center gap-2 text-xs text-[var(--color-primary-dark)]"
               >
                 <FileText className="w-3.5 h-3.5" />
                 <span className="truncate">{file.name}</span>
-                <span className="text-blue-500 shrink-0">
+                <span className="text-[var(--color-primary-light)] shrink-0">
                   {formatFileSize(file.size)}
                 </span>
               </div>
@@ -307,15 +318,15 @@ export function DocumentSection({
 
           {/* Category selector + action buttons */}
           <div className="flex items-center gap-3">
-            <label className="text-xs font-medium text-blue-800">
-              Category:
+            <label className="text-xs font-medium text-[var(--color-primary-dark)]">
+              {t("category")}
             </label>
             <select
               value={selectedCategory}
               onChange={(e) =>
                 setSelectedCategory(e.target.value as DocCategory)
               }
-              className="text-sm border border-blue-300 rounded-md px-2 py-1 bg-white text-blue-900 focus:ring-1 focus:ring-blue-500 focus:border-blue-500"
+              className="text-sm border border-[var(--color-primary-light)] rounded-md px-2 py-1 bg-white text-[var(--color-primary-dark)] focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
               disabled={isUploading}
             >
               {CATEGORY_OPTIONS.map((opt) => (
@@ -330,24 +341,24 @@ export function DocumentSection({
             <button
               onClick={cancelUpload}
               disabled={isUploading}
-              className="px-3 py-1.5 text-sm text-blue-700 hover:bg-blue-100 rounded-md"
+              className="px-3 py-1.5 text-sm text-[var(--color-primary-dark)] hover:bg-[var(--color-primary-bg)] rounded-md"
             >
-              Cancel
+              {tc("cancel")}
             </button>
             <button
               onClick={handleUpload}
               disabled={isUploading}
-              className="px-4 py-1.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md disabled:opacity-50 inline-flex items-center gap-1.5"
+              className="px-4 py-1.5 text-sm font-medium text-white bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] rounded-md disabled:opacity-50 inline-flex items-center gap-1.5"
             >
               {isUploading ? (
                 <>
                   <Loader2 className="w-3.5 h-3.5 animate-spin" />
-                  {uploadProgress || "Uploading..."}
+                  {uploadProgress || tc("loading")}
                 </>
               ) : (
                 <>
                   <Upload className="w-3.5 h-3.5" />
-                  Upload
+                  {tc("upload")}
                 </>
               )}
             </button>
@@ -363,21 +374,21 @@ export function DocumentSection({
           onDrop={handleDrop}
           className={`text-center py-8 border-2 border-dashed rounded-lg transition-colors ${
             isDragging
-              ? "border-blue-400 bg-blue-50"
+              ? "border-[var(--color-primary-light)] bg-[var(--color-primary-bg)]"
               : "border-gray-200 hover:border-gray-300"
           }`}
         >
           <Upload
             className={`w-8 h-8 mx-auto mb-2 ${
-              isDragging ? "text-blue-400" : "text-gray-300"
+              isDragging ? "text-[var(--color-primary-light)]" : "text-gray-300"
             }`}
           />
           <p className="text-sm text-gray-500">
-            {isDragging ? "Drop files here" : "No documents yet"}
+            {isDragging ? t("dropHere") : t("noDocumentsYet")}
           </p>
           {canUpload && !isDragging && (
             <p className="text-xs text-gray-400 mt-1">
-              Drag & drop files or click Upload above
+              {t("dragDropDocs")}
             </p>
           )}
         </div>
@@ -390,8 +401,8 @@ export function DocumentSection({
           onDrop={handleDrop}
         >
           {isDragging && (
-            <div className="p-4 border-2 border-dashed border-blue-400 bg-blue-50 rounded-lg text-center text-sm text-blue-600">
-              Drop files to upload
+            <div className="p-4 border-2 border-dashed border-[var(--color-primary-light)] bg-[var(--color-primary-bg)] rounded-lg text-center text-sm text-[var(--color-primary)]">
+              {t("dropToUpload")}
             </div>
           )}
           {documents.map((doc) => {
@@ -399,8 +410,9 @@ export function DocumentSection({
             return (
               <div
                 key={doc.id}
-                className="flex items-center justify-between p-3 bg-gray-50 rounded-lg group"
+                className="p-3 bg-gray-50 rounded-lg group"
               >
+              <div className="flex items-center justify-between">
                 <div className="flex items-center gap-3 min-w-0">
                   <Icon className="w-5 h-5 text-gray-400 shrink-0" />
                   <div className="min-w-0">
@@ -438,7 +450,7 @@ export function DocumentSection({
                           "bg-gray-100 text-gray-600"
                         }`}
                       >
-                        {doc.status}
+                        {ts(STATUS_LABEL_KEYS[doc.status] || "pending")}
                         <ChevronDown className="w-2.5 h-2.5" />
                       </button>
                     ) : (
@@ -448,7 +460,7 @@ export function DocumentSection({
                           "bg-gray-100 text-gray-600"
                         }`}
                       >
-                        {doc.status}
+                        {ts(STATUS_LABEL_KEYS[doc.status] || "pending")}
                       </span>
                     )}
 
@@ -461,7 +473,7 @@ export function DocumentSection({
                           }
                           className="w-full flex items-center gap-2 px-3 py-1.5 text-xs text-green-700 hover:bg-green-50"
                         >
-                          <Check className="w-3 h-3" /> Approve
+                          <Check className="w-3 h-3" /> {t("approve")}
                         </button>
                         <button
                           onClick={() =>
@@ -469,7 +481,7 @@ export function DocumentSection({
                           }
                           className="w-full flex items-center gap-2 px-3 py-1.5 text-xs text-red-700 hover:bg-red-50"
                         >
-                          <Ban className="w-3 h-3" /> Reject
+                          <Ban className="w-3 h-3" /> {t("reject")}
                         </button>
                         <button
                           onClick={() =>
@@ -477,7 +489,7 @@ export function DocumentSection({
                           }
                           className="w-full flex items-center gap-2 px-3 py-1.5 text-xs text-yellow-700 hover:bg-yellow-50"
                         >
-                          <AlertCircle className="w-3 h-3" /> Reset to Pending
+                          <AlertCircle className="w-3 h-3" /> {t("resetToPending")}
                         </button>
                       </div>
                     )}
@@ -488,8 +500,8 @@ export function DocumentSection({
                     href={doc.url}
                     target="_blank"
                     rel="noopener noreferrer"
-                    className="p-1 text-gray-400 hover:text-blue-600"
-                    title="Open"
+                    className="p-1 text-gray-400 hover:text-[var(--color-primary)]"
+                    title={tc("open")}
                   >
                     <ExternalLink className="w-4 h-4" />
                   </a>
@@ -500,7 +512,7 @@ export function DocumentSection({
                       onClick={() => handleDelete(doc.id)}
                       disabled={deletingId === doc.id}
                       className="p-1 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity"
-                      title="Delete"
+                      title={tc("delete")}
                     >
                       {deletingId === doc.id ? (
                         <Loader2 className="w-4 h-4 animate-spin" />
@@ -511,6 +523,12 @@ export function DocumentSection({
                   )}
                 </div>
               </div>
+              {/* AI Extraction panel */}
+              <DocumentAIPanel
+                documentId={doc.id}
+                initialData={doc.extractedData ?? null}
+              />
+              </div>
             );
           })}
         </div>
diff --git a/src/components/phase/InspectionSection.tsx b/src/components/phase/InspectionSection.tsx
new file mode 100644
index 0000000..36fb295
--- /dev/null
+++ b/src/components/phase/InspectionSection.tsx
@@ -0,0 +1,252 @@
+"use client";
+
+import { useState } from "react";
+import {
+  ClipboardCheck,
+  Plus,
+  Loader2,
+  AlertCircle,
+  X,
+  Check,
+  AlertTriangle,
+  Clock,
+  CheckCircle2,
+  XCircle,
+  MinusCircle,
+  Calendar,
+  Trash2,
+} from "lucide-react";
+import {
+  createInspection,
+  recordInspectionResult,
+  deleteInspection,
+} from "@/actions/inspections";
+import type { Inspection } from "@/lib/db-types";
+
+interface InspectionSectionProps {
+  phaseId: string;
+  inspections: Inspection[];
+  canCreate: boolean;
+  canRecord: boolean;
+}
+
+const RESULT_CONFIG = {
+  PASS: { icon: CheckCircle2, color: "text-green-600", bg: "bg-green-50", label: "Pass" },
+  FAIL: { icon: XCircle, color: "text-red-500", bg: "bg-red-50", label: "Fail" },
+  CONDITIONAL: { icon: MinusCircle, color: "text-amber-600", bg: "bg-amber-50", label: "Conditional" },
+};
+
+function formatDt(d: Date | string) {
+  return new Date(d).toLocaleDateString(undefined, { month: "short", day: "numeric", year: "numeric" });
+}
+
+export function InspectionSection({ phaseId, inspections, canCreate, canRecord }: InspectionSectionProps) {
+  const [showForm, setShowForm] = useState(false);
+  const [submitting, setSubmitting] = useState(false);
+  const [actionId, setActionId] = useState<string | null>(null);
+  const [recordingId, setRecordingId] = useState<string | null>(null);
+  const [resultNotes, setResultNotes] = useState("");
+  const [error, setError] = useState<string | null>(null);
+  const [form, setForm] = useState({ title: "", inspectorName: "", scheduledAt: "", notifyOnResult: true });
+
+  const handleSubmit = async (e: React.FormEvent) => {
+    e.preventDefault();
+    if (!form.title.trim() || !form.scheduledAt) return;
+    setSubmitting(true);
+    setError(null);
+    try {
+      await createInspection({
+        phaseId,
+        title: form.title.trim(),
+        inspectorName: form.inspectorName || undefined,
+        scheduledAt: form.scheduledAt,
+        notifyOnResult: form.notifyOnResult,
+      });
+      setForm({ title: "", inspectorName: "", scheduledAt: "", notifyOnResult: true });
+      setShowForm(false);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to schedule inspection");
+    } finally {
+      setSubmitting(false);
+    }
+  };
+
+  const handleRecord = async (inspectionId: string, result: "PASS" | "FAIL" | "CONDITIONAL") => {
+    setActionId(inspectionId);
+    try {
+      await recordInspectionResult(inspectionId, result, resultNotes || undefined);
+      setRecordingId(null);
+      setResultNotes("");
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to record result");
+    } finally {
+      setActionId(null);
+    }
+  };
+
+  const handleDelete = async (id: string) => {
+    if (!confirm("Delete this inspection?")) return;
+    setActionId(id);
+    try { await deleteInspection(id); }
+    catch (err) { setError(err instanceof Error ? err.message : "Failed to delete"); }
+    finally { setActionId(null); }
+  };
+
+  const upcoming = inspections.filter((i) => !i.completedAt && new Date(i.scheduledAt) >= new Date());
+  const past = inspections.filter((i) => i.completedAt || new Date(i.scheduledAt) < new Date());
+
+  return (
+    <div className="bg-white rounded-xl border border-gray-200 p-5">
+      <div className="flex items-center justify-between mb-4">
+        <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2">
+          <ClipboardCheck className="w-4 h-4 text-[var(--color-primary)]" />
+          Inspections
+          {upcoming.length > 0 && (
+            <span className="text-xs font-medium text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded-full normal-case">
+              {upcoming.length} upcoming
+            </span>
+          )}
+        </h2>
+        {canCreate && (
+          <button onClick={() => setShowForm((v) => !v)}
+            className="inline-flex items-center gap-1.5 text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-primary-dark)]">
+            <Plus className="w-4 h-4" />
+            <span className="hidden sm:inline">Schedule</span>
+          </button>
+        )}
+      </div>
+
+      {error && (
+        <div className="mb-3 flex items-center gap-2 p-2.5 bg-red-50 text-red-700 text-sm rounded-lg">
+          <AlertCircle className="w-4 h-4 shrink-0" /><span className="flex-1">{error}</span>
+          <button onClick={() => setError(null)}><X className="w-3.5 h-3.5" /></button>
+        </div>
+      )}
+
+      {showForm && (
+        <form onSubmit={handleSubmit} className="mb-4 p-4 bg-gray-50 rounded-lg space-y-3 text-sm">
+          <div className="grid grid-cols-2 gap-3">
+            <div className="col-span-2 sm:col-span-1">
+              <label className="block text-xs font-medium text-gray-700 mb-1">Title *</label>
+              <input required value={form.title}
+                onChange={(e) => setForm((f) => ({ ...f, title: e.target.value }))}
+                placeholder="e.g. Framing Inspection"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]" />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Scheduled Date *</label>
+              <input required type="date" value={form.scheduledAt}
+                onChange={(e) => setForm((f) => ({ ...f, scheduledAt: e.target.value }))}
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]" />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Inspector Name</label>
+              <input value={form.inspectorName}
+                onChange={(e) => setForm((f) => ({ ...f, inspectorName: e.target.value }))}
+                placeholder="Inspector or agency"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]" />
+            </div>
+          </div>
+          <label className="flex items-center gap-2 text-sm text-gray-600 cursor-pointer">
+            <input type="checkbox" checked={form.notifyOnResult}
+              onChange={(e) => setForm((f) => ({ ...f, notifyOnResult: e.target.checked }))}
+              className="rounded border-gray-300 text-[var(--color-primary)]" />
+            Notify team when result is recorded
+          </label>
+          <div className="flex gap-2 justify-end">
+            <button type="button" onClick={() => setShowForm(false)}
+              className="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-200 rounded-md">Cancel</button>
+            <button type="submit" disabled={submitting}
+              className="px-4 py-1.5 text-sm font-medium text-white bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] rounded-md disabled:opacity-60 inline-flex items-center gap-1.5">
+              {submitting && <Loader2 className="w-3.5 h-3.5 animate-spin" />}Schedule
+            </button>
+          </div>
+        </form>
+      )}
+
+      {inspections.length === 0 && !showForm ? (
+        <div className="text-center py-8 border-2 border-dashed border-gray-200 rounded-lg">
+          <ClipboardCheck className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+          <p className="text-sm text-gray-500">No inspections scheduled</p>
+        </div>
+      ) : (
+        <div className="space-y-2">
+          {[...upcoming, ...past].map((insp) => {
+            const cfg = insp.result ? RESULT_CONFIG[insp.result] : null;
+            const ResultIcon = cfg?.icon;
+            const isPending = !insp.completedAt && new Date(insp.scheduledAt) <= new Date();
+
+            return (
+              <div key={insp.id} className="border border-gray-100 rounded-lg overflow-hidden">
+                <div className="flex items-center justify-between p-3">
+                  <div className="min-w-0 flex-1">
+                    <div className="flex items-center gap-2 flex-wrap">
+                      <span className="text-sm font-medium text-gray-900">{insp.title}</span>
+                      {cfg && ResultIcon ? (
+                        <span className={`inline-flex items-center gap-1 text-xs px-1.5 py-0.5 rounded-full ${cfg.bg} ${cfg.color}`}>
+                          <ResultIcon className="w-3 h-3" />{cfg.label}
+                        </span>
+                      ) : isPending ? (
+                        <span className="inline-flex items-center gap-1 text-xs px-1.5 py-0.5 rounded-full bg-amber-50 text-amber-600">
+                          <AlertTriangle className="w-3 h-3" />Awaiting result
+                        </span>
+                      ) : (
+                        <span className="inline-flex items-center gap-1 text-xs px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600">
+                          <Clock className="w-3 h-3" />Upcoming
+                        </span>
+                      )}
+                    </div>
+                    <div className="flex items-center gap-3 text-xs text-gray-400 mt-1">
+                      <span className="flex items-center gap-1"><Calendar className="w-3 h-3" />{formatDt(insp.scheduledAt)}</span>
+                      {insp.inspectorName && <span>{insp.inspectorName}</span>}
+                      {insp.notes && <span className="truncate max-w-[200px]">{insp.notes}</span>}
+                    </div>
+                  </div>
+                  <div className="flex items-center gap-1 shrink-0">
+                    {canRecord && !insp.result && (
+                      <button
+                        onClick={() => setRecordingId(recordingId === insp.id ? null : insp.id)}
+                        className="text-xs px-2 py-1 text-[var(--color-primary)] hover:bg-[var(--color-primary-bg)] rounded"
+                      >
+                        <Check className="w-3.5 h-3.5" />
+                      </button>
+                    )}
+                    <button onClick={() => handleDelete(insp.id)} disabled={actionId === insp.id}
+                      className="p-1 text-gray-300 hover:text-red-500">
+                      {actionId === insp.id ? <Loader2 className="w-3.5 h-3.5 animate-spin" /> : <Trash2 className="w-3.5 h-3.5" />}
+                    </button>
+                  </div>
+                </div>
+
+                {/* Record result panel */}
+                {recordingId === insp.id && canRecord && (
+                  <div className="border-t border-gray-100 p-3 bg-gray-50">
+                    <p className="text-xs font-medium text-gray-700 mb-2">Record Result</p>
+                    <input value={resultNotes}
+                      onChange={(e) => setResultNotes(e.target.value)}
+                      placeholder="Notes (optional)"
+                      className="w-full text-sm border border-gray-200 rounded-md px-2 py-1.5 mb-2 focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]" />
+                    <div className="flex gap-2">
+                      <button onClick={() => handleRecord(insp.id, "PASS")} disabled={actionId === insp.id}
+                        className="flex-1 py-1.5 text-xs font-medium text-green-600 bg-green-50 hover:bg-green-100 rounded">
+                        ✓ Pass
+                      </button>
+                      <button onClick={() => handleRecord(insp.id, "CONDITIONAL")} disabled={actionId === insp.id}
+                        className="flex-1 py-1.5 text-xs font-medium text-amber-600 bg-amber-50 hover:bg-amber-100 rounded">
+                        ~ Conditional
+                      </button>
+                      <button onClick={() => handleRecord(insp.id, "FAIL")} disabled={actionId === insp.id}
+                        className="flex-1 py-1.5 text-xs font-medium text-red-500 bg-red-50 hover:bg-red-100 rounded">
+                        ✗ Fail
+                      </button>
+                    </div>
+                  </div>
+                )}
+              </div>
+            );
+          })}
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/components/phase/MaterialSection.tsx b/src/components/phase/MaterialSection.tsx
new file mode 100644
index 0000000..31d8e36
--- /dev/null
+++ b/src/components/phase/MaterialSection.tsx
@@ -0,0 +1,314 @@
+"use client";
+
+import { useState } from "react";
+import {
+  Package,
+  Plus,
+  Loader2,
+  AlertCircle,
+  X,
+  Trash2,
+  ChevronDown,
+  Truck,
+  Hammer,
+  ShoppingCart,
+  RotateCcw,
+} from "lucide-react";
+import { createMaterial, updateMaterialStatus, deleteMaterial } from "@/actions/materials";
+import type { Material, MaterialStatus } from "@/lib/db-types";
+
+interface MaterialSectionProps {
+  phaseId: string;
+  materials: Material[];
+  canManage: boolean;
+}
+
+const STATUS_CONFIG: Record<MaterialStatus, { label: string; color: string; bg: string; icon: React.ElementType }> = {
+  ORDERED: { label: "Ordered", color: "text-blue-600", bg: "bg-blue-50", icon: ShoppingCart },
+  DELIVERED: { label: "Delivered", color: "text-amber-600", bg: "bg-amber-50", icon: Truck },
+  INSTALLED: { label: "Installed", color: "text-green-600", bg: "bg-green-50", icon: Hammer },
+  RETURNED: { label: "Returned", color: "text-gray-500", bg: "bg-gray-100", icon: RotateCcw },
+};
+
+const STATUS_ORDER: MaterialStatus[] = ["ORDERED", "DELIVERED", "INSTALLED", "RETURNED"];
+
+function fmt(n: number) {
+  return new Intl.NumberFormat("en-US", { style: "currency", currency: "USD", maximumFractionDigits: 0 }).format(n);
+}
+
+export function MaterialSection({ phaseId, materials, canManage }: MaterialSectionProps) {
+  const [showForm, setShowForm] = useState(false);
+  const [submitting, setSubmitting] = useState(false);
+  const [actionId, setActionId] = useState<string | null>(null);
+  const [error, setError] = useState<string | null>(null);
+  const [form, setForm] = useState({
+    name: "",
+    quantity: "",
+    unit: "ea",
+    cost: "",
+    supplier: "",
+    notes: "",
+  });
+
+  const handleSubmit = async (e: React.FormEvent) => {
+    e.preventDefault();
+    if (!form.name.trim() || !form.quantity) return;
+    setSubmitting(true);
+    setError(null);
+    try {
+      await createMaterial({
+        phaseId,
+        name: form.name.trim(),
+        quantity: parseFloat(form.quantity),
+        unit: form.unit,
+        cost: form.cost ? parseFloat(form.cost) : undefined,
+        supplier: form.supplier || undefined,
+        notes: form.notes || undefined,
+      });
+      setForm({ name: "", quantity: "", unit: "ea", cost: "", supplier: "", notes: "" });
+      setShowForm(false);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to add material");
+    } finally {
+      setSubmitting(false);
+    }
+  };
+
+  const handleStatusChange = async (mat: Material, status: MaterialStatus) => {
+    setActionId(mat.id);
+    try {
+      await updateMaterialStatus(mat.id, status);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to update status");
+    } finally {
+      setActionId(null);
+    }
+  };
+
+  const handleDelete = async (id: string) => {
+    if (!confirm("Delete this material?")) return;
+    setActionId(id);
+    try {
+      await deleteMaterial(id);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to delete");
+    } finally {
+      setActionId(null);
+    }
+  };
+
+  const totalCost = materials.reduce((sum, m) => sum + (m.cost ?? 0) * m.quantity, 0);
+  const byStatus = STATUS_ORDER.map((s) => ({
+    status: s,
+    count: materials.filter((m) => m.status === s).length,
+  })).filter((g) => g.count > 0);
+
+  return (
+    <div className="bg-white rounded-xl border border-gray-200 p-5">
+      <div className="flex items-center justify-between mb-4">
+        <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2">
+          <Package className="w-4 h-4 text-[var(--color-primary)]" />
+          Materials
+          <span className="text-xs font-normal text-gray-400 normal-case">
+            ({materials.length} items)
+          </span>
+          {totalCost > 0 && (
+            <span className="text-xs font-medium text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full normal-case">
+              {fmt(totalCost)}
+            </span>
+          )}
+        </h2>
+        {canManage && (
+          <button
+            onClick={() => setShowForm((v) => !v)}
+            className="inline-flex items-center gap-1.5 text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-primary-dark)]"
+          >
+            <Plus className="w-4 h-4" />
+            <span className="hidden sm:inline">Add</span>
+          </button>
+        )}
+      </div>
+
+      {/* Status summary pills */}
+      {byStatus.length > 0 && (
+        <div className="flex gap-2 flex-wrap mb-3">
+          {byStatus.map(({ status, count }) => {
+            const cfg = STATUS_CONFIG[status];
+            return (
+              <span key={status} className={`text-xs px-2 py-0.5 rounded-full ${cfg.bg} ${cfg.color} flex items-center gap-1`}>
+                <cfg.icon className="w-3 h-3" />
+                {count} {cfg.label}
+              </span>
+            );
+          })}
+        </div>
+      )}
+
+      {error && (
+        <div className="mb-3 flex items-center gap-2 p-2.5 bg-red-50 text-red-700 text-sm rounded-lg">
+          <AlertCircle className="w-4 h-4 shrink-0" />
+          <span className="flex-1">{error}</span>
+          <button onClick={() => setError(null)}><X className="w-3.5 h-3.5" /></button>
+        </div>
+      )}
+
+      {showForm && (
+        <form onSubmit={handleSubmit} className="mb-4 p-4 bg-gray-50 rounded-lg space-y-3 text-sm">
+          <div className="grid grid-cols-2 sm:grid-cols-3 gap-3">
+            <div className="col-span-2 sm:col-span-1">
+              <label className="block text-xs font-medium text-gray-700 mb-1">Material Name *</label>
+              <input
+                required
+                value={form.name}
+                onChange={(e) => setForm((f) => ({ ...f, name: e.target.value }))}
+                placeholder="e.g. 2x4 Lumber"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Quantity *</label>
+              <input
+                required
+                type="number"
+                min="0"
+                step="any"
+                value={form.quantity}
+                onChange={(e) => setForm((f) => ({ ...f, quantity: e.target.value }))}
+                placeholder="0"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Unit</label>
+              <select
+                value={form.unit}
+                onChange={(e) => setForm((f) => ({ ...f, unit: e.target.value }))}
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              >
+                {["ea", "lf", "sf", "sy", "cy", "ton", "lb", "gal", "bag", "pcs", "set"].map((u) => (
+                  <option key={u} value={u}>{u}</option>
+                ))}
+              </select>
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Unit Cost ($)</label>
+              <input
+                type="number"
+                min="0"
+                step="0.01"
+                value={form.cost}
+                onChange={(e) => setForm((f) => ({ ...f, cost: e.target.value }))}
+                placeholder="0.00"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Supplier</label>
+              <input
+                value={form.supplier}
+                onChange={(e) => setForm((f) => ({ ...f, supplier: e.target.value }))}
+                placeholder="e.g. Home Depot"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+          </div>
+          <div className="flex gap-2 justify-end">
+            <button
+              type="button"
+              onClick={() => setShowForm(false)}
+              className="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-200 rounded-md"
+            >
+              Cancel
+            </button>
+            <button
+              type="submit"
+              disabled={submitting}
+              className="px-4 py-1.5 text-sm font-medium text-white bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] rounded-md disabled:opacity-60 inline-flex items-center gap-1.5"
+            >
+              {submitting && <Loader2 className="w-3.5 h-3.5 animate-spin" />}
+              Add Material
+            </button>
+          </div>
+        </form>
+      )}
+
+      {materials.length === 0 && !showForm ? (
+        <div className="text-center py-8 border-2 border-dashed border-gray-200 rounded-lg">
+          <Package className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+          <p className="text-sm text-gray-500">No materials tracked yet</p>
+        </div>
+      ) : (
+        <div className="space-y-1.5">
+          {materials.map((mat) => {
+            const cfg = STATUS_CONFIG[mat.status];
+            const StatusIcon = cfg.icon;
+            return (
+              <div key={mat.id} className="flex items-center gap-3 p-2.5 border border-gray-100 rounded-lg group hover:bg-gray-50">
+                <StatusIcon className={`w-4 h-4 ${cfg.color} shrink-0`} />
+                <div className="flex-1 min-w-0">
+                  <div className="flex items-center gap-2">
+                    <span className="text-sm font-medium text-gray-900 truncate">{mat.name}</span>
+                    <span className="text-xs text-gray-400 shrink-0">
+                      {mat.quantity} {mat.unit}
+                    </span>
+                    {mat.cost != null && (
+                      <span className="text-xs text-gray-400 shrink-0">
+                        @ {fmt(mat.cost)}/{mat.unit} = {fmt(mat.cost * mat.quantity)}
+                      </span>
+                    )}
+                  </div>
+                  {mat.supplier && (
+                    <p className="text-xs text-gray-400 mt-0.5">{mat.supplier}</p>
+                  )}
+                </div>
+                <div className="flex items-center gap-1 shrink-0">
+                  {canManage && (
+                    <div className="relative group/status">
+                      <button
+                        className={`text-xs px-2 py-0.5 rounded-full ${cfg.bg} ${cfg.color} flex items-center gap-1 hover:opacity-80`}
+                        disabled={actionId === mat.id}
+                      >
+                        {actionId === mat.id ? (
+                          <Loader2 className="w-3 h-3 animate-spin" />
+                        ) : (
+                          <>
+                            {cfg.label}
+                            <ChevronDown className="w-3 h-3" />
+                          </>
+                        )}
+                      </button>
+                      <div className="absolute right-0 top-full mt-1 hidden group-hover/status:block z-10 bg-white border border-gray-200 rounded-lg shadow-lg py-1 min-w-[120px]">
+                        {STATUS_ORDER.map((s) => {
+                          const sc = STATUS_CONFIG[s];
+                          return (
+                            <button
+                              key={s}
+                              onClick={() => handleStatusChange(mat, s)}
+                              className={`w-full text-left px-3 py-1.5 text-xs flex items-center gap-2 hover:bg-gray-50 ${s === mat.status ? "font-medium" : ""}`}
+                            >
+                              <sc.icon className={`w-3 h-3 ${sc.color}`} />
+                              {sc.label}
+                            </button>
+                          );
+                        })}
+                      </div>
+                    </div>
+                  )}
+                  {canManage && (
+                    <button
+                      onClick={() => handleDelete(mat.id)}
+                      disabled={actionId === mat.id}
+                      className="p-1 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity"
+                    >
+                      <Trash2 className="w-3.5 h-3.5" />
+                    </button>
+                  )}
+                </div>
+              </div>
+            );
+          })}
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/components/phase/PhaseHeader.tsx b/src/components/phase/PhaseHeader.tsx
index 46d3c3c..7762655 100644
--- a/src/components/phase/PhaseHeader.tsx
+++ b/src/components/phase/PhaseHeader.tsx
@@ -1,22 +1,35 @@
 "use client";
 
 import Link from "next/link";
-import { ArrowLeft } from "lucide-react";
-import { cn, statusColor, statusLabel } from "@/lib/utils";
+import { cn, statusColor } from "@/lib/utils";
 import { updatePhaseStatus } from "@/actions/phases";
 import { useState } from "react";
+import { useTranslations } from "next-intl";
 
-const STATUS_TRANSITIONS: Record<string, { label: string; next: string }[]> = {
-  PENDING: [{ label: "Start Phase", next: "IN_PROGRESS" }],
-  IN_PROGRESS: [{ label: "Request Review", next: "REVIEW_REQUESTED" }],
-  REVIEW_REQUESTED: [{ label: "Begin Review", next: "UNDER_REVIEW" }],
+interface StatusTransition {
+  labelKey: string;
+  next: string;
+}
+
+const STATUS_TRANSITION_KEYS: Record<string, StatusTransition[]> = {
+  PENDING: [{ labelKey: "startPhase", next: "IN_PROGRESS" }],
+  IN_PROGRESS: [{ labelKey: "requestReview", next: "REVIEW_REQUESTED" }],
+  REVIEW_REQUESTED: [{ labelKey: "beginReview", next: "UNDER_REVIEW" }],
   UNDER_REVIEW: [
-    { label: "Approve & Complete", next: "COMPLETE" },
-    { label: "Send Back", next: "IN_PROGRESS" },
+    { labelKey: "approveComplete", next: "COMPLETE" },
+    { labelKey: "sendBack", next: "IN_PROGRESS" },
   ],
   COMPLETE: [],
 };
 
+const STATUS_LABEL_KEYS: Record<string, string> = {
+  PENDING: "pending",
+  IN_PROGRESS: "inProgress",
+  REVIEW_REQUESTED: "reviewRequested",
+  UNDER_REVIEW: "underReview",
+  COMPLETE: "complete",
+};
+
 interface PhaseHeaderProps {
   phase: {
     id: string;
@@ -38,9 +51,11 @@ export function PhaseHeader({
   canEdit,
   canManage,
 }: PhaseHeaderProps) {
+  const t = useTranslations("phases");
+  const ts = useTranslations("status");
   const [loading, setLoading] = useState<string | null>(null);
 
-  const transitions = STATUS_TRANSITIONS[phase.status] || [];
+  const transitions = STATUS_TRANSITION_KEYS[phase.status] || [];
   const reviewActions = ["UNDER_REVIEW", "COMPLETE"];
 
   async function handleTransition(nextStatus: string) {
@@ -48,61 +63,71 @@ export function PhaseHeader({
     try {
       await updatePhaseStatus(phase.id, nextStatus);
     } catch {
-      // Error handling — toast would go here
+      // Error handling
     }
     setLoading(null);
   }
 
   return (
-    <div className="px-6 py-4 border-b border-gray-200 bg-white">
+    <div className="px-4 sm:px-6 py-4 border-b border-gray-200 bg-white">
       <div className="max-w-5xl mx-auto">
-        <Link
-          href={`/dashboard/projects/${projectId}/timeline`}
-          className="inline-flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 mb-3"
-        >
-          <ArrowLeft className="w-4 h-4" />
-          {projectName} Timeline
-        </Link>
+        <div className="flex items-center gap-1 text-xs sm:text-sm text-gray-500 mb-3 overflow-x-auto">
+          <Link
+            href={`/dashboard/projects/${projectId}`}
+            className="hover:text-gray-700 shrink-0"
+          >
+            {projectName}
+          </Link>
+          <span className="shrink-0">/</span>
+          <Link
+            href={`/dashboard/projects/${projectId}/timeline`}
+            className="hover:text-gray-700 shrink-0"
+          >
+            {t("timeline")}
+          </Link>
+          <span className="shrink-0">/</span>
+          <span className="text-gray-400 truncate">{phase.name}</span>
+        </div>
 
-        <div className="flex items-center justify-between">
+        <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
           <div className="flex items-center gap-3">
-            <h1 className="text-xl font-bold text-gray-900">{phase.name}</h1>
+            <h1 className="text-lg sm:text-xl font-bold text-gray-900">{phase.name}</h1>
             <span
               className={cn(
                 "text-xs font-medium px-2 py-0.5 rounded-full",
                 statusColor(phase.status)
               )}
             >
-              {statusLabel(phase.status)}
+              {ts(STATUS_LABEL_KEYS[phase.status] || "pending")}
             </span>
             {phase.isMilestone && (
               <span className="text-xs font-medium px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-700">
-                Milestone
+                {t("milestone")}
               </span>
             )}
           </div>
 
           {canEdit && transitions.length > 0 && (
             <div className="flex gap-2">
-              {transitions.map((t) => {
-                const needsManage = reviewActions.includes(t.next);
+              {transitions.map((tr) => {
+                const needsManage = reviewActions.includes(tr.next);
                 if (needsManage && !canManage) return null;
 
                 return (
                   <button
-                    key={t.next}
-                    onClick={() => handleTransition(t.next)}
+                    key={tr.next}
+                    onClick={() => handleTransition(tr.next)}
                     disabled={loading !== null}
                     className={cn(
                       "px-3 py-1.5 text-sm font-medium rounded-lg transition-colors disabled:opacity-50",
-                      t.next === "COMPLETE"
+                      tr.next === "COMPLETE"
                         ? "bg-green-600 text-white hover:bg-green-700"
-                        : t.next === "IN_PROGRESS" && phase.status === "UNDER_REVIEW"
+                        : tr.next === "IN_PROGRESS" && phase.status === "UNDER_REVIEW"
                           ? "border border-gray-300 text-gray-700 hover:bg-gray-50"
-                          : "bg-blue-600 text-white hover:bg-blue-700"
+                          : "bg-[var(--color-primary)] text-white hover:bg-[var(--color-primary-dark)]"
                     )}
                   >
-                    {loading === t.next ? "..." : t.label}
+                    {loading === tr.next ? "..." : t(tr.labelKey)}
                   </button>
                 );
               })}
diff --git a/src/components/phase/PhaseInfoSection.tsx b/src/components/phase/PhaseInfoSection.tsx
index e16d5e2..cb70f4d 100644
--- a/src/components/phase/PhaseInfoSection.tsx
+++ b/src/components/phase/PhaseInfoSection.tsx
@@ -2,6 +2,7 @@
 
 import { fmtLong, daysBetween } from "@/lib/utils";
 import { Calendar, Clock } from "lucide-react";
+import { useTranslations } from "next-intl";
 
 interface PhaseInfoProps {
   phase: {
@@ -20,6 +21,7 @@ interface PhaseInfoProps {
 }
 
 export function PhaseInfoSection({ phase }: PhaseInfoProps) {
+  const t = useTranslations("phases");
   const estDays = daysBetween(phase.estStart, phase.estEnd);
   const worstDays =
     phase.worstStart && phase.worstEnd
@@ -29,7 +31,7 @@ export function PhaseInfoSection({ phase }: PhaseInfoProps) {
   return (
     <div className="bg-white rounded-xl border border-gray-200 p-5">
       <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-4">
-        Phase Details
+        {t("phaseDetails")}
       </h2>
 
       {phase.detail && (
@@ -39,12 +41,12 @@ export function PhaseInfoSection({ phase }: PhaseInfoProps) {
       {/* Progress bar */}
       <div className="mb-4">
         <div className="flex justify-between text-xs text-gray-500 mb-1">
-          <span>Progress</span>
+          <span>{t("progress")}</span>
           <span>{phase.progress}%</span>
         </div>
         <div className="w-full bg-gray-100 rounded-full h-2">
           <div
-            className="bg-blue-600 h-2 rounded-full transition-all"
+            className="bg-[var(--color-primary)] h-2 rounded-full transition-all"
             style={{ width: `${phase.progress}%` }}
           />
         </div>
@@ -53,9 +55,9 @@ export function PhaseInfoSection({ phase }: PhaseInfoProps) {
       {/* Date grid */}
       <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
         <div className="space-y-2">
-          <div className="flex items-center gap-2 text-sm font-medium text-blue-700">
+          <div className="flex items-center gap-2 text-sm font-medium text-[var(--color-primary-dark)]">
             <Calendar className="w-4 h-4" />
-            Estimated Timeline
+            {t("estimatedTimeline")}
           </div>
           <div className="text-sm text-gray-600 pl-6">
             <p>{fmtLong(phase.estStart)} — {fmtLong(phase.estEnd)}</p>
@@ -69,7 +71,7 @@ export function PhaseInfoSection({ phase }: PhaseInfoProps) {
           <div className="space-y-2">
             <div className="flex items-center gap-2 text-sm font-medium text-red-600">
               <Clock className="w-4 h-4" />
-              Worst Case
+              {t("worstCase")}
             </div>
             <div className="text-sm text-gray-600 pl-6">
               <p>{fmtLong(phase.worstStart)} — {fmtLong(phase.worstEnd)}</p>
@@ -84,12 +86,12 @@ export function PhaseInfoSection({ phase }: PhaseInfoProps) {
           <div className="space-y-2">
             <div className="flex items-center gap-2 text-sm font-medium text-green-700">
               <Calendar className="w-4 h-4" />
-              Actual
+              {t("actual")}
             </div>
             <div className="text-sm text-gray-600 pl-6">
               <p>
-                Started {fmtLong(phase.actualStart)}
-                {phase.actualEnd && ` — Completed ${fmtLong(phase.actualEnd)}`}
+                {t("started")} {fmtLong(phase.actualStart)}
+                {phase.actualEnd && <> {t("completedDash")} {fmtLong(phase.actualEnd)}</>}
               </p>
             </div>
           </div>
diff --git a/src/components/phase/PhotoMapView.tsx b/src/components/phase/PhotoMapView.tsx
new file mode 100644
index 0000000..eaae13f
--- /dev/null
+++ b/src/components/phase/PhotoMapView.tsx
@@ -0,0 +1,155 @@
+"use client";
+
+import { useEffect, useRef, useState } from "react";
+import { MapPin, X } from "lucide-react";
+
+interface GeoPhoto {
+  id: string;
+  url: string;
+  caption: string | null;
+  latitude: number;
+  longitude: number;
+}
+
+interface PhotoMapViewProps {
+  photos: GeoPhoto[];
+  onClose: () => void;
+}
+
+declare global {
+  interface Window {
+    // eslint-disable-next-line @typescript-eslint/no-explicit-any
+    L: any;
+  }
+}
+
+export function PhotoMapView({ photos, onClose }: PhotoMapViewProps) {
+  const mapRef = useRef<HTMLDivElement>(null);
+  const [loaded, setLoaded] = useState(false);
+  const [activePhoto, setActivePhoto] = useState<GeoPhoto | null>(null);
+
+  useEffect(() => {
+    if (typeof window === "undefined") return;
+
+    // Load Leaflet CSS
+    const cssId = "leaflet-css";
+    if (!document.getElementById(cssId)) {
+      const link = document.createElement("link");
+      link.id = cssId;
+      link.rel = "stylesheet";
+      link.href = "https://unpkg.com/leaflet@1.9.4/dist/leaflet.css";
+      document.head.appendChild(link);
+    }
+
+    // Load Leaflet JS
+    const scriptId = "leaflet-js";
+    const existing = document.getElementById(scriptId);
+    if (existing) {
+      setLoaded(true);
+      return;
+    }
+    const script = document.createElement("script");
+    script.id = scriptId;
+    script.src = "https://unpkg.com/leaflet@1.9.4/dist/leaflet.js";
+    script.onload = () => setLoaded(true);
+    document.head.appendChild(script);
+  }, []);
+
+  useEffect(() => {
+    if (!loaded || !mapRef.current || photos.length === 0) return;
+    const L = window.L;
+    if (!L) return;
+
+    // Clean up any existing map
+    if ((mapRef.current as HTMLDivElement & { _leaflet_id?: number })._leaflet_id) {
+      // Already initialised — nothing to do
+      return;
+    }
+
+    const center = photos.reduce(
+      (acc, p) => [acc[0] + p.latitude / photos.length, acc[1] + p.longitude / photos.length],
+      [0, 0]
+    );
+
+    const map = L.map(mapRef.current).setView(center, 14);
+
+    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
+      attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
+      maxZoom: 19,
+    }).addTo(map);
+
+    const pinIcon = L.divIcon({
+      className: "",
+      html: `<div style="background:#3b82f6;border:2px solid white;border-radius:50%;width:24px;height:24px;box-shadow:0 2px 4px rgba(0,0,0,0.3);cursor:pointer;"></div>`,
+      iconSize: [24, 24],
+      iconAnchor: [12, 12],
+    });
+
+    photos.forEach((photo) => {
+      const marker = L.marker([photo.latitude, photo.longitude], { icon: pinIcon }).addTo(map);
+      marker.on("click", () => setActivePhoto(photo));
+    });
+
+    if (photos.length > 1) {
+      const bounds = L.latLngBounds(photos.map((p) => [p.latitude, p.longitude]));
+      map.fitBounds(bounds, { padding: [40, 40] });
+    }
+  }, [loaded, photos]);
+
+  return (
+    <div className="fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4">
+      <div className="bg-white rounded-2xl overflow-hidden shadow-2xl w-full max-w-3xl max-h-[85vh] flex flex-col">
+        {/* Header */}
+        <div className="flex items-center justify-between px-5 py-3 border-b border-gray-200">
+          <div className="flex items-center gap-2">
+            <MapPin className="w-4 h-4 text-[var(--color-primary)]" />
+            <span className="text-sm font-semibold text-gray-900">
+              Photo Map — {photos.length} geotagged photo{photos.length !== 1 ? "s" : ""}
+            </span>
+          </div>
+          <button
+            onClick={onClose}
+            className="p-1 text-gray-400 hover:text-gray-700 rounded"
+          >
+            <X className="w-5 h-5" />
+          </button>
+        </div>
+
+        {/* Map */}
+        <div className="relative flex-1 min-h-0">
+          {!loaded && (
+            <div className="absolute inset-0 flex items-center justify-center bg-gray-50">
+              <p className="text-sm text-gray-500">Loading map…</p>
+            </div>
+          )}
+          <div ref={mapRef} className="w-full h-full min-h-[400px]" />
+        </div>
+
+        {/* Photo preview */}
+        {activePhoto && (
+          <div className="border-t border-gray-200 flex items-center gap-3 p-3 bg-gray-50">
+            <img
+              src={activePhoto.url}
+              alt={activePhoto.caption || "Photo"}
+              className="w-16 h-16 object-cover rounded-lg shrink-0"
+            />
+            <div className="min-w-0">
+              {activePhoto.caption && (
+                <p className="text-sm font-medium text-gray-900 truncate">{activePhoto.caption}</p>
+              )}
+              <p className="text-xs text-gray-500 font-mono mt-0.5">
+                {activePhoto.latitude.toFixed(6)}, {activePhoto.longitude.toFixed(6)}
+              </p>
+            </div>
+            <button
+              onClick={() => setActivePhoto(null)}
+              className="ml-auto p-1 text-gray-400 hover:text-gray-600 shrink-0"
+            >
+              <X className="w-4 h-4" />
+            </button>
+          </div>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/src/components/phase/PhotoSection.tsx b/src/components/phase/PhotoSection.tsx
new file mode 100644
index 0000000..3c8f671
--- /dev/null
+++ b/src/components/phase/PhotoSection.tsx
@@ -0,0 +1,607 @@
+"use client";
+
+import { useState, useRef, useCallback } from "react";
+import {
+  Camera,
+  Upload,
+  X,
+  Trash2,
+  Loader2,
+  AlertCircle,
+  Maximize2,
+  Flag,
+  ChevronDown,
+  CheckCircle2,
+  ImagePlus,
+  RotateCw,
+  HelpCircle,
+  Eye,
+  MapPin,
+} from "lucide-react";
+import { upload } from "@vercel/blob/client";
+import { createPhoto, createPhotoBatch, deletePhoto, flagPhoto, clearPhotoFlag } from "@/actions/photos";
+import { useTranslations } from "next-intl";
+import { PhotoMapView } from "./PhotoMapView";
+
+interface Photo {
+  id: string;
+  url: string;
+  caption: string | null;
+  takenAt: Date;
+  uploadedBy: { id: string; name: string | null };
+  flagType?: string | null;
+  flagNote?: string | null;
+  flaggedBy?: { name: string | null } | null;
+  latitude?: number | null;
+  longitude?: number | null;
+}
+
+interface PhotoSectionProps {
+  phaseId: string;
+  photos: Photo[];
+  canUpload: boolean;
+  canDelete: boolean;
+  canFlag?: boolean;
+}
+
+function formatDate(date: Date): string {
+  return new Date(date).toLocaleDateString(undefined, {
+    month: "short",
+    day: "numeric",
+  });
+}
+
+export function PhotoSection({
+  phaseId,
+  photos,
+  canUpload,
+  canDelete,
+  canFlag = false,
+}: PhotoSectionProps) {
+  const t = useTranslations("photos");
+  const tc = useTranslations("common");
+  const td = useTranslations("documents");
+
+  const FLAG_OPTIONS = [
+    {
+      value: "REPLACEMENT_NEEDED",
+      label: t("replacementNeeded"),
+      icon: RotateCw,
+      color: "text-red-600",
+    },
+    {
+      value: "ADDITIONAL_ANGLES",
+      label: t("additionalAngles"),
+      icon: Eye,
+      color: "text-amber-600",
+    },
+    {
+      value: "ADDITIONAL_PHOTOS",
+      label: t("morePhotosNeeded"),
+      icon: ImagePlus,
+      color: "text-blue-600",
+    },
+    {
+      value: "CLARIFICATION_NEEDED",
+      label: t("clarificationNeeded"),
+      icon: HelpCircle,
+      color: "text-purple-600",
+    },
+  ];
+
+  const FLAG_BADGE: Record<string, { bg: string; text: string; label: string }> = {
+    REPLACEMENT_NEEDED: { bg: "bg-red-100", text: "text-red-700", label: t("replaceShort") },
+    ADDITIONAL_ANGLES: { bg: "bg-amber-100", text: "text-amber-700", label: t("anglesShort") },
+    ADDITIONAL_PHOTOS: { bg: "bg-blue-100", text: "text-blue-700", label: t("moreShort") },
+    CLARIFICATION_NEEDED: { bg: "bg-purple-100", text: "text-purple-700", label: t("clarifyShort") },
+  };
+
+  const [isDragging, setIsDragging] = useState(false);
+  const [isUploading, setIsUploading] = useState(false);
+  const [uploadProgress, setUploadProgress] = useState<string | null>(null);
+  const [error, setError] = useState<string | null>(null);
+  const [lightboxUrl, setLightboxUrl] = useState<string | null>(null);
+  const [deletingId, setDeletingId] = useState<string | null>(null);
+  const [flagMenuId, setFlagMenuId] = useState<string | null>(null);
+  const [flagNoteId, setFlagNoteId] = useState<string | null>(null);
+  const [flagNoteText, setFlagNoteText] = useState("");
+  const [pendingFlag, setPendingFlag] = useState<string | null>(null);
+  const [showMap, setShowMap] = useState(false);
+  const fileInputRef = useRef<HTMLInputElement>(null);
+  const cameraInputRef = useRef<HTMLInputElement>(null);
+
+  // Try to get current GPS position before uploading
+  const captureGps = (): Promise<{ latitude: number; longitude: number } | null> => {
+    return new Promise((resolve) => {
+      if (!navigator.geolocation) return resolve(null);
+      navigator.geolocation.getCurrentPosition(
+        (pos) => resolve({ latitude: pos.coords.latitude, longitude: pos.coords.longitude }),
+        () => resolve(null),
+        { timeout: 5000, maximumAge: 60000 }
+      );
+    });
+  };
+
+  const geoPhotos = photos.filter(
+    (p): p is Photo & { latitude: number; longitude: number } =>
+      typeof p.latitude === "number" && typeof p.longitude === "number"
+  );
+
+  const handleDragOver = useCallback(
+    (e: React.DragEvent) => {
+      e.preventDefault();
+      if (canUpload) setIsDragging(true);
+    },
+    [canUpload]
+  );
+
+  const handleDragLeave = useCallback((e: React.DragEvent) => {
+    e.preventDefault();
+    setIsDragging(false);
+  }, []);
+
+  const handleDrop = useCallback(
+    async (e: React.DragEvent) => {
+      e.preventDefault();
+      setIsDragging(false);
+      if (!canUpload) return;
+
+      const files = Array.from(e.dataTransfer.files).filter((f) =>
+        f.type.startsWith("image/")
+      );
+      if (files.length > 0) await uploadPhotos(files);
+    },
+    [canUpload] // eslint-disable-line react-hooks/exhaustive-deps
+  );
+
+  const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {
+    const files = Array.from(e.target.files || []).filter((f) =>
+      f.type.startsWith("image/")
+    );
+    if (files.length > 0) await uploadPhotos(files);
+    if (fileInputRef.current) fileInputRef.current.value = "";
+  };
+
+  const uploadPhotos = async (files: File[]) => {
+    setIsUploading(true);
+    setError(null);
+
+    try {
+      // Attempt GPS capture in parallel with first blob upload
+      const gpsPromise = captureGps();
+
+      const uploadedUrls: { url: string }[] = [];
+      for (let i = 0; i < files.length; i++) {
+        const file = files[i];
+        setUploadProgress(
+          files.length > 1
+            ? td("uploading", { current: i + 1, total: files.length })
+            : td("uploadingFile", { name: file.name })
+        );
+
+        const blob = await upload(file.name, file, {
+          access: "public",
+          handleUploadUrl: "/api/upload",
+        });
+        uploadedUrls.push({ url: blob.url });
+      }
+
+      const gps = await gpsPromise;
+
+      if (uploadedUrls.length > 1) {
+        setUploadProgress(t("savingPhotos"));
+        await createPhotoBatch({
+          phaseId,
+          photos: uploadedUrls,
+          latitude: gps?.latitude,
+          longitude: gps?.longitude,
+        });
+      } else if (uploadedUrls.length === 1) {
+        await createPhoto({
+          phaseId,
+          url: uploadedUrls[0].url,
+          latitude: gps?.latitude,
+          longitude: gps?.longitude,
+        });
+      }
+    } catch (err) {
+      console.error("Photo upload error:", err);
+      setError(
+        err instanceof Error ? err.message : t("uploadFailed")
+      );
+    } finally {
+      setIsUploading(false);
+      setUploadProgress(null);
+    }
+  };
+
+  const handleDelete = async (photoId: string) => {
+    if (!confirm(t("deleteConfirm"))) return;
+    setDeletingId(photoId);
+    try {
+      await deletePhoto(photoId);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to delete");
+    } finally {
+      setDeletingId(null);
+    }
+  };
+
+  const handleFlag = async (photoId: string, flagType: string) => {
+    setFlagMenuId(null);
+    setFlagNoteId(photoId);
+    setPendingFlag(flagType);
+  };
+
+  const submitFlag = async () => {
+    if (!flagNoteId || !pendingFlag) return;
+    try {
+      await flagPhoto(
+        flagNoteId,
+        pendingFlag as "REPLACEMENT_NEEDED" | "ADDITIONAL_ANGLES" | "ADDITIONAL_PHOTOS" | "CLARIFICATION_NEEDED",
+        flagNoteText || undefined
+      );
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to flag");
+    } finally {
+      setFlagNoteId(null);
+      setFlagNoteText("");
+      setPendingFlag(null);
+    }
+  };
+
+  const handleClearFlag = async (photoId: string) => {
+    try {
+      await clearPhotoFlag(photoId);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to clear flag");
+    }
+  };
+
+  const flaggedCount = photos.filter((p) => p.flagType).length;
+
+  return (
+    <>
+      <div className="bg-white rounded-xl border border-gray-200 p-5">
+        <div className="flex items-center justify-between mb-4">
+          <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
+            {t("title", { count: photos.length })}
+            {flaggedCount > 0 && (
+              <span className="ml-2 text-xs font-medium text-amber-600 normal-case">
+                {t("flagged", { count: flaggedCount })}
+              </span>
+            )}
+          </h2>
+          <div className="flex items-center gap-2">
+            {geoPhotos.length > 0 && (
+              <button
+                onClick={() => setShowMap(true)}
+                className="inline-flex items-center gap-1.5 text-xs font-medium text-green-600 hover:text-green-700"
+                title={`View ${geoPhotos.length} geotagged photo${geoPhotos.length !== 1 ? "s" : ""} on map`}
+              >
+                <MapPin className="w-3.5 h-3.5" />
+                <span className="hidden sm:inline">Map ({geoPhotos.length})</span>
+              </button>
+            )}
+          {canUpload && (
+            <div className="flex items-center gap-2">
+              {isUploading ? (
+                <span className="inline-flex items-center gap-1.5 text-sm font-medium text-[var(--color-primary)]">
+                  <Loader2 className="w-4 h-4 animate-spin" />
+                  {uploadProgress || tc("loading")}
+                </span>
+              ) : (
+                <>
+                  <button
+                    onClick={() => cameraInputRef.current?.click()}
+                    className="inline-flex items-center gap-1.5 text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-primary-dark)] sm:hidden"
+                    title={t("camera")}
+                  >
+                    <Camera className="w-4 h-4" />
+                    {t("camera")}
+                  </button>
+                  <button
+                    onClick={() => fileInputRef.current?.click()}
+                    className="inline-flex items-center gap-1.5 text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-primary-dark)]"
+                    title={t("addPhotos")}
+                  >
+                    <Upload className="w-4 h-4" />
+                    <span className="hidden sm:inline">{t("addPhotos")}</span>
+                    <span className="sm:hidden">{t("gallery")}</span>
+                  </button>
+                </>
+              )}
+            </div>
+          )}
+          </div>
+          {/* Camera capture input (rear camera) */}
+          <input
+            ref={cameraInputRef}
+            type="file"
+            accept="image/*"
+            capture="environment"
+            className="hidden"
+            onChange={handleFileSelect}
+          />
+          {/* File picker input (multi-select from gallery) */}
+          <input
+            ref={fileInputRef}
+            type="file"
+            multiple
+            accept="image/*"
+            className="hidden"
+            onChange={handleFileSelect}
+          />
+        </div>
+
+        {/* Error banner */}
+        {error && (
+          <div className="mb-3 flex items-center gap-2 p-2.5 bg-red-50 text-red-700 text-sm rounded-lg">
+            <AlertCircle className="w-4 h-4 shrink-0" />
+            <span className="flex-1">{error}</span>
+            <button onClick={() => setError(null)} className="p-0.5">
+              <X className="w-3.5 h-3.5" />
+            </button>
+          </div>
+        )}
+
+        {/* Flag note input modal */}
+        {flagNoteId && (
+          <div className="mb-3 p-3 bg-amber-50 border border-amber-200 rounded-lg">
+            <p className="text-sm font-medium text-amber-800 mb-2">
+              {FLAG_OPTIONS.find((o) => o.value === pendingFlag)?.label || "Flag"} — {t("addNote")}
+            </p>
+            <input
+              type="text"
+              value={flagNoteText}
+              onChange={(e) => setFlagNoteText(e.target.value)}
+              placeholder="e.g. Need wider angle showing foundation connection"
+              className="w-full text-sm border border-amber-300 rounded-md px-3 py-1.5 bg-white focus:ring-1 focus:ring-amber-400 focus:border-amber-400 mb-2"
+              onKeyDown={(e) => e.key === "Enter" && submitFlag()}
+              autoFocus
+            />
+            <div className="flex gap-2 justify-end">
+              <button
+                onClick={() => {
+                  setFlagNoteId(null);
+                  setFlagNoteText("");
+                  setPendingFlag(null);
+                }}
+                className="px-3 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded"
+              >
+                {tc("cancel")}
+              </button>
+              <button
+                onClick={submitFlag}
+                className="px-3 py-1 text-xs font-medium text-white bg-amber-600 hover:bg-amber-700 rounded"
+              >
+                {t("flagPhotoBtn")}
+              </button>
+            </div>
+          </div>
+        )}
+
+        {/* Empty state / drop zone */}
+        {photos.length === 0 && !isUploading ? (
+          <div
+            onDragOver={handleDragOver}
+            onDragLeave={handleDragLeave}
+            onDrop={handleDrop}
+            className={`text-center py-8 border-2 border-dashed rounded-lg transition-colors ${
+              isDragging
+                ? "border-[var(--color-primary-light)] bg-[var(--color-primary-bg)]"
+                : "border-gray-200 hover:border-gray-300"
+            }`}
+          >
+            <Camera
+              className={`w-8 h-8 mx-auto mb-2 ${
+                isDragging ? "text-[var(--color-primary-light)]" : "text-gray-300"
+              }`}
+            />
+            <p className="text-sm text-gray-500">
+              {isDragging ? t("dropHere") : t("noPhotosYet")}
+            </p>
+            {canUpload && !isDragging && (
+              <p className="text-xs text-gray-400 mt-1">
+                {t("dragDropPhotos")}
+              </p>
+            )}
+          </div>
+        ) : (
+          /* Photo grid */
+          <div
+            onDragOver={handleDragOver}
+            onDragLeave={handleDragLeave}
+            onDrop={handleDrop}
+          >
+            {isDragging && (
+              <div className="mb-3 p-4 border-2 border-dashed border-[var(--color-primary-light)] bg-[var(--color-primary-bg)] rounded-lg text-center text-sm text-[var(--color-primary)]">
+                {t("dropImages")}
+              </div>
+            )}
+            <div className="grid grid-cols-2 sm:grid-cols-3 gap-3">
+              {photos.map((photo) => {
+                const flag = photo.flagType
+                  ? FLAG_BADGE[photo.flagType]
+                  : null;
+
+                return (
+                  <div
+                    key={photo.id}
+                    className="relative group rounded-lg overflow-hidden bg-gray-100 aspect-[4/3]"
+                  >
+                    <img
+                      src={photo.url}
+                      alt={photo.caption || t("phasePhoto")}
+                      className="w-full h-full object-cover"
+                    />
+
+                    {/* GPS badge */}
+                    {photo.latitude != null && photo.longitude != null && (
+                      <div className="absolute top-2 right-2 z-10">
+                        <div
+                          className="inline-flex items-center justify-center w-5 h-5 rounded-full bg-green-500/90 text-white"
+                          title={`GPS: ${photo.latitude.toFixed(5)}, ${photo.longitude.toFixed(5)}`}
+                        >
+                          <MapPin className="w-3 h-3" />
+                        </div>
+                      </div>
+                    )}
+
+                    {/* Flag badge — always visible when flagged */}
+                    {flag && (
+                      <div className="absolute top-2 left-2 z-10">
+                        <div
+                          className={`inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-semibold ${flag.bg} ${flag.text}`}
+                          title={photo.flagNote || flag.label}
+                        >
+                          <Flag className="w-2.5 h-2.5" />
+                          {flag.label}
+                        </div>
+                        {photo.flagNote && (
+                          <div className={`mt-0.5 px-1.5 py-0.5 rounded text-[9px] ${flag.bg} ${flag.text} max-w-[140px] truncate`}>
+                            {photo.flagNote}
+                          </div>
+                        )}
+                      </div>
+                    )}
+
+                    {/* Hover overlay */}
+                    <div className="absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors flex items-end">
+                      <div className="w-full p-2 opacity-0 group-hover:opacity-100 transition-opacity">
+                        <div className="flex items-center justify-between">
+                          <div className="text-xs text-white">
+                            <span>{photo.uploadedBy.name || "—"}</span>
+                            <span className="mx-1">·</span>
+                            <span>{formatDate(photo.takenAt)}</span>
+                          </div>
+                          <div className="flex items-center gap-1">
+                            {/* Flag button (PM/admin only) */}
+                            {canFlag && (
+                              <div className="relative">
+                                <button
+                                  onClick={(e) => {
+                                    e.stopPropagation();
+                                    setFlagMenuId(
+                                      flagMenuId === photo.id ? null : photo.id
+                                    );
+                                  }}
+                                  className={`p-1 rounded ${
+                                    photo.flagType
+                                      ? "text-amber-400 hover:text-amber-300"
+                                      : "text-white/80 hover:text-white"
+                                  }`}
+                                  title={photo.flagType ? t("changeFlag") : t("flagForFollowup")}
+                                >
+                                  <Flag className="w-3.5 h-3.5" />
+                                </button>
+
+                                {/* Flag dropdown */}
+                                {flagMenuId === photo.id && (
+                                  <div
+                                    className="absolute right-0 bottom-full mb-1 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-20 min-w-[180px]"
+                                    onClick={(e) => e.stopPropagation()}
+                                  >
+                                    {FLAG_OPTIONS.map((opt) => {
+                                      const Icon = opt.icon;
+                                      return (
+                                        <button
+                                          key={opt.value}
+                                          onClick={() =>
+                                            handleFlag(photo.id, opt.value)
+                                          }
+                                          className={`w-full flex items-center gap-2 px-3 py-1.5 text-xs hover:bg-gray-50 ${opt.color}`}
+                                        >
+                                          <Icon className="w-3 h-3" />
+                                          {opt.label}
+                                        </button>
+                                      );
+                                    })}
+                                    {photo.flagType && (
+                                      <>
+                                        <div className="border-t border-gray-100 my-1" />
+                                        <button
+                                          onClick={() => {
+                                            handleClearFlag(photo.id);
+                                            setFlagMenuId(null);
+                                          }}
+                                          className="w-full flex items-center gap-2 px-3 py-1.5 text-xs text-green-600 hover:bg-green-50"
+                                        >
+                                          <CheckCircle2 className="w-3 h-3" />
+                                          {t("clearFlag")}
+                                        </button>
+                                      </>
+                                    )}
+                                  </div>
+                                )}
+                              </div>
+                            )}
+                            <button
+                              onClick={() => setLightboxUrl(photo.url)}
+                              className="p-1 text-white/80 hover:text-white"
+                              title={t("viewFullSize")}
+                            >
+                              <Maximize2 className="w-3.5 h-3.5" />
+                            </button>
+                            {canDelete && (
+                              <button
+                                onClick={() => handleDelete(photo.id)}
+                                disabled={deletingId === photo.id}
+                                className="p-1 text-white/80 hover:text-red-400"
+                                title={tc("delete")}
+                              >
+                                {deletingId === photo.id ? (
+                                  <Loader2 className="w-3.5 h-3.5 animate-spin" />
+                                ) : (
+                                  <Trash2 className="w-3.5 h-3.5" />
+                                )}
+                              </button>
+                            )}
+                          </div>
+                        </div>
+                        {photo.caption && (
+                          <p className="text-xs text-white/90 mt-1 truncate">
+                            {photo.caption}
+                          </p>
+                        )}
+                      </div>
+                    </div>
+                  </div>
+                );
+              })}
+            </div>
+          </div>
+        )}
+      </div>
+
+      {/* Photo Map */}
+      {showMap && geoPhotos.length > 0 && (
+        <PhotoMapView
+          photos={geoPhotos}
+          onClose={() => setShowMap(false)}
+        />
+      )}
+
+      {/* Lightbox */}
+      {lightboxUrl && (
+        <div
+          className="fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4"
+          onClick={() => setLightboxUrl(null)}
+        >
+          <button
+            onClick={() => setLightboxUrl(null)}
+            className="absolute top-4 right-4 p-2 text-white/80 hover:text-white"
+          >
+            <X className="w-6 h-6" />
+          </button>
+          <img
+            src={lightboxUrl}
+            alt={t("phasePhoto")}
+            className="max-w-full max-h-full object-contain rounded"
+            onClick={(e) => e.stopPropagation()}
+          />
+        </div>
+      )}
+    </>
+  );
+}
diff --git a/src/components/phase/SubcontractorBidSection.tsx b/src/components/phase/SubcontractorBidSection.tsx
new file mode 100644
index 0000000..51035bd
--- /dev/null
+++ b/src/components/phase/SubcontractorBidSection.tsx
@@ -0,0 +1,325 @@
+"use client";
+
+import { useState } from "react";
+import {
+  Briefcase,
+  Plus,
+  Loader2,
+  AlertCircle,
+  X,
+  Trophy,
+  Mail,
+  Phone,
+  User,
+  DollarSign,
+  Trash2,
+  Award,
+} from "lucide-react";
+import {
+  createSubcontractorBid,
+  awardBid,
+  deleteSubcontractorBid,
+} from "@/actions/subcontractor-bids";
+import type { SubcontractorBid } from "@/lib/db-types";
+
+interface SubcontractorBidSectionProps {
+  phaseId: string;
+  bids: SubcontractorBid[];
+  canManage: boolean;
+}
+
+function fmt(n: number) {
+  return new Intl.NumberFormat("en-US", { style: "currency", currency: "USD", maximumFractionDigits: 0 }).format(n);
+}
+
+export function SubcontractorBidSection({ phaseId, bids, canManage }: SubcontractorBidSectionProps) {
+  const [showForm, setShowForm] = useState(false);
+  const [submitting, setSubmitting] = useState(false);
+  const [actionId, setActionId] = useState<string | null>(null);
+  const [error, setError] = useState<string | null>(null);
+  const [form, setForm] = useState({
+    companyName: "",
+    contactName: "",
+    email: "",
+    phone: "",
+    amount: "",
+    notes: "",
+  });
+
+  const handleSubmit = async (e: React.FormEvent) => {
+    e.preventDefault();
+    if (!form.companyName.trim() || !form.amount) return;
+    const amount = parseFloat(form.amount);
+    if (isNaN(amount) || amount < 0) {
+      setError("Enter a valid bid amount");
+      return;
+    }
+    setSubmitting(true);
+    setError(null);
+    try {
+      await createSubcontractorBid({
+        phaseId,
+        companyName: form.companyName.trim(),
+        contactName: form.contactName || undefined,
+        email: form.email || undefined,
+        phone: form.phone || undefined,
+        amount,
+        notes: form.notes || undefined,
+      });
+      setForm({ companyName: "", contactName: "", email: "", phone: "", amount: "", notes: "" });
+      setShowForm(false);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to add bid");
+    } finally {
+      setSubmitting(false);
+    }
+  };
+
+  const handleAward = async (bid: SubcontractorBid) => {
+    setActionId(bid.id);
+    try {
+      await awardBid(bid.id, !bid.awarded);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to update bid");
+    } finally {
+      setActionId(null);
+    }
+  };
+
+  const handleDelete = async (id: string) => {
+    if (!confirm("Delete this bid?")) return;
+    setActionId(id);
+    try {
+      await deleteSubcontractorBid(id);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to delete bid");
+    } finally {
+      setActionId(null);
+    }
+  };
+
+  const awardedBid = bids.find((b) => b.awarded);
+  const lowestBid = bids.reduce<SubcontractorBid | null>((min, b) => (!min || b.amount < min.amount ? b : min), null);
+
+  return (
+    <div className="bg-white rounded-xl border border-gray-200 p-5">
+      <div className="flex items-center justify-between mb-4">
+        <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2">
+          <Briefcase className="w-4 h-4 text-[var(--color-primary)]" />
+          Subcontractor Bids
+          <span className="text-xs font-normal text-gray-400 normal-case">
+            ({bids.length} {bids.length === 1 ? "bid" : "bids"})
+          </span>
+          {awardedBid && (
+            <span className="text-xs font-medium text-green-600 bg-green-50 px-1.5 py-0.5 rounded-full normal-case flex items-center gap-1">
+              <Trophy className="w-3 h-3" /> Awarded
+            </span>
+          )}
+        </h2>
+        {canManage && (
+          <button
+            onClick={() => setShowForm((v) => !v)}
+            className="inline-flex items-center gap-1.5 text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-primary-dark)]"
+          >
+            <Plus className="w-4 h-4" />
+            <span className="hidden sm:inline">Add Bid</span>
+          </button>
+        )}
+      </div>
+
+      {error && (
+        <div className="mb-3 flex items-center gap-2 p-2.5 bg-red-50 text-red-700 text-sm rounded-lg">
+          <AlertCircle className="w-4 h-4 shrink-0" />
+          <span className="flex-1">{error}</span>
+          <button onClick={() => setError(null)}><X className="w-3.5 h-3.5" /></button>
+        </div>
+      )}
+
+      {showForm && (
+        <form onSubmit={handleSubmit} className="mb-4 p-4 bg-gray-50 rounded-lg space-y-3 text-sm">
+          <div className="grid grid-cols-2 gap-3">
+            <div className="col-span-2 sm:col-span-1">
+              <label className="block text-xs font-medium text-gray-700 mb-1">Company Name *</label>
+              <input
+                required
+                value={form.companyName}
+                onChange={(e) => setForm((f) => ({ ...f, companyName: e.target.value }))}
+                placeholder="ABC Contractors Inc."
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Bid Amount ($) *</label>
+              <input
+                required
+                type="number"
+                min="0"
+                step="0.01"
+                value={form.amount}
+                onChange={(e) => setForm((f) => ({ ...f, amount: e.target.value }))}
+                placeholder="0.00"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Contact Name</label>
+              <input
+                value={form.contactName}
+                onChange={(e) => setForm((f) => ({ ...f, contactName: e.target.value }))}
+                placeholder="John Smith"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Email</label>
+              <input
+                type="email"
+                value={form.email}
+                onChange={(e) => setForm((f) => ({ ...f, email: e.target.value }))}
+                placeholder="john@abc.com"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Phone</label>
+              <input
+                value={form.phone}
+                onChange={(e) => setForm((f) => ({ ...f, phone: e.target.value }))}
+                placeholder="(555) 123-4567"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+            <div className="col-span-2">
+              <label className="block text-xs font-medium text-gray-700 mb-1">Notes</label>
+              <textarea
+                value={form.notes}
+                onChange={(e) => setForm((f) => ({ ...f, notes: e.target.value }))}
+                placeholder="Scope inclusions, exclusions, qualifications..."
+                rows={2}
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] resize-none"
+              />
+            </div>
+          </div>
+          <div className="flex gap-2 justify-end">
+            <button
+              type="button"
+              onClick={() => setShowForm(false)}
+              className="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-200 rounded-md"
+            >
+              Cancel
+            </button>
+            <button
+              type="submit"
+              disabled={submitting}
+              className="px-4 py-1.5 text-sm font-medium text-white bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] rounded-md disabled:opacity-60 inline-flex items-center gap-1.5"
+            >
+              {submitting && <Loader2 className="w-3.5 h-3.5 animate-spin" />}
+              Add Bid
+            </button>
+          </div>
+        </form>
+      )}
+
+      {bids.length === 0 && !showForm ? (
+        <div className="text-center py-8 border-2 border-dashed border-gray-200 rounded-lg">
+          <Briefcase className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+          <p className="text-sm text-gray-500">No bids received yet</p>
+        </div>
+      ) : (
+        <div className="space-y-2">
+          {[...bids].sort((a, b) => a.amount - b.amount).map((bid) => (
+            <div
+              key={bid.id}
+              className={`border rounded-lg p-3 ${
+                bid.awarded
+                  ? "border-green-200 bg-green-50"
+                  : "border-gray-100"
+              }`}
+            >
+              <div className="flex items-start justify-between gap-3">
+                <div className="min-w-0 flex-1">
+                  <div className="flex items-center gap-2 flex-wrap">
+                    <span className="text-sm font-semibold text-gray-900">{bid.companyName}</span>
+                    {bid.awarded && (
+                      <span className="inline-flex items-center gap-1 text-xs px-1.5 py-0.5 rounded-full bg-green-100 text-green-700">
+                        <Trophy className="w-3 h-3" /> Awarded
+                      </span>
+                    )}
+                    {!bid.awarded && lowestBid?.id === bid.id && bids.length > 1 && (
+                      <span className="text-xs px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600">
+                        Lowest bid
+                      </span>
+                    )}
+                  </div>
+                  <div className="flex items-center gap-3 text-xs text-gray-400 mt-1 flex-wrap">
+                    <span className="flex items-center gap-1 text-base font-bold text-gray-800">
+                      <DollarSign className="w-3 h-3 text-gray-400" />
+                      {fmt(bid.amount)}
+                    </span>
+                    {bid.contactName && (
+                      <span className="flex items-center gap-1">
+                        <User className="w-3 h-3" />{bid.contactName}
+                      </span>
+                    )}
+                    {bid.email && (
+                      <span className="flex items-center gap-1">
+                        <Mail className="w-3 h-3" />
+                        <a href={`mailto:${bid.email}`} className="hover:text-blue-600">{bid.email}</a>
+                      </span>
+                    )}
+                    {bid.phone && (
+                      <span className="flex items-center gap-1">
+                        <Phone className="w-3 h-3" />{bid.phone}
+                      </span>
+                    )}
+                  </div>
+                  {bid.notes && (
+                    <p className="text-xs text-gray-500 mt-1 italic">{bid.notes}</p>
+                  )}
+                </div>
+                <div className="flex items-center gap-1 shrink-0">
+                  {canManage && (
+                    <button
+                      onClick={() => handleAward(bid)}
+                      disabled={actionId === bid.id}
+                      title={bid.awarded ? "Revoke award" : "Award this bid"}
+                      className={`p-1.5 rounded text-xs ${
+                        bid.awarded
+                          ? "text-green-600 hover:bg-green-100"
+                          : "text-gray-400 hover:text-green-600 hover:bg-green-50"
+                      }`}
+                    >
+                      {actionId === bid.id ? (
+                        <Loader2 className="w-3.5 h-3.5 animate-spin" />
+                      ) : (
+                        <Award className="w-3.5 h-3.5" />
+                      )}
+                    </button>
+                  )}
+                  {canManage && (
+                    <button
+                      onClick={() => handleDelete(bid.id)}
+                      disabled={actionId === bid.id}
+                      className="p-1 text-gray-300 hover:text-red-500"
+                    >
+                      {actionId === bid.id ? (
+                        <Loader2 className="w-3.5 h-3.5 animate-spin" />
+                      ) : (
+                        <Trash2 className="w-3.5 h-3.5" />
+                      )}
+                    </button>
+                  )}
+                </div>
+              </div>
+            </div>
+          ))}
+          {bids.length > 1 && (
+            <div className="text-xs text-gray-400 text-right pt-1">
+              Spread: {fmt(Math.max(...bids.map((b) => b.amount)) - Math.min(...bids.map((b) => b.amount)))}
+            </div>
+          )}
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/components/project/AcceptInvitation.tsx b/src/components/project/AcceptInvitation.tsx
new file mode 100644
index 0000000..c8a9850
--- /dev/null
+++ b/src/components/project/AcceptInvitation.tsx
@@ -0,0 +1,172 @@
+"use client";
+
+import { useState, useTransition } from "react";
+import { acceptInvitation } from "@/actions/invitations";
+import { CheckCircle2, XCircle, Loader2, HardHat } from "lucide-react";
+import { useRouter } from "next/navigation";
+import { useTranslations } from "next-intl";
+
+interface InviteDetails {
+  id: string;
+  email: string;
+  role: string;
+  projectName: string;
+  projectAddress: string | null;
+  expiresAt: Date;
+  expired: boolean;
+}
+
+interface Props {
+  token: string;
+  invite: InviteDetails;
+  isLoggedIn: boolean;
+}
+
+export function AcceptInvitation({ token, invite, isLoggedIn }: Props) {
+  const t = useTranslations("invitations");
+  const tc = useTranslations("common");
+  const router = useRouter();
+  const [isPending, startTransition] = useTransition();
+  const [result, setResult] = useState<{
+    success: boolean;
+    projectId?: string;
+    projectName?: string;
+    alreadyMember?: boolean;
+    error?: string;
+  } | null>(null);
+
+  if (invite.expired) {
+    return (
+      <div className="text-center">
+        <div className="w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-4">
+          <XCircle className="w-8 h-8 text-red-500" />
+        </div>
+        <h1 className="text-xl font-bold text-gray-900 mb-2">{t("expired")}</h1>
+        <p className="text-sm text-gray-500 mb-6">{t("expiredMessage")}</p>
+        <a
+          href="/login"
+          className="inline-flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg text-sm font-medium hover:bg-[var(--color-primary-dark)] transition-colors"
+        >
+          {t("goToLogin")}
+        </a>
+      </div>
+    );
+  }
+
+  if (result?.success) {
+    return (
+      <div className="text-center">
+        <div className="w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4">
+          <CheckCircle2 className="w-8 h-8 text-green-500" />
+        </div>
+        <h1 className="text-xl font-bold text-gray-900 mb-2">
+          {result.alreadyMember ? t("alreadyMember") : t("welcomeToTeam")}
+        </h1>
+        <p className="text-sm text-gray-500 mb-6">
+          {result.alreadyMember
+            ? t("alreadyMemberMessage", { project: result.projectName ?? "" })
+            : t("joinedMessage", { project: result.projectName ?? "" })}
+        </p>
+        <button
+          onClick={() => router.push(`/dashboard/projects/${result.projectId}`)}
+          className="inline-flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg text-sm font-medium hover:bg-[var(--color-primary-dark)] transition-colors"
+        >
+          {t("goToProject")}
+        </button>
+      </div>
+    );
+  }
+
+  if (result?.error) {
+    return (
+      <div className="text-center">
+        <div className="w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-4">
+          <XCircle className="w-8 h-8 text-red-500" />
+        </div>
+        <h1 className="text-xl font-bold text-gray-900 mb-2">{t("somethingWentWrong")}</h1>
+        <p className="text-sm text-gray-500 mb-6">{result.error}</p>
+        <a
+          href="/login"
+          className="inline-flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg text-sm font-medium hover:bg-[var(--color-primary-dark)] transition-colors"
+        >
+          {t("goToLogin")}
+        </a>
+      </div>
+    );
+  }
+
+  function handleAccept() {
+    startTransition(async () => {
+      try {
+        const res = await acceptInvitation(token);
+        setResult(res);
+      } catch (err: unknown) {
+        const msg = err instanceof Error ? err.message : "Failed to accept invitation";
+        setResult({ success: false, error: msg });
+      }
+    });
+  }
+
+  return (
+    <div className="text-center">
+      <div className="w-16 h-16 rounded-full bg-[var(--color-primary-bg)] flex items-center justify-center mx-auto mb-4">
+        <HardHat className="w-8 h-8 text-[var(--color-primary)]" />
+      </div>
+      <h1 className="text-xl font-bold text-gray-900 mb-1">{t("youreInvited")}</h1>
+      <p className="text-sm text-gray-500 mb-6">
+        {t("invitedToJoin")}{" "}
+        <span className="font-semibold text-gray-700">{invite.projectName}</span>
+        {invite.projectAddress && (
+          <span className="block text-xs text-gray-400 mt-1">{invite.projectAddress}</span>
+        )}
+      </p>
+
+      <div className="bg-gray-50 rounded-lg p-4 mb-6 text-left space-y-2">
+        <div className="flex justify-between text-sm">
+          <span className="text-gray-500">{t("role")}</span>
+          <span className="font-medium text-gray-900">
+            {invite.role.charAt(0) + invite.role.slice(1).toLowerCase()}
+          </span>
+        </div>
+        <div className="flex justify-between text-sm">
+          <span className="text-gray-500">{t("invitedAs")}</span>
+          <span className="font-medium text-gray-900">{invite.email}</span>
+        </div>
+        <div className="flex justify-between text-sm">
+          <span className="text-gray-500">{tc("expires")}</span>
+          <span className="font-medium text-gray-900">
+            {new Date(invite.expiresAt).toLocaleDateString("en-US", {
+              month: "short",
+              day: "numeric",
+              year: "numeric",
+            })}
+          </span>
+        </div>
+      </div>
+
+      {isLoggedIn ? (
+        <button
+          onClick={handleAccept}
+          disabled={isPending}
+          className="w-full inline-flex items-center justify-center gap-2 px-4 py-3 bg-[var(--color-primary)] text-white rounded-lg text-sm font-medium hover:bg-[var(--color-primary-dark)] transition-colors disabled:opacity-50"
+        >
+          {isPending ? (
+            <>
+              <Loader2 className="w-4 h-4 animate-spin" />
+              {t("joining")}
+            </>
+          ) : (
+            t("acceptInvitation")
+          )}
+        </button>
+      ) : (
+        <a
+          href={`/login?callbackUrl=/invite/${token}`}
+          className="w-full inline-flex items-center justify-center gap-2 px-4 py-3 bg-[var(--color-primary)] text-white rounded-lg text-sm font-medium hover:bg-[var(--color-primary-dark)] transition-colors"
+        >
+          {t("signInToAccept")}
+        </a>
+      )}
+    </div>
+  );
+}
diff --git a/src/components/project/BudgetSection.tsx b/src/components/project/BudgetSection.tsx
new file mode 100644
index 0000000..d156411
--- /dev/null
+++ b/src/components/project/BudgetSection.tsx
@@ -0,0 +1,314 @@
+"use client";
+
+import { useState, useTransition } from "react";
+import { updateProjectBudget, updatePhaseCosts } from "@/actions/budget";
+import { DollarSign, TrendingUp, TrendingDown, Minus, Pencil, Check, X } from "lucide-react";
+import { toast } from "sonner";
+import { useTranslations } from "next-intl";
+
+interface PhaseBudget {
+  id: string;
+  name: string;
+  status: string;
+  estimatedCost: number | null;
+  actualCost: number | null;
+}
+
+interface Props {
+  projectId: string;
+  projectBudget: number | null;
+  phases: PhaseBudget[];
+  canManage: boolean;
+}
+
+function fmt(n: number | null): string {
+  if (n === null || n === 0) return "—";
+  return `$${n.toLocaleString(undefined, { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;
+}
+
+function pct(actual: number, estimated: number): number {
+  if (estimated === 0) return 0;
+  return Math.round((actual / estimated) * 100);
+}
+
+export function BudgetSection({
+  projectId,
+  projectBudget: initialBudget,
+  phases: initialPhases,
+  canManage,
+}: Props) {
+  const t = useTranslations("budget");
+  const [projectBudget, setProjectBudget] = useState(initialBudget);
+  const [phases, setPhases] = useState(initialPhases);
+  const [editingBudget, setEditingBudget] = useState(false);
+  const [budgetInput, setBudgetInput] = useState(String(initialBudget || ""));
+  const [editingPhaseId, setEditingPhaseId] = useState<string | null>(null);
+  const [phaseEstInput, setPhaseEstInput] = useState("");
+  const [phaseActInput, setPhaseActInput] = useState("");
+  const [isPending, startTransition] = useTransition();
+
+  const totalEstimated = phases.reduce((s, p) => s + (p.estimatedCost || 0), 0);
+  const totalActual = phases.reduce((s, p) => s + (p.actualCost || 0), 0);
+  const variance = totalEstimated > 0 ? totalActual - totalEstimated : 0;
+  const budgetUsed = projectBudget && projectBudget > 0 ? pct(totalActual, projectBudget) : null;
+
+  function saveBudget() {
+    const val = budgetInput.replace(/[^0-9.]/g, "");
+    const num = parseFloat(val) || null;
+    startTransition(async () => {
+      try {
+        await updateProjectBudget(projectId, num);
+        setProjectBudget(num);
+        setEditingBudget(false);
+        toast.success(t("updated"));
+      } catch {
+        toast.error(t("failedToUpdate"));
+      }
+    });
+  }
+
+  function startEditPhase(phase: PhaseBudget) {
+    setEditingPhaseId(phase.id);
+    setPhaseEstInput(phase.estimatedCost ? String(phase.estimatedCost) : "");
+    setPhaseActInput(phase.actualCost ? String(phase.actualCost) : "");
+  }
+
+  function savePhase(phaseId: string) {
+    const est = parseFloat(phaseEstInput.replace(/[^0-9.]/g, "")) || null;
+    const act = parseFloat(phaseActInput.replace(/[^0-9.]/g, "")) || null;
+    startTransition(async () => {
+      try {
+        await updatePhaseCosts(phaseId, { estimatedCost: est, actualCost: act });
+        setPhases((prev) =>
+          prev.map((p) =>
+            p.id === phaseId ? { ...p, estimatedCost: est, actualCost: act } : p
+          )
+        );
+        setEditingPhaseId(null);
+        toast.success(t("costsUpdated"));
+      } catch {
+        toast.error(t("failedToUpdateCosts"));
+      }
+    });
+  }
+
+  return (
+    <div className="bg-white rounded-xl border border-gray-200 overflow-hidden">
+      {/* Header */}
+      <div className="px-4 sm:px-5 py-4 border-b border-gray-100">
+        <div className="flex items-center justify-between">
+          <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2">
+            <DollarSign className="w-4 h-4 text-green-600" />
+            {t("title")}
+          </h2>
+          {canManage && !editingBudget && (
+            <button
+              onClick={() => {
+                setBudgetInput(String(projectBudget || ""));
+                setEditingBudget(true);
+              }}
+              className="text-xs text-gray-400 hover:text-gray-600 flex items-center gap-1"
+            >
+              <Pencil className="w-3 h-3" />
+              {t("editTotal")}
+            </button>
+          )}
+        </div>
+
+        {/* Project budget inline edit */}
+        {editingBudget ? (
+          <div className="flex items-center gap-2 mt-2">
+            <span className="text-sm text-gray-500">{t("totalBudget")}</span>
+            <div className="flex items-center gap-1">
+              <span className="text-sm text-gray-400">$</span>
+              <input
+                type="text"
+                value={budgetInput}
+                onChange={(e) => setBudgetInput(e.target.value)}
+                className="w-32 text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)]"
+                placeholder="0"
+                autoFocus
+                onKeyDown={(e) => {
+                  if (e.key === "Enter") saveBudget();
+                  if (e.key === "Escape") setEditingBudget(false);
+                }}
+              />
+            </div>
+            <button
+              onClick={saveBudget}
+              disabled={isPending}
+              className="p-1 text-green-600 hover:text-green-700"
+            >
+              <Check className="w-4 h-4" />
+            </button>
+            <button
+              onClick={() => setEditingBudget(false)}
+              className="p-1 text-gray-400 hover:text-gray-600"
+            >
+              <X className="w-4 h-4" />
+            </button>
+          </div>
+        ) : (
+          projectBudget && (
+            <p className="text-sm text-gray-500 mt-1">
+              {t("totalBudget")} <span className="font-semibold text-gray-900">{fmt(projectBudget)}</span>
+            </p>
+          )
+        )}
+      </div>
+
+      {/* Summary cards */}
+      <div className="grid grid-cols-3 gap-0 border-b border-gray-100">
+        <div className="px-4 py-3 text-center border-r border-gray-100">
+          <p className="text-xs text-gray-500 mb-0.5">{t("estimated")}</p>
+          <p className="text-base font-bold text-gray-900">{fmt(totalEstimated)}</p>
+        </div>
+        <div className="px-4 py-3 text-center border-r border-gray-100">
+          <p className="text-xs text-gray-500 mb-0.5">{t("actual")}</p>
+          <p className="text-base font-bold text-gray-900">{fmt(totalActual)}</p>
+        </div>
+        <div className="px-4 py-3 text-center">
+          <p className="text-xs text-gray-500 mb-0.5">{t("variance")}</p>
+          <p
+            className={`text-base font-bold flex items-center justify-center gap-1 ${
+              variance > 0 ? "text-red-600" : variance < 0 ? "text-green-600" : "text-gray-900"
+            }`}
+          >
+            {variance > 0 ? (
+              <TrendingUp className="w-3.5 h-3.5" />
+            ) : variance < 0 ? (
+              <TrendingDown className="w-3.5 h-3.5" />
+            ) : (
+              <Minus className="w-3.5 h-3.5" />
+            )}
+            {variance === 0 ? "—" : `${variance > 0 ? "+" : ""}${fmt(variance)}`}
+          </p>
+        </div>
+      </div>
+
+      {/* Budget bar */}
+      {budgetUsed !== null && (
+        <div className="px-4 sm:px-5 py-3 border-b border-gray-100">
+          <div className="flex items-center justify-between text-xs text-gray-500 mb-1">
+            <span>{t("budgetUsed")}</span>
+            <span className={budgetUsed > 100 ? "text-red-600 font-semibold" : ""}>
+              {budgetUsed}%
+            </span>
+          </div>
+          <div className="h-2 bg-gray-100 rounded-full overflow-hidden">
+            <div
+              className={`h-full rounded-full transition-all ${
+                budgetUsed > 100
+                  ? "bg-red-500"
+                  : budgetUsed > 80
+                  ? "bg-amber-500"
+                  : "bg-green-500"
+              }`}
+              style={{ width: `${Math.min(budgetUsed, 100)}%` }}
+            />
+          </div>
+        </div>
+      )}
+
+      {/* Phase breakdown */}
+      <div className="divide-y divide-gray-100">
+        {phases.map((phase) => {
+          const isEditing = editingPhaseId === phase.id;
+          const phaseVariance =
+            phase.estimatedCost && phase.actualCost
+              ? phase.actualCost - phase.estimatedCost
+              : null;
+
+          return (
+            <div key={phase.id} className="px-4 sm:px-5 py-3">
+              {isEditing ? (
+                <div>
+                  <p className="text-sm font-medium text-gray-900 mb-2">{phase.name}</p>
+                  <div className="flex flex-wrap items-center gap-3">
+                    <div className="flex items-center gap-1">
+                      <span className="text-xs text-gray-500 w-16">{t("estimated")}:</span>
+                      <span className="text-xs text-gray-400">$</span>
+                      <input
+                        type="text"
+                        value={phaseEstInput}
+                        onChange={(e) => setPhaseEstInput(e.target.value)}
+                        className="w-24 text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)]"
+                        placeholder="0"
+                        autoFocus
+                      />
+                    </div>
+                    <div className="flex items-center gap-1">
+                      <span className="text-xs text-gray-500 w-16">{t("actual")}:</span>
+                      <span className="text-xs text-gray-400">$</span>
+                      <input
+                        type="text"
+                        value={phaseActInput}
+                        onChange={(e) => setPhaseActInput(e.target.value)}
+                        className="w-24 text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)]"
+                        placeholder="0"
+                        onKeyDown={(e) => {
+                          if (e.key === "Enter") savePhase(phase.id);
+                          if (e.key === "Escape") setEditingPhaseId(null);
+                        }}
+                      />
+                    </div>
+                    <div className="flex items-center gap-1">
+                      <button
+                        onClick={() => savePhase(phase.id)}
+                        disabled={isPending}
+                        className="p-1 text-green-600 hover:text-green-700"
+                      >
+                        <Check className="w-4 h-4" />
+                      </button>
+                      <button
+                        onClick={() => setEditingPhaseId(null)}
+                        className="p-1 text-gray-400 hover:text-gray-600"
+                      >
+                        <X className="w-4 h-4" />
+                      </button>
+                    </div>
+                  </div>
+                </div>
+              ) : (
+                <div
+                  className={`flex items-center gap-3 ${canManage ? "cursor-pointer hover:bg-gray-50 -mx-4 -my-3 px-4 py-3 sm:-mx-5 sm:px-5 rounded" : ""}`}
+                  onClick={() => canManage && startEditPhase(phase)}
+                >
+                  <div className="flex-1 min-w-0">
+                    <p className="text-sm font-medium text-gray-900 truncate">{phase.name}</p>
+                  </div>
+                  <div className="flex items-center gap-4 text-xs shrink-0">
+                    <div className="text-right">
+                      <p className="text-gray-400">{t("estShort")}</p>
+                      <p className="text-gray-700 font-medium">{fmt(phase.estimatedCost)}</p>
+                    </div>
+                    <div className="text-right">
+                      <p className="text-gray-400">{t("actual")}</p>
+                      <p className="text-gray-700 font-medium">{fmt(phase.actualCost)}</p>
+                    </div>
+                    {phaseVariance !== null && (
+                      <div className="text-right w-16">
+                        <p className="text-gray-400">{t("varShort")}</p>
+                        <p
+                          className={`font-medium ${
+                            phaseVariance > 0 ? "text-red-600" : phaseVariance < 0 ? "text-green-600" : "text-gray-500"
+                          }`}
+                        >
+                          {phaseVariance > 0 ? "+" : ""}
+                          {fmt(phaseVariance)}
+                        </p>
+                      </div>
+                    )}
+                  </div>
+                  {canManage && (
+                    <Pencil className="w-3 h-3 text-gray-300 shrink-0" />
+                  )}
+                </div>
+              )}
+            </div>
+          );
+        })}
+      </div>
+    </div>
+  );
+}
diff --git a/src/components/project/ClientTokenSection.tsx b/src/components/project/ClientTokenSection.tsx
new file mode 100644
index 0000000..290fb3b
--- /dev/null
+++ b/src/components/project/ClientTokenSection.tsx
@@ -0,0 +1,269 @@
+"use client";
+
+import { useState } from "react";
+import {
+  Eye,
+  Plus,
+  Loader2,
+  AlertCircle,
+  X,
+  Copy,
+  Check,
+  Trash2,
+  ToggleLeft,
+  ToggleRight,
+  Calendar,
+  ExternalLink,
+} from "lucide-react";
+import { createClientToken, revokeClientToken, deleteClientToken } from "@/actions/client-tokens";
+import type { ClientToken } from "@/lib/db-types";
+
+interface ClientTokenSectionProps {
+  projectId: string;
+  tokens: ClientToken[];
+}
+
+export function ClientTokenSection({ projectId, tokens }: ClientTokenSectionProps) {
+  const [showForm, setShowForm] = useState(false);
+  const [submitting, setSubmitting] = useState(false);
+  const [actionId, setActionId] = useState<string | null>(null);
+  const [error, setError] = useState<string | null>(null);
+  const [newToken, setNewToken] = useState<string | null>(null);
+  const [copied, setCopied] = useState(false);
+  const [form, setForm] = useState({ label: "", expiresAt: "" });
+
+  const baseUrl = typeof window !== "undefined" ? window.location.origin : "";
+
+  const handleCreate = async (e: React.FormEvent) => {
+    e.preventDefault();
+    if (!form.label.trim()) return;
+    setSubmitting(true);
+    setError(null);
+    try {
+      const ct = await createClientToken({
+        projectId,
+        label: form.label.trim(),
+        expiresAt: form.expiresAt || undefined,
+      });
+      setNewToken(ct.token);
+      setForm({ label: "", expiresAt: "" });
+      setShowForm(false);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to create link");
+    } finally {
+      setSubmitting(false);
+    }
+  };
+
+  const handleCopy = (url: string) => {
+    navigator.clipboard.writeText(url).then(() => {
+      setCopied(true);
+      setTimeout(() => setCopied(false), 2000);
+    });
+  };
+
+  const handleRevoke = async (token: ClientToken) => {
+    setActionId(token.id);
+    try {
+      await revokeClientToken(token.id, projectId);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to revoke");
+    } finally {
+      setActionId(null);
+    }
+  };
+
+  const handleDelete = async (tokenId: string) => {
+    if (!confirm("Delete this client link permanently?")) return;
+    setActionId(tokenId);
+    try {
+      await deleteClientToken(tokenId, projectId);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to delete");
+    } finally {
+      setActionId(null);
+    }
+  };
+
+  return (
+    <div className="bg-white rounded-xl border border-gray-200 p-5">
+      <div className="flex items-center justify-between mb-4">
+        <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2">
+          <Eye className="w-4 h-4 text-[var(--color-primary)]" />
+          Client Portal Links
+          <span className="text-xs font-normal text-gray-400 normal-case">
+            ({tokens.filter((t) => t.active).length} active)
+          </span>
+        </h2>
+        <button
+          onClick={() => setShowForm((v) => !v)}
+          className="inline-flex items-center gap-1.5 text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-primary-dark)]"
+        >
+          <Plus className="w-4 h-4" />
+          <span className="hidden sm:inline">New Link</span>
+        </button>
+      </div>
+
+      {error && (
+        <div className="mb-3 flex items-center gap-2 p-2.5 bg-red-50 text-red-700 text-sm rounded-lg">
+          <AlertCircle className="w-4 h-4 shrink-0" />
+          <span className="flex-1">{error}</span>
+          <button onClick={() => setError(null)}><X className="w-3.5 h-3.5" /></button>
+        </div>
+      )}
+
+      {/* New token created — show URL */}
+      {newToken && (
+        <div className="mb-4 p-3 bg-green-50 border border-green-200 rounded-lg">
+          <p className="text-xs font-medium text-green-800 mb-1.5">✓ Client portal link created! Copy and share it:</p>
+          <div className="flex items-center gap-2">
+            <code className="flex-1 text-xs bg-white border border-green-200 rounded px-2 py-1.5 truncate">
+              {`${baseUrl}/client/${newToken}`}
+            </code>
+            <button
+              onClick={() => handleCopy(`${baseUrl}/client/${newToken}`)}
+              className="shrink-0 p-1.5 bg-green-100 hover:bg-green-200 text-green-700 rounded"
+            >
+              {copied ? <Check className="w-3.5 h-3.5" /> : <Copy className="w-3.5 h-3.5" />}
+            </button>
+          </div>
+          <button
+            onClick={() => setNewToken(null)}
+            className="text-xs text-green-600 hover:text-green-800 mt-1.5"
+          >
+            Dismiss
+          </button>
+        </div>
+      )}
+
+      {showForm && (
+        <form onSubmit={handleCreate} className="mb-4 p-4 bg-gray-50 rounded-lg space-y-3 text-sm">
+          <div className="grid grid-cols-2 gap-3">
+            <div className="col-span-2 sm:col-span-1">
+              <label className="block text-xs font-medium text-gray-700 mb-1">Label *</label>
+              <input
+                required
+                value={form.label}
+                onChange={(e) => setForm((f) => ({ ...f, label: e.target.value }))}
+                placeholder="e.g. Client – Smith Family"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">
+                <Calendar className="w-3 h-3 inline mr-1" />Expires (optional)
+              </label>
+              <input
+                type="date"
+                value={form.expiresAt}
+                onChange={(e) => setForm((f) => ({ ...f, expiresAt: e.target.value }))}
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+          </div>
+          <p className="text-xs text-gray-500">
+            The link gives read-only access to project status, phases, and progress. No login required.
+          </p>
+          <div className="flex gap-2 justify-end">
+            <button
+              type="button"
+              onClick={() => setShowForm(false)}
+              className="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-200 rounded-md"
+            >
+              Cancel
+            </button>
+            <button
+              type="submit"
+              disabled={submitting}
+              className="px-4 py-1.5 text-sm font-medium text-white bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] rounded-md disabled:opacity-60 inline-flex items-center gap-1.5"
+            >
+              {submitting && <Loader2 className="w-3.5 h-3.5 animate-spin" />}
+              Generate Link
+            </button>
+          </div>
+        </form>
+      )}
+
+      {tokens.length === 0 && !showForm ? (
+        <div className="text-center py-8 border-2 border-dashed border-gray-200 rounded-lg">
+          <Eye className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+          <p className="text-sm text-gray-500">No client links yet</p>
+          <p className="text-xs text-gray-400 mt-1">Generate a link to share a read-only project view with clients</p>
+        </div>
+      ) : (
+        <div className="space-y-2">
+          {tokens.map((token) => {
+            const url = `${baseUrl}/client/${token.token}`;
+            const expired = token.expiresAt && new Date(token.expiresAt) < new Date();
+            return (
+              <div
+                key={token.id}
+                className={`flex items-center gap-3 p-3 border rounded-lg ${
+                  !token.active || expired ? "border-gray-100 opacity-60" : "border-gray-200"
+                }`}
+              >
+                <div className="flex-1 min-w-0">
+                  <div className="flex items-center gap-2">
+                    <span className="text-sm font-medium text-gray-900">{token.label}</span>
+                    {!token.active && (
+                      <span className="text-xs px-1.5 py-0.5 rounded bg-gray-100 text-gray-500">Revoked</span>
+                    )}
+                    {expired && (
+                      <span className="text-xs px-1.5 py-0.5 rounded bg-red-50 text-red-500">Expired</span>
+                    )}
+                  </div>
+                  {token.expiresAt && (
+                    <p className="text-xs text-gray-400 mt-0.5">
+                      Expires {new Date(token.expiresAt).toLocaleDateString()}
+                    </p>
+                  )}
+                </div>
+                <div className="flex items-center gap-1 shrink-0">
+                  {token.active && !expired && (
+                    <>
+                      <button
+                        onClick={() => handleCopy(url)}
+                        title="Copy link"
+                        className="p-1.5 text-gray-400 hover:text-[var(--color-primary)] hover:bg-gray-100 rounded"
+                      >
+                        <Copy className="w-3.5 h-3.5" />
+                      </button>
+                      <a
+                        href={url}
+                        target="_blank"
+                        rel="noopener noreferrer"
+                        title="Open portal"
+                        className="p-1.5 text-gray-400 hover:text-[var(--color-primary)] hover:bg-gray-100 rounded"
+                      >
+                        <ExternalLink className="w-3.5 h-3.5" />
+                      </a>
+                      <button
+                        onClick={() => handleRevoke(token)}
+                        disabled={actionId === token.id}
+                        title="Revoke access"
+                        className="p-1.5 text-gray-400 hover:text-amber-500 hover:bg-amber-50 rounded"
+                      >
+                        {actionId === token.id ? (
+                          <Loader2 className="w-3.5 h-3.5 animate-spin" />
+                        ) : (
+                          <ToggleRight className="w-3.5 h-3.5" />
+                        )}
+                      </button>
+                    </>
+                  )}
+                  <button
+                    onClick={() => handleDelete(token.id)}
+                    disabled={actionId === token.id}
+                    className="p-1.5 text-gray-300 hover:text-red-500"
+                  >
+                    <Trash2 className="w-3.5 h-3.5" />
+                  </button>
+                </div>
+              </div>
+            );
+          })}
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/components/project/DailyLogSection.tsx b/src/components/project/DailyLogSection.tsx
new file mode 100644
index 0000000..9f7eb29
--- /dev/null
+++ b/src/components/project/DailyLogSection.tsx
@@ -0,0 +1,307 @@
+"use client";
+
+import { useState } from "react";
+import {
+  BookOpen,
+  Plus,
+  Loader2,
+  AlertCircle,
+  X,
+  Trash2,
+  ThermometerSun,
+  Users,
+  Wrench,
+  FileText,
+  AlertTriangle,
+} from "lucide-react";
+import { createDailyLog, deleteDailyLog } from "@/actions/daily-logs";
+import type { DailyLog } from "@/lib/db-types";
+
+interface DailyLogSectionProps {
+  projectId: string;
+  logs: DailyLog[];
+  canCreate: boolean;
+}
+
+const WEATHER_OPTIONS = ["Sunny", "Partly Cloudy", "Cloudy", "Rainy", "Stormy", "Windy", "Foggy", "Snowy"];
+
+export function DailyLogSection({ projectId, logs, canCreate }: DailyLogSectionProps) {
+  const [showForm, setShowForm] = useState(false);
+  const [submitting, setSubmitting] = useState(false);
+  const [deletingId, setDeletingId] = useState<string | null>(null);
+  const [error, setError] = useState<string | null>(null);
+  const [expandedId, setExpandedId] = useState<string | null>(null);
+
+  const today = new Date().toISOString().slice(0, 10);
+  const [form, setForm] = useState({
+    date: today,
+    weather: "",
+    tempHigh: "",
+    tempLow: "",
+    crewCount: "",
+    equipment: "",
+    workSummary: "",
+    issues: "",
+    notes: "",
+  });
+
+  const handleSubmit = async (e: React.FormEvent) => {
+    e.preventDefault();
+    if (!form.workSummary.trim()) return;
+    setSubmitting(true);
+    setError(null);
+    try {
+      await createDailyLog({
+        projectId,
+        date: form.date,
+        weather: form.weather || undefined,
+        tempHigh: form.tempHigh ? Number(form.tempHigh) : undefined,
+        tempLow: form.tempLow ? Number(form.tempLow) : undefined,
+        crewCount: form.crewCount ? Number(form.crewCount) : undefined,
+        equipment: form.equipment || undefined,
+        workSummary: form.workSummary,
+        issues: form.issues || undefined,
+        notes: form.notes || undefined,
+      });
+      setForm({ date: today, weather: "", tempHigh: "", tempLow: "", crewCount: "", equipment: "", workSummary: "", issues: "", notes: "" });
+      setShowForm(false);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to save log");
+    } finally {
+      setSubmitting(false);
+    }
+  };
+
+  const handleDelete = async (id: string) => {
+    if (!confirm("Delete this daily log entry?")) return;
+    setDeletingId(id);
+    try {
+      await deleteDailyLog(id);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to delete");
+    } finally {
+      setDeletingId(null);
+    }
+  };
+
+  return (
+    <div className="bg-white rounded-xl border border-gray-200 p-5">
+      <div className="flex items-center justify-between mb-4">
+        <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2">
+          <BookOpen className="w-4 h-4 text-[var(--color-primary)]" />
+          Site Diary
+          <span className="text-xs font-normal text-gray-400 normal-case">
+            ({logs.length} entries)
+          </span>
+        </h2>
+        {canCreate && (
+          <button
+            onClick={() => setShowForm((v) => !v)}
+            className="inline-flex items-center gap-1.5 text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-primary-dark)]"
+          >
+            <Plus className="w-4 h-4" />
+            <span className="hidden sm:inline">Add Entry</span>
+          </button>
+        )}
+      </div>
+
+      {error && (
+        <div className="mb-3 flex items-center gap-2 p-2.5 bg-red-50 text-red-700 text-sm rounded-lg">
+          <AlertCircle className="w-4 h-4 shrink-0" />
+          <span className="flex-1">{error}</span>
+          <button onClick={() => setError(null)}><X className="w-3.5 h-3.5" /></button>
+        </div>
+      )}
+
+      {/* Form */}
+      {showForm && (
+        <form onSubmit={handleSubmit} className="mb-4 p-4 bg-gray-50 rounded-lg space-y-3 text-sm">
+          <div className="grid grid-cols-2 sm:grid-cols-3 gap-3">
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Date *</label>
+              <input type="date" required value={form.date}
+                onChange={(e) => setForm((f) => ({ ...f, date: e.target.value }))}
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Weather</label>
+              <select value={form.weather} onChange={(e) => setForm((f) => ({ ...f, weather: e.target.value }))}
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]">
+                <option value="">—</option>
+                {WEATHER_OPTIONS.map((w) => <option key={w} value={w}>{w}</option>)}
+              </select>
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Crew Count</label>
+              <input type="number" min="0" value={form.crewCount}
+                onChange={(e) => setForm((f) => ({ ...f, crewCount: e.target.value }))}
+                placeholder="0"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+          </div>
+          <div className="grid grid-cols-2 gap-3">
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">High Temp (°F)</label>
+              <input type="number" value={form.tempHigh}
+                onChange={(e) => setForm((f) => ({ ...f, tempHigh: e.target.value }))}
+                placeholder="e.g. 78"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Low Temp (°F)</label>
+              <input type="number" value={form.tempLow}
+                onChange={(e) => setForm((f) => ({ ...f, tempLow: e.target.value }))}
+                placeholder="e.g. 55"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+          </div>
+          <div>
+            <label className="block text-xs font-medium text-gray-700 mb-1">Equipment Used</label>
+            <input value={form.equipment}
+              onChange={(e) => setForm((f) => ({ ...f, equipment: e.target.value }))}
+              placeholder="e.g. Excavator, Crane, Forklift"
+              className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+            />
+          </div>
+          <div>
+            <label className="block text-xs font-medium text-gray-700 mb-1">Work Summary *</label>
+            <textarea required value={form.workSummary}
+              onChange={(e) => setForm((f) => ({ ...f, workSummary: e.target.value }))}
+              placeholder="Describe the work performed today..."
+              rows={3}
+              className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] resize-none"
+            />
+          </div>
+          <div>
+            <label className="block text-xs font-medium text-gray-700 mb-1">Issues / Delays</label>
+            <textarea value={form.issues}
+              onChange={(e) => setForm((f) => ({ ...f, issues: e.target.value }))}
+              placeholder="Any problems encountered..."
+              rows={2}
+              className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] resize-none"
+            />
+          </div>
+          <div>
+            <label className="block text-xs font-medium text-gray-700 mb-1">Notes</label>
+            <textarea value={form.notes}
+              onChange={(e) => setForm((f) => ({ ...f, notes: e.target.value }))}
+              placeholder="Additional notes..."
+              rows={2}
+              className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] resize-none"
+            />
+          </div>
+          <div className="flex gap-2 justify-end">
+            <button type="button" onClick={() => setShowForm(false)}
+              className="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-200 rounded-md">Cancel</button>
+            <button type="submit" disabled={submitting}
+              className="px-4 py-1.5 text-sm font-medium text-white bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] rounded-md disabled:opacity-60 inline-flex items-center gap-1.5">
+              {submitting && <Loader2 className="w-3.5 h-3.5 animate-spin" />}
+              Save Entry
+            </button>
+          </div>
+        </form>
+      )}
+
+      {/* Log list */}
+      {logs.length === 0 && !showForm ? (
+        <div className="text-center py-8 border-2 border-dashed border-gray-200 rounded-lg">
+          <BookOpen className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+          <p className="text-sm text-gray-500">No site diary entries yet</p>
+        </div>
+      ) : (
+        <div className="space-y-2">
+          {logs.map((log) => (
+            <div key={log.id}
+              className="border border-gray-100 rounded-lg overflow-hidden">
+              <button
+                className="w-full flex items-center justify-between p-3 hover:bg-gray-50 transition-colors text-left"
+                onClick={() => setExpandedId(expandedId === log.id ? null : log.id)}
+              >
+                <div className="flex items-center gap-3 min-w-0">
+                  <span className="text-sm font-medium text-gray-900 whitespace-nowrap">
+                    {new Date(log.date).toLocaleDateString(undefined, { weekday: "short", month: "short", day: "numeric" })}
+                  </span>
+                  {log.weather && (
+                    <span className="text-xs text-gray-500 hidden sm:inline">{log.weather}</span>
+                  )}
+                  {log.crewCount != null && (
+                    <span className="text-xs text-gray-500 flex items-center gap-1 hidden sm:flex">
+                      <Users className="w-3 h-3" />{log.crewCount}
+                    </span>
+                  )}
+                  <span className="text-xs text-gray-600 truncate flex-1 min-w-0">{log.workSummary}</span>
+                </div>
+                <div className="flex items-center gap-2 shrink-0">
+                  {log.issues && (
+                    <AlertTriangle className="w-3.5 h-3.5 text-amber-500" title="Has issues" />
+                  )}
+                  <button
+                    onClick={(e) => { e.stopPropagation(); handleDelete(log.id); }}
+                    disabled={deletingId === log.id}
+                    className="p-1 text-gray-300 hover:text-red-500"
+                  >
+                    {deletingId === log.id ? <Loader2 className="w-3.5 h-3.5 animate-spin" /> : <Trash2 className="w-3.5 h-3.5" />}
+                  </button>
+                </div>
+              </button>
+
+              {expandedId === log.id && (
+                <div className="border-t border-gray-100 p-3 bg-gray-50 space-y-2 text-sm">
+                  <div className="grid grid-cols-2 sm:grid-cols-4 gap-3 text-xs">
+                    {log.weather && (
+                      <div className="flex items-center gap-1 text-gray-600">
+                        <ThermometerSun className="w-3.5 h-3.5 text-amber-500" />
+                        {log.weather}
+                        {log.tempHigh != null && ` ${log.tempHigh}°`}
+                        {log.tempLow != null && `/${log.tempLow}°`}
+                      </div>
+                    )}
+                    {log.crewCount != null && (
+                      <div className="flex items-center gap-1 text-gray-600">
+                        <Users className="w-3.5 h-3.5 text-blue-500" />
+                        {log.crewCount} crew
+                      </div>
+                    )}
+                    {log.equipment && (
+                      <div className="flex items-center gap-1 text-gray-600 col-span-2">
+                        <Wrench className="w-3.5 h-3.5 text-gray-400" />
+                        {log.equipment}
+                      </div>
+                    )}
+                  </div>
+                  <div>
+                    <p className="text-xs font-medium text-gray-500 mb-0.5 flex items-center gap-1">
+                      <FileText className="w-3 h-3" /> Work Summary
+                    </p>
+                    <p className="text-sm text-gray-800">{log.workSummary}</p>
+                  </div>
+                  {log.issues && (
+                    <div>
+                      <p className="text-xs font-medium text-amber-600 mb-0.5 flex items-center gap-1">
+                        <AlertTriangle className="w-3 h-3" /> Issues
+                      </p>
+                      <p className="text-sm text-gray-800">{log.issues}</p>
+                    </div>
+                  )}
+                  {log.notes && (
+                    <div>
+                      <p className="text-xs font-medium text-gray-500 mb-0.5">Notes</p>
+                      <p className="text-sm text-gray-800">{log.notes}</p>
+                    </div>
+                  )}
+                  <p className="text-xs text-gray-400">
+                    By {log.author?.name || log.author?.email || "—"}
+                  </p>
+                </div>
+              )}
+            </div>
+          ))}
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/components/project/InviteModal.tsx b/src/components/project/InviteModal.tsx
new file mode 100644
index 0000000..a30829f
--- /dev/null
+++ b/src/components/project/InviteModal.tsx
@@ -0,0 +1,204 @@
+"use client";
+
+import { useState, useTransition } from "react";
+import { createInvitation, cancelInvitation } from "@/actions/invitations";
+import {
+  X,
+  Mail,
+  UserPlus,
+  Loader2,
+  Clock,
+  Trash2,
+} from "lucide-react";
+import { toast } from "sonner";
+import { useTranslations } from "next-intl";
+
+interface Invitation {
+  id: string;
+  email: string;
+  role: string;
+  expiresAt: Date;
+  createdAt: Date;
+}
+
+interface Props {
+  projectId: string;
+  invitations: Invitation[];
+  onClose: () => void;
+}
+
+export function InviteModal({ projectId, invitations: initialInvitations, onClose }: Props) {
+  const t = useTranslations("invitations");
+  const tc = useTranslations("common");
+  const [email, setEmail] = useState("");
+  const [role, setRole] = useState<string>("CONTRACTOR");
+  const [invitations, setInvitations] = useState(initialInvitations);
+  const [isPending, startTransition] = useTransition();
+
+  const ROLES = [
+    { value: "MANAGER", label: t("manager"), desc: t("managerDesc") },
+    { value: "CONTRACTOR", label: t("contractor"), desc: t("contractorDesc") },
+    { value: "STAKEHOLDER", label: t("stakeholder"), desc: t("stakeholderDesc") },
+    { value: "VIEWER", label: t("viewer"), desc: t("viewerDesc") },
+  ] as const;
+
+  function handleInvite(e: React.FormEvent) {
+    e.preventDefault();
+    if (!email.trim()) return;
+
+    startTransition(async () => {
+      try {
+        const result = await createInvitation(
+          projectId,
+          email.trim(),
+          role as "OWNER" | "MANAGER" | "CONTRACTOR" | "STAKEHOLDER" | "VIEWER"
+        );
+        toast.success(t("sent", { email: email.trim() }));
+        setInvitations((prev) => [
+          { id: result.id, email: result.email, role: result.role, expiresAt: result.expiresAt, createdAt: new Date() },
+          ...prev,
+        ]);
+        setEmail("");
+
+        const link = `${window.location.origin}/invite/${result.token}`;
+        await navigator.clipboard.writeText(link);
+        toast.success(t("linkCopied"));
+      } catch (err: unknown) {
+        const msg = err instanceof Error ? err.message : "Failed to send invitation";
+        toast.error(msg);
+      }
+    });
+  }
+
+  function handleCancel(invitationId: string) {
+    startTransition(async () => {
+      try {
+        await cancelInvitation(invitationId);
+        setInvitations((prev) => prev.filter((i) => i.id !== invitationId));
+        toast.success(t("cancelled"));
+      } catch {
+        toast.error(t("failedToCancel"));
+      }
+    });
+  }
+
+  const pendingInvitations = invitations.filter(
+    (i) => new Date(i.expiresAt) > new Date()
+  );
+
+  return (
+    <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
+      <div className="absolute inset-0 bg-black/50" onClick={onClose} />
+
+      <div className="relative bg-white rounded-2xl shadow-xl max-w-lg w-full max-h-[80vh] overflow-y-auto">
+        <div className="flex items-center justify-between px-6 py-4 border-b border-gray-100">
+          <h2 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
+            <UserPlus className="w-5 h-5 text-[var(--color-primary)]" />
+            {t("inviteTeamMember")}
+          </h2>
+          <button onClick={onClose} className="p-1 text-gray-400 hover:text-gray-600 rounded">
+            <X className="w-5 h-5" />
+          </button>
+        </div>
+
+        <form onSubmit={handleInvite} className="px-6 py-4 border-b border-gray-100">
+          <div className="space-y-3">
+            <div>
+              <label className="block text-sm font-medium text-gray-700 mb-1">
+                {t("emailAddress")}
+              </label>
+              <div className="flex gap-2">
+                <div className="relative flex-1">
+                  <Mail className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400" />
+                  <input
+                    type="email"
+                    value={email}
+                    onChange={(e) => setEmail(e.target.value)}
+                    placeholder={t("emailPlaceholder")}
+                    className="w-full pl-10 pr-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"
+                    required
+                    autoFocus
+                  />
+                </div>
+                <button
+                  type="submit"
+                  disabled={isPending || !email.trim()}
+                  className="inline-flex items-center gap-1.5 px-4 py-2 text-sm font-medium bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)] transition-colors disabled:opacity-50 shrink-0"
+                >
+                  {isPending ? (
+                    <Loader2 className="w-4 h-4 animate-spin" />
+                  ) : (
+                    <UserPlus className="w-4 h-4" />
+                  )}
+                  {tc("invite")}
+                </button>
+              </div>
+            </div>
+
+            <div>
+              <label className="block text-sm font-medium text-gray-700 mb-1">
+                {t("role")}
+              </label>
+              <div className="grid grid-cols-2 gap-2">
+                {ROLES.map((r) => (
+                  <button
+                    key={r.value}
+                    type="button"
+                    onClick={() => setRole(r.value)}
+                    className={`text-left px-3 py-2 rounded-lg border text-sm transition-colors ${
+                      role === r.value
+                        ? "border-[var(--color-primary)] bg-[var(--color-primary-bg)] text-[var(--color-primary-dark)]"
+                        : "border-gray-200 text-gray-700 hover:bg-gray-50"
+                    }`}
+                  >
+                    <p className="font-medium">{r.label}</p>
+                    <p className="text-xs text-gray-500 mt-0.5">{r.desc}</p>
+                  </button>
+                ))}
+              </div>
+            </div>
+          </div>
+        </form>
+
+        {pendingInvitations.length > 0 && (
+          <div className="px-6 py-4">
+            <h3 className="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2">
+              {t("pendingInvitations", { count: pendingInvitations.length })}
+            </h3>
+            <div className="space-y-2">
+              {pendingInvitations.map((inv) => (
+                <div key={inv.id} className="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
+                  <Mail className="w-4 h-4 text-gray-400 shrink-0" />
+                  <div className="flex-1 min-w-0">
+                    <p className="text-sm text-gray-900 truncate">{inv.email}</p>
+                    <p className="text-xs text-gray-500 flex items-center gap-1">
+                      <Clock className="w-3 h-3" />
+                      {tc("expires")}{" "}
+                      {new Date(inv.expiresAt).toLocaleDateString("en-US", {
+                        month: "short",
+                        day: "numeric",
+                      })}
+                      {" · "}
+                      {inv.role.charAt(0) + inv.role.slice(1).toLowerCase()}
+                    </p>
+                  </div>
+                  <button
+                    onClick={() => handleCancel(inv.id)}
+                    className="p-1 text-gray-400 hover:text-red-500 transition-colors"
+                    title={t("cancelInvitation")}
+                  >
+                    <Trash2 className="w-3.5 h-3.5" />
+                  </button>
+                </div>
+              ))}
+            </div>
+          </div>
+        )}
+
+        <div className="px-6 py-3 bg-gray-50 rounded-b-2xl">
+          <p className="text-xs text-gray-500">{t("inviteLinkInfo")}</p>
+        </div>
+      </div>
+    </div>
+  );
+}
diff --git a/src/components/project/TeamSection.tsx b/src/components/project/TeamSection.tsx
new file mode 100644
index 0000000..308f22d
--- /dev/null
+++ b/src/components/project/TeamSection.tsx
@@ -0,0 +1,90 @@
+"use client";
+
+import { useState } from "react";
+import { UserPlus, Users } from "lucide-react";
+import { InviteModal } from "./InviteModal";
+import { useTranslations } from "next-intl";
+
+interface Member {
+  id: string;
+  role: string;
+  user: {
+    id: string;
+    name: string | null;
+    email: string;
+    role: string;
+    image: string | null;
+  };
+}
+
+interface Invitation {
+  id: string;
+  email: string;
+  role: string;
+  expiresAt: Date;
+  createdAt: Date;
+}
+
+interface Props {
+  projectId: string;
+  members: Member[];
+  invitations: Invitation[];
+  canInvite: boolean;
+}
+
+export function TeamSection({ projectId, members, invitations, canInvite }: Props) {
+  const t = useTranslations("team");
+  const ti = useTranslations("common");
+  const [showInvite, setShowInvite] = useState(false);
+
+  return (
+    <div>
+      <div className="flex items-center justify-between mb-3">
+        <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
+          {t("title", { count: members.length })}
+        </h2>
+        {canInvite && (
+          <button
+            onClick={() => setShowInvite(true)}
+            className="inline-flex items-center gap-1 text-xs font-medium text-[var(--color-primary)] hover:text-[var(--color-primary-dark)] transition-colors"
+          >
+            <UserPlus className="w-3.5 h-3.5" />
+            {ti("invite")}
+          </button>
+        )}
+      </div>
+      <div className="bg-white rounded-xl border border-gray-200 divide-y divide-gray-100">
+        {members.length === 0 ? (
+          <div className="p-6 text-center">
+            <Users className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+            <p className="text-sm text-gray-500">{t("noTeamMembers")}</p>
+          </div>
+        ) : (
+          members.map((member) => (
+            <div key={member.id} className="flex items-center gap-3 px-4 py-3">
+              <div className="w-8 h-8 rounded-full bg-[var(--color-primary-bg)] text-[var(--color-primary)] flex items-center justify-center text-sm font-semibold shrink-0">
+                {(member.user.name || member.user.email)[0].toUpperCase()}
+              </div>
+              <div className="min-w-0 flex-1">
+                <p className="text-sm font-medium text-gray-900 truncate">
+                  {member.user.name || member.user.email}
+                </p>
+                <p className="text-xs text-gray-500">
+                  {member.role.charAt(0) + member.role.slice(1).toLowerCase()}
+                </p>
+              </div>
+            </div>
+          ))
+        )}
+      </div>
+
+      {showInvite && (
+        <InviteModal
+          projectId={projectId}
+          invitations={invitations}
+          onClose={() => setShowInvite(false)}
+        />
+      )}
+    </div>
+  );
+}
diff --git a/src/components/projects/NewProjectForm.tsx b/src/components/projects/NewProjectForm.tsx
index 1b93812..045121f 100644
--- a/src/components/projects/NewProjectForm.tsx
+++ b/src/components/projects/NewProjectForm.tsx
@@ -10,11 +10,29 @@ import {
   GripVertical,
   Diamond,
   HardHat,
+  Building2,
+  Wrench,
+  Zap,
+  Droplets,
+  Wind,
+  Columns3,
+  Frame,
+  Home,
+  Paintbrush,
+  ArrowLeft,
+  Check,
 } from "lucide-react";
 import { cn } from "@/lib/utils";
+import {
+  RESIDENTIAL_TEMPLATE,
+  COMMERCIAL_TEMPLATE,
+  TRADE_TEMPLATES,
+} from "@/lib/phase-templates";
+import type { TradeTemplate } from "@/lib/phase-templates";
+import { useTranslations } from "next-intl";
 
 interface PhaseInput {
-  id: string; // client-side key
+  id: string;
   name: string;
   detail: string;
   isMilestone: boolean;
@@ -39,21 +57,34 @@ function newPhase(): PhaseInput {
   };
 }
 
-// Common residential construction phases for the quick-add template
-const RESIDENTIAL_TEMPLATE: Omit<PhaseInput, "id" | "expanded">[] = [
-  { name: "Pre-Construction / Permitting", detail: "Plans, permits, site survey, engineering", isMilestone: false, estStart: "", estEnd: "", worstStart: "", worstEnd: "" },
-  { name: "Site Work / Foundation", detail: "Clearing, grading, excavation, footings, foundation, backfill", isMilestone: false, estStart: "", estEnd: "", worstStart: "", worstEnd: "" },
-  { name: "Framing", detail: "Floor systems, walls, roof trusses, sheathing, windows/doors", isMilestone: false, estStart: "", estEnd: "", worstStart: "", worstEnd: "" },
-  { name: "Rough-In (MEP)", detail: "Rough plumbing, electrical, HVAC, low-voltage", isMilestone: false, estStart: "", estEnd: "", worstStart: "", worstEnd: "" },
-  { name: "Insulation & Drywall", detail: "Insulation, vapor barrier, drywall hang/tape/finish", isMilestone: false, estStart: "", estEnd: "", worstStart: "", worstEnd: "" },
-  { name: "Interior Finishes", detail: "Trim, cabinets, countertops, flooring, paint, tile, fixtures", isMilestone: false, estStart: "", estEnd: "", worstStart: "", worstEnd: "" },
-  { name: "Exterior Finishes", detail: "Siding, roofing, gutters, exterior paint, landscaping", isMilestone: false, estStart: "", estEnd: "", worstStart: "", worstEnd: "" },
-  { name: "Final MEP & Punch List", detail: "Fixture install, panel termination, HVAC startup, final walkthrough", isMilestone: false, estStart: "", estEnd: "", worstStart: "", worstEnd: "" },
-  { name: "Certificate of Occupancy", detail: "Final inspections, CO issued", isMilestone: true, estStart: "", estEnd: "", worstStart: "", worstEnd: "" },
-];
+// Icon lookup for trade templates
+const tradeIcons: Record<string, typeof Zap> = {
+  Zap,
+  Droplets,
+  Wind,
+  Columns3,
+  Frame,
+  Home,
+  Paintbrush,
+};
+
+function getTradeIcon(iconName: string) {
+  return tradeIcons[iconName] || Wrench;
+}
+
+type TemplateChoice =
+  | { type: "residential" }
+  | { type: "commercial" }
+  | { type: "trade"; tradeId: string }
+  | { type: "blank" }
+  | null;
 
 export function NewProjectForm() {
-  const [step, setStep] = useState<1 | 2>(1);
+  const t = useTranslations("projects");
+  const tc = useTranslations("common");
+
+  const [step, setStep] = useState<0 | 1 | 2>(0);
+  const [templateChoice, setTemplateChoice] = useState<TemplateChoice>(null);
   const [submitting, setSubmitting] = useState(false);
   const [error, setError] = useState<string | null>(null);
 
@@ -92,13 +123,35 @@ export function NewProjectForm() {
     setPhases(newPhases);
   }
 
-  function applyTemplate() {
-    const templatePhases = RESIDENTIAL_TEMPLATE.map((t) => ({
-      ...t,
-      id: crypto.randomUUID(),
-      expanded: false,
-    }));
-    setPhases(templatePhases);
+  function applyTemplatePhases(
+    templatePhases: { name: string; detail: string; isMilestone: boolean }[]
+  ) {
+    setPhases(
+      templatePhases.map((tp) => ({
+        ...tp,
+        id: crypto.randomUUID(),
+        estStart: "",
+        estEnd: "",
+        worstStart: "",
+        worstEnd: "",
+        expanded: false,
+      }))
+    );
+  }
+
+  function selectTemplate(choice: TemplateChoice) {
+    setTemplateChoice(choice);
+    if (choice?.type === "residential") {
+      applyTemplatePhases(RESIDENTIAL_TEMPLATE.phases);
+    } else if (choice?.type === "commercial") {
+      applyTemplatePhases(COMMERCIAL_TEMPLATE.phases);
+    } else if (choice?.type === "trade") {
+      const trade = TRADE_TEMPLATES.find((t) => t.id === choice.tradeId);
+      if (trade) applyTemplatePhases(trade.phases);
+    } else {
+      setPhases([]);
+    }
+    setStep(1);
   }
 
   function toggleAllExpand(expanded: boolean) {
@@ -107,18 +160,17 @@ export function NewProjectForm() {
 
   async function handleSubmit() {
     if (!name.trim()) {
-      setError("Project name is required");
+      setError(t("nameRequired"));
       return;
     }
 
-    // Validate phases have required fields
     for (const phase of phases) {
       if (!phase.name.trim()) {
-        setError(`Phase ${phases.indexOf(phase) + 1} needs a name`);
+        setError(t("phaseNeedsName", { n: phases.indexOf(phase) + 1 }));
         return;
       }
       if (!phase.estStart || !phase.estEnd) {
-        setError(`"${phase.name}" needs estimated start and end dates`);
+        setError(t("phaseNeedsDates", { name: phase.name }));
         return;
       }
     }
@@ -144,7 +196,7 @@ export function NewProjectForm() {
         })),
       });
     } catch (e) {
-      setError(e instanceof Error ? e.message : "Something went wrong");
+      setError(e instanceof Error ? e.message : tc("somethingWentWrong"));
       setSubmitting(false);
     }
   }
@@ -154,34 +206,50 @@ export function NewProjectForm() {
       {/* Step indicator */}
       <div className="flex items-center gap-3 mb-2">
         <button
-          onClick={() => setStep(1)}
+          onClick={() => setStep(0)}
           className={cn(
             "flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors",
-            step === 1
-              ? "bg-blue-600 text-white"
+            step === 0
+              ? "bg-[var(--color-primary)] text-white"
               : "bg-gray-100 text-gray-600 hover:bg-gray-200"
           )}
         >
           <span className="w-5 h-5 rounded-full bg-white/20 flex items-center justify-center text-xs">
             1
           </span>
-          Project Details
+          {t("template")}
         </button>
         <div className="w-8 h-px bg-gray-300" />
         <button
-          onClick={() => name.trim() && setStep(2)}
-          disabled={!name.trim()}
+          onClick={() => templateChoice && setStep(1)}
+          disabled={!templateChoice}
           className={cn(
             "flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors",
-            step === 2
-              ? "bg-blue-600 text-white"
+            step === 1
+              ? "bg-[var(--color-primary)] text-white"
               : "bg-gray-100 text-gray-600 hover:bg-gray-200 disabled:opacity-40 disabled:cursor-not-allowed"
           )}
         >
           <span className="w-5 h-5 rounded-full bg-white/20 flex items-center justify-center text-xs">
             2
           </span>
-          Build Phases
+          {t("details")}
+        </button>
+        <div className="w-8 h-px bg-gray-300" />
+        <button
+          onClick={() => templateChoice && name.trim() && setStep(2)}
+          disabled={!templateChoice || !name.trim()}
+          className={cn(
+            "flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors",
+            step === 2
+              ? "bg-[var(--color-primary)] text-white"
+              : "bg-gray-100 text-gray-600 hover:bg-gray-200 disabled:opacity-40 disabled:cursor-not-allowed"
+          )}
+        >
+          <span className="w-5 h-5 rounded-full bg-white/20 flex items-center justify-center text-xs">
+            3
+          </span>
+          {t("phasesStep")}
         </button>
       </div>
 
@@ -192,63 +260,168 @@ export function NewProjectForm() {
         </div>
       )}
 
+      {/* Step 0: Template Picker */}
+      {step === 0 && (
+        <div className="space-y-6">
+          {/* Main project types */}
+          <div>
+            <h3 className="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3">
+              {t("projectType")}
+            </h3>
+            <div className="grid grid-cols-1 sm:grid-cols-3 gap-3">
+              <button
+                onClick={() => selectTemplate({ type: "residential" })}
+                className={cn(
+                  "flex flex-col items-center gap-2 p-5 rounded-xl border-2 transition-all text-center hover:border-[var(--color-primary-light)] hover:bg-[var(--color-primary-bg)]",
+                  templateChoice?.type === "residential"
+                    ? "border-[var(--color-primary)] bg-[var(--color-primary-bg)]"
+                    : "border-gray-200 bg-white"
+                )}
+              >
+                <HardHat className="w-8 h-8 text-[var(--color-primary)]" />
+                <span className="text-sm font-semibold text-gray-900">
+                  {t("residential")}
+                </span>
+                <span className="text-xs text-gray-500">
+                  {t("residentialDesc")}
+                </span>
+              </button>
+
+              <button
+                onClick={() => selectTemplate({ type: "commercial" })}
+                className={cn(
+                  "flex flex-col items-center gap-2 p-5 rounded-xl border-2 transition-all text-center hover:border-[var(--color-primary-light)] hover:bg-[var(--color-primary-bg)]",
+                  templateChoice?.type === "commercial"
+                    ? "border-[var(--color-primary)] bg-[var(--color-primary-bg)]"
+                    : "border-gray-200 bg-white"
+                )}
+              >
+                <Building2 className="w-8 h-8 text-indigo-600" />
+                <span className="text-sm font-semibold text-gray-900">
+                  {t("commercial")}
+                </span>
+                <span className="text-xs text-gray-500">
+                  {t("commercialDesc")}
+                </span>
+              </button>
+
+              <button
+                onClick={() => selectTemplate({ type: "blank" })}
+                className={cn(
+                  "flex flex-col items-center gap-2 p-5 rounded-xl border-2 transition-all text-center hover:border-[var(--color-primary-light)] hover:bg-[var(--color-primary-bg)]",
+                  templateChoice?.type === "blank"
+                    ? "border-[var(--color-primary)] bg-[var(--color-primary-bg)]"
+                    : "border-gray-200 bg-white"
+                )}
+              >
+                <Plus className="w-8 h-8 text-gray-400" />
+                <span className="text-sm font-semibold text-gray-900">
+                  {t("blank")}
+                </span>
+                <span className="text-xs text-gray-500">
+                  {t("blankDesc")}
+                </span>
+              </button>
+            </div>
+          </div>
+
+          {/* Trade templates */}
+          <div>
+            <h3 className="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3">
+              {t("tradeSpecific")}
+            </h3>
+            <div className="grid grid-cols-2 sm:grid-cols-4 gap-3">
+              {TRADE_TEMPLATES.map((trade) => {
+                const Icon = getTradeIcon(trade.icon);
+                const isSelected =
+                  templateChoice?.type === "trade" &&
+                  (templateChoice as { type: "trade"; tradeId: string })
+                    .tradeId === trade.id;
+                return (
+                  <button
+                    key={trade.id}
+                    onClick={() =>
+                      selectTemplate({ type: "trade", tradeId: trade.id })
+                    }
+                    className={cn(
+                      "flex flex-col items-center gap-1.5 p-4 rounded-xl border-2 transition-all text-center hover:border-orange-400 hover:bg-orange-50/50",
+                      isSelected
+                        ? "border-orange-500 bg-orange-50"
+                        : "border-gray-200 bg-white"
+                    )}
+                  >
+                    <Icon className="w-6 h-6 text-orange-500" />
+                    <span className="text-sm font-medium text-gray-900">
+                      {trade.name}
+                    </span>
+                    <span className="text-xs text-gray-500">
+                      {t("phaseCount", { count: trade.phases.length })}
+                    </span>
+                  </button>
+                );
+              })}
+            </div>
+          </div>
+        </div>
+      )}
+
       {/* Step 1: Project Details */}
       {step === 1 && (
         <div className="bg-white rounded-xl border border-gray-200 p-6 space-y-4">
           <div>
             <label className="block text-sm font-medium text-gray-700 mb-1">
-              Project Name *
+              {t("projectName")}
             </label>
             <input
               type="text"
               value={name}
               onChange={(e) => setName(e.target.value)}
-              placeholder="e.g. Smith Residence Build"
-              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
+              placeholder={t("projectNamePlaceholder")}
+              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
             />
           </div>
 
           <div>
             <label className="block text-sm font-medium text-gray-700 mb-1">
-              Description
+              {t("description")}
             </label>
             <textarea
               value={description}
               onChange={(e) => setDescription(e.target.value)}
               rows={3}
-              placeholder="Project scope, notes, special requirements..."
-              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none"
+              placeholder={t("descriptionPlaceholder")}
+              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none resize-none"
             />
           </div>
 
           <div>
             <label className="block text-sm font-medium text-gray-700 mb-1">
-              Site Address
+              {t("siteAddress")}
             </label>
             <input
               type="text"
               value={address}
               onChange={(e) => setAddress(e.target.value)}
-              placeholder="123 Main St, City, State"
-              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
+              placeholder={t("addressPlaceholder")}
+              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
             />
           </div>
 
           <div className="grid grid-cols-2 gap-4">
             <div>
               <label className="block text-sm font-medium text-gray-700 mb-1">
-                Plan Approval Date
+                {t("planApproval")}
               </label>
               <input
                 type="date"
                 value={planApproval}
                 onChange={(e) => setPlanApproval(e.target.value)}
-                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
+                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
               />
             </div>
             <div>
               <label className="block text-sm font-medium text-gray-700 mb-1">
-                Budget ($)
+                {t("budget")}
               </label>
               <input
                 type="number"
@@ -257,24 +430,31 @@ export function NewProjectForm() {
                 step="0.01"
                 min="0"
                 placeholder="0.00"
-                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
+                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
               />
             </div>
           </div>
 
-          <div className="pt-4 flex justify-end">
+          <div className="pt-4 flex justify-between">
+            <button
+              onClick={() => setStep(0)}
+              className="px-4 py-2.5 text-sm font-medium text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors inline-flex items-center gap-1.5"
+            >
+              <ArrowLeft className="w-4 h-4" />
+              {t("template")}
+            </button>
             <button
               onClick={() => {
                 if (!name.trim()) {
-                  setError("Project name is required");
+                  setError(t("nameRequired"));
                   return;
                 }
                 setError(null);
                 setStep(2);
               }}
-              className="px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors"
+              className="px-6 py-3 bg-[var(--color-primary)] text-white rounded-lg font-medium hover:bg-[var(--color-primary-dark)] transition-colors"
             >
-              Next: Add Phases
+              {t("nextReviewPhases")}
             </button>
           </div>
         </div>
@@ -288,20 +468,11 @@ export function NewProjectForm() {
             <div className="flex items-center gap-2">
               <button
                 onClick={addPhase}
-                className="inline-flex items-center gap-1.5 px-3 py-2 text-sm font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
+                className="inline-flex items-center gap-1.5 px-3 py-2 text-sm font-medium bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)] transition-colors"
               >
                 <Plus className="w-4 h-4" />
-                Add Phase
+                {t("addPhase")}
               </button>
-              {phases.length === 0 && (
-                <button
-                  onClick={applyTemplate}
-                  className="inline-flex items-center gap-1.5 px-3 py-2 text-sm font-medium border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
-                >
-                  <HardHat className="w-4 h-4" />
-                  Residential Template
-                </button>
-              )}
             </div>
             {phases.length > 1 && (
               <div className="flex items-center gap-2 text-sm">
@@ -309,14 +480,14 @@ export function NewProjectForm() {
                   onClick={() => toggleAllExpand(true)}
                   className="text-gray-500 hover:text-gray-700"
                 >
-                  Expand all
+                  {t("expandAll")}
                 </button>
                 <span className="text-gray-300">|</span>
                 <button
                   onClick={() => toggleAllExpand(false)}
                   className="text-gray-500 hover:text-gray-700"
                 >
-                  Collapse all
+                  {t("collapseAll")}
                 </button>
               </div>
             )}
@@ -326,9 +497,9 @@ export function NewProjectForm() {
           {phases.length === 0 && (
             <div className="text-center py-12 bg-white rounded-xl border border-gray-200 border-dashed">
               <HardHat className="w-10 h-10 text-gray-300 mx-auto mb-3" />
-              <p className="text-sm text-gray-500 mb-1">No phases yet</p>
+              <p className="text-sm text-gray-500 mb-1">{t("noPhasesYet")}</p>
               <p className="text-xs text-gray-400">
-                Add phases manually or start from a template
+                {t("addPhasesHelp")}
               </p>
             </div>
           )}
@@ -384,7 +555,7 @@ export function NewProjectForm() {
                     phase.name ? "text-gray-900" : "text-gray-400 italic"
                   )}
                 >
-                  {phase.name || "Untitled Phase"}
+                  {phase.name || t("untitledPhase")}
                 </span>
 
                 {phase.estStart && phase.estEnd && (
@@ -410,7 +581,7 @@ export function NewProjectForm() {
                   <div className="grid grid-cols-2 gap-3">
                     <div className="col-span-2 sm:col-span-1">
                       <label className="block text-xs font-medium text-gray-600 mb-1">
-                        Phase Name *
+                        {t("phaseName")}
                       </label>
                       <input
                         type="text"
@@ -418,8 +589,8 @@ export function NewProjectForm() {
                         onChange={(e) =>
                           updatePhase(phase.id, { name: e.target.value })
                         }
-                        placeholder="e.g. Framing"
-                        className="w-full p-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
+                        placeholder={t("phaseNamePlaceholder")}
+                        className="w-full p-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
                       />
                     </div>
                     <div className="col-span-2 sm:col-span-1 flex items-end">
@@ -432,10 +603,10 @@ export function NewProjectForm() {
                               isMilestone: e.target.checked,
                             })
                           }
-                          className="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
+                          className="w-4 h-4 rounded border-gray-300 text-[var(--color-primary)] focus:ring-[var(--color-primary)]"
                         />
                         <span className="text-sm text-gray-700">
-                          Milestone (single date)
+                          {t("milestone")}
                         </span>
                       </label>
                     </div>
@@ -443,7 +614,7 @@ export function NewProjectForm() {
 
                   <div>
                     <label className="block text-xs font-medium text-gray-600 mb-1">
-                      Details
+                      {t("details")}
                     </label>
                     <input
                       type="text"
@@ -451,16 +622,16 @@ export function NewProjectForm() {
                       onChange={(e) =>
                         updatePhase(phase.id, { detail: e.target.value })
                       }
-                      placeholder="Scope, notes, trade involved..."
-                      className="w-full p-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
+                      placeholder={t("scope")}
+                      className="w-full p-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
                     />
                   </div>
 
                   {/* Date fields */}
                   <div className="grid grid-cols-2 gap-3">
                     <div>
-                      <label className="block text-xs font-medium text-blue-600 mb-1">
-                        Est. Start *
+                      <label className="block text-xs font-medium text-[var(--color-primary)] mb-1">
+                        {t("estStart")}
                       </label>
                       <input
                         type="date"
@@ -468,13 +639,13 @@ export function NewProjectForm() {
                         onChange={(e) =>
                           updatePhase(phase.id, { estStart: e.target.value })
                         }
-                        className="w-full p-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
+                        className="w-full p-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
                       />
                     </div>
                     {!phase.isMilestone && (
                       <div>
-                        <label className="block text-xs font-medium text-blue-600 mb-1">
-                          Est. End *
+                        <label className="block text-xs font-medium text-[var(--color-primary)] mb-1">
+                          {t("estEnd")}
                         </label>
                         <input
                           type="date"
@@ -482,7 +653,7 @@ export function NewProjectForm() {
                           onChange={(e) =>
                             updatePhase(phase.id, { estEnd: e.target.value })
                           }
-                          className="w-full p-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
+                          className="w-full p-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
                         />
                       </div>
                     )}
@@ -492,7 +663,7 @@ export function NewProjectForm() {
                     <div className="grid grid-cols-2 gap-3">
                       <div>
                         <label className="block text-xs font-medium text-red-500 mb-1">
-                          Worst Start
+                          {t("worstStart")}
                         </label>
                         <input
                           type="date"
@@ -507,7 +678,7 @@ export function NewProjectForm() {
                       </div>
                       <div>
                         <label className="block text-xs font-medium text-red-500 mb-1">
-                          Worst End
+                          {t("worstEnd")}
                         </label>
                         <input
                           type="date"
@@ -529,20 +700,28 @@ export function NewProjectForm() {
           <div className="flex items-center justify-between pt-4">
             <button
               onClick={() => setStep(1)}
-              className="px-4 py-2.5 text-sm font-medium text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"
+              className="px-4 py-2.5 text-sm font-medium text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors inline-flex items-center gap-1.5"
             >
-              Back
+              <ArrowLeft className="w-4 h-4" />
+              {t("details")}
             </button>
             <div className="flex items-center gap-3">
               <span className="text-sm text-gray-500">
-                {phases.length} phase{phases.length !== 1 ? "s" : ""}
+                {t("phaseCount", { count: phases.length })}
               </span>
               <button
                 onClick={handleSubmit}
                 disabled={submitting || !name.trim()}
-                className="px-6 py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50"
+                className="px-6 py-2.5 bg-[var(--color-primary)] text-white rounded-lg font-medium hover:bg-[var(--color-primary-dark)] transition-colors disabled:opacity-50 inline-flex items-center gap-1.5"
               >
-                {submitting ? "Creating..." : "Create Project"}
+                {submitting ? (
+                  t("creating")
+                ) : (
+                  <>
+                    <Check className="w-4 h-4" />
+                    {t("createProject")}
+                  </>
+                )}
               </button>
             </div>
           </div>
diff --git a/src/components/reports/ExportButton.tsx b/src/components/reports/ExportButton.tsx
new file mode 100644
index 0000000..c89eb9e
--- /dev/null
+++ b/src/components/reports/ExportButton.tsx
@@ -0,0 +1,173 @@
+"use client";
+
+import { useState } from "react";
+import { Download } from "lucide-react";
+import { useTranslations } from "next-intl";
+
+interface ExportData {
+  projectHealth: Array<{
+    project: string;
+    status: string;
+    phases: number;
+    completedPhases: number;
+    progress: number;
+    overdue: number;
+  }>;
+  phaseBreakdown: Array<{ status: string; count: number }>;
+  documentStats: { total: number; byStatus: Record<string, number> };
+  overdueReport: Array<{
+    phaseName: string;
+    projectName: string;
+    daysOverdue: number;
+    owner: string | null;
+  }>;
+  teamPerformance?: Array<{
+    name: string;
+    assigned: number;
+    completed: number;
+    active: number;
+    overdue: number;
+  }>;
+}
+
+interface Props {
+  data: ExportData;
+}
+
+function toCSV(headers: string[], rows: string[][]): string {
+  const escape = (v: string) =>
+    v.includes(",") || v.includes('"') || v.includes("\n")
+      ? `"${v.replace(/"/g, '""')}"`
+      : v;
+  const lines = [
+    headers.map(escape).join(","),
+    ...rows.map((row) => row.map(escape).join(",")),
+  ];
+  return lines.join("\n");
+}
+
+function downloadCSV(filename: string, content: string) {
+  const blob = new Blob([content], { type: "text/csv;charset=utf-8;" });
+  const url = URL.createObjectURL(blob);
+  const a = document.createElement("a");
+  a.href = url;
+  a.download = filename;
+  a.click();
+  URL.revokeObjectURL(url);
+}
+
+export function ExportButton({ data }: Props) {
+  const t = useTranslations("reports");
+  const [showMenu, setShowMenu] = useState(false);
+
+  function exportProjectHealth() {
+    const csv = toCSV(
+      [t("project"), t("status"), t("totalPhases"), t("completed"), t("progressPct"), t("overdue")],
+      data.projectHealth.map((p) => [
+        p.project, p.status, String(p.phases), String(p.completedPhases),
+        String(p.progress), String(p.overdue),
+      ])
+    );
+    downloadCSV("project-health-report.csv", csv);
+    setShowMenu(false);
+  }
+
+  function exportOverdue() {
+    const csv = toCSV(
+      [t("phase"), t("project"), t("daysOverdue"), t("owner")],
+      data.overdueReport.map((o) => [
+        o.phaseName, o.projectName, String(o.daysOverdue), o.owner || t("unassigned"),
+      ])
+    );
+    downloadCSV("overdue-report.csv", csv);
+    setShowMenu(false);
+  }
+
+  function exportTeamPerformance() {
+    if (!data.teamPerformance) return;
+    const csv = toCSV(
+      [t("name"), t("assignedPhases"), t("completed"), t("active"), t("overdue")],
+      data.teamPerformance.map((tm) => [
+        tm.name, String(tm.assigned), String(tm.completed), String(tm.active), String(tm.overdue),
+      ])
+    );
+    downloadCSV("team-performance.csv", csv);
+    setShowMenu(false);
+  }
+
+  function exportAll() {
+    let content = "=== PROJECT HEALTH ===\n";
+    content += toCSV(
+      [t("project"), t("status"), t("totalPhases"), t("completed"), t("progressPct"), t("overdue")],
+      data.projectHealth.map((p) => [
+        p.project, p.status, String(p.phases), String(p.completedPhases), String(p.progress), String(p.overdue),
+      ])
+    );
+
+    content += "\n\n=== PHASE STATUS BREAKDOWN ===\n";
+    content += toCSV(
+      [t("status"), "Count"],
+      data.phaseBreakdown.map((p) => [p.status, String(p.count)])
+    );
+
+    content += "\n\n=== DOCUMENT STATS ===\n";
+    content += `Total: ${data.documentStats.total}\n`;
+    content += toCSV(
+      [t("status"), "Count"],
+      Object.entries(data.documentStats.byStatus).map(([k, v]) => [k, String(v)])
+    );
+
+    if (data.overdueReport.length > 0) {
+      content += "\n\n=== OVERDUE PHASES ===\n";
+      content += toCSV(
+        [t("phase"), t("project"), t("daysOverdue"), t("owner")],
+        data.overdueReport.map((o) => [o.phaseName, o.projectName, String(o.daysOverdue), o.owner || t("unassigned")])
+      );
+    }
+
+    if (data.teamPerformance && data.teamPerformance.length > 0) {
+      content += "\n\n=== TEAM PERFORMANCE ===\n";
+      content += toCSV(
+        [t("name"), t("assignedPhases"), t("completed"), t("active"), t("overdue")],
+        data.teamPerformance.map((tm) => [tm.name, String(tm.assigned), String(tm.completed), String(tm.active), String(tm.overdue)])
+      );
+    }
+
+    downloadCSV("full-report.csv", content);
+    setShowMenu(false);
+  }
+
+  return (
+    <div className="relative">
+      <button
+        onClick={() => setShowMenu(!showMenu)}
+        className="inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors"
+      >
+        <Download className="w-4 h-4" />
+        {t("export")}
+      </button>
+
+      {showMenu && (
+        <>
+          <div className="fixed inset-0 z-10" onClick={() => setShowMenu(false)} />
+          <div className="absolute right-0 top-full mt-1 z-20 bg-white rounded-lg border border-gray-200 shadow-lg py-1 w-48">
+            <button onClick={exportAll} className="w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50">
+              {t("fullReport")}
+            </button>
+            <button onClick={exportProjectHealth} className="w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50">
+              {t("projectHealth")}
+            </button>
+            <button onClick={exportOverdue} className="w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50">
+              {t("overdueReport")}
+            </button>
+            {data.teamPerformance && data.teamPerformance.length > 0 && (
+              <button onClick={exportTeamPerformance} className="w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50">
+                {t("teamPerformance")}
+              </button>
+            )}
+          </div>
+        </>
+      )}
+    </div>
+  );
+}
diff --git a/src/components/settings/ApiKeySection.tsx b/src/components/settings/ApiKeySection.tsx
new file mode 100644
index 0000000..9fae52c
--- /dev/null
+++ b/src/components/settings/ApiKeySection.tsx
@@ -0,0 +1,184 @@
+"use client";
+
+import { useState } from "react";
+import {
+  Key,
+  Plus,
+  Loader2,
+  AlertCircle,
+  X,
+  Copy,
+  Check,
+  Trash2,
+  ToggleRight,
+  Clock,
+  Eye,
+  EyeOff,
+} from "lucide-react";
+import { createApiKey, revokeApiKey, deleteApiKey } from "@/actions/api-keys";
+import type { ApiKey } from "@/lib/db-types";
+
+interface ApiKeySectionProps {
+  apiKeys: ApiKey[];
+}
+
+export function ApiKeySection({ apiKeys }: ApiKeySectionProps) {
+  const [showForm, setShowForm] = useState(false);
+  const [submitting, setSubmitting] = useState(false);
+  const [actionId, setActionId] = useState<string | null>(null);
+  const [error, setError] = useState<string | null>(null);
+  const [newKey, setNewKey] = useState<string | null>(null);
+  const [copied, setCopied] = useState(false);
+  const [form, setForm] = useState({ name: "", expiresAt: "" });
+
+  const handleCreate = async (e: React.FormEvent) => {
+    e.preventDefault();
+    if (!form.name.trim()) return;
+    setSubmitting(true);
+    setError(null);
+    try {
+      const res = await createApiKey(form.name.trim(), form.expiresAt || undefined);
+      setNewKey(res.key);
+      setForm({ name: "", expiresAt: "" });
+      setShowForm(false);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to create key");
+    } finally {
+      setSubmitting(false);
+    }
+  };
+
+  const handleCopy = (text: string) => {
+    navigator.clipboard.writeText(text).then(() => {
+      setCopied(true);
+      setTimeout(() => setCopied(false), 2000);
+    });
+  };
+
+  const handleRevoke = async (id: string) => {
+    setActionId(id);
+    try { await revokeApiKey(id); }
+    catch (err) { setError(err instanceof Error ? err.message : "Failed"); }
+    finally { setActionId(null); }
+  };
+
+  const handleDelete = async (id: string) => {
+    if (!confirm("Permanently delete this API key?")) return;
+    setActionId(id);
+    try { await deleteApiKey(id); }
+    catch (err) { setError(err instanceof Error ? err.message : "Failed"); }
+    finally { setActionId(null); }
+  };
+
+  return (
+    <div className="bg-white rounded-xl border border-gray-200 p-5">
+      <div className="flex items-center justify-between mb-4">
+        <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2">
+          <Key className="w-4 h-4 text-[var(--color-primary)]" />
+          API Keys
+          <span className="text-xs font-normal text-gray-400 normal-case">
+            ({apiKeys.filter((k) => k.active).length} active)
+          </span>
+        </h2>
+        <button onClick={() => setShowForm((v) => !v)}
+          className="inline-flex items-center gap-1.5 text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-primary-dark)]">
+          <Plus className="w-4 h-4" />
+          <span className="hidden sm:inline">New Key</span>
+        </button>
+      </div>
+
+      {error && (
+        <div className="mb-3 flex items-center gap-2 p-2.5 bg-red-50 text-red-700 text-sm rounded-lg">
+          <AlertCircle className="w-4 h-4 shrink-0" /><span className="flex-1">{error}</span>
+          <button onClick={() => setError(null)}><X className="w-3.5 h-3.5" /></button>
+        </div>
+      )}
+
+      {newKey && (
+        <div className="mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg">
+          <p className="text-xs font-semibold text-amber-800 mb-1.5">⚠ Copy this key now — it will not be shown again:</p>
+          <div className="flex items-center gap-2">
+            <code className="flex-1 text-xs bg-white border border-amber-200 rounded px-2 py-1.5 truncate font-mono">{newKey}</code>
+            <button onClick={() => handleCopy(newKey)} className="shrink-0 p-1.5 bg-amber-100 hover:bg-amber-200 text-amber-800 rounded">
+              {copied ? <Check className="w-3.5 h-3.5" /> : <Copy className="w-3.5 h-3.5" />}
+            </button>
+          </div>
+          <button onClick={() => setNewKey(null)} className="text-xs text-amber-700 mt-1.5 hover:text-amber-900">Dismiss</button>
+        </div>
+      )}
+
+      {showForm && (
+        <form onSubmit={handleCreate} className="mb-4 p-4 bg-gray-50 rounded-lg space-y-3 text-sm">
+          <div className="grid grid-cols-2 gap-3">
+            <div className="col-span-2 sm:col-span-1">
+              <label className="block text-xs font-medium text-gray-700 mb-1">Key Name *</label>
+              <input required value={form.name} onChange={(e) => setForm((f) => ({ ...f, name: e.target.value }))}
+                placeholder="e.g. Production Integration"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)]" />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Expiry (optional)</label>
+              <input type="date" value={form.expiresAt} onChange={(e) => setForm((f) => ({ ...f, expiresAt: e.target.value }))}
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)]" />
+            </div>
+          </div>
+          <div className="flex gap-2 justify-end">
+            <button type="button" onClick={() => setShowForm(false)} className="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-200 rounded-md">Cancel</button>
+            <button type="submit" disabled={submitting}
+              className="px-4 py-1.5 text-sm font-medium text-white bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] rounded-md disabled:opacity-60 inline-flex items-center gap-1.5">
+              {submitting && <Loader2 className="w-3.5 h-3.5 animate-spin" />}Generate Key
+            </button>
+          </div>
+        </form>
+      )}
+
+      {apiKeys.length === 0 && !showForm ? (
+        <div className="text-center py-8 border-2 border-dashed border-gray-200 rounded-lg">
+          <Key className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+          <p className="text-sm text-gray-500">No API keys yet</p>
+        </div>
+      ) : (
+        <div className="space-y-2">
+          {apiKeys.map((key) => {
+            const expired = key.expiresAt && new Date(key.expiresAt) < new Date();
+            return (
+              <div key={key.id} className={`flex items-center gap-3 p-3 border rounded-lg ${!key.active || expired ? "opacity-60 border-gray-100" : "border-gray-200"}`}>
+                <div className="flex-1 min-w-0">
+                  <div className="flex items-center gap-2">
+                    <span className="text-sm font-medium text-gray-900">{key.name}</span>
+                    <code className="text-xs text-gray-400 font-mono">{key.prefix}…</code>
+                    {!key.active && <span className="text-xs bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded">Revoked</span>}
+                    {expired && <span className="text-xs bg-red-50 text-red-500 px-1.5 py-0.5 rounded">Expired</span>}
+                  </div>
+                  <div className="text-xs text-gray-400 mt-0.5 flex items-center gap-3">
+                    <span>Created {new Date(key.createdAt).toLocaleDateString()}</span>
+                    {key.lastUsedAt && (
+                      <span className="flex items-center gap-1">
+                        <Clock className="w-3 h-3" /> Used {new Date(key.lastUsedAt).toLocaleDateString()}
+                      </span>
+                    )}
+                    {key.expiresAt && !expired && (
+                      <span>Expires {new Date(key.expiresAt).toLocaleDateString()}</span>
+                    )}
+                  </div>
+                </div>
+                <div className="flex items-center gap-1 shrink-0">
+                  {key.active && !expired && (
+                    <button onClick={() => handleRevoke(key.id)} disabled={actionId === key.id}
+                      title="Revoke" className="p-1.5 text-gray-400 hover:text-amber-500 hover:bg-amber-50 rounded">
+                      {actionId === key.id ? <Loader2 className="w-3.5 h-3.5 animate-spin" /> : <ToggleRight className="w-3.5 h-3.5" />}
+                    </button>
+                  )}
+                  <button onClick={() => handleDelete(key.id)} disabled={actionId === key.id}
+                    className="p-1.5 text-gray-300 hover:text-red-500">
+                    <Trash2 className="w-3.5 h-3.5" />
+                  </button>
+                </div>
+              </div>
+            );
+          })}
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/components/settings/ChecklistTemplateManager.tsx b/src/components/settings/ChecklistTemplateManager.tsx
new file mode 100644
index 0000000..c610b6a
--- /dev/null
+++ b/src/components/settings/ChecklistTemplateManager.tsx
@@ -0,0 +1,327 @@
+"use client";
+
+import { useState, useTransition } from "react";
+import {
+  createChecklistTemplate,
+  updateChecklistTemplate,
+  deleteChecklistTemplate,
+} from "@/actions/templates";
+import {
+  ClipboardList,
+  Plus,
+  Pencil,
+  Trash2,
+  X,
+  GripVertical,
+  ChevronDown,
+  ChevronRight,
+} from "lucide-react";
+import { toast } from "sonner";
+import { useTranslations } from "next-intl";
+
+interface TemplateItem {
+  id: string;
+  title: string;
+  order: number;
+}
+
+interface Template {
+  id: string;
+  name: string;
+  items: TemplateItem[];
+}
+
+interface Props {
+  templates: Template[];
+}
+
+export function ChecklistTemplateManager({ templates: initial }: Props) {
+  const t = useTranslations("settings");
+  const [templates, setTemplates] = useState(initial);
+  const [editingId, setEditingId] = useState<string | null>(null);
+  const [creating, setCreating] = useState(false);
+  const [expandedId, setExpandedId] = useState<string | null>(null);
+  const [isPending, startTransition] = useTransition();
+
+  return (
+    <div>
+      <div className="flex items-center justify-between mb-4">
+        <div>
+          <h2 className="text-lg font-semibold text-gray-900">
+            {t("checklistTemplates")}
+          </h2>
+          <p className="text-sm text-gray-500 mt-0.5">
+            {t("templatesDescription")}
+          </p>
+        </div>
+        {!creating && !editingId && (
+          <button
+            onClick={() => setCreating(true)}
+            className="flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium rounded-lg bg-[var(--color-primary)] text-white hover:opacity-90 transition-opacity"
+          >
+            <Plus className="w-4 h-4" />
+            {t("newTemplate")}
+          </button>
+        )}
+      </div>
+
+      {/* Create form */}
+      {creating && (
+        <TemplateForm
+          onSave={(data) => {
+            startTransition(async () => {
+              try {
+                const tmpl = await createChecklistTemplate(data);
+                setTemplates((prev) => [...prev, tmpl].sort((a, b) => a.name.localeCompare(b.name)));
+                setCreating(false);
+                toast.success(t("templateCreated"));
+              } catch (e: unknown) {
+                toast.error(e instanceof Error ? e.message : t("failedToCreate"));
+              }
+            });
+          }}
+          onCancel={() => setCreating(false)}
+          isPending={isPending}
+        />
+      )}
+
+      {/* Template list */}
+      {templates.length === 0 && !creating ? (
+        <div className="text-center py-8 text-gray-400">
+          <ClipboardList className="w-8 h-8 mx-auto mb-2" />
+          <p className="text-sm">{t("noTemplatesYet")}</p>
+        </div>
+      ) : (
+        <div className="space-y-2">
+          {templates.map((template) => (
+            <div
+              key={template.id}
+              className="border border-gray-200 rounded-lg overflow-hidden"
+            >
+              {editingId === template.id ? (
+                <div className="p-4">
+                  <TemplateForm
+                    initial={{ name: template.name, items: template.items.map((i) => i.title) }}
+                    onSave={(data) => {
+                      startTransition(async () => {
+                        try {
+                          const tmpl = await updateChecklistTemplate(template.id, data);
+                          setTemplates((prev) =>
+                            prev.map((p) => (p.id === template.id ? tmpl : p))
+                          );
+                          setEditingId(null);
+                          toast.success(t("templateUpdated"));
+                        } catch (e: unknown) {
+                          toast.error(e instanceof Error ? e.message : t("failedToUpdate"));
+                        }
+                      });
+                    }}
+                    onCancel={() => setEditingId(null)}
+                    isPending={isPending}
+                    saveLabel={t("saveChanges")}
+                  />
+                </div>
+              ) : (
+                <>
+                  <div
+                    className="flex items-center gap-3 px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors"
+                    onClick={() =>
+                      setExpandedId(expandedId === template.id ? null : template.id)
+                    }
+                  >
+                    {expandedId === template.id ? (
+                      <ChevronDown className="w-4 h-4 text-gray-400 shrink-0" />
+                    ) : (
+                      <ChevronRight className="w-4 h-4 text-gray-400 shrink-0" />
+                    )}
+                    <ClipboardList className="w-4 h-4 text-[var(--color-primary)] shrink-0" />
+                    <span className="text-sm font-medium text-gray-900 flex-1">
+                      {template.name}
+                    </span>
+                    <span className="text-xs text-gray-400">
+                      {template.items.length} {template.items.length !== 1 ? "items" : "item"}
+                    </span>
+                    <div className="flex items-center gap-1 ml-2" onClick={(e) => e.stopPropagation()}>
+                      <button
+                        onClick={() => {
+                          setEditingId(template.id);
+                          setExpandedId(null);
+                        }}
+                        className="p-1.5 text-gray-400 hover:text-gray-600 rounded"
+                        title={t("saveChanges")}
+                      >
+                        <Pencil className="w-3.5 h-3.5" />
+                      </button>
+                      <button
+                        onClick={() => {
+                          if (!confirm(t("deleteTemplateConfirm", { name: template.name }))) return;
+                          startTransition(async () => {
+                            try {
+                              await deleteChecklistTemplate(template.id);
+                              setTemplates((prev) => prev.filter((p) => p.id !== template.id));
+                              toast.success(t("templateDeleted"));
+                            } catch {
+                              toast.error(t("failedToDeleteTemplate"));
+                            }
+                          });
+                        }}
+                        className="p-1.5 text-gray-400 hover:text-red-500 rounded"
+                        title="Delete"
+                      >
+                        <Trash2 className="w-3.5 h-3.5" />
+                      </button>
+                    </div>
+                  </div>
+
+                  {expandedId === template.id && (
+                    <div className="px-4 pb-3 border-t border-gray-100">
+                      <ul className="mt-2 space-y-1">
+                        {template.items.map((item, i) => (
+                          <li
+                            key={item.id}
+                            className="flex items-center gap-2 text-sm text-gray-600 py-0.5"
+                          >
+                            <GripVertical className="w-3 h-3 text-gray-300 shrink-0" />
+                            <span className="text-xs text-gray-400 w-5 text-right shrink-0">
+                              {i + 1}.
+                            </span>
+                            {item.title}
+                          </li>
+                        ))}
+                      </ul>
+                    </div>
+                  )}
+                </>
+              )}
+            </div>
+          ))}
+        </div>
+      )}
+    </div>
+  );
+}
+
+/* ── Inline form for create / edit ── */
+
+function TemplateForm({
+  initial,
+  onSave,
+  onCancel,
+  isPending,
+  saveLabel,
+}: {
+  initial?: { name: string; items: string[] };
+  onSave: (data: { name: string; items: string[] }) => void;
+  onCancel: () => void;
+  isPending: boolean;
+  saveLabel?: string;
+}) {
+  const t = useTranslations("settings");
+  const tc = useTranslations("common");
+  const [name, setName] = useState(initial?.name || "");
+  const [items, setItems] = useState<string[]>(
+    initial?.items?.length ? initial.items : [""]
+  );
+
+  function addItem() {
+    setItems((prev) => [...prev, ""]);
+  }
+
+  function removeItem(i: number) {
+    setItems((prev) => prev.filter((_, idx) => idx !== i));
+  }
+
+  function updateItem(i: number, value: string) {
+    setItems((prev) => prev.map((v, idx) => (idx === i ? value : v)));
+  }
+
+  function handleSubmit(e: React.FormEvent) {
+    e.preventDefault();
+    const validItems = items.filter((item) => item.trim());
+    if (!name.trim() || validItems.length === 0) return;
+    onSave({ name, items: validItems });
+  }
+
+  return (
+    <form
+      onSubmit={handleSubmit}
+      className="border border-[var(--color-primary-bg)] rounded-lg p-4 bg-[var(--color-primary-bg)]/30"
+    >
+      <div className="mb-3">
+        <label className="block text-sm font-medium text-gray-700 mb-1">
+          {t("templateName")}
+        </label>
+        <input
+          type="text"
+          value={name}
+          onChange={(e) => setName(e.target.value)}
+          placeholder={t("templateNamePlaceholder")}
+          className="w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/30 focus:border-[var(--color-primary)]"
+          autoFocus
+        />
+      </div>
+
+      <div className="mb-3">
+        <label className="block text-sm font-medium text-gray-700 mb-1">
+          {t("checklistItems")}
+        </label>
+        <div className="space-y-1.5">
+          {items.map((item, i) => (
+            <div key={i} className="flex items-center gap-2">
+              <span className="text-xs text-gray-400 w-5 text-right shrink-0">
+                {i + 1}.
+              </span>
+              <input
+                type="text"
+                value={item}
+                onChange={(e) => updateItem(i, e.target.value)}
+                placeholder={t("enterItemTitle")}
+                className="flex-1 text-sm border border-gray-300 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/30 focus:border-[var(--color-primary)]"
+                onKeyDown={(e) => {
+                  if (e.key === "Enter") {
+                    e.preventDefault();
+                    addItem();
+                  }
+                }}
+              />
+              {items.length > 1 && (
+                <button
+                  type="button"
+                  onClick={() => removeItem(i)}
+                  className="p-1 text-gray-400 hover:text-red-500"
+                >
+                  <X className="w-3.5 h-3.5" />
+                </button>
+              )}
+            </div>
+          ))}
+        </div>
+        <button
+          type="button"
+          onClick={addItem}
+          className="mt-2 flex items-center gap-1 text-xs text-[var(--color-primary)] hover:underline"
+        >
+          <Plus className="w-3 h-3" />
+          {t("addItem")}
+        </button>
+      </div>
+
+      <div className="flex items-center gap-2 pt-2 border-t border-gray-200">
+        <button
+          type="submit"
+          disabled={isPending || !name.trim() || items.every((item) => !item.trim())}
+          className="px-4 py-1.5 text-sm font-medium rounded-lg bg-[var(--color-primary)] text-white hover:opacity-90 disabled:opacity-50 transition-opacity"
+        >
+          {isPending ? tc("saving") : (saveLabel ?? t("createTemplate"))}
+        </button>
+        <button
+          type="button"
+          onClick={onCancel}
+          className="px-4 py-1.5 text-sm font-medium rounded-lg text-gray-600 hover:bg-gray-100 transition-colors"
+        >
+          {tc("cancel")}
+        </button>
+      </div>
+    </form>
+  );
+}
diff --git a/src/components/settings/LanguagePicker.tsx b/src/components/settings/LanguagePicker.tsx
new file mode 100644
index 0000000..d378d7e
--- /dev/null
+++ b/src/components/settings/LanguagePicker.tsx
@@ -0,0 +1,51 @@
+"use client";
+
+import { useTransition } from "react";
+import { useRouter } from "next/navigation";
+import { Globe } from "lucide-react";
+import { setLocale } from "@/i18n/locale";
+import type { Locale } from "@/i18n/request";
+
+const LANGUAGES: { code: Locale; label: string; flag: string }[] = [
+  { code: "en", label: "English", flag: "🇺🇸" },
+  { code: "es", label: "Español", flag: "🇲🇽" },
+];
+
+interface Props {
+  currentLocale: string;
+}
+
+export function LanguagePicker({ currentLocale }: Props) {
+  const router = useRouter();
+  const [isPending, startTransition] = useTransition();
+
+  function handleChange(locale: Locale) {
+    startTransition(async () => {
+      await setLocale(locale);
+      router.refresh();
+    });
+  }
+
+  return (
+    <div className="flex items-center gap-3">
+      <Globe className="w-5 h-5 text-gray-400" />
+      <div className="flex gap-2">
+        {LANGUAGES.map((lang) => (
+          <button
+            key={lang.code}
+            onClick={() => handleChange(lang.code)}
+            disabled={isPending}
+            className={`inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium rounded-lg border transition-colors ${
+              currentLocale === lang.code
+                ? "border-[var(--color-primary)] bg-[var(--color-primary-bg)] text-[var(--color-primary-dark)]"
+                : "border-gray-200 text-gray-600 hover:border-gray-300 hover:bg-gray-50"
+            } ${isPending ? "opacity-50" : ""}`}
+          >
+            <span>{lang.flag}</span>
+            {lang.label}
+          </button>
+        ))}
+      </div>
+    </div>
+  );
+}
diff --git a/src/components/settings/LogoUploader.tsx b/src/components/settings/LogoUploader.tsx
new file mode 100644
index 0000000..8d0a8ea
--- /dev/null
+++ b/src/components/settings/LogoUploader.tsx
@@ -0,0 +1,175 @@
+"use client";
+
+import { useState, useRef } from "react";
+import { Upload, Trash2, HardHat, Loader2, AlertCircle } from "lucide-react";
+import { uploadLogo, deleteLogo, updateCompanyName } from "@/actions/settings";
+import { useTranslations } from "next-intl";
+
+interface LogoUploaderProps {
+  logoUrl: string | null;
+  companyName: string | null;
+}
+
+export function LogoUploader({ logoUrl, companyName }: LogoUploaderProps) {
+  const t = useTranslations("settings");
+  const tc = useTranslations("common");
+  const [currentLogo, setCurrentLogo] = useState(logoUrl);
+  const [currentName, setCurrentName] = useState(companyName || "");
+  const [uploading, setUploading] = useState(false);
+  const [deleting, setDeleting] = useState(false);
+  const [savingName, setSavingName] = useState(false);
+  const [error, setError] = useState<string | null>(null);
+  const fileInputRef = useRef<HTMLInputElement>(null);
+  const nameTimeoutRef = useRef<ReturnType<typeof setTimeout>>(undefined);
+
+  async function handleFileChange(e: React.ChangeEvent<HTMLInputElement>) {
+    const file = e.target.files?.[0];
+    if (!file) return;
+
+    // Client-side validation
+    if (file.size > 2 * 1024 * 1024) {
+      setError(t("fileTooLarge"));
+      return;
+    }
+
+    const allowed = ["image/png", "image/jpeg", "image/svg+xml", "image/webp"];
+    if (!allowed.includes(file.type)) {
+      setError(t("invalidFormat"));
+      return;
+    }
+
+    setError(null);
+    setUploading(true);
+
+    try {
+      const formData = new FormData();
+      formData.append("logo", file);
+      const result = await uploadLogo(formData);
+      setCurrentLogo(result.url);
+    } catch (e) {
+      setError(e instanceof Error ? e.message : t("uploadFailed"));
+    }
+    setUploading(false);
+    if (fileInputRef.current) fileInputRef.current.value = "";
+  }
+
+  async function handleDelete() {
+    if (!confirm(t("removeLogoConfirm"))) return;
+    setDeleting(true);
+    try {
+      await deleteLogo();
+      setCurrentLogo(null);
+    } catch (e) {
+      setError(e instanceof Error ? e.message : t("failedToDelete"));
+    }
+    setDeleting(false);
+  }
+
+  function handleNameChange(value: string) {
+    setCurrentName(value);
+    if (nameTimeoutRef.current) clearTimeout(nameTimeoutRef.current);
+    nameTimeoutRef.current = setTimeout(async () => {
+      setSavingName(true);
+      try {
+        await updateCompanyName(value);
+      } catch (e) {
+        console.error(e);
+      }
+      setSavingName(false);
+    }, 800);
+  }
+
+  return (
+    <div>
+      <h3 className="text-sm font-semibold text-gray-900 mb-1">
+        {t("companyBranding")}
+      </h3>
+      <p className="text-xs text-gray-500 mb-4">
+        {t("brandingDescription")}
+      </p>
+
+      {error && (
+        <div className="mb-3 flex items-center gap-2 p-2.5 bg-red-50 text-red-700 text-sm rounded-lg">
+          <AlertCircle className="w-4 h-4 shrink-0" />
+          <span className="flex-1">{error}</span>
+        </div>
+      )}
+
+      <div className="flex items-start gap-6">
+        {/* Logo preview & upload */}
+        <div className="flex flex-col items-center gap-2">
+          <div className="w-20 h-20 rounded-xl border-2 border-dashed border-gray-300 flex items-center justify-center bg-gray-50 overflow-hidden">
+            {uploading ? (
+              <Loader2 className="w-6 h-6 text-gray-400 animate-spin" />
+            ) : currentLogo ? (
+              <img
+                src={currentLogo}
+                alt="Logo"
+                className="w-full h-full object-contain p-1"
+              />
+            ) : (
+              <HardHat className="w-8 h-8 text-gray-300" />
+            )}
+          </div>
+
+          <div className="flex gap-1.5">
+            <button
+              onClick={() => fileInputRef.current?.click()}
+              disabled={uploading}
+              className="text-xs font-medium text-[var(--color-primary)] hover:text-[var(--color-primary-dark)] disabled:opacity-50"
+            >
+              {currentLogo ? tc("replace") : tc("upload")}
+            </button>
+            {currentLogo && (
+              <button
+                onClick={handleDelete}
+                disabled={deleting}
+                className="text-xs font-medium text-red-600 hover:text-red-700 disabled:opacity-50"
+              >
+                {tc("remove")}
+              </button>
+            )}
+          </div>
+
+          <input
+            ref={fileInputRef}
+            type="file"
+            accept="image/png,image/jpeg,image/svg+xml,image/webp"
+            className="hidden"
+            onChange={handleFileChange}
+          />
+
+          <p className="text-[10px] text-gray-400 text-center">
+            PNG, JPG, SVG, WebP
+            <br />
+            {t("maxSize")}
+          </p>
+        </div>
+
+        {/* Company name */}
+        <div className="flex-1">
+          <label className="block text-sm font-medium text-gray-700 mb-1">
+            {t("companyName")}
+          </label>
+          <div className="relative">
+            <input
+              type="text"
+              value={currentName}
+              onChange={(e) => handleNameChange(e.target.value)}
+              placeholder={t("companyNamePlaceholder")}
+              className="w-full p-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
+            />
+            {savingName && (
+              <span className="absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400">
+                {tc("saving")}
+              </span>
+            )}
+          </div>
+          <p className="text-xs text-gray-400 mt-1">
+            {t("companyNameHelp")}
+          </p>
+        </div>
+      </div>
+    </div>
+  );
+}
diff --git a/src/components/settings/NotificationSettings.tsx b/src/components/settings/NotificationSettings.tsx
new file mode 100644
index 0000000..67a03bd
--- /dev/null
+++ b/src/components/settings/NotificationSettings.tsx
@@ -0,0 +1,315 @@
+"use client";
+
+import { useState, useTransition } from "react";
+import { Bell, Mail, MessageSquare, Phone, Moon, Save } from "lucide-react";
+import { cn } from "@/lib/utils";
+import {
+  updateNotificationPreferences,
+  updatePhoneNumber,
+} from "@/actions/notification-preferences";
+import { toast } from "sonner";
+import { useTranslations } from "next-intl";
+
+interface NotificationPreferences {
+  emailEnabled: boolean;
+  smsEnabled: boolean;
+  inAppEnabled: boolean;
+  emailPhaseStatus: boolean;
+  emailReview: boolean;
+  emailChecklist: boolean;
+  emailDocuments: boolean;
+  emailComments: boolean;
+  smsPhaseStatus: boolean;
+  smsReview: boolean;
+  smsChecklist: boolean;
+  smsDocuments: boolean;
+  quietStart: string | null;
+  quietEnd: string | null;
+}
+
+interface Props {
+  preferences: NotificationPreferences;
+  phone: string | null;
+}
+
+function Toggle({
+  checked,
+  onChange,
+  disabled,
+}: {
+  checked: boolean;
+  onChange: (v: boolean) => void;
+  disabled?: boolean;
+}) {
+  return (
+    <button
+      type="button"
+      role="switch"
+      aria-checked={checked}
+      onClick={() => onChange(!checked)}
+      disabled={disabled}
+      className={cn(
+        "relative inline-flex h-6 w-11 items-center rounded-full transition-colors",
+        checked
+          ? "bg-[var(--color-primary)]"
+          : "bg-gray-200",
+        disabled && "opacity-50 cursor-not-allowed"
+      )}
+    >
+      <span
+        className={cn(
+          "inline-block h-4 w-4 rounded-full bg-white shadow-sm transition-transform",
+          checked ? "translate-x-6" : "translate-x-1"
+        )}
+      />
+    </button>
+  );
+}
+
+export function NotificationSettings({ preferences: initial, phone: initialPhone }: Props) {
+  const [prefs, setPrefs] = useState(initial);
+  const [phone, setPhone] = useState(initialPhone || "");
+  const [isPending, startTransition] = useTransition();
+  const t = useTranslations("notifPrefs");
+  const tc = useTranslations("common");
+
+  function update<K extends keyof NotificationPreferences>(
+    key: K,
+    value: NotificationPreferences[K]
+  ) {
+    setPrefs((prev) => ({ ...prev, [key]: value }));
+  }
+
+  function handleSave() {
+    startTransition(async () => {
+      try {
+        // Save preferences
+        await updateNotificationPreferences(prefs);
+
+        // Save phone number
+        if (phone !== (initialPhone || "")) {
+          await updatePhoneNumber(phone);
+        }
+
+        toast.success(t("saved"));
+      } catch (error: unknown) {
+        const msg = error instanceof Error ? error.message : t("failedToSave");
+        toast.error(msg);
+      }
+    });
+  }
+
+  return (
+    <div>
+      <div className="flex items-center justify-between mb-6">
+        <div>
+          <h2 className="text-lg font-semibold text-gray-900">
+            {t("title")}
+          </h2>
+          <p className="text-sm text-gray-500 mt-0.5">
+            {t("subtitle")}
+          </p>
+        </div>
+        <button
+          onClick={handleSave}
+          disabled={isPending}
+          className="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] rounded-lg transition-colors disabled:opacity-50"
+        >
+          <Save className="w-4 h-4" />
+          {isPending ? tc("saving") : tc("save")}
+        </button>
+      </div>
+
+      {/* Channel Toggles */}
+      <div className="space-y-4 mb-8">
+        <h3 className="text-sm font-semibold text-gray-900 uppercase tracking-wide">
+          {t("channels")}
+        </h3>
+
+        <div className="flex items-center justify-between py-2">
+          <div className="flex items-center gap-3">
+            <Bell className="w-5 h-5 text-gray-400" />
+            <div>
+              <p className="text-sm font-medium text-gray-900">{t("inApp")}</p>
+              <p className="text-xs text-gray-500">{t("inAppDesc")}</p>
+            </div>
+          </div>
+          <Toggle checked={prefs.inAppEnabled} onChange={(v) => update("inAppEnabled", v)} />
+        </div>
+
+        <div className="flex items-center justify-between py-2">
+          <div className="flex items-center gap-3">
+            <Mail className="w-5 h-5 text-gray-400" />
+            <div>
+              <p className="text-sm font-medium text-gray-900">{t("emailNotifs")}</p>
+              <p className="text-xs text-gray-500">{t("emailNotifsDesc")}</p>
+            </div>
+          </div>
+          <Toggle checked={prefs.emailEnabled} onChange={(v) => update("emailEnabled", v)} />
+        </div>
+
+        <div className="flex items-center justify-between py-2">
+          <div className="flex items-center gap-3">
+            <Phone className="w-5 h-5 text-gray-400" />
+            <div>
+              <p className="text-sm font-medium text-gray-900">{t("smsNotifs")}</p>
+              <p className="text-xs text-gray-500">{t("smsNotifsDesc")}</p>
+            </div>
+          </div>
+          <Toggle checked={prefs.smsEnabled} onChange={(v) => update("smsEnabled", v)} />
+        </div>
+
+        {/* Phone number input (shown when SMS is enabled) */}
+        {prefs.smsEnabled && (
+          <div className="ml-8 pl-3 border-l-2 border-gray-100">
+            <label className="block text-sm font-medium text-gray-700 mb-1">
+              {t("phoneNumber")}
+            </label>
+            <input
+              type="tel"
+              value={phone}
+              onChange={(e) => setPhone(e.target.value)}
+              placeholder={t("phonePlaceholder")}
+              className="w-full max-w-xs px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
+            />
+            <p className="text-xs text-gray-500 mt-1">
+              {t("phoneHelp")}
+            </p>
+          </div>
+        )}
+      </div>
+
+      {/* Email Preferences */}
+      {prefs.emailEnabled && (
+        <div className="space-y-3 mb-8">
+          <h3 className="text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2">
+            <Mail className="w-4 h-4 text-gray-400" />
+            {t("emailAlerts")}
+          </h3>
+          <div className="bg-gray-50 rounded-lg p-4 space-y-3">
+            <PreferenceRow
+              label={t("phaseStatusChanges")}
+              description={t("phaseStatusDesc")}
+              checked={prefs.emailPhaseStatus}
+              onChange={(v) => update("emailPhaseStatus", v)}
+            />
+            <PreferenceRow
+              label={t("reviewRequests")}
+              description={t("reviewRequestsDesc")}
+              checked={prefs.emailReview}
+              onChange={(v) => update("emailReview", v)}
+            />
+            <PreferenceRow
+              label={t("checklistCompletion")}
+              description={t("checklistDesc")}
+              checked={prefs.emailChecklist}
+              onChange={(v) => update("emailChecklist", v)}
+            />
+            <PreferenceRow
+              label={t("documentUpdates")}
+              description={t("documentDesc")}
+              checked={prefs.emailDocuments}
+              onChange={(v) => update("emailDocuments", v)}
+            />
+            <PreferenceRow
+              label={t("commentsLabel")}
+              description={t("commentsDesc")}
+              checked={prefs.emailComments}
+              onChange={(v) => update("emailComments", v)}
+            />
+          </div>
+        </div>
+      )}
+
+      {/* SMS Preferences */}
+      {prefs.smsEnabled && (
+        <div className="space-y-3 mb-8">
+          <h3 className="text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2">
+            <MessageSquare className="w-4 h-4 text-gray-400" />
+            {t("smsAlerts")}
+          </h3>
+          <div className="bg-gray-50 rounded-lg p-4 space-y-3">
+            <PreferenceRow
+              label={t("phaseStatusChanges")}
+              description={t("phaseStatusSmsDesc")}
+              checked={prefs.smsPhaseStatus}
+              onChange={(v) => update("smsPhaseStatus", v)}
+            />
+            <PreferenceRow
+              label={t("reviewRequests")}
+              description={t("reviewRequestsSmsDesc")}
+              checked={prefs.smsReview}
+              onChange={(v) => update("smsReview", v)}
+            />
+            <PreferenceRow
+              label={t("checklistCompletion")}
+              description={t("checklistSmsDesc")}
+              checked={prefs.smsChecklist}
+              onChange={(v) => update("smsChecklist", v)}
+            />
+            <PreferenceRow
+              label={t("documentUpdates")}
+              description={t("documentSmsDesc")}
+              checked={prefs.smsDocuments}
+              onChange={(v) => update("smsDocuments", v)}
+            />
+          </div>
+        </div>
+      )}
+
+      {/* Quiet Hours */}
+      <div className="space-y-3">
+        <h3 className="text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2">
+          <Moon className="w-4 h-4 text-gray-400" />
+          {t("quietHours")}
+        </h3>
+        <p className="text-xs text-gray-500">
+          {t("quietHoursDesc")}
+        </p>
+        <div className="flex items-center gap-3">
+          <div>
+            <label className="block text-xs text-gray-500 mb-1">{tc("from")}</label>
+            <input
+              type="time"
+              value={prefs.quietStart || ""}
+              onChange={(e) => update("quietStart", e.target.value || null)}
+              className="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
+            />
+          </div>
+          <span className="mt-5 text-gray-400">—</span>
+          <div>
+            <label className="block text-xs text-gray-500 mb-1">{tc("to")}</label>
+            <input
+              type="time"
+              value={prefs.quietEnd || ""}
+              onChange={(e) => update("quietEnd", e.target.value || null)}
+              className="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none"
+            />
+          </div>
+        </div>
+      </div>
+    </div>
+  );
+}
+
+function PreferenceRow({
+  label,
+  description,
+  checked,
+  onChange,
+}: {
+  label: string;
+  description: string;
+  checked: boolean;
+  onChange: (v: boolean) => void;
+}) {
+  return (
+    <div className="flex items-center justify-between">
+      <div>
+        <p className="text-sm font-medium text-gray-700">{label}</p>
+        <p className="text-xs text-gray-500">{description}</p>
+      </div>
+      <Toggle checked={checked} onChange={onChange} />
+    </div>
+  );
+}
diff --git a/src/components/settings/ReportScheduleSection.tsx b/src/components/settings/ReportScheduleSection.tsx
new file mode 100644
index 0000000..c1cf238
--- /dev/null
+++ b/src/components/settings/ReportScheduleSection.tsx
@@ -0,0 +1,290 @@
+"use client";
+
+import { useState } from "react";
+import {
+  Mail,
+  Plus,
+  Loader2,
+  AlertCircle,
+  X,
+  Trash2,
+  ToggleLeft,
+  ToggleRight,
+  Clock,
+  Calendar,
+} from "lucide-react";
+import {
+  createReportSchedule,
+  toggleReportSchedule,
+  deleteReportSchedule,
+} from "@/actions/report-schedules";
+import type { ReportSchedule, ReportFrequency } from "@/lib/db-types";
+
+interface ReportScheduleSectionProps {
+  schedules: ReportSchedule[];
+}
+
+const DAYS = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
+
+const HOURS = Array.from({ length: 24 }, (_, i) => {
+  const h = i % 12 === 0 ? 12 : i % 12;
+  const ampm = i < 12 ? "AM" : "PM";
+  return { value: i, label: `${h}:00 ${ampm} UTC` };
+});
+
+export function ReportScheduleSection({ schedules }: ReportScheduleSectionProps) {
+  const [showForm, setShowForm] = useState(false);
+  const [submitting, setSubmitting] = useState(false);
+  const [actionId, setActionId] = useState<string | null>(null);
+  const [error, setError] = useState<string | null>(null);
+  const [recipientInput, setRecipientInput] = useState("");
+  const [form, setForm] = useState({
+    frequency: "WEEKLY" as ReportFrequency,
+    dayOfWeek: 1,
+    dayOfMonth: 1,
+    sendHour: 8,
+    recipients: [] as string[],
+  });
+
+  const addRecipient = () => {
+    const email = recipientInput.trim().toLowerCase();
+    if (!email || !email.includes("@")) return;
+    if (!form.recipients.includes(email)) {
+      setForm((f) => ({ ...f, recipients: [...f.recipients, email] }));
+    }
+    setRecipientInput("");
+  };
+
+  const handleSubmit = async (e: React.FormEvent) => {
+    e.preventDefault();
+    if (form.recipients.length === 0) {
+      setError("Add at least one recipient email");
+      return;
+    }
+    setSubmitting(true);
+    setError(null);
+    try {
+      await createReportSchedule({
+        frequency: form.frequency,
+        dayOfWeek: form.frequency === "WEEKLY" ? form.dayOfWeek : undefined,
+        dayOfMonth: form.frequency === "MONTHLY" ? form.dayOfMonth : undefined,
+        sendHour: form.sendHour,
+        recipients: form.recipients,
+      });
+      setForm({ frequency: "WEEKLY", dayOfWeek: 1, dayOfMonth: 1, sendHour: 8, recipients: [] });
+      setShowForm(false);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to create schedule");
+    } finally {
+      setSubmitting(false);
+    }
+  };
+
+  const handleToggle = async (schedule: ReportSchedule) => {
+    setActionId(schedule.id);
+    try {
+      await toggleReportSchedule(schedule.id, !schedule.active);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to update");
+    } finally {
+      setActionId(null);
+    }
+  };
+
+  const handleDelete = async (id: string) => {
+    if (!confirm("Delete this report schedule?")) return;
+    setActionId(id);
+    try {
+      await deleteReportSchedule(id);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to delete");
+    } finally {
+      setActionId(null);
+    }
+  };
+
+  function describeSchedule(s: ReportSchedule) {
+    const hour = HOURS[s.sendHour]?.label ?? `${s.sendHour}:00 UTC`;
+    if (s.frequency === "WEEKLY") {
+      return `Every ${DAYS[s.dayOfWeek ?? 1]} at ${hour}`;
+    }
+    return `Monthly on day ${s.dayOfMonth ?? 1} at ${hour}`;
+  }
+
+  return (
+    <div className="bg-white rounded-xl border border-gray-200 p-5">
+      <div className="flex items-center justify-between mb-4">
+        <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2">
+          <Mail className="w-4 h-4 text-[var(--color-primary)]" />
+          Automated Reports
+          <span className="text-xs font-normal text-gray-400 normal-case">
+            ({schedules.filter((s) => s.active).length} active)
+          </span>
+        </h2>
+        <button
+          onClick={() => setShowForm((v) => !v)}
+          className="inline-flex items-center gap-1.5 text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-primary-dark)]"
+        >
+          <Plus className="w-4 h-4" />
+          <span className="hidden sm:inline">Add Schedule</span>
+        </button>
+      </div>
+
+      {error && (
+        <div className="mb-3 flex items-center gap-2 p-2.5 bg-red-50 text-red-700 text-sm rounded-lg">
+          <AlertCircle className="w-4 h-4 shrink-0" />
+          <span className="flex-1">{error}</span>
+          <button onClick={() => setError(null)}><X className="w-3.5 h-3.5" /></button>
+        </div>
+      )}
+
+      {showForm && (
+        <form onSubmit={handleSubmit} className="mb-4 p-4 bg-gray-50 rounded-lg space-y-3 text-sm">
+          <div className="grid grid-cols-2 sm:grid-cols-3 gap-3">
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Frequency</label>
+              <select
+                value={form.frequency}
+                onChange={(e) => setForm((f) => ({ ...f, frequency: e.target.value as ReportFrequency }))}
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)]"
+              >
+                <option value="WEEKLY">Weekly</option>
+                <option value="MONTHLY">Monthly</option>
+              </select>
+            </div>
+            {form.frequency === "WEEKLY" ? (
+              <div>
+                <label className="block text-xs font-medium text-gray-700 mb-1">Day of Week</label>
+                <select
+                  value={form.dayOfWeek}
+                  onChange={(e) => setForm((f) => ({ ...f, dayOfWeek: Number(e.target.value) }))}
+                  className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)]"
+                >
+                  {DAYS.map((d, i) => <option key={d} value={i}>{d}</option>)}
+                </select>
+              </div>
+            ) : (
+              <div>
+                <label className="block text-xs font-medium text-gray-700 mb-1">Day of Month</label>
+                <input
+                  type="number"
+                  min="1"
+                  max="28"
+                  value={form.dayOfMonth}
+                  onChange={(e) => setForm((f) => ({ ...f, dayOfMonth: Number(e.target.value) }))}
+                  className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)]"
+                />
+              </div>
+            )}
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Send Time</label>
+              <select
+                value={form.sendHour}
+                onChange={(e) => setForm((f) => ({ ...f, sendHour: Number(e.target.value) }))}
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)]"
+              >
+                {HOURS.map((h) => <option key={h.value} value={h.value}>{h.label}</option>)}
+              </select>
+            </div>
+          </div>
+
+          <div>
+            <label className="block text-xs font-medium text-gray-700 mb-1">Recipients</label>
+            <div className="flex gap-2">
+              <input
+                type="email"
+                value={recipientInput}
+                onChange={(e) => setRecipientInput(e.target.value)}
+                onKeyDown={(e) => { if (e.key === "Enter") { e.preventDefault(); addRecipient(); } }}
+                placeholder="email@example.com"
+                className="flex-1 border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)]"
+              />
+              <button
+                type="button"
+                onClick={addRecipient}
+                className="px-3 py-1.5 text-sm text-[var(--color-primary)] border border-[var(--color-primary)] rounded-md hover:bg-[var(--color-primary-bg)]"
+              >
+                Add
+              </button>
+            </div>
+            {form.recipients.length > 0 && (
+              <div className="flex flex-wrap gap-1.5 mt-2">
+                {form.recipients.map((r) => (
+                  <span key={r} className="inline-flex items-center gap-1 text-xs bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full">
+                    {r}
+                    <button type="button" onClick={() => setForm((f) => ({ ...f, recipients: f.recipients.filter((x) => x !== r) }))}>
+                      <X className="w-3 h-3" />
+                    </button>
+                  </span>
+                ))}
+              </div>
+            )}
+          </div>
+
+          <div className="flex gap-2 justify-end">
+            <button type="button" onClick={() => setShowForm(false)}
+              className="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-200 rounded-md">Cancel</button>
+            <button type="submit" disabled={submitting}
+              className="px-4 py-1.5 text-sm font-medium text-white bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] rounded-md disabled:opacity-60 inline-flex items-center gap-1.5">
+              {submitting && <Loader2 className="w-3.5 h-3.5 animate-spin" />}
+              Save Schedule
+            </button>
+          </div>
+        </form>
+      )}
+
+      {schedules.length === 0 && !showForm ? (
+        <div className="text-center py-8 border-2 border-dashed border-gray-200 rounded-lg">
+          <Mail className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+          <p className="text-sm text-gray-500">No automated reports configured</p>
+        </div>
+      ) : (
+        <div className="space-y-2">
+          {schedules.map((s) => (
+            <div key={s.id} className={`flex items-center gap-3 p-3 border rounded-lg ${!s.active ? "opacity-60 border-gray-100" : "border-gray-200"}`}>
+              <div className="flex-1 min-w-0">
+                <div className="flex items-center gap-2">
+                  <Calendar className="w-3.5 h-3.5 text-gray-400 shrink-0" />
+                  <span className="text-sm font-medium text-gray-900">{describeSchedule(s)}</span>
+                  {!s.active && <span className="text-xs bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded">Paused</span>}
+                </div>
+                <div className="text-xs text-gray-400 mt-0.5 flex items-center gap-3">
+                  <span>{s.recipients.length} recipient{s.recipients.length !== 1 ? "s" : ""}: {s.recipients.slice(0, 2).join(", ")}{s.recipients.length > 2 ? ` +${s.recipients.length - 2}` : ""}</span>
+                  {s.lastSentAt && (
+                    <span className="flex items-center gap-1">
+                      <Clock className="w-3 h-3" />
+                      Last sent {new Date(s.lastSentAt).toLocaleDateString()}
+                    </span>
+                  )}
+                </div>
+              </div>
+              <div className="flex items-center gap-1 shrink-0">
+                <button
+                  onClick={() => handleToggle(s)}
+                  disabled={actionId === s.id}
+                  title={s.active ? "Pause" : "Resume"}
+                  className="p-1.5 text-gray-400 hover:text-[var(--color-primary)]"
+                >
+                  {actionId === s.id ? (
+                    <Loader2 className="w-4 h-4 animate-spin" />
+                  ) : s.active ? (
+                    <ToggleRight className="w-4 h-4 text-green-500" />
+                  ) : (
+                    <ToggleLeft className="w-4 h-4" />
+                  )}
+                </button>
+                <button
+                  onClick={() => handleDelete(s.id)}
+                  disabled={actionId === s.id}
+                  className="p-1.5 text-gray-300 hover:text-red-500"
+                >
+                  <Trash2 className="w-3.5 h-3.5" />
+                </button>
+              </div>
+            </div>
+          ))}
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/components/settings/ThemeSelector.tsx b/src/components/settings/ThemeSelector.tsx
new file mode 100644
index 0000000..ecb3e3c
--- /dev/null
+++ b/src/components/settings/ThemeSelector.tsx
@@ -0,0 +1,87 @@
+"use client";
+
+import { useState } from "react";
+import { Check } from "lucide-react";
+import { THEME_PRESETS } from "@/lib/themes";
+import { updateTheme } from "@/actions/settings";
+import { cn } from "@/lib/utils";
+import { useTranslations } from "next-intl";
+
+interface ThemeSelectorProps {
+  currentTheme: string;
+}
+
+export function ThemeSelector({ currentTheme }: ThemeSelectorProps) {
+  const t = useTranslations("settings");
+  const [selected, setSelected] = useState(currentTheme);
+  const [saving, setSaving] = useState(false);
+
+  async function handleSelect(themeId: string) {
+    setSelected(themeId);
+    setSaving(true);
+    try {
+      await updateTheme(themeId);
+    } catch (e) {
+      setSelected(currentTheme); // revert
+      console.error(e);
+    }
+    setSaving(false);
+  }
+
+  return (
+    <div>
+      <h3 className="text-sm font-semibold text-gray-900 mb-1">{t("colorTheme")}</h3>
+      <p className="text-xs text-gray-500 mb-4">
+        {t("themeDescription")}
+      </p>
+
+      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
+        {THEME_PRESETS.map((preset) => {
+          const isActive = selected === preset.id;
+          return (
+            <button
+              key={preset.id}
+              onClick={() => handleSelect(preset.id)}
+              disabled={saving}
+              className={cn(
+                "relative p-4 rounded-xl border-2 text-left transition-all hover:shadow-md disabled:opacity-70",
+                isActive
+                  ? "border-gray-900 shadow-sm"
+                  : "border-gray-200 hover:border-gray-300"
+              )}
+            >
+              {isActive && (
+                <div className="absolute top-2 right-2 w-5 h-5 rounded-full bg-gray-900 flex items-center justify-center">
+                  <Check className="w-3 h-3 text-white" />
+                </div>
+              )}
+
+              {/* Color swatches */}
+              <div className="flex items-center gap-2 mb-3">
+                <div
+                  className="w-8 h-8 rounded-lg"
+                  style={{ backgroundColor: preset.colors.primary }}
+                />
+                <div
+                  className="w-6 h-6 rounded-lg"
+                  style={{ backgroundColor: preset.colors.primaryDark }}
+                />
+                <div
+                  className="w-6 h-6 rounded-lg"
+                  style={{ backgroundColor: preset.colors.primaryLight }}
+                />
+                <div
+                  className="flex-1 h-6 rounded-lg"
+                  style={{ backgroundColor: preset.colors.primaryBg }}
+                />
+              </div>
+
+              <p className="text-sm font-medium text-gray-900">{preset.name}</p>
+              <p className="text-xs text-gray-500">{preset.description}</p>
+            </button>
+          );
+        })}
+      </div>
+    </div>
+  );
+}
diff --git a/src/components/settings/TotpSection.tsx b/src/components/settings/TotpSection.tsx
new file mode 100644
index 0000000..5c0f7b9
--- /dev/null
+++ b/src/components/settings/TotpSection.tsx
@@ -0,0 +1,198 @@
+"use client";
+
+import { useState } from "react";
+import {
+  Shield,
+  ShieldCheck,
+  ShieldOff,
+  Loader2,
+  AlertCircle,
+  X,
+  CheckCircle2,
+  Key,
+} from "lucide-react";
+import { setupTotp, verifyAndEnableTotp, disableTotp } from "@/actions/totp";
+
+interface TotpSectionProps {
+  enabled: boolean;
+  verified: boolean;
+}
+
+export function TotpSection({ enabled: initEnabled, verified: initVerified }: TotpSectionProps) {
+  const [enabled, setEnabled] = useState(initEnabled);
+  const [verified, setVerified] = useState(initVerified);
+  const [step, setStep] = useState<"idle" | "setup" | "verify" | "disabling">("idle");
+  const [loading, setLoading] = useState(false);
+  const [error, setError] = useState<string | null>(null);
+  const [qrDataUrl, setQrDataUrl] = useState<string | null>(null);
+  const [secret, setSecret] = useState<string | null>(null);
+  const [code, setCode] = useState("");
+
+  const handleSetup = async () => {
+    setLoading(true);
+    setError(null);
+    try {
+      const res = await setupTotp();
+      setQrDataUrl(res.qrCodeDataUrl);
+      setSecret(res.secret);
+      setStep("setup");
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to set up 2FA");
+    } finally {
+      setLoading(false);
+    }
+  };
+
+  const handleVerify = async (e: React.FormEvent) => {
+    e.preventDefault();
+    if (code.length !== 6) return;
+    setLoading(true);
+    setError(null);
+    try {
+      const res = await verifyAndEnableTotp(code);
+      if (res.success) {
+        setEnabled(true);
+        setVerified(true);
+        setStep("idle");
+        setCode("");
+        setQrDataUrl(null);
+        setSecret(null);
+      } else {
+        setError(res.error ?? "Verification failed");
+      }
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Verification failed");
+    } finally {
+      setLoading(false);
+    }
+  };
+
+  const handleDisable = async () => {
+    if (!confirm("Disable two-factor authentication? Your account will be less secure.")) return;
+    setLoading(true);
+    setError(null);
+    try {
+      await disableTotp();
+      setEnabled(false);
+      setVerified(false);
+      setStep("idle");
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to disable 2FA");
+    } finally {
+      setLoading(false);
+    }
+  };
+
+  return (
+    <div className="bg-white rounded-xl border border-gray-200 p-5">
+      <div className="flex items-center justify-between mb-4">
+        <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2">
+          <Shield className="w-4 h-4 text-[var(--color-primary)]" />
+          Two-Factor Authentication
+          {enabled && verified && (
+            <span className="text-xs font-medium text-green-600 bg-green-50 px-1.5 py-0.5 rounded-full normal-case flex items-center gap-1">
+              <ShieldCheck className="w-3 h-3" /> Enabled
+            </span>
+          )}
+        </h2>
+      </div>
+
+      {error && (
+        <div className="mb-3 flex items-center gap-2 p-2.5 bg-red-50 text-red-700 text-sm rounded-lg">
+          <AlertCircle className="w-4 h-4 shrink-0" />
+          <span className="flex-1">{error}</span>
+          <button onClick={() => setError(null)}><X className="w-3.5 h-3.5" /></button>
+        </div>
+      )}
+
+      {!enabled && step === "idle" && (
+        <div>
+          <p className="text-sm text-gray-600 mb-4">
+            Add an extra layer of security to your account using a TOTP authenticator app (Google Authenticator, Authy, 1Password, etc.).
+          </p>
+          <button
+            onClick={handleSetup}
+            disabled={loading}
+            className="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] rounded-lg disabled:opacity-60"
+          >
+            {loading ? <Loader2 className="w-4 h-4 animate-spin" /> : <Shield className="w-4 h-4" />}
+            Enable Two-Factor Authentication
+          </button>
+        </div>
+      )}
+
+      {step === "setup" && qrDataUrl && (
+        <div className="space-y-4">
+          <div>
+            <p className="text-sm font-medium text-gray-800 mb-1">Step 1: Scan this QR code</p>
+            <p className="text-xs text-gray-500 mb-3">Open your authenticator app and scan the code below.</p>
+            <div className="inline-block p-3 bg-white border-2 border-gray-200 rounded-xl">
+              {/* eslint-disable-next-line @next/next/no-img-element */}
+              <img src={qrDataUrl} alt="2FA QR Code" className="w-40 h-40" />
+            </div>
+          </div>
+          {secret && (
+            <div>
+              <p className="text-xs font-medium text-gray-500 mb-1">Or enter this key manually:</p>
+              <code className="block text-xs bg-gray-50 border border-gray-200 rounded px-3 py-2 font-mono tracking-widest select-all">
+                {secret.match(/.{1,4}/g)?.join(" ")}
+              </code>
+            </div>
+          )}
+          <form onSubmit={handleVerify} className="space-y-3">
+            <div>
+              <p className="text-sm font-medium text-gray-800 mb-1">Step 2: Enter the 6-digit code</p>
+              <input
+                type="text"
+                inputMode="numeric"
+                pattern="[0-9]{6}"
+                maxLength={6}
+                value={code}
+                onChange={(e) => setCode(e.target.value.replace(/\D/g, ""))}
+                placeholder="000000"
+                className="w-40 border border-gray-200 rounded-md px-3 py-2 text-sm text-center font-mono tracking-widest focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"
+              />
+            </div>
+            <div className="flex gap-2">
+              <button
+                type="button"
+                onClick={() => { setStep("idle"); setCode(""); setQrDataUrl(null); setSecret(null); }}
+                className="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-200 rounded-md"
+              >
+                Cancel
+              </button>
+              <button
+                type="submit"
+                disabled={loading || code.length !== 6}
+                className="inline-flex items-center gap-2 px-4 py-1.5 text-sm font-medium text-white bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] rounded-md disabled:opacity-60"
+              >
+                {loading ? <Loader2 className="w-3.5 h-3.5 animate-spin" /> : <Key className="w-3.5 h-3.5" />}
+                Verify & Enable
+              </button>
+            </div>
+          </form>
+        </div>
+      )}
+
+      {enabled && verified && step === "idle" && (
+        <div className="flex items-start gap-3">
+          <CheckCircle2 className="w-5 h-5 text-green-500 shrink-0 mt-0.5" />
+          <div className="flex-1">
+            <p className="text-sm text-gray-800 font-medium">Two-factor authentication is active</p>
+            <p className="text-xs text-gray-500 mt-0.5">
+              Your account is protected with TOTP. You will be asked for a code on each sign-in.
+            </p>
+            <button
+              onClick={handleDisable}
+              disabled={loading}
+              className="mt-3 inline-flex items-center gap-1.5 text-sm text-red-600 hover:text-red-800 disabled:opacity-60"
+            >
+              {loading ? <Loader2 className="w-3.5 h-3.5 animate-spin" /> : <ShieldOff className="w-3.5 h-3.5" />}
+              Disable 2FA
+            </button>
+          </div>
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/components/settings/WebhookSection.tsx b/src/components/settings/WebhookSection.tsx
new file mode 100644
index 0000000..c7fc06d
--- /dev/null
+++ b/src/components/settings/WebhookSection.tsx
@@ -0,0 +1,187 @@
+"use client";
+
+import { useState } from "react";
+import {
+  Zap,
+  Plus,
+  Loader2,
+  AlertCircle,
+  X,
+  Trash2,
+  ToggleLeft,
+  ToggleRight,
+  Clock,
+  CheckCircle2,
+  XCircle,
+} from "lucide-react";
+import { createWebhook, toggleWebhook, deleteWebhook, WEBHOOK_EVENTS } from "@/actions/webhooks";
+import type { Webhook } from "@/lib/db-types";
+
+interface WebhookSectionProps {
+  webhooks: Webhook[];
+}
+
+export function WebhookSection({ webhooks }: WebhookSectionProps) {
+  const [showForm, setShowForm] = useState(false);
+  const [submitting, setSubmitting] = useState(false);
+  const [actionId, setActionId] = useState<string | null>(null);
+  const [error, setError] = useState<string | null>(null);
+  const [form, setForm] = useState({ name: "", url: "", events: [] as string[] });
+
+  const toggleEvent = (ev: string) => {
+    setForm((f) => ({
+      ...f,
+      events: f.events.includes(ev) ? f.events.filter((e) => e !== ev) : [...f.events, ev],
+    }));
+  };
+
+  const handleSubmit = async (e: React.FormEvent) => {
+    e.preventDefault();
+    if (!form.name.trim() || !form.url || form.events.length === 0) {
+      setError("Fill in all fields and select at least one event");
+      return;
+    }
+    setSubmitting(true);
+    setError(null);
+    try {
+      await createWebhook({ name: form.name.trim(), url: form.url, events: form.events });
+      setForm({ name: "", url: "", events: [] });
+      setShowForm(false);
+    } catch (err) {
+      setError(err instanceof Error ? err.message : "Failed to create webhook");
+    } finally {
+      setSubmitting(false);
+    }
+  };
+
+  const handleToggle = async (wh: Webhook) => {
+    setActionId(wh.id);
+    try { await toggleWebhook(wh.id, !wh.active); }
+    catch (err) { setError(err instanceof Error ? err.message : "Failed"); }
+    finally { setActionId(null); }
+  };
+
+  const handleDelete = async (id: string) => {
+    if (!confirm("Delete this webhook?")) return;
+    setActionId(id);
+    try { await deleteWebhook(id); }
+    catch (err) { setError(err instanceof Error ? err.message : "Failed"); }
+    finally { setActionId(null); }
+  };
+
+  return (
+    <div className="bg-white rounded-xl border border-gray-200 p-5">
+      <div className="flex items-center justify-between mb-4">
+        <h2 className="text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2">
+          <Zap className="w-4 h-4 text-[var(--color-primary)]" />
+          Webhooks
+          <span className="text-xs font-normal text-gray-400 normal-case">
+            ({webhooks.filter((w) => w.active).length} active)
+          </span>
+        </h2>
+        <button onClick={() => setShowForm((v) => !v)}
+          className="inline-flex items-center gap-1.5 text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-primary-dark)]">
+          <Plus className="w-4 h-4" />
+          <span className="hidden sm:inline">Add Webhook</span>
+        </button>
+      </div>
+
+      {error && (
+        <div className="mb-3 flex items-center gap-2 p-2.5 bg-red-50 text-red-700 text-sm rounded-lg">
+          <AlertCircle className="w-4 h-4 shrink-0" /><span className="flex-1">{error}</span>
+          <button onClick={() => setError(null)}><X className="w-3.5 h-3.5" /></button>
+        </div>
+      )}
+
+      {showForm && (
+        <form onSubmit={handleSubmit} className="mb-4 p-4 bg-gray-50 rounded-lg space-y-3 text-sm">
+          <div className="grid grid-cols-2 gap-3">
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">Name *</label>
+              <input required value={form.name} onChange={(e) => setForm((f) => ({ ...f, name: e.target.value }))}
+                placeholder="e.g. Slack notifications"
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)]" />
+            </div>
+            <div>
+              <label className="block text-xs font-medium text-gray-700 mb-1">HTTPS URL *</label>
+              <input required type="url" value={form.url} onChange={(e) => setForm((f) => ({ ...f, url: e.target.value }))}
+                placeholder="https://hooks.example.com/..."
+                className="w-full border border-gray-200 rounded-md px-2 py-1.5 text-sm focus:ring-1 focus:ring-[var(--color-primary)]" />
+            </div>
+          </div>
+          <div>
+            <label className="block text-xs font-medium text-gray-700 mb-2">Events *</label>
+            <div className="grid grid-cols-2 sm:grid-cols-3 gap-1.5">
+              {WEBHOOK_EVENTS.map((ev) => (
+                <label key={ev} className={`flex items-center gap-1.5 px-2 py-1 rounded cursor-pointer text-xs border ${form.events.includes(ev) ? "bg-[var(--color-primary-bg)] border-[var(--color-primary)] text-[var(--color-primary)]" : "border-gray-200 text-gray-600 hover:bg-gray-50"}`}>
+                  <input type="checkbox" checked={form.events.includes(ev)} onChange={() => toggleEvent(ev)} className="sr-only" />
+                  {ev}
+                </label>
+              ))}
+            </div>
+          </div>
+          <div className="flex gap-2 justify-end">
+            <button type="button" onClick={() => setShowForm(false)} className="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-200 rounded-md">Cancel</button>
+            <button type="submit" disabled={submitting}
+              className="px-4 py-1.5 text-sm font-medium text-white bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] rounded-md disabled:opacity-60 inline-flex items-center gap-1.5">
+              {submitting && <Loader2 className="w-3.5 h-3.5 animate-spin" />}Create Webhook
+            </button>
+          </div>
+        </form>
+      )}
+
+      {webhooks.length === 0 && !showForm ? (
+        <div className="text-center py-8 border-2 border-dashed border-gray-200 rounded-lg">
+          <Zap className="w-8 h-8 text-gray-300 mx-auto mb-2" />
+          <p className="text-sm text-gray-500">No webhooks configured</p>
+        </div>
+      ) : (
+        <div className="space-y-2">
+          {webhooks.map((wh) => (
+            <div key={wh.id} className={`border rounded-lg p-3 ${!wh.active ? "opacity-60 border-gray-100" : "border-gray-200"}`}>
+              <div className="flex items-start justify-between gap-3">
+                <div className="flex-1 min-w-0">
+                  <div className="flex items-center gap-2">
+                    <span className="text-sm font-medium text-gray-900">{wh.name}</span>
+                    {!wh.active && <span className="text-xs bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded">Paused</span>}
+                    {wh.lastStatusCode != null && (
+                      wh.lastStatusCode >= 200 && wh.lastStatusCode < 300
+                        ? <CheckCircle2 className="w-3.5 h-3.5 text-green-500" title={`Last: ${wh.lastStatusCode}`} />
+                        : <XCircle className="w-3.5 h-3.5 text-red-500" title={`Last: ${wh.lastStatusCode}`} />
+                    )}
+                  </div>
+                  <p className="text-xs text-gray-400 font-mono mt-0.5 truncate max-w-xs">{wh.url}</p>
+                  <div className="flex items-center gap-2 mt-1">
+                    <div className="flex flex-wrap gap-1">
+                      {wh.events.slice(0, 3).map((ev) => (
+                        <span key={ev} className="text-[10px] bg-gray-100 text-gray-500 px-1 py-0.5 rounded">{ev}</span>
+                      ))}
+                      {wh.events.length > 3 && <span className="text-[10px] text-gray-400">+{wh.events.length - 3} more</span>}
+                    </div>
+                  </div>
+                  {wh.lastTriggeredAt && (
+                    <p className="text-xs text-gray-400 mt-0.5 flex items-center gap-1">
+                      <Clock className="w-3 h-3" /> Triggered {new Date(wh.lastTriggeredAt).toLocaleDateString()}
+                    </p>
+                  )}
+                </div>
+                <div className="flex items-center gap-1 shrink-0">
+                  <button onClick={() => handleToggle(wh)} disabled={actionId === wh.id}
+                    title={wh.active ? "Pause" : "Resume"}
+                    className="p-1.5 text-gray-400 hover:text-[var(--color-primary)]">
+                    {actionId === wh.id ? <Loader2 className="w-4 h-4 animate-spin" /> :
+                      wh.active ? <ToggleRight className="w-4 h-4 text-green-500" /> : <ToggleLeft className="w-4 h-4" />}
+                  </button>
+                  <button onClick={() => handleDelete(wh.id)} disabled={actionId === wh.id}
+                    className="p-1.5 text-gray-300 hover:text-red-500">
+                    <Trash2 className="w-3.5 h-3.5" />
+                  </button>
+                </div>
+              </div>
+            </div>
+          ))}
+        </div>
+      )}
+    </div>
+  );
+}
diff --git a/src/components/timeline/GanttChart.tsx b/src/components/timeline/GanttChart.tsx
index f66997d..727f702 100644
--- a/src/components/timeline/GanttChart.tsx
+++ b/src/components/timeline/GanttChart.tsx
@@ -5,12 +5,33 @@ import { format, addMonths, startOfMonth, differenceInDays } from "date-fns";
 import { PhaseRow } from "./PhaseRow";
 import { updatePhaseDates } from "@/actions/phases";
 import { cn } from "@/lib/utils";
-import type { Phase, PhaseAssignment, Staff } from "@prisma/client";
+import { useTranslations } from "next-intl";
+
+interface Phase {
+  id: string;
+  projectId: string;
+  name: string;
+  detail?: string | null;
+  status: string;
+  isMilestone: boolean;
+  estStart: Date;
+  estEnd: Date;
+  worstStart?: Date | null;
+  worstEnd?: Date | null;
+  sortOrder: number;
+  createdAt?: Date;
+  updatedAt?: Date;
+}
+
+interface PhaseAssignment {
+  id: string;
+  isOwner: boolean;
+  staff: { id: string; name: string; company: string | null };
+  [key: string]: unknown;
+}
 
 type PhaseWithAssignments = Phase & {
-  assignments: (PhaseAssignment & {
-    staff: Pick<Staff, "id" | "name" | "company">;
-  })[];
+  assignments: PhaseAssignment[];
   _count?: { documents: number; photos: number };
 };
 
@@ -21,6 +42,7 @@ interface GanttChartProps {
 }
 
 export function GanttChart({ projectId, phases: initialPhases, planApproval }: GanttChartProps) {
+  const t = useTranslations("gantt");
   const [phases, setPhases] = useState(initialPhases);
   const containerRef = useRef<HTMLDivElement>(null);
 
@@ -110,18 +132,18 @@ const saveTimeout = useRef<NodeJS.Timeout | undefined>(undefined);
       <div className="px-6 py-2 flex items-center gap-6 text-xs text-gray-500 bg-white border-b border-gray-100">
         <span className="flex items-center gap-1.5">
           <span className="w-3 h-3 bg-blue-500 rounded-sm" />
-          Estimated
+          {t("estimated")}
         </span>
         <span className="flex items-center gap-1.5">
           <span className="w-3 h-3 bg-red-400 rounded-sm" />
-          Worst Case
+          {t("worstCase")}
         </span>
         <span className="flex items-center gap-1.5">
           <span className="w-2 h-3 bg-green-500 rounded-sm" />
-          Today
+          {t("today")}
         </span>
         <span className="ml-auto text-gray-400">
-          Drag bars to slide &bull; Drag edges to resize
+          {t("dragHelp")}
         </span>
       </div>
 
diff --git a/src/components/timeline/PhaseRow.tsx b/src/components/timeline/PhaseRow.tsx
index a0e58ec..95f5a4a 100644
--- a/src/components/timeline/PhaseRow.tsx
+++ b/src/components/timeline/PhaseRow.tsx
@@ -4,12 +4,32 @@ import { useRef, useCallback } from "react";
 import Link from "next/link";
 import { differenceInDays, addDays, format } from "date-fns";
 import { cn, statusColor, statusLabel, fmtShort } from "@/lib/utils";
-import type { Phase, PhaseAssignment, Staff } from "@prisma/client";
+
+interface Phase {
+  id: string;
+  projectId: string;
+  name: string;
+  detail?: string | null;
+  status: string;
+  isMilestone: boolean;
+  estStart: Date;
+  estEnd: Date;
+  worstStart?: Date | null;
+  worstEnd?: Date | null;
+  sortOrder: number;
+  createdAt?: Date;
+  updatedAt?: Date;
+}
+
+interface PhaseAssignment {
+  id: string;
+  isOwner: boolean;
+  staff: { id: string; name: string; company: string | null };
+  [key: string]: unknown;
+}
 
 type PhaseWithAssignments = Phase & {
-  assignments: (PhaseAssignment & {
-    staff: Pick<Staff, "id" | "name" | "company">;
-  })[];
+  assignments: PhaseAssignment[];
   _count?: { documents: number; photos: number };
 };
 
diff --git a/src/components/ui/InstallPrompt.tsx b/src/components/ui/InstallPrompt.tsx
new file mode 100644
index 0000000..57cc9af
--- /dev/null
+++ b/src/components/ui/InstallPrompt.tsx
@@ -0,0 +1,101 @@
+"use client";
+
+import { useEffect, useState } from "react";
+import { HardHat, X, Download } from "lucide-react";
+import { useTranslations } from "next-intl";
+import { toast } from "sonner";
+
+const DISMISS_KEY = "pwa-install-dismissed";
+const DISMISS_DURATION_MS = 7 * 24 * 60 * 60 * 1000; // 7 days
+
+interface BeforeInstallPromptEvent extends Event {
+  prompt: () => Promise<void>;
+  userChoice: Promise<{ outcome: "accepted" | "dismissed" }>;
+}
+
+export function InstallPrompt() {
+  const t = useTranslations("pwa");
+  const [deferredPrompt, setDeferredPrompt] =
+    useState<BeforeInstallPromptEvent | null>(null);
+  const [visible, setVisible] = useState(false);
+
+  useEffect(() => {
+    // Don't show if already dismissed recently
+    const dismissed = localStorage.getItem(DISMISS_KEY);
+    if (dismissed && Date.now() - parseInt(dismissed) < DISMISS_DURATION_MS) {
+      return;
+    }
+
+    // Don't show if already installed (display-mode: standalone)
+    if (window.matchMedia("(display-mode: standalone)").matches) return;
+
+    function handleBeforeInstallPrompt(e: Event) {
+      e.preventDefault();
+      setDeferredPrompt(e as BeforeInstallPromptEvent);
+      setVisible(true);
+    }
+
+    window.addEventListener("beforeinstallprompt", handleBeforeInstallPrompt);
+    return () =>
+      window.removeEventListener(
+        "beforeinstallprompt",
+        handleBeforeInstallPrompt
+      );
+  }, []);
+
+  async function handleInstall() {
+    if (!deferredPrompt) return;
+    await deferredPrompt.prompt();
+    const { outcome } = await deferredPrompt.userChoice;
+    if (outcome === "accepted") {
+      toast.success(t("installedToast"));
+    }
+    setDeferredPrompt(null);
+    setVisible(false);
+  }
+
+  function handleDismiss() {
+    localStorage.setItem(DISMISS_KEY, Date.now().toString());
+    setVisible(false);
+  }
+
+  if (!visible) return null;
+
+  return (
+    <div className="fixed bottom-4 left-4 right-4 md:left-auto md:right-6 md:bottom-6 md:w-80 z-50 bg-white rounded-xl shadow-xl border border-gray-200 p-4 flex gap-3 items-start">
+      <div className="w-10 h-10 rounded-lg bg-[var(--color-primary-bg)] flex items-center justify-center shrink-0">
+        <HardHat className="w-5 h-5 text-[var(--color-primary)]" />
+      </div>
+
+      <div className="flex-1 min-w-0">
+        <p className="text-sm font-semibold text-gray-900">{t("installTitle")}</p>
+        <p className="text-xs text-gray-500 mt-0.5 leading-relaxed">
+          {t("installMessage")}
+        </p>
+        <div className="flex gap-2 mt-3">
+          <button
+            onClick={handleInstall}
+            className="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary-dark)] transition-colors"
+          >
+            <Download className="w-3.5 h-3.5" />
+            {t("installButton")}
+          </button>
+          <button
+            onClick={handleDismiss}
+            className="px-3 py-1.5 text-xs font-medium text-gray-600 hover:text-gray-900 transition-colors"
+          >
+            {t("dismiss")}
+          </button>
+        </div>
+      </div>
+
+      <button
+        onClick={handleDismiss}
+        className="p-0.5 text-gray-400 hover:text-gray-600 shrink-0"
+        aria-label="Dismiss"
+      >
+        <X className="w-4 h-4" />
+      </button>
+    </div>
+  );
+}
diff --git a/src/components/ui/SearchPalette.tsx b/src/components/ui/SearchPalette.tsx
new file mode 100644
index 0000000..a4aac30
--- /dev/null
+++ b/src/components/ui/SearchPalette.tsx
@@ -0,0 +1,256 @@
+"use client";
+
+import { useState, useEffect, useRef, useCallback } from "react";
+import { useRouter } from "next/navigation";
+import { globalSearch, type SearchResult } from "@/actions/search";
+import {
+  Search,
+  X,
+  FolderKanban,
+  Layers,
+  FileText,
+  Users,
+} from "lucide-react";
+import { useTranslations } from "next-intl";
+
+const typeIcons: Record<string, typeof FolderKanban> = {
+  project: FolderKanban,
+  phase: Layers,
+  document: FileText,
+  staff: Users,
+};
+
+export function SearchPalette() {
+  const [open, setOpen] = useState(false);
+  const [query, setQuery] = useState("");
+  const [results, setResults] = useState<SearchResult[]>([]);
+  const [loading, setLoading] = useState(false);
+  const [selectedIdx, setSelectedIdx] = useState(0);
+  const inputRef = useRef<HTMLInputElement>(null);
+  const router = useRouter();
+  const debounceRef = useRef<ReturnType<typeof setTimeout> | null>(null);
+  const t = useTranslations("search");
+  const tc = useTranslations("common");
+
+  const typeLabels: Record<string, string> = {
+    project: t("project"),
+    phase: t("phase"),
+    document: t("document"),
+    staff: t("staff"),
+  };
+
+  // Keyboard shortcut: Cmd+K / Ctrl+K
+  useEffect(() => {
+    function handleKeyDown(e: KeyboardEvent) {
+      if ((e.metaKey || e.ctrlKey) && e.key === "k") {
+        e.preventDefault();
+        setOpen((prev) => !prev);
+      }
+      if (e.key === "Escape") setOpen(false);
+    }
+    window.addEventListener("keydown", handleKeyDown);
+    return () => window.removeEventListener("keydown", handleKeyDown);
+  }, []);
+
+  // Focus input when opened
+  useEffect(() => {
+    if (open) {
+      setTimeout(() => inputRef.current?.focus(), 50);
+      setQuery("");
+      setResults([]);
+      setSelectedIdx(0);
+    }
+  }, [open]);
+
+  // Debounced search
+  const doSearch = useCallback((q: string) => {
+    if (debounceRef.current) clearTimeout(debounceRef.current);
+    if (q.trim().length < 2) {
+      setResults([]);
+      setLoading(false);
+      return;
+    }
+    setLoading(true);
+    debounceRef.current = setTimeout(async () => {
+      try {
+        const r = await globalSearch(q);
+        setResults(r);
+        setSelectedIdx(0);
+      } catch {
+        setResults([]);
+      } finally {
+        setLoading(false);
+      }
+    }, 250);
+  }, []);
+
+  function handleInputChange(value: string) {
+    setQuery(value);
+    doSearch(value);
+  }
+
+  function navigate(result: SearchResult) {
+    setOpen(false);
+    router.push(result.href);
+  }
+
+  function handleKeyDown(e: React.KeyboardEvent) {
+    if (e.key === "ArrowDown") {
+      e.preventDefault();
+      setSelectedIdx((prev) => Math.min(prev + 1, results.length - 1));
+    } else if (e.key === "ArrowUp") {
+      e.preventDefault();
+      setSelectedIdx((prev) => Math.max(prev - 1, 0));
+    } else if (e.key === "Enter" && results[selectedIdx]) {
+      navigate(results[selectedIdx]);
+    }
+  }
+
+  if (!open) return null;
+
+  return (
+    <div className="fixed inset-0 z-[100]" onClick={() => setOpen(false)}>
+      {/* Backdrop */}
+      <div className="absolute inset-0 bg-black/40" />
+
+      {/* Palette */}
+      <div
+        className="relative max-w-lg w-full mx-auto mt-[15vh]"
+        onClick={(e) => e.stopPropagation()}
+      >
+        <div className="bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden">
+          {/* Input */}
+          <div className="flex items-center gap-3 px-4 py-3 border-b border-gray-100">
+            <Search className="w-5 h-5 text-gray-400 shrink-0" />
+            <input
+              ref={inputRef}
+              type="text"
+              value={query}
+              onChange={(e) => handleInputChange(e.target.value)}
+              onKeyDown={handleKeyDown}
+              placeholder={t("placeholder")}
+              className="flex-1 text-sm text-gray-900 placeholder-gray-400 outline-none bg-transparent"
+            />
+            {query && (
+              <button
+                onClick={() => {
+                  setQuery("");
+                  setResults([]);
+                  inputRef.current?.focus();
+                }}
+                className="p-1 text-gray-400 hover:text-gray-600"
+              >
+                <X className="w-4 h-4" />
+              </button>
+            )}
+            <kbd className="hidden sm:inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-medium text-gray-400 bg-gray-100 rounded border border-gray-200">
+              ESC
+            </kbd>
+          </div>
+
+          {/* Results */}
+          <div className="max-h-[50vh] overflow-y-auto">
+            {loading && (
+              <div className="px-4 py-6 text-center text-sm text-gray-400">
+                {t("searching")}
+              </div>
+            )}
+
+            {!loading && query.length >= 2 && results.length === 0 && (
+              <div className="px-4 py-6 text-center text-sm text-gray-400">
+                {t("noResultsFor", { query })}
+              </div>
+            )}
+
+            {!loading && results.length > 0 && (
+              <ul className="py-2">
+                {results.map((result, i) => {
+                  const Icon = typeIcons[result.type] || FolderKanban;
+                  return (
+                    <li key={`${result.type}-${result.id}`}>
+                      <button
+                        onClick={() => navigate(result)}
+                        onMouseEnter={() => setSelectedIdx(i)}
+                        className={`w-full flex items-center gap-3 px-4 py-2.5 text-left transition-colors ${
+                          i === selectedIdx
+                            ? "bg-[var(--color-primary-bg)]"
+                            : "hover:bg-gray-50"
+                        }`}
+                      >
+                        <div
+                          className={`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 ${
+                            i === selectedIdx
+                              ? "bg-[var(--color-primary)] text-white"
+                              : "bg-gray-100 text-gray-500"
+                          }`}
+                        >
+                          <Icon className="w-4 h-4" />
+                        </div>
+                        <div className="flex-1 min-w-0">
+                          <p className="text-sm font-medium text-gray-900 truncate">
+                            {result.title}
+                          </p>
+                          {result.subtitle && (
+                            <p className="text-xs text-gray-500 truncate">
+                              {result.subtitle}
+                            </p>
+                          )}
+                        </div>
+                        <span className="text-[10px] font-medium text-gray-400 uppercase tracking-wide shrink-0">
+                          {typeLabels[result.type]}
+                        </span>
+                      </button>
+                    </li>
+                  );
+                })}
+              </ul>
+            )}
+
+            {!loading && query.length < 2 && (
+              <div className="px-4 py-6 text-center text-sm text-gray-400">
+                {t("typeAtLeast")}
+              </div>
+            )}
+          </div>
+
+          {/* Footer */}
+          <div className="px-4 py-2 border-t border-gray-100 flex items-center gap-4 text-[10px] text-gray-400">
+            <span className="flex items-center gap-1">
+              <kbd className="px-1 py-0.5 bg-gray-100 rounded border border-gray-200 text-[10px]">↑↓</kbd>
+              {t("navigate")}
+            </span>
+            <span className="flex items-center gap-1">
+              <kbd className="px-1 py-0.5 bg-gray-100 rounded border border-gray-200 text-[10px]">↵</kbd>
+              {tc("open")}
+            </span>
+            <span className="flex items-center gap-1">
+              <kbd className="px-1 py-0.5 bg-gray-100 rounded border border-gray-200 text-[10px]">esc</kbd>
+              {tc("close")}
+            </span>
+          </div>
+        </div>
+      </div>
+    </div>
+  );
+}
+
+/** Small trigger button for the sidebar */
+export function SearchButton() {
+  const t = useTranslations("search");
+  return (
+    <button
+      onClick={() => {
+        window.dispatchEvent(
+          new KeyboardEvent("keydown", { key: "k", metaKey: true })
+        );
+      }}
+      className="w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-500 hover:bg-gray-100 hover:text-gray-700 transition-colors"
+    >
+      <Search className="w-5 h-5" />
+      <span className="flex-1 text-left">{t("buttonLabel")}</span>
+      <kbd className="hidden sm:inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-medium text-gray-400 bg-gray-100 rounded border border-gray-200">
+        ⌘K
+      </kbd>
+    </button>
+  );
+}
diff --git a/src/components/ui/ServiceWorkerRegister.tsx b/src/components/ui/ServiceWorkerRegister.tsx
new file mode 100644
index 0000000..9bba0b6
--- /dev/null
+++ b/src/components/ui/ServiceWorkerRegister.tsx
@@ -0,0 +1,15 @@
+"use client";
+
+import { useEffect } from "react";
+
+export function ServiceWorkerRegister() {
+  useEffect(() => {
+    if ("serviceWorker" in navigator) {
+      navigator.serviceWorker.register("/sw.js").catch((err) => {
+        console.log("SW registration failed:", err);
+      });
+    }
+  }, []);
+
+  return null;
+}
diff --git a/src/components/ui/Sidebar.tsx b/src/components/ui/Sidebar.tsx
index 96a4a2e..454c0d0 100644
--- a/src/components/ui/Sidebar.tsx
+++ b/src/components/ui/Sidebar.tsx
@@ -4,6 +4,7 @@ import Link from "next/link";
 import { usePathname } from "next/navigation";
 import { signOut } from "next-auth/react";
 import { cn } from "@/lib/utils";
+import { useState, useEffect } from "react";
 import {
   LayoutDashboard,
   FolderKanban,
@@ -12,7 +13,14 @@ import {
   Bell,
   LogOut,
   HardHat,
+  Menu,
+  X,
+  BarChart3,
+  HelpCircle,
 } from "lucide-react";
+import { SearchPalette, SearchButton } from "@/components/ui/SearchPalette";
+import { useTranslations } from "next-intl";
+import { useNotificationSSE } from "@/hooks/useNotificationSSE";
 
 interface SidebarProps {
   user: {
@@ -21,27 +29,91 @@ interface SidebarProps {
     image?: string | null;
     role: string;
   };
+  logoUrl?: string | null;
+  companyName?: string | null;
+  unreadCount?: number;
 }
 
-const navigation = [
-  { name: "Dashboard", href: "/dashboard", icon: LayoutDashboard },
-  { name: "Projects", href: "/dashboard/projects", icon: FolderKanban },
-  { name: "Directory", href: "/dashboard/directory", icon: Users },
-  { name: "Notifications", href: "/dashboard/notifications", icon: Bell },
-  { name: "Settings", href: "/dashboard/settings", icon: Settings },
-];
+function getNavigation(role: string, t: (key: string) => string) {
+  const base = [
+    { name: t("dashboard"), href: "/dashboard", icon: LayoutDashboard },
+    { name: t("projects"), href: "/dashboard/projects", icon: FolderKanban },
+    { name: t("reports"), href: "/dashboard/reports", icon: BarChart3 },
+  ];
 
-export function Sidebar({ user }: SidebarProps) {
+  if (role === "STAKEHOLDER" || role === "VIEWER") {
+    return [
+      ...base,
+      { name: t("notifications"), href: "/dashboard/notifications", icon: Bell },
+      { name: t("help"), href: "/dashboard/help", icon: HelpCircle },
+    ];
+  }
+
+  return [
+    ...base,
+    { name: t("directory"), href: "/dashboard/directory", icon: Users },
+    { name: t("notifications"), href: "/dashboard/notifications", icon: Bell },
+    { name: t("settings"), href: "/dashboard/settings", icon: Settings },
+    { name: t("help"), href: "/dashboard/help", icon: HelpCircle },
+  ];
+}
+
+export function Sidebar({ user, logoUrl, companyName, unreadCount: initialUnread = 0 }: SidebarProps) {
   const pathname = usePathname();
+  const [mobileOpen, setMobileOpen] = useState(false);
+  const [unreadCount, setUnreadCount] = useState(initialUnread);
+  const t = useTranslations("nav");
+  const tc = useTranslations("common");
+  const navigation = getNavigation(user.role, t);
 
-  return (
-    <div className="flex flex-col w-64 bg-white border-r border-gray-200">
+  // Live unread count via SSE (#30)
+  useNotificationSSE(setUnreadCount);
+
+  // Close mobile sidebar on route change
+  useEffect(() => {
+    setMobileOpen(false);
+  }, [pathname]);
+
+  // Prevent body scroll when mobile sidebar is open
+  useEffect(() => {
+    if (mobileOpen) {
+      document.body.style.overflow = "hidden";
+    } else {
+      document.body.style.overflow = "";
+    }
+    return () => {
+      document.body.style.overflow = "";
+    };
+  }, [mobileOpen]);
+
+  const sidebarContent = (
+    <>
       {/* Logo */}
       <div className="flex items-center gap-2 px-4 py-5 border-b border-gray-200">
-        <HardHat className="w-7 h-7 text-blue-600" />
-        <span className="text-lg font-bold text-gray-900">
-          Construction PM
+        {logoUrl ? (
+          <img
+            src={logoUrl}
+            alt={companyName || "Logo"}
+            className="w-7 h-7 rounded object-contain"
+          />
+        ) : (
+          <HardHat className="w-7 h-7 text-[var(--color-primary)]" />
+        )}
+        <span className="text-lg font-bold text-gray-900 truncate">
+          {companyName || "Construction PM"}
         </span>
+        {/* Close button — mobile only */}
+        <button
+          onClick={() => setMobileOpen(false)}
+          className="ml-auto p-1 text-gray-400 hover:text-gray-600 lg:hidden"
+        >
+          <X className="w-5 h-5" />
+        </button>
+      </div>
+
+      {/* Search */}
+      <div className="px-3 pt-3">
+        <SearchButton />
       </div>
 
       {/* Navigation */}
@@ -56,14 +128,19 @@ export function Sidebar({ user }: SidebarProps) {
               key={item.name}
               href={item.href}
               className={cn(
-                "flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",
+                "flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors",
                 isActive
-                  ? "bg-blue-50 text-blue-700"
+                  ? "bg-[var(--color-primary-bg)] text-[var(--color-primary-dark)]"
                   : "text-gray-600 hover:bg-gray-100 hover:text-gray-900"
               )}
             >
               <item.icon className="w-5 h-5" />
               {item.name}
+              {item.href === "/dashboard/notifications" && unreadCount > 0 && (
+                <span className="ml-auto inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-semibold rounded-full bg-[var(--color-primary)] text-white">
+                  {unreadCount > 99 ? "99+" : unreadCount}
+                </span>
+              )}
             </Link>
           );
         })}
@@ -72,7 +149,7 @@ export function Sidebar({ user }: SidebarProps) {
       {/* User */}
       <div className="border-t border-gray-200 p-4">
         <div className="flex items-center gap-3">
-          <div className="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 text-sm font-medium">
+          <div className="w-8 h-8 rounded-full bg-[var(--color-primary-bg)] flex items-center justify-center text-[var(--color-primary-dark)] text-sm font-medium shrink-0">
             {user.name?.[0] || user.email?.[0] || "?"}
           </div>
           <div className="flex-1 min-w-0">
@@ -86,12 +163,105 @@ export function Sidebar({ user }: SidebarProps) {
           <button
             onClick={() => signOut({ callbackUrl: "/login" })}
             className="p-1.5 text-gray-400 hover:text-gray-600 rounded"
-            title="Sign out"
+            title={tc("signOut")}
           >
             <LogOut className="w-4 h-4" />
           </button>
         </div>
       </div>
-    </div>
+    </>
+  );
+
+  return (
+    <>
+      {/* Mobile top bar */}
+      <div className="lg:hidden fixed top-0 left-0 right-0 z-40 flex items-center gap-3 px-4 py-3 bg-white border-b border-gray-200">
+        <button
+          onClick={() => setMobileOpen(true)}
+          className="p-1.5 -ml-1.5 text-gray-600 hover:text-gray-900 rounded-lg"
+          aria-label="Open menu"
+        >
+          <Menu className="w-6 h-6" />
+        </button>
+        {logoUrl ? (
+          <img
+            src={logoUrl}
+            alt={companyName || "Logo"}
+            className="w-6 h-6 rounded object-contain"
+          />
+        ) : (
+          <HardHat className="w-6 h-6 text-[var(--color-primary)]" />
+        )}
+        <span className="text-base font-bold text-gray-900 truncate">
+          {companyName || "Construction PM"}
+        </span>
+        {unreadCount > 0 && (
+          <Link
+            href="/dashboard/notifications"
+            className="ml-auto relative p-1.5"
+          >
+            <Bell className="w-5 h-5 text-gray-600" />
+            <span className="absolute -top-0.5 -right-0.5 w-4 h-4 bg-[var(--color-primary)] text-white text-[10px] font-bold rounded-full flex items-center justify-center">
+              {unreadCount > 9 ? "9+" : unreadCount}
+            </span>
+          </Link>
+        )}
+      </div>
+
+      {/* Mobile overlay */}
+      {mobileOpen && (
+        <div
+          className="lg:hidden fixed inset-0 z-50 bg-black/50"
+          onClick={() => setMobileOpen(false)}
+        />
+      )}
+
+      {/* Mobile sidebar drawer */}
+      <div
+        className={cn(
+          "lg:hidden fixed inset-y-0 left-0 z-50 w-72 bg-white shadow-xl flex flex-col transition-transform duration-300 ease-in-out",
+          mobileOpen ? "translate-x-0" : "-translate-x-full"
+        )}
+      >
+        {sidebarContent}
+      </div>
+
+      {/* Desktop sidebar — always visible on lg+ */}
+      <div className="hidden lg:flex lg:flex-col w-64 bg-white border-r border-gray-200 shrink-0">
+        {sidebarContent}
+      </div>
+
+      {/* Global search palette */}
+      <SearchPalette />
+
+      {/* Mobile bottom tab bar */}
+      <div className="lg:hidden fixed bottom-0 left-0 right-0 z-40 flex items-center bg-white border-t border-gray-200 safe-area-inset-bottom">
+        {navigation.slice(0, 4).map((item) => {
+          const isActive =
+            pathname === item.href ||
+            (item.href !== "/dashboard" && pathname.startsWith(item.href));
+          return (
+            <Link
+              key={item.href}
+              href={item.href}
+              className={cn(
+                "flex-1 flex flex-col items-center justify-center gap-0.5 py-2.5 text-[10px] font-medium transition-colors relative",
+                isActive
+                  ? "text-[var(--color-primary)]"
+                  : "text-gray-500 hover:text-gray-700"
+              )}
+            >
+              <item.icon className="w-5 h-5" />
+              <span>{item.name}</span>
+              {item.href === "/dashboard/notifications" && unreadCount > 0 && (
+                <span className="absolute top-1.5 right-[calc(50%-14px)] w-4 h-4 bg-[var(--color-primary)] text-white text-[9px] font-bold rounded-full flex items-center justify-center">
+                  {unreadCount > 9 ? "9+" : unreadCount}
+                </span>
+              )}
+            </Link>
+          );
+        })}
+      </div>
+    </>
   );
 }
diff --git a/src/hooks/useNotificationSSE.ts b/src/hooks/useNotificationSSE.ts
new file mode 100644
index 0000000..cdfaf21
--- /dev/null
+++ b/src/hooks/useNotificationSSE.ts
@@ -0,0 +1,59 @@
+"use client";
+
+import { useEffect, useRef, useCallback } from "react";
+
+/**
+ * Connects to the SSE endpoint and calls onCount whenever the unread
+ * notification count changes.  Falls back to a 30-second polling interval
+ * if EventSource is unavailable (e.g. Safari < 15 or HTTP/1.1 proxies).
+ */
+export function useNotificationSSE(onCount: (count: number) => void) {
+  const lastCount = useRef<number | null>(null);
+
+  const handleCount = useCallback(
+    (count: number) => {
+      if (count !== lastCount.current) {
+        lastCount.current = count;
+        onCount(count);
+      }
+    },
+    [onCount]
+  );
+
+  useEffect(() => {
+    if (typeof EventSource === "undefined") {
+      // Fallback: poll every 30s
+      const poll = async () => {
+        try {
+          const res = await fetch("/api/notifications/unread-count");
+          if (res.ok) {
+            const { count } = (await res.json()) as { count: number };
+            handleCount(count);
+          }
+        } catch {
+          // ignore
+        }
+      };
+      poll();
+      const id = setInterval(poll, 30_000);
+      return () => clearInterval(id);
+    }
+
+    const es = new EventSource("/api/sse/notifications");
+
+    es.onmessage = (e) => {
+      try {
+        const data = JSON.parse(e.data) as { type: string; count: number };
+        if (data.type === "unread_count") handleCount(data.count);
+      } catch {
+        // ignore malformed events
+      }
+    };
+
+    es.onerror = () => {
+      // Browser will auto-reconnect; no action needed
+    };
+
+    return () => es.close();
+  }, [handleCount]);
+}
diff --git a/src/i18n/locale.ts b/src/i18n/locale.ts
new file mode 100644
index 0000000..5d9975e
--- /dev/null
+++ b/src/i18n/locale.ts
@@ -0,0 +1,19 @@
+"use server";
+
+import { cookies } from "next/headers";
+import { locales, defaultLocale, type Locale } from "./request";
+
+export async function getLocale(): Promise<Locale> {
+  const cookieStore = await cookies();
+  const val = cookieStore.get("locale")?.value as Locale | undefined;
+  return val && locales.includes(val) ? val : defaultLocale;
+}
+
+export async function setLocale(locale: Locale) {
+  const cookieStore = await cookies();
+  cookieStore.set("locale", locale, {
+    path: "/",
+    maxAge: 60 * 60 * 24 * 365, // 1 year
+    sameSite: "lax",
+  });
+}
diff --git a/src/i18n/request.ts b/src/i18n/request.ts
new file mode 100644
index 0000000..b7726a8
--- /dev/null
+++ b/src/i18n/request.ts
@@ -0,0 +1,17 @@
+import { getRequestConfig } from "next-intl/server";
+import { cookies } from "next/headers";
+
+export const locales = ["en", "es"] as const;
+export type Locale = (typeof locales)[number];
+export const defaultLocale: Locale = "en";
+
+export default getRequestConfig(async () => {
+  const cookieStore = await cookies();
+  const locale = (cookieStore.get("locale")?.value as Locale) || defaultLocale;
+  const validLocale = locales.includes(locale) ? locale : defaultLocale;
+
+  return {
+    locale: validLocale,
+    messages: (await import(`../../messages/${validLocale}.json`)).default,
+  };
+});
diff --git a/src/lib/db-types.ts b/src/lib/db-types.ts
new file mode 100644
index 0000000..791d7e6
--- /dev/null
+++ b/src/lib/db-types.ts
@@ -0,0 +1,183 @@
+/**
+ * Type extensions for Sprint H new Prisma models.
+ *
+ * These models exist in prisma/schema.prisma but the generated client
+ * (node_modules/.prisma/client) is stale. After running
+ *   prisma db push && prisma generate
+ * on the development machine, this file can be deleted and all imports
+ * updated to use the generated types directly.
+ *
+ * Sprint H models: ChangeOrder, DailyLog, Inspection, SubcontractorBid,
+ * Material, ApiKey, Webhook, TotpSecret, ReportSchedule, ClientToken
+ */
+
+import { db as _db } from "./db";
+
+// Re-export the db client cast to include new model delegates
+export const db = _db as typeof _db & {
+  // eslint-disable-next-line @typescript-eslint/no-explicit-any
+  changeOrder: any;
+  // eslint-disable-next-line @typescript-eslint/no-explicit-any
+  dailyLog: any;
+  // eslint-disable-next-line @typescript-eslint/no-explicit-any
+  inspection: any;
+  // eslint-disable-next-line @typescript-eslint/no-explicit-any
+  subcontractorBid: any;
+  // eslint-disable-next-line @typescript-eslint/no-explicit-any
+  material: any;
+  // eslint-disable-next-line @typescript-eslint/no-explicit-any
+  apiKey: any;
+  // eslint-disable-next-line @typescript-eslint/no-explicit-any
+  webhook: any;
+  // eslint-disable-next-line @typescript-eslint/no-explicit-any
+  totpSecret: any;
+  // eslint-disable-next-line @typescript-eslint/no-explicit-any
+  reportSchedule: any;
+  // eslint-disable-next-line @typescript-eslint/no-explicit-any
+  clientToken: any;
+};
+
+// Inline types for Sprint H models (mirrors schema.prisma exactly)
+export type ChangeOrderStatus = "PENDING" | "APPROVED" | "REJECTED";
+export type InspectionResult = "PASS" | "FAIL" | "CONDITIONAL";
+export type MaterialStatus = "ORDERED" | "DELIVERED" | "INSTALLED" | "RETURNED";
+export type ReportFrequency = "WEEKLY" | "MONTHLY";
+
+export interface ChangeOrder {
+  id: string;
+  number: string;
+  title: string;
+  description: string | null;
+  status: ChangeOrderStatus;
+  amount: number | null;
+  reason: string | null;
+  phaseId: string;
+  requestedById: string;
+  approvedById: string | null;
+  approvedAt: Date | null;
+  createdAt: Date;
+  updatedAt: Date;
+  requestedBy?: { id: string; name: string | null; email: string | null };
+  approvedBy?: { id: string; name: string | null } | null;
+  phase?: { id: string; name: string };
+}
+
+export interface DailyLog {
+  id: string;
+  date: Date;
+  weather: string | null;
+  tempHigh: number | null;
+  tempLow: number | null;
+  crewCount: number | null;
+  equipment: string | null;
+  workSummary: string;
+  issues: string | null;
+  notes: string | null;
+  projectId: string;
+  authorId: string;
+  createdAt: Date;
+  updatedAt: Date;
+  author?: { id: string; name: string | null; email: string | null };
+}
+
+export interface Inspection {
+  id: string;
+  title: string;
+  inspectorName: string | null;
+  scheduledAt: Date;
+  completedAt: Date | null;
+  result: InspectionResult | null;
+  notes: string | null;
+  notifyOnResult: boolean;
+  phaseId: string;
+  createdAt: Date;
+  updatedAt: Date;
+}
+
+export interface SubcontractorBid {
+  id: string;
+  companyName: string;
+  contactName: string | null;
+  email: string | null;
+  phone: string | null;
+  amount: number;
+  notes: string | null;
+  awarded: boolean;
+  submittedAt: Date;
+  phaseId: string;
+  createdAt: Date;
+  updatedAt: Date;
+}
+
+export interface Material {
+  id: string;
+  name: string;
+  quantity: number;
+  unit: string;
+  status: MaterialStatus;
+  cost: number | null;
+  supplier: string | null;
+  orderedAt: Date | null;
+  deliveredAt: Date | null;
+  installedAt: Date | null;
+  notes: string | null;
+  phaseId: string;
+  createdAt: Date;
+  updatedAt: Date;
+}
+
+export interface ApiKey {
+  id: string;
+  name: string;
+  keyHash: string;
+  prefix: string;
+  lastUsedAt: Date | null;
+  expiresAt: Date | null;
+  active: boolean;
+  createdAt: Date;
+}
+
+export interface Webhook {
+  id: string;
+  name: string;
+  url: string;
+  secret: string;
+  events: string[];
+  active: boolean;
+  lastTriggeredAt: Date | null;
+  lastStatusCode: number | null;
+  createdAt: Date;
+  updatedAt: Date;
+}
+
+export interface TotpSecret {
+  id: string;
+  userId: string;
+  secret: string;
+  verified: boolean;
+  createdAt: Date;
+}
+
+export interface ReportSchedule {
+  id: string;
+  frequency: ReportFrequency;
+  dayOfWeek: number | null;
+  dayOfMonth: number | null;
+  sendHour: number;
+  recipients: string[];
+  includeProjects: string[];
+  lastSentAt: Date | null;
+  active: boolean;
+  createdAt: Date;
+  updatedAt: Date;
+}
+
+export interface ClientToken {
+  id: string;
+  token: string;
+  label: string;
+  projectId: string | null;
+  expiresAt: Date | null;
+  active: boolean;
+  createdAt: Date;
+}
diff --git a/src/lib/email.ts b/src/lib/email.ts
new file mode 100644
index 0000000..c01220a
--- /dev/null
+++ b/src/lib/email.ts
@@ -0,0 +1,200 @@
+/**
+ * Email service using Resend.
+ * Gracefully skips if RESEND_API_KEY is not set.
+ */
+
+const RESEND_API_KEY = process.env.RESEND_API_KEY;
+const FROM_EMAIL = "Construction PM <noreply@constructionpm.app>";
+const APP_URL = process.env.NEXTAUTH_URL || "https://construction-pm-theta.vercel.app";
+
+interface SendEmailOptions {
+  to: string;
+  subject: string;
+  html: string;
+}
+
+async function sendEmail(options: SendEmailOptions): Promise<boolean> {
+  if (!RESEND_API_KEY) {
+    console.log("[email] Skipped — RESEND_API_KEY not set");
+    return false;
+  }
+
+  try {
+    const res = await fetch("https://api.resend.com/emails", {
+      method: "POST",
+      headers: {
+        Authorization: `Bearer ${RESEND_API_KEY}`,
+        "Content-Type": "application/json",
+      },
+      body: JSON.stringify({
+        from: FROM_EMAIL,
+        to: options.to,
+        subject: options.subject,
+        html: options.html,
+      }),
+    });
+
+    if (!res.ok) {
+      const err = await res.text();
+      console.error("[email] Resend error:", err);
+      return false;
+    }
+
+    return true;
+  } catch (error) {
+    console.error("[email] Failed to send:", error);
+    return false;
+  }
+}
+
+// ── Email wrapper (HTML layout) ──
+
+function wrapHTML(content: string): string {
+  return `<!DOCTYPE html>
+<html>
+<head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"></head>
+<body style="margin:0;padding:0;background:#f9fafb;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;">
+  <div style="max-width:560px;margin:0 auto;padding:32px 16px;">
+    <div style="background:#fff;border-radius:12px;border:1px solid #e5e7eb;overflow:hidden;">
+      <div style="padding:24px 24px 0;">
+        <div style="font-size:18px;font-weight:700;color:#111827;margin-bottom:4px;">🚧 Construction PM</div>
+      </div>
+      <div style="padding:16px 24px 24px;">
+        ${content}
+      </div>
+    </div>
+    <div style="text-align:center;padding:16px;color:#9ca3af;font-size:12px;">
+      Construction PM · You received this because you're a project member
+    </div>
+  </div>
+</body>
+</html>`;
+}
+
+function btnHTML(text: string, url: string): string {
+  return `<a href="${url}" style="display:inline-block;background:#4F6DF5;color:#fff;padding:10px 24px;border-radius:8px;text-decoration:none;font-size:14px;font-weight:500;margin-top:16px;">${text}</a>`;
+}
+
+// ── Specific email templates ──
+
+export async function sendInvitationEmail(
+  email: string,
+  projectName: string,
+  role: string,
+  inviteToken: string,
+  inviterName: string
+): Promise<boolean> {
+  const inviteUrl = `${APP_URL}/invite/${inviteToken}`;
+  const roleName = role.charAt(0) + role.slice(1).toLowerCase();
+
+  return sendEmail({
+    to: email,
+    subject: `You've been invited to ${projectName}`,
+    html: wrapHTML(`
+      <p style="color:#374151;font-size:14px;line-height:1.6;margin:0 0 12px;">
+        <strong>${inviterName}</strong> invited you to join <strong>${projectName}</strong> as a <strong>${roleName}</strong>.
+      </p>
+      <p style="color:#6b7280;font-size:14px;line-height:1.6;margin:0 0 4px;">
+        Click below to accept the invitation and join the project team.
+      </p>
+      ${btnHTML("Accept Invitation", inviteUrl)}
+      <p style="color:#9ca3af;font-size:12px;margin-top:16px;">This invitation expires in 7 days.</p>
+    `),
+  });
+}
+
+export async function sendPhaseStatusEmail(
+  email: string,
+  projectName: string,
+  phaseName: string,
+  newStatus: string,
+  projectId: string
+): Promise<boolean> {
+  const statusLabels: Record<string, string> = {
+    PENDING: "Pending",
+    IN_PROGRESS: "In Progress",
+    REVIEW_REQUESTED: "Review Requested",
+    UNDER_REVIEW: "Under Review",
+    COMPLETE: "Complete",
+  };
+  const label = statusLabels[newStatus] || newStatus;
+  const projectUrl = `${APP_URL}/dashboard/projects/${projectId}`;
+
+  return sendEmail({
+    to: email,
+    subject: `${phaseName} is now ${label} — ${projectName}`,
+    html: wrapHTML(`
+      <p style="color:#374151;font-size:14px;line-height:1.6;margin:0 0 12px;">
+        The phase <strong>${phaseName}</strong> in <strong>${projectName}</strong> has been updated to <strong>${label}</strong>.
+      </p>
+      ${btnHTML("View Project", projectUrl)}
+    `),
+  });
+}
+
+export async function sendDocumentStatusEmail(
+  email: string,
+  projectName: string,
+  documentName: string,
+  status: string,
+  projectId: string
+): Promise<boolean> {
+  const label = status === "APPROVED" ? "approved" : "rejected";
+  const projectUrl = `${APP_URL}/dashboard/projects/${projectId}`;
+
+  return sendEmail({
+    to: email,
+    subject: `Document ${label}: ${documentName} — ${projectName}`,
+    html: wrapHTML(`
+      <p style="color:#374151;font-size:14px;line-height:1.6;margin:0 0 12px;">
+        Your document <strong>${documentName}</strong> in <strong>${projectName}</strong> has been <strong>${label}</strong>.
+      </p>
+      ${btnHTML("View Project", projectUrl)}
+    `),
+  });
+}
+
+export async function sendReviewRequestEmail(
+  email: string,
+  projectName: string,
+  phaseName: string,
+  projectId: string,
+  phaseId: string
+): Promise<boolean> {
+  const phaseUrl = `${APP_URL}/dashboard/projects/${projectId}/phases/${phaseId}`;
+
+  return sendEmail({
+    to: email,
+    subject: `Review requested: ${phaseName} — ${projectName}`,
+    html: wrapHTML(`
+      <p style="color:#374151;font-size:14px;line-height:1.6;margin:0 0 12px;">
+        A review has been requested for <strong>${phaseName}</strong> in <strong>${projectName}</strong>.
+      </p>
+      <p style="color:#6b7280;font-size:14px;line-height:1.6;margin:0 0 4px;">
+        Please review the phase and either approve or request changes.
+      </p>
+      ${btnHTML("Review Phase", phaseUrl)}
+    `),
+  });
+}
+
+export async function sendChecklistCompleteEmail(
+  email: string,
+  projectName: string,
+  phaseName: string,
+  projectId: string,
+  phaseId: string
+): Promise<boolean> {
+  const phaseUrl = `${APP_URL}/dashboard/projects/${projectId}/phases/${phaseId}`;
+
+  return sendEmail({
+    to: email,
+    subject: `Checklist complete: ${phaseName} — ${projectName}`,
+    html: wrapHTML(`
+      <p style="color:#374151;font-size:14px;line-height:1.6;margin:0 0 12px;">
+        All checklist items for <strong>${phaseName}</strong> in <strong>${projectName}</strong> have been completed.
+      </p>
+      ${btnHTML("View Phase", phaseUrl)}
+    `),
+  });
+}
diff --git a/src/lib/notifications.ts b/src/lib/notifications.ts
new file mode 100644
index 0000000..d75a61d
--- /dev/null
+++ b/src/lib/notifications.ts
@@ -0,0 +1,292 @@
+import { db } from "@/lib/db";
+import { Prisma } from "@prisma/client";
+import {
+  sendPhaseStatusEmail,
+  sendReviewRequestEmail,
+  sendChecklistCompleteEmail,
+  sendDocumentStatusEmail,
+} from "@/lib/email";
+import {
+  sendPhaseStatusSMS,
+  sendReviewRequestSMS,
+  sendChecklistCompleteSMS,
+  sendDocumentStatusSMS,
+} from "@/lib/sms";
+
+type NotificationType =
+  | "PHASE_STATUS_CHANGED"
+  | "CHECKLIST_COMPLETED"
+  | "DOCUMENT_UPLOADED"
+  | "DOCUMENT_STATUS_CHANGED"
+  | "PHOTO_UPLOADED"
+  | "REVIEW_REQUESTED"
+  | "REVIEW_COMPLETED"
+  | "TIMELINE_SHIFTED"
+  | "MEMBER_INVITED"
+  | "COMMENT_ADDED"
+  | "DEPENDENCY_CHANGED";
+
+interface NotifyOptions {
+  type: NotificationType;
+  title: string;
+  message: string;
+  recipientIds: string[];
+  actorId?: string; // The user who triggered the action (excluded from recipients)
+  data?: Record<string, unknown>; // projectId, phaseId, documentId, etc.
+}
+
+interface UserPref {
+  userId: string;
+  emailEnabled: boolean;
+  smsEnabled: boolean;
+  inAppEnabled: boolean;
+  emailPhaseStatus: boolean;
+  emailReview: boolean;
+  emailChecklist: boolean;
+  emailDocuments: boolean;
+  emailComments: boolean;
+  smsPhaseStatus: boolean;
+  smsReview: boolean;
+  smsChecklist: boolean;
+  smsDocuments: boolean;
+  quietStart: string | null;
+  quietEnd: string | null;
+}
+
+/**
+ * Create in-app notifications + send email/SMS based on user preferences.
+ * Fire-and-forget: logs errors but never throws.
+ */
+export async function notify(options: NotifyOptions): Promise<void> {
+  try {
+    const { type, title, message, recipientIds, actorId, data } = options;
+
+    // Filter out the actor (don't notify yourself) and remove duplicates
+    const uniqueRecipients = [...new Set(recipientIds)].filter(
+      (id) => id !== actorId
+    );
+
+    if (uniqueRecipients.length === 0) return;
+
+    // Fetch user preferences for all recipients
+    const prefs = await db.notificationPreference.findMany({
+      where: { userId: { in: uniqueRecipients } },
+    });
+    const prefsMap = new Map<string, UserPref>(
+      prefs.map((p: UserPref) => [p.userId, p] as [string, UserPref])
+    );
+
+    // 1. Create in-app notifications (respect inAppEnabled)
+    const inAppRecipients = uniqueRecipients.filter((id) => {
+      const pref = prefsMap.get(id);
+      return !pref || pref.inAppEnabled; // Default: enabled
+    });
+
+    if (inAppRecipients.length > 0) {
+      await db.notification.createMany({
+        data: inAppRecipients.map((userId) => ({
+          type,
+          title,
+          message,
+          userId,
+          data: (data as Prisma.InputJsonValue) ?? Prisma.JsonNull,
+        })),
+      });
+    }
+
+    // 2. Send email notifications (fire-and-forget, respect preferences)
+    sendEmailNotifications(type, uniqueRecipients, prefsMap, data).catch((err) =>
+      console.error("[notify] Email send failed:", err)
+    );
+
+    // 3. Send SMS notifications (fire-and-forget, respect preferences)
+    sendSMSNotifications(type, uniqueRecipients, prefsMap, data).catch((err) =>
+      console.error("[notify] SMS send failed:", err)
+    );
+  } catch (error) {
+    console.error("[notify] Failed to create notifications:", error);
+  }
+}
+
+// ── Preference Helpers ──
+
+function isInQuietHours(pref: { quietStart: string | null; quietEnd: string | null }): boolean {
+  if (!pref.quietStart || !pref.quietEnd) return false;
+
+  const now = new Date();
+  const currentMinutes = now.getHours() * 60 + now.getMinutes();
+
+  const [startH, startM] = pref.quietStart.split(":").map(Number);
+  const [endH, endM] = pref.quietEnd.split(":").map(Number);
+  const startMinutes = startH * 60 + startM;
+  const endMinutes = endH * 60 + endM;
+
+  if (startMinutes <= endMinutes) {
+    return currentMinutes >= startMinutes && currentMinutes < endMinutes;
+  } else {
+    // Overnight range (e.g., 22:00 - 07:00)
+    return currentMinutes >= startMinutes || currentMinutes < endMinutes;
+  }
+}
+
+function shouldSendEmail(type: NotificationType, pref: UserPref): boolean {
+  if (!pref.emailEnabled || isInQuietHours(pref)) return false;
+
+  switch (type) {
+    case "PHASE_STATUS_CHANGED": return pref.emailPhaseStatus;
+    case "REVIEW_REQUESTED":
+    case "REVIEW_COMPLETED": return pref.emailReview;
+    case "CHECKLIST_COMPLETED": return pref.emailChecklist;
+    case "DOCUMENT_UPLOADED":
+    case "DOCUMENT_STATUS_CHANGED": return pref.emailDocuments;
+    case "COMMENT_ADDED": return pref.emailComments;
+    default: return true;
+  }
+}
+
+function shouldSendSMS(type: NotificationType, pref: UserPref): boolean {
+  if (!pref.smsEnabled || isInQuietHours(pref)) return false;
+
+  switch (type) {
+    case "PHASE_STATUS_CHANGED": return pref.smsPhaseStatus;
+    case "REVIEW_REQUESTED":
+    case "REVIEW_COMPLETED": return pref.smsReview;
+    case "CHECKLIST_COMPLETED": return pref.smsChecklist;
+    case "DOCUMENT_UPLOADED":
+    case "DOCUMENT_STATUS_CHANGED": return pref.smsDocuments;
+    default: return false;
+  }
+}
+
+// ── Project/Phase Name Resolver ──
+
+async function resolveNames(data?: Record<string, unknown>) {
+  const projectId = (data?.projectId as string) || "";
+  const phaseId = (data?.phaseId as string) || "";
+
+  let projectName = "your project";
+  let phaseName = "";
+
+  if (projectId) {
+    const project = await db.project.findUnique({
+      where: { id: projectId },
+      select: { name: true },
+    });
+    if (project) projectName = project.name;
+  }
+  if (phaseId) {
+    const phase = await db.phase.findUnique({
+      where: { id: phaseId },
+      select: { name: true },
+    });
+    if (phase) phaseName = phase.name;
+  }
+
+  return { projectId, phaseId, projectName, phaseName };
+}
+
+// ── Email Notifications ──
+
+async function sendEmailNotifications(
+  type: NotificationType,
+  recipientIds: string[],
+  prefsMap: Map<string, UserPref>,
+  data?: Record<string, unknown>
+): Promise<void> {
+  const emailRecipients = recipientIds.filter((id) => {
+    const pref = prefsMap.get(id);
+    if (!pref) return true; // Default: send emails
+    return shouldSendEmail(type, pref);
+  });
+
+  if (emailRecipients.length === 0) return;
+
+  const users = await db.user.findMany({
+    where: { id: { in: emailRecipients } },
+    select: { email: true },
+  });
+
+  const emails = users.map((u: typeof users[number]) => u.email).filter(Boolean);
+  if (emails.length === 0) return;
+
+  const { projectId, phaseId, projectName, phaseName } = await resolveNames(data);
+
+  for (const email of emails) {
+    switch (type) {
+      case "PHASE_STATUS_CHANGED":
+        await sendPhaseStatusEmail(email, projectName, phaseName || "a phase", (data?.newStatus as string) || "updated", projectId);
+        break;
+      case "REVIEW_REQUESTED":
+        await sendReviewRequestEmail(email, projectName, phaseName || "a phase", projectId, phaseId);
+        break;
+      case "CHECKLIST_COMPLETED":
+        await sendChecklistCompleteEmail(email, projectName, phaseName || "a phase", projectId, phaseId);
+        break;
+      case "DOCUMENT_STATUS_CHANGED":
+        await sendDocumentStatusEmail(email, projectName, (data?.documentName as string) || "a document", (data?.newStatus as string) || "updated", projectId);
+        break;
+      default:
+        break;
+    }
+  }
+}
+
+// ── SMS Notifications ──
+
+async function sendSMSNotifications(
+  type: NotificationType,
+  recipientIds: string[],
+  prefsMap: Map<string, UserPref>,
+  data?: Record<string, unknown>
+): Promise<void> {
+  const smsRecipients = recipientIds.filter((id) => {
+    const pref = prefsMap.get(id);
+    return pref && shouldSendSMS(type, pref);
+  });
+
+  if (smsRecipients.length === 0) return;
+
+  const users = await db.user.findMany({
+    where: { id: { in: smsRecipients }, phone: { not: null } },
+    select: { phone: true },
+  });
+
+  const phones = users
+    .map((u: typeof users[number]) => u.phone)
+    .filter((p): p is string => !!p);
+  if (phones.length === 0) return;
+
+  const { projectName, phaseName } = await resolveNames(data);
+
+  for (const phone of phones) {
+    switch (type) {
+      case "PHASE_STATUS_CHANGED":
+        await sendPhaseStatusSMS(phone, projectName, phaseName || "a phase", (data?.newStatus as string) || "updated");
+        break;
+      case "REVIEW_REQUESTED":
+        await sendReviewRequestSMS(phone, projectName, phaseName || "a phase");
+        break;
+      case "CHECKLIST_COMPLETED":
+        await sendChecklistCompleteSMS(phone, projectName, phaseName || "a phase");
+        break;
+      case "DOCUMENT_STATUS_CHANGED":
+        await sendDocumentStatusSMS(phone, projectName, (data?.documentName as string) || "a document", (data?.newStatus as string) || "updated");
+        break;
+      default:
+        break;
+    }
+  }
+}
+
+/**
+ * Get all project member user IDs for a given project.
+ */
+export async function getProjectMemberIds(
+  projectId: string
+): Promise<string[]> {
+  const members = await db.projectMember.findMany({
+    where: { projectId },
+    select: { userId: true },
+  });
+  return members.map((m: typeof members[number]) => m.userId);
+}
diff --git a/src/lib/phase-templates.ts b/src/lib/phase-templates.ts
new file mode 100644
index 0000000..26d109c
--- /dev/null
+++ b/src/lib/phase-templates.ts
@@ -0,0 +1,165 @@
+// Phase templates for different project types and trades
+// These pre-populate the phase builder when creating a new project
+
+export type ProjectType = "residential" | "commercial" | "trade";
+
+export interface TradeTemplate {
+  id: string;
+  name: string;
+  description: string;
+  icon: string; // lucide icon name reference
+  phases: { name: string; detail: string; isMilestone: boolean }[];
+}
+
+export interface ProjectTemplate {
+  id: string;
+  type: ProjectType;
+  name: string;
+  description: string;
+  phases: { name: string; detail: string; isMilestone: boolean }[];
+}
+
+// ── Residential (existing, moved here) ──
+
+export const RESIDENTIAL_TEMPLATE: ProjectTemplate = {
+  id: "residential",
+  type: "residential",
+  name: "Residential Build",
+  description: "Full home construction — 9 phases from permitting to CO",
+  phases: [
+    { name: "Pre-Construction / Permitting", detail: "Plans, permits, site survey, engineering", isMilestone: false },
+    { name: "Site Work / Foundation", detail: "Clearing, grading, excavation, footings, foundation, backfill", isMilestone: false },
+    { name: "Framing", detail: "Floor systems, walls, roof trusses, sheathing, windows/doors", isMilestone: false },
+    { name: "Rough-In (MEP)", detail: "Rough plumbing, electrical, HVAC, low-voltage", isMilestone: false },
+    { name: "Insulation & Drywall", detail: "Insulation, vapor barrier, drywall hang/tape/finish", isMilestone: false },
+    { name: "Interior Finishes", detail: "Trim, cabinets, countertops, flooring, paint, tile, fixtures", isMilestone: false },
+    { name: "Exterior Finishes", detail: "Siding, roofing, gutters, exterior paint, landscaping", isMilestone: false },
+    { name: "Final MEP & Punch List", detail: "Fixture install, panel termination, HVAC startup, final walkthrough", isMilestone: false },
+    { name: "Certificate of Occupancy", detail: "Final inspections, CO issued", isMilestone: true },
+  ],
+};
+
+// ── Commercial Construction (12 phases) ──
+
+export const COMMERCIAL_TEMPLATE: ProjectTemplate = {
+  id: "commercial",
+  type: "commercial",
+  name: "Commercial Build",
+  description: "Full commercial project — 12 phases with extended MEP and commissioning",
+  phases: [
+    { name: "Pre-Construction", detail: "Design development, value engineering, permitting, GMP negotiation", isMilestone: false },
+    { name: "Site Work & Utilities", detail: "Demolition, earthwork, underground utilities, stormwater, paving base", isMilestone: false },
+    { name: "Foundation & Structural", detail: "Footings, grade beams, slab-on-grade or structural slab, steel erection", isMilestone: false },
+    { name: "Structural Steel / Concrete Decks", detail: "Steel frame, metal deck, concrete pours, shear walls, core & shell", isMilestone: false },
+    { name: "Building Envelope", detail: "Curtain wall, storefront, roofing, waterproofing, exterior insulation", isMilestone: false },
+    { name: "Rough MEP", detail: "Plumbing risers, electrical distribution, HVAC ductwork, fire sprinklers, data/telecom rough", isMilestone: false },
+    { name: "Interior Framing & Drywall", detail: "Metal stud framing, drywall, ceiling grid, acoustic treatment", isMilestone: false },
+    { name: "Interior Finishes", detail: "Flooring, paint, millwork, doors/hardware, restroom fixtures, signage", isMilestone: false },
+    { name: "Final MEP & Controls", detail: "Fixture trim, panel termination, BMS/controls, elevator completion, fire alarm", isMilestone: false },
+    { name: "Commissioning & Testing", detail: "HVAC balancing, electrical testing, fire/life safety testing, elevator inspection", isMilestone: false },
+    { name: "Punch List & Closeout", detail: "Final walkthrough, punch items, as-builts, O&M manuals, warranty binder", isMilestone: false },
+    { name: "Certificate of Occupancy", detail: "Final inspections, fire marshal, TCO/CO issued", isMilestone: true },
+  ],
+};
+
+// ── Trade-Specific Templates ──
+// For contractors who manage their own scope within a larger project
+
+export const TRADE_TEMPLATES: TradeTemplate[] = [
+  {
+    id: "electrical",
+    name: "Electrical",
+    description: "Rough to finish electrical with inspection gates",
+    icon: "Zap",
+    phases: [
+      { name: "Electrical Layout & Panel Schedule", detail: "Review plans, mark panel locations, circuit layout, load calculations", isMilestone: false },
+      { name: "Rough Wiring", detail: "Run Romex/conduit, set boxes, pull wire to panel, low-voltage rough", isMilestone: false },
+      { name: "Rough Electrical Inspection", detail: "Inspector verifies box fill, wire gauge, grounding, GFCI/AFCI placement", isMilestone: true },
+      { name: "Trim & Finish", detail: "Install receptacles, switches, fixtures, cover plates, panel termination", isMilestone: false },
+      { name: "Final Electrical Inspection", detail: "Energize panel, test circuits, verify GFCI/AFCI, final sign-off", isMilestone: true },
+    ],
+  },
+  {
+    id: "plumbing",
+    name: "Plumbing",
+    description: "Underground through trim-out with pressure tests",
+    icon: "Droplets",
+    phases: [
+      { name: "Underground / Slab Rough", detail: "Sewer lines, water supply under slab, stub-ups, gas piping", isMilestone: false },
+      { name: "Top-Out Rough", detail: "DWV piping through walls/ceilings, water distribution, gas lines, vent stacks", isMilestone: false },
+      { name: "Rough Plumbing Inspection", detail: "Pressure test supply lines, DWV air test, verify slopes and venting", isMilestone: true },
+      { name: "Trim & Fixture Install", detail: "Set fixtures (sinks, toilets, showers), connect appliances, water heater", isMilestone: false },
+      { name: "Final Plumbing Inspection", detail: "Verify fixtures, check for leaks, cross-connection test, final sign-off", isMilestone: true },
+    ],
+  },
+  {
+    id: "hvac",
+    name: "HVAC",
+    description: "Ductwork and equipment from rough-in to startup",
+    icon: "Wind",
+    phases: [
+      { name: "Load Calc & Equipment Selection", detail: "Manual J/D calculations, equipment sizing, duct layout design", isMilestone: false },
+      { name: "Ductwork Rough-In", detail: "Install trunk lines, branch runs, registers, return air, refrigerant lines", isMilestone: false },
+      { name: "Rough Mechanical Inspection", detail: "Verify duct sizing, connections, fire dampers, refrigerant lines", isMilestone: true },
+      { name: "Equipment Set & Connection", detail: "Set furnace/air handler, condenser, thermostat wiring, condensate drain", isMilestone: false },
+      { name: "Startup & Final Inspection", detail: "Charge system, verify airflow, test heating/cooling, final mechanical inspection", isMilestone: true },
+    ],
+  },
+  {
+    id: "concrete",
+    name: "Concrete / Foundation",
+    description: "Excavation through slab pour with inspections",
+    icon: "Columns3",
+    phases: [
+      { name: "Excavation & Form Work", detail: "Dig footings, set forms, install rebar, embed anchor bolts", isMilestone: false },
+      { name: "Footing Inspection", detail: "Inspector verifies depth, rebar spacing, soil bearing, form dimensions", isMilestone: true },
+      { name: "Foundation Pour & Strip", detail: "Pour concrete, cure, strip forms, waterproof, install drain tile", isMilestone: false },
+      { name: "Foundation Inspection & Backfill", detail: "Inspector approves walls, waterproofing verified, backfill around foundation", isMilestone: true },
+      { name: "Flatwork / Slab Pour", detail: "Gravel base, vapor barrier, wire mesh/rebar, pour and finish slab", isMilestone: false },
+    ],
+  },
+  {
+    id: "framing",
+    name: "Framing",
+    description: "Floor to roof structural framing with sheathing",
+    icon: "Frame",
+    phases: [
+      { name: "Material Delivery & Layout", detail: "Lumber delivery, plate layout, snap lines, check level/square", isMilestone: false },
+      { name: "Wall Framing", detail: "Build and stand walls, install headers, rough openings, shear panels", isMilestone: false },
+      { name: "Roof Structure", detail: "Set trusses or cut rafters, ridge beam, sheathing, fascia/soffit framing", isMilestone: false },
+      { name: "Windows, Doors & Sheathing", detail: "Install windows/ext doors, wall sheathing, house wrap, flashing", isMilestone: false },
+      { name: "Framing Inspection", detail: "Inspector verifies structure, connectors, nailing patterns, shear walls", isMilestone: true },
+    ],
+  },
+  {
+    id: "roofing",
+    name: "Roofing",
+    description: "Tear-off through final inspection",
+    icon: "Home",
+    phases: [
+      { name: "Tear-Off & Deck Prep", detail: "Remove old roofing, inspect decking, replace damaged sheathing, clean", isMilestone: false },
+      { name: "Underlayment & Flashing", detail: "Ice & water shield at valleys/eaves, synthetic underlayment, drip edge, step flashing", isMilestone: false },
+      { name: "Shingle / Material Install", detail: "Install starter course, field shingles/material, ridge cap, hip/valley details", isMilestone: false },
+      { name: "Final Roofing Inspection", detail: "Verify flashing, ventilation, material specs, warranty registration", isMilestone: true },
+    ],
+  },
+  {
+    id: "painting",
+    name: "Painting",
+    description: "Surface prep through final coat and touch-up",
+    icon: "Paintbrush",
+    phases: [
+      { name: "Surface Prep", detail: "Patch drywall, caulk trim, sand, mask/tape, prime stains and repairs", isMilestone: false },
+      { name: "Prime Coat", detail: "Full prime on new drywall, spot-prime patches, tinted primer on color changes", isMilestone: false },
+      { name: "Finish Coats", detail: "Two coats walls, trim paint, ceiling paint, accent/feature walls", isMilestone: false },
+      { name: "Touch-Up & Walkthrough", detail: "Final touch-ups, clean overspray, remove masking, client walkthrough", isMilestone: true },
+    ],
+  },
+];
+
+// All templates combined for easy lookup
+export function getTemplateById(id: string): ProjectTemplate | TradeTemplate | undefined {
+  if (id === "residential") return RESIDENTIAL_TEMPLATE;
+  if (id === "commercial") return COMMERCIAL_TEMPLATE;
+  return TRADE_TEMPLATES.find((t) => t.id === id);
+}
diff --git a/src/lib/sms.ts b/src/lib/sms.ts
new file mode 100644
index 0000000..c74e355
--- /dev/null
+++ b/src/lib/sms.ts
@@ -0,0 +1,119 @@
+/**
+ * SMS service using Twilio.
+ * Gracefully skips if TWILIO env vars are not set.
+ */
+
+const TWILIO_ACCOUNT_SID = process.env.TWILIO_ACCOUNT_SID;
+const TWILIO_AUTH_TOKEN = process.env.TWILIO_AUTH_TOKEN;
+const TWILIO_PHONE_NUMBER = process.env.TWILIO_PHONE_NUMBER;
+
+interface SendSMSOptions {
+  to: string; // E.164 format: +1234567890
+  body: string;
+}
+
+/**
+ * Send an SMS via Twilio.
+ * Returns true if sent, false if skipped or failed.
+ */
+export async function sendSMS(options: SendSMSOptions): Promise<boolean> {
+  if (!TWILIO_ACCOUNT_SID || !TWILIO_AUTH_TOKEN || !TWILIO_PHONE_NUMBER) {
+    console.log("[sms] Skipped — Twilio credentials not configured");
+    return false;
+  }
+
+  // Basic E.164 validation
+  if (!options.to.match(/^\+[1-9]\d{1,14}$/)) {
+    console.log("[sms] Skipped — invalid phone number:", options.to);
+    return false;
+  }
+
+  try {
+    const url = `https://api.twilio.com/2010-04-01/Accounts/${TWILIO_ACCOUNT_SID}/Messages.json`;
+    const auth = Buffer.from(
+      `${TWILIO_ACCOUNT_SID}:${TWILIO_AUTH_TOKEN}`
+    ).toString("base64");
+
+    const res = await fetch(url, {
+      method: "POST",
+      headers: {
+        Authorization: `Basic ${auth}`,
+        "Content-Type": "application/x-www-form-urlencoded",
+      },
+      body: new URLSearchParams({
+        From: TWILIO_PHONE_NUMBER,
+        To: options.to,
+        Body: options.body,
+      }),
+    });
+
+    if (!res.ok) {
+      const err = await res.text();
+      console.error("[sms] Twilio error:", err);
+      return false;
+    }
+
+    return true;
+  } catch (error) {
+    console.error("[sms] Failed to send:", error);
+    return false;
+  }
+}
+
+// ── SMS Templates ──
+
+export async function sendPhaseStatusSMS(
+  phone: string,
+  projectName: string,
+  phaseName: string,
+  newStatus: string
+): Promise<boolean> {
+  const statusLabels: Record<string, string> = {
+    PENDING: "Pending",
+    IN_PROGRESS: "In Progress",
+    REVIEW_REQUESTED: "Review Requested",
+    UNDER_REVIEW: "Under Review",
+    COMPLETE: "Complete",
+  };
+  const label = statusLabels[newStatus] || newStatus;
+
+  return sendSMS({
+    to: phone,
+    body: `[Construction PM] ${phaseName} is now "${label}" in ${projectName}.`,
+  });
+}
+
+export async function sendReviewRequestSMS(
+  phone: string,
+  projectName: string,
+  phaseName: string
+): Promise<boolean> {
+  return sendSMS({
+    to: phone,
+    body: `[Construction PM] Review requested for ${phaseName} in ${projectName}. Please check the app.`,
+  });
+}
+
+export async function sendChecklistCompleteSMS(
+  phone: string,
+  projectName: string,
+  phaseName: string
+): Promise<boolean> {
+  return sendSMS({
+    to: phone,
+    body: `[Construction PM] All checklist items complete for ${phaseName} in ${projectName}.`,
+  });
+}
+
+export async function sendDocumentStatusSMS(
+  phone: string,
+  projectName: string,
+  documentName: string,
+  status: string
+): Promise<boolean> {
+  const label = status === "APPROVED" ? "approved" : "rejected";
+  return sendSMS({
+    to: phone,
+    body: `[Construction PM] Document "${documentName}" has been ${label} in ${projectName}.`,
+  });
+}
diff --git a/src/lib/themes.ts b/src/lib/themes.ts
new file mode 100644
index 0000000..551ce64
--- /dev/null
+++ b/src/lib/themes.ts
@@ -0,0 +1,83 @@
+export interface ThemePreset {
+  id: string;
+  name: string;
+  description: string;
+  colors: {
+    primary: string;
+    primaryDark: string;
+    primaryLight: string;
+    primaryBg: string;
+  };
+}
+
+export const THEME_PRESETS: ThemePreset[] = [
+  {
+    id: "blue",
+    name: "Professional Blue",
+    description: "Traditional, formal",
+    colors: {
+      primary: "#2563eb",
+      primaryDark: "#1e40af",
+      primaryLight: "#3b82f6",
+      primaryBg: "#eff6ff",
+    },
+  },
+  {
+    id: "orange",
+    name: "Construction Orange",
+    description: "Warm, construction-focused",
+    colors: {
+      primary: "#ea580c",
+      primaryDark: "#c2410c",
+      primaryLight: "#f97316",
+      primaryBg: "#fff7ed",
+    },
+  },
+  {
+    id: "teal",
+    name: "Deep Teal",
+    description: "Modern, calm",
+    colors: {
+      primary: "#0d9488",
+      primaryDark: "#115e59",
+      primaryLight: "#14b8a6",
+      primaryBg: "#f0fdfa",
+    },
+  },
+  {
+    id: "slate",
+    name: "Slate Charcoal",
+    description: "Sophisticated, minimal",
+    colors: {
+      primary: "#475569",
+      primaryDark: "#334155",
+      primaryLight: "#64748b",
+      primaryBg: "#f8fafc",
+    },
+  },
+  {
+    id: "green",
+    name: "Forest Green",
+    description: "Growth, sustainable",
+    colors: {
+      primary: "#16a34a",
+      primaryDark: "#15803d",
+      primaryLight: "#22c55e",
+      primaryBg: "#f0fdf4",
+    },
+  },
+];
+
+export function getThemeById(id: string): ThemePreset {
+  return THEME_PRESETS.find((t) => t.id === id) || THEME_PRESETS[0];
+}
+
+export function getThemeCSS(themeId: string): Record<string, string> {
+  const theme = getThemeById(themeId);
+  return {
+    "--color-primary": theme.colors.primary,
+    "--color-primary-dark": theme.colors.primaryDark,
+    "--color-primary-light": theme.colors.primaryLight,
+    "--color-primary-bg": theme.colors.primaryBg,
+  };
+}
diff --git a/src/middleware.ts b/src/middleware.ts
index 51e7521..dafeb89 100644
--- a/src/middleware.ts
+++ b/src/middleware.ts
@@ -10,7 +10,9 @@ export default auth((req) => {
   if (publicPaths.some((p) => pathname.startsWith(p))) {
     // Redirect logged-in users away from login page
     if (isLoggedIn && pathname === "/login") {
-      return NextResponse.redirect(new URL("/dashboard", req.url));
+      const role = (req.auth?.user as { role?: string })?.role;
+      const dest = role === "CONTRACTOR" ? "/contractor" : "/dashboard";
+      return NextResponse.redirect(new URL(dest, req.url));
     }
     return NextResponse.next();
   }
@@ -27,6 +29,19 @@ export default auth((req) => {
     return NextResponse.redirect(loginUrl);
   }
 
+  // Role-based routing
+  const role = (req.auth?.user as { role?: string })?.role;
+
+  // Contractors trying to access /dashboard get redirected to /contractor
+  if (role === "CONTRACTOR" && pathname.startsWith("/dashboard")) {
+    return NextResponse.redirect(new URL("/contractor", req.url));
+  }
+
+  // Non-contractors trying to access /contractor get redirected to /dashboard
+  if (role !== "CONTRACTOR" && pathname.startsWith("/contractor")) {
+    return NextResponse.redirect(new URL("/dashboard", req.url));
+  }
+
   return NextResponse.next();
 });
 
diff --git a/src/types/index.ts b/src/types/index.ts
index 0fb10c2..309bd63 100644
--- a/src/types/index.ts
+++ b/src/types/index.ts
@@ -1,16 +1,129 @@
-import type {
-  Project,
-  Phase,
-  Staff,
-  PhaseAssignment,
-  Document,
-  Photo,
-  Checklist,
-  ChecklistItem,
-  Notification,
-  User,
-  ProjectMember,
-} from "@prisma/client";
+// ── Local Type Definitions ──
+
+interface Project {
+  id: string;
+  name: string;
+  description?: string | null;
+  address?: string | null;
+  planApproval?: Date | null;
+  budget?: number | null;
+  ownerId: string;
+  createdAt: Date;
+  updatedAt: Date;
+}
+
+interface Phase {
+  id: string;
+  projectId: string;
+  name: string;
+  detail?: string | null;
+  status: string;
+  isMilestone: boolean;
+  estStart: Date;
+  estEnd: Date;
+  worstStart?: Date | null;
+  worstEnd?: Date | null;
+  sortOrder: number;
+  createdAt: Date;
+  updatedAt: Date;
+}
+
+interface Staff {
+  id: string;
+  name: string;
+  company?: string | null;
+  role?: string | null;
+  email?: string | null;
+  phone?: string | null;
+  notes?: string | null;
+  createdAt?: Date;
+  updatedAt?: Date;
+}
+
+interface PhaseAssignment {
+  id: string;
+  phaseId?: string;
+  staffId?: string;
+  isOwner: boolean;
+  createdAt?: Date;
+  updatedAt?: Date;
+}
+
+interface Document {
+  id: string;
+  phaseId: string;
+  name: string;
+  url: string;
+  size: number;
+  mimeType: string;
+  category: string;
+  status: string;
+  version: number;
+  notes?: string | null;
+  uploadedById: string;
+  createdAt: Date;
+  updatedAt: Date;
+}
+
+interface Photo {
+  id: string;
+  phaseId: string;
+  url: string;
+  caption?: string | null;
+  uploadedById: string;
+  createdAt: Date;
+  updatedAt: Date;
+}
+
+interface Checklist {
+  id: string;
+  phaseId: string;
+  title: string;
+  createdAt: Date;
+  updatedAt: Date;
+}
+
+interface ChecklistItem {
+  id: string;
+  checklistId: string;
+  title: string;
+  completed: boolean;
+  createdAt: Date;
+  updatedAt: Date;
+}
+
+interface Notification {
+  id: string;
+  userId: string;
+  type: string;
+  title: string;
+  message: string;
+  read: boolean;
+  actorId?: string | null;
+  data?: Record<string, unknown> | null;
+  createdAt: Date;
+  updatedAt: Date;
+}
+
+interface User {
+  id: string;
+  name?: string | null;
+  email?: string | null;
+  emailVerified?: Date | null;
+  image?: string | null;
+  role?: string | null;
+  createdAt: Date;
+  updatedAt: Date;
+}
+
+interface ProjectMember {
+  id: string;
+  projectId: string;
+  userId: string;
+  role: string;
+  createdAt: Date;
+  updatedAt: Date;
+}
 
 // ── Composite Types (with relations) ──
 
@@ -108,7 +221,7 @@ export type DragState = {
   origEnd: Date;
 } | null;
 
-// Re-export Prisma types
+// Export local types
 export type {
   Project,
   Phase,
diff --git a/vitest.config.ts b/vitest.config.ts
new file mode 100644
index 0000000..27de44c
--- /dev/null
+++ b/vitest.config.ts
@@ -0,0 +1,22 @@
+import { defineConfig } from "vitest/config";
+import path from "path";
+
+export default defineConfig({
+  test: {
+    environment: "node",
+    globals: true,
+    setupFiles: ["./src/__tests__/setup.ts"],
+    include: ["src/**/*.test.ts", "src/**/*.test.tsx"],
+    exclude: ["node_modules", ".next", "e2e"],
+    coverage: {
+      provider: "v8",
+      reporter: ["text", "html"],
+      include: ["src/actions/**", "src/lib/**"],
+    },
+  },
+  resolve: {
+    alias: {
+      "@": path.resolve(__dirname, "./src"),
+    },
+  },
+});
